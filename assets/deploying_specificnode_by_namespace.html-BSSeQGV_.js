import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as a,c as n,h as s}from"./app-DVMlqOhY.js";const t={},o=s(`<h1 id="openshift-3-x-프로젝트-별로-특정-노드에-배포하기" tabindex="-1"><a class="header-anchor" href="#openshift-3-x-프로젝트-별로-특정-노드에-배포하기"><span>OpenShift 3.x - 프로젝트 별로 특정 노드에 배포하기</span></a></h1><blockquote><p>원문 : <a href="https://blog.openshift.com/deploying-applications-to-specific-nodes/" target="_blank" rel="noopener noreferrer">https://blog.openshift.com/deploying-applications-to-specific-nodes/</a></p></blockquote><p>Deployment나 Deployment Config에서 Nodeselect를 지정하는 방법 외에 Project 단위로 설정하는 방법을 설명합니다.</p><ol><li><p>Node Label확인</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">~$ oc get <span class="token function">node</span> --show-labels</span>
<span class="line"></span></code></pre></div></li><li><p>Node에 Label 업데이트</p><blockquote><p>Label 업데이트 (<a href="https://docs.openshift.com/container-platform/3.7/admin_guide/manage_nodes.html#updating-labels-on-nodes" target="_blank" rel="noopener noreferrer">링크</a>)</p></blockquote><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">~$ oc label <span class="token function">node</span> <span class="token punctuation">[</span>노드이름<span class="token punctuation">]</span> <span class="token assign-left variable">region</span><span class="token operator">=</span>primary</span>
<span class="line"></span></code></pre></div><p>primary는 구분자 입니다. 예로</p><p><code>region=tk</code> 이런식으로 테스트계 설정을 하게 됩니다.</p><p>ex)</p><p>To <strong>add a label</strong> to a node or pod:</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line"># oc label node node001.krenger.ch mylabel=myvalue</span>
<span class="line"># oc label pod mypod-34-g0f7k mylabel=myvalue</span>
<span class="line"></span></code></pre></div><p>To <strong>remove a label</strong> (in the example “mylabel”) from a node or pod:</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line"># oc label node node001.krenger.ch mylabel-</span>
<span class="line"># oc label pod mypod-34-g0f7k mylabel-</span>
<span class="line"></span></code></pre></div></li><li><p>Master에 기본 NodeSelector Label 지정</p><p>Master 노드의 <code>defaultNodeSelector</code> 설정을 변경하고 Master서비스를 재시작 합니다.</p><p><code>NodeSelector</code>가 없는 경우 Pod가 Deploy되는 Node 입니다.</p><p>대상 파일: <code>/etc/origin/master/master-config.yaml</code></p><div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">projectConfig</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">defaultNodeSelector</span><span class="token punctuation">:</span> &quot;region=primary” </span>
<span class="line"></span></code></pre></div><p><strong>Master Node 재기동 필요</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">~$ systemctl restart atomic-openshift-master</span>
<span class="line">~$ systemctl restart atomic-openshift-node</span>
<span class="line"></span></code></pre></div></li><li><p>프로젝트 Node Selector 설정</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">~$ oc edit namespace <span class="token punctuation">[</span>프로젝트이름<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token punctuation">...</span></span>
<span class="line">  <span class="token key atrule">annotations</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">openshift.io/node-selector</span><span class="token punctuation">:</span> “region=primary&quot;</span>
<span class="line">    <span class="token key atrule">openshift.io/description</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">    <span class="token key atrule">openshift.io/display-name</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">    <span class="token key atrule">openshift.io/node-selector</span><span class="token punctuation">:</span> “&quot;</span>
<span class="line"><span class="token punctuation">...</span>    </span>
<span class="line"></span></code></pre></div></li></ol><p><strong>Appendix</strong></p><ul><li>위 과정만으로 Project 에 대한 기본 Node Selector가 설정되어야 하며, 이같이 설정되지 않는 경우 각 Pod 별로, 혹은 template에서 설정해야합니다.</li></ul>`,6),p=[o];function l(i,c){return a(),n("div",null,p)}const g=e(t,[["render",l],["__file","deploying_specificnode_by_namespace.html.vue"]]),h=JSON.parse('{"path":"/07-Kubernetes/07-OpenShift/deploying_specificnode_by_namespace.html","title":"OpenShift 3.x - 프로젝트 별로 특정 노드에 배포하기","lang":"ko-KR","frontmatter":{"description":"OpenShift 프로젝트 별로 특정 노드에 배포하기","tag":["openshift","ocp"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/07-Kubernetes/07-OpenShift/deploying_specificnode_by_namespace.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"OpenShift 3.x - 프로젝트 별로 특정 노드에 배포하기"}],["meta",{"property":"og:description","content":"OpenShift 프로젝트 별로 특정 노드에 배포하기"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-06-26T04:24:29.000Z"}],["meta",{"property":"article:tag","content":"openshift"}],["meta",{"property":"article:tag","content":"ocp"}],["meta",{"property":"article:modified_time","content":"2024-06-26T04:24:29.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"OpenShift 3.x - 프로젝트 별로 특정 노드에 배포하기\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-26T04:24:29.000Z\\",\\"author\\":[]}"]]},"headers":[],"git":{"createdTime":1640262000000,"updatedTime":1719375869000,"contributors":[{"name":"Great-Stone","email":"hahohh@gmail.com","commits":1}]},"readingTime":{"minutes":2.75,"words":165},"filePathRelative":"07-Kubernetes/07-OpenShift/deploying_specificnode_by_namespace.md","localizedDate":"2021년 12월 23일","excerpt":"\\n<blockquote>\\n<p>원문 : <a href=\\"https://blog.openshift.com/deploying-applications-to-specific-nodes/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://blog.openshift.com/deploying-applications-to-specific-nodes/</a></p>\\n</blockquote>\\n<p>Deployment나 Deployment Config에서 Nodeselect를 지정하는 방법 외에 Project 단위로 설정하는 방법을 설명합니다.</p>"}');export{g as comp,h as data};
