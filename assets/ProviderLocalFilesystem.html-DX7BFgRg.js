import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,h as e}from"./app-DVMlqOhY.js";const l={},i=e(`<h1 id="terraform-provider-로컬-디렉토리" tabindex="-1"><a class="header-anchor" href="#terraform-provider-로컬-디렉토리"><span>Terraform Provider - 로컬 디렉토리</span></a></h1><blockquote><p><a href="https://www.terraform.io/docs/cli/config/config-file.html#implied-local-mirror-directories" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/cli/config/config-file.html#implied-local-mirror-directories</a><br><a href="https://learn.hashicorp.com/tutorials/terraform/provider-use?in=terraform/providers" target="_blank" rel="noopener noreferrer">https://learn.hashicorp.com/tutorials/terraform/provider-use?in=terraform/providers</a></p></blockquote><h2 id="환경" tabindex="-1"><a class="header-anchor" href="#환경"><span>환경</span></a></h2><ul><li><p>OS : CentOS7</p><div class="language-ini line-numbers-mode" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="line"><span class="token key attr-name">NAME</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">CentOS Linux</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">VERSION</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">7 (Core)</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">ID</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">centos</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">ID_LIKE</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">rhel fedora</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">VERSION_ID</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">7</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">PRETTY_NAME</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">CentOS Linux 7 (Core)</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">ANSI_COLOR</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">0;31</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">CPE_NAME</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">cpe:/o:centos:centos:7</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">HOME_URL</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">https://www.centos.org/</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">BUG_REPORT_URL</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">https://bugs.centos.org/</span>&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token key attr-name">CENTOS_MANTISBT_PROJECT</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">CentOS-7</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">CENTOS_MANTISBT_PROJECT_VERSION</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">7</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">REDHAT_SUPPORT_PRODUCT</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">centos</span>&quot;</span></span>
<span class="line"><span class="token key attr-name">REDHAT_SUPPORT_PRODUCT_VERSION</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">7</span>&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Terraform</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ terraform version</span>
<span class="line">Terraform v1.0.0</span>
<span class="line"></span></code></pre></div></li></ul><h2 id="test-provider" tabindex="-1"><a class="header-anchor" href="#test-provider"><span>Test Provider</span></a></h2><ul><li>random : <a href="https://releases.hashicorp.com/terraform-provider-random/3.1.0/terraform-provider-random_3.1.0_linux_amd64.zip" target="_blank" rel="noopener noreferrer">https://releases.hashicorp.com/terraform-provider-random/3.1.0/terraform-provider-random_3.1.0_linux_amd64.zip</a></li><li>nsxt : <a href="https://releases.hashicorp.com/terraform-provider-nsxt/3.2.1/terraform-provider-nsxt_3.2.1_linux_amd64.zip" target="_blank" rel="noopener noreferrer">https://releases.hashicorp.com/terraform-provider-nsxt/3.2.1/terraform-provider-nsxt_3.2.1_linux_amd64.zip</a></li></ul><h2 id="구성-절차" tabindex="-1"><a class="header-anchor" href="#구성-절차"><span>구성 절차</span></a></h2><ol><li><p>필요한 Provider zip파일을 <a href="https://releases.hashicorp.com" target="_blank" rel="noopener noreferrer">https://releases.hashicorp.com</a> 에서 미리 다운 받습니다. 받아놓은 zip 파일이 있는 경우 대상 시스템에 복사해둡니다.</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">wget</span> https://releases.hashicorp.com/terraform-provider-nsxt/3.2.1/terraform-provider-nsxt_3.2.1_linux_amd64.zip</span>
<span class="line">$ <span class="token function">wget</span> https://releases.hashicorp.com/terraform-provider-random/3.1.0/terraform-provider-random_3.1.0_linux_amd64.zip</span>
<span class="line"></span></code></pre></div></li><li><p>Plugin 디렉토리 구성<br> 로컬 Provider를 찾기위한 디렉토리 구조를 생성합니다. <code>host_name</code>은 환경마다 상이할 수 있습니다.</p><p><code>~/.terraform.d/plugins/\${host_name}/\${namespace}/\${type}/\${version}/\${target}</code></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/.terraform.d/plugins/localhost.localdomain/vmware/nsxt/3.2.1/linux_amd64</span>
<span class="line">$ <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/.terraform.d/plugins/localhost.localdomain/hashicorp/random/3.1.0/linux_amd64</span>
<span class="line"></span></code></pre></div></li><li><p>Provider 바이너리 파일 구성</p><p>기존에 받아놓은 zip 파일을 압축 해제하고, 생성한 Provider 디렉토리 각각에 맞는 프로바이더를 복사합니다.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">unzip</span> terraform-provider-random_3.1.0_linux_amd64.zip</span>
<span class="line">Archive:  terraform-provider-random_3.1.0_linux_amd64.zip</span>
<span class="line">  inflating: terraform-provider-random_v3.1.0_x5</span>
<span class="line">  </span>
<span class="line">$ <span class="token function">mv</span> ./terraform-provider-random_v3.1.0_x5 ~/.terraform.d/plugins/localhost.localdomain/hashicorp/random/3.1.0/linux_amd64</span>
<span class="line"></span>
<span class="line">$ <span class="token function">unzip</span> terraform-provider-nsxt_3.2.1_linux_amd64.zip</span>
<span class="line">Archive:  terraform-provider-nsxt_3.2.1_linux_amd64.zip</span>
<span class="line">  inflating: CHANGELOG.md</span>
<span class="line">  inflating: LICENSE.txt</span>
<span class="line">  inflating: README.md</span>
<span class="line">  inflating: terraform-provider-nsxt_v3.2.1</span>
<span class="line">  </span>
<span class="line">$ <span class="token function">mv</span> ./terraform-provider-nsxt_v3.2.1 ~/.terraform.d/plugins/localhost.localdomain/vmware/nsxt/3.2.1/linux_amd64</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>로컬 Provider 구성 확인</p></li></ol><div class="hint-container info"><p class="hint-container-title">파일 구조</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ tree <span class="token parameter variable">-a</span> ~/.terraform.d/</span>
<span class="line">/root/.terraform.d/</span>
<span class="line">├── <span class="token variable"><span class="token variable">\`</span>plugins<span class="token variable">\`</span></span></span>
<span class="line">│   └── localhost.localdomain</span>
<span class="line">│       ├── hashicorp</span>
<span class="line">│       │   └── random</span>
<span class="line">│       │       └── <span class="token number">3.1</span>.0</span>
<span class="line">│       │           └── linux_amd64</span>
<span class="line">│       │               └── terraform-provider-random_v3.1.0_x5</span>
<span class="line">│       └── vmware</span>
<span class="line">│           └── nsxt</span>
<span class="line">│               └── <span class="token number">3.2</span>.1</span>
<span class="line">│                   └── linux_amd64</span>
<span class="line">│                       └── terraform-provider-nsxt_v3.2.1</span>
<span class="line">├── checkpoint_cache</span>
<span class="line">└── checkpoint_signature</span>
<span class="line"></span></code></pre></div></div><ol start="5"><li><p>워크스페이스 생성 (디렉토리) - airgapped 는 임의의 이름 입니다.</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">mkdir</span> ./airgapped</span>
<span class="line">$ <span class="token builtin class-name">cd</span> ./airgapped</span>
<span class="line"></span></code></pre></div></li><li><p>tf 파일 작성</p><div class="language-ruby line-numbers-mode" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">$ cat <span class="token operator">&lt;&lt;</span><span class="token constant">EOF</span><span class="token operator">&gt;</span> terraform<span class="token punctuation">.</span>tf</span>
<span class="line">terraform <span class="token punctuation">{</span></span>
<span class="line">  required_providers <span class="token punctuation">{</span></span>
<span class="line">    nsxt <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      source <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;localhost.localdomain/vmware/nsxt&quot;</span></span></span>
<span class="line">      version <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;3.2.1&quot;</span></span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    random <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      source <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;localhost.localdomain/hashicorp/random&quot;</span></span></span>
<span class="line">      version <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;3.1.0&quot;</span></span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">provider <span class="token string-literal"><span class="token string">&quot;nsxt&quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment"># Configuration options</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">provider <span class="token string-literal"><span class="token string">&quot;random&quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment"># Configuration options</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">&quot;random_id&quot;</span></span> <span class="token string-literal"><span class="token string">&quot;test&quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">  byte_length <span class="token operator">=</span> <span class="token number">8</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">output <span class="token string-literal"><span class="token string">&quot;random_id&quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">  value <span class="token operator">=</span> random_id<span class="token punctuation">.</span>test</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token constant">EOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Terraform <code>init</code>을 수행하여 정상적으로 로컬 Provider를 가져오는지 확인합니다.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ terraform init</span>
<span class="line"></span>
<span class="line">Initializing the backend<span class="token punctuation">..</span>.</span>
<span class="line"></span>
<span class="line">Initializing provider plugins<span class="token punctuation">..</span>.</span>
<span class="line">- Finding localhost.localdomain/vmware/nsxt versions matching <span class="token string">&quot;3.2.1&quot;</span><span class="token punctuation">..</span>.</span>
<span class="line">- Finding localhost.localdomain/hashicorp/random versions matching <span class="token string">&quot;3.1.0&quot;</span><span class="token punctuation">..</span>.</span>
<span class="line">- Installing localhost.localdomain/vmware/nsxt v3.2.1<span class="token punctuation">..</span>.</span>
<span class="line">- Installed localhost.localdomain/vmware/nsxt v3.2.1 <span class="token punctuation">(</span>unauthenticated<span class="token punctuation">)</span></span>
<span class="line">- Installing localhost.localdomain/hashicorp/random v3.1.0<span class="token punctuation">..</span>.</span>
<span class="line">- Installed localhost.localdomain/hashicorp/random v3.1.0 <span class="token punctuation">(</span>unauthenticated<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">Terraform has created a lock <span class="token function">file</span> .terraform.lock.hcl to record the provider</span>
<span class="line">selections it made above. Include this <span class="token function">file</span> <span class="token keyword">in</span> your version control repository</span>
<span class="line">so that Terraform can guarantee to <span class="token function">make</span> the same selections by default when</span>
<span class="line">you run <span class="token string">&quot;terraform init&quot;</span> <span class="token keyword">in</span> the future.</span>
<span class="line"></span>
<span class="line">Terraform has been successfully initialized<span class="token operator">!</span></span>
<span class="line"></span>
<span class="line">You may now begin working with Terraform. Try running <span class="token string">&quot;terraform plan&quot;</span> to see</span>
<span class="line">any changes that are required <span class="token keyword">for</span> your infrastructure. All Terraform commands</span>
<span class="line">should now work.</span>
<span class="line"></span>
<span class="line">If you ever <span class="token builtin class-name">set</span> or change modules or backend configuration <span class="token keyword">for</span> Terraform,</span>
<span class="line">rerun this <span class="token builtin class-name">command</span> to reinitialize your working directory. If you forget, other</span>
<span class="line">commands will detect it and remind you to <span class="token keyword">do</span> so <span class="token keyword">if</span> necessary.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol>`,10),t=[i];function r(p,o){return s(),a("div",null,t)}const u=n(l,[["render",r],["__file","ProviderLocalFilesystem.html.vue"]]),m=JSON.parse('{"path":"/04-HashiCorp/03-Terraform/05-Airgap/ProviderLocalFilesystem.html","title":"Terraform Provider - 로컬 디렉토리","lang":"ko-KR","frontmatter":{"description":"인터넷 사용 불가 시 로컬환경에서의 프로바이더 구성","tag":["terraform","provider"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/03-Terraform/05-Airgap/ProviderLocalFilesystem.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"Terraform Provider - 로컬 디렉토리"}],["meta",{"property":"og:description","content":"인터넷 사용 불가 시 로컬환경에서의 프로바이더 구성"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-19T11:31:31.000Z"}],["meta",{"property":"article:tag","content":"terraform"}],["meta",{"property":"article:tag","content":"provider"}],["meta",{"property":"article:modified_time","content":"2023-09-19T11:31:31.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Terraform Provider - 로컬 디렉토리\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-09-19T11:31:31.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"환경","slug":"환경","link":"#환경","children":[]},{"level":2,"title":"Test Provider","slug":"test-provider","link":"#test-provider","children":[]},{"level":2,"title":"구성 절차","slug":"구성-절차","link":"#구성-절차","children":[]}],"git":{"createdTime":1628557352000,"updatedTime":1695123091000,"contributors":[{"name":"Great-Stone","email":"hahohh@gmail.com","commits":2},{"name":"Administrator","email":"admin@example.com","commits":1}]},"readingTime":{"minutes":6.68,"words":401},"filePathRelative":"04-HashiCorp/03-Terraform/05-Airgap/ProviderLocalFilesystem.md","localizedDate":"2021년 8월 10일","excerpt":"\\n<blockquote>\\n<p><a href=\\"https://www.terraform.io/docs/cli/config/config-file.html#implied-local-mirror-directories\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://www.terraform.io/docs/cli/config/config-file.html#implied-local-mirror-directories</a><br>\\n<a href=\\"https://learn.hashicorp.com/tutorials/terraform/provider-use?in=terraform/providers\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://learn.hashicorp.com/tutorials/terraform/provider-use?in=terraform/providers</a></p>\\n</blockquote>"}');export{u as comp,m as data};
