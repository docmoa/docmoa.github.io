import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as c,o,c as u,b as d,w as n,h as i,g as a,a as s}from"./app-DVMlqOhY.js";const r={},v=i(`<h1 id="kv-v2-ui-policy" tabindex="-1"><a class="header-anchor" href="#kv-v2-ui-policy"><span>kv-v2 UI Policy</span></a></h1><blockquote><p>사용자별 UI 접근에 대한 설정을 Kv-v2를 예로 확인</p></blockquote><h2 id="policy-구성" tabindex="-1"><a class="header-anchor" href="#policy-구성"><span>Policy 구성</span></a></h2><p>UI 접근을 위해서는 <code>metadata</code>에 대한 권한 추가가 필요함</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault policy <span class="token function">write</span> ui-kv-policy - <span class="token operator">&lt;&lt;</span> <span class="token string">EOF</span>
<span class="line"></span>
<span class="line">path &quot;kv-v2/data/path/&quot; {</span>
<span class="line">  capabilities = [&quot;create&quot;, &quot;update&quot;, &quot;read&quot;, &quot;delete&quot;, &quot;list&quot;]</span>
<span class="line">}</span>
<span class="line">path &quot;kv-v2/delete/path/&quot; {</span>
<span class="line">  capabilities = [&quot;update&quot;]</span>
<span class="line">}</span>
<span class="line">path &quot;kv-v2/metadata/path/&quot; {</span>
<span class="line">  capabilities = [&quot;list&quot;, &quot;read&quot;, &quot;delete&quot;]</span>
<span class="line">}</span>
<span class="line">path &quot;kv-v2/destroy/path/&quot; {</span>
<span class="line">  capabilities = [&quot;update&quot;]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">path &quot;kv-v2/data/path/userid/*&quot; {</span>
<span class="line">  capabilities = [&quot;create&quot;, &quot;update&quot;, &quot;read&quot;, &quot;delete&quot;, &quot;list&quot;]</span>
<span class="line">}</span>
<span class="line">path &quot;kv-v2/delete/path/userid/*&quot; {</span>
<span class="line">  capabilities = [&quot;update&quot;]</span>
<span class="line">}</span>
<span class="line">path &quot;kv-v2/metadata/path/userid/*&quot; {</span>
<span class="line">  capabilities = [&quot;list&quot;, &quot;read&quot;, &quot;delete&quot;]</span>
<span class="line">}</span>
<span class="line">path &quot;kv-v2/destroy/path/userid/*&quot; {</span>
<span class="line">  capabilities = [&quot;update&quot;]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"># Additional access for UI</span>
<span class="line">path &quot;kv-v2/metadata&quot; {</span>
<span class="line">  capabilities = [&quot;list&quot;]</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">##### or #####</span></span>
<span class="line"></span>
<span class="line">vault policy <span class="token function">write</span> ui-kv-policy - <span class="token operator">&lt;&lt;</span> <span class="token string">EOF</span>
<span class="line"></span>
<span class="line">path &quot;kv-v2/data/path/userid&quot; {</span>
<span class="line">  capabilities = [&quot;create&quot;, &quot;update&quot;, &quot;read&quot;, &quot;delete&quot;, &quot;list&quot;]</span>
<span class="line">}</span>
<span class="line">path &quot;kv-v2/delete/path/userid&quot; {</span>
<span class="line">  capabilities = [&quot;update&quot;]</span>
<span class="line">}</span>
<span class="line">path &quot;kv-v2/metadata/path/userid&quot; {</span>
<span class="line">  capabilities = [&quot;list&quot;, &quot;read&quot;, &quot;delete&quot;]</span>
<span class="line">}</span>
<span class="line">path &quot;kv-v2/destroy/path/userid&quot; {</span>
<span class="line">  capabilities = [&quot;update&quot;]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"># Additional access for UI</span>
<span class="line">path &quot;kv-v2/metadata/*&quot; {</span>
<span class="line">  capabilities = [&quot;list&quot;]</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="인증-생성" tabindex="-1"><a class="header-anchor" href="#인증-생성"><span>인증 생성</span></a></h2><p>생성한 Policy 기반으로 인증 생성</p>`,7),m=s("div",{class:"language-bash","data-highlighter":"prismjs","data-ext":"sh","data-title":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"line"},[a("$ vault "),s("span",{class:"token function"},"write"),a(" auth/userpass/users/userid "),s("span",{class:"token assign-left variable"},"password"),s("span",{class:"token operator"},"="),a("password "),s("span",{class:"token assign-left variable"},"policies"),s("span",{class:"token operator"},"="),a("ui-kv-policy")]),a(`
`),s("span",{class:"line"})])])],-1),b=s("div",{class:"language-bash","data-highlighter":"prismjs","data-ext":"sh","data-title":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"line"},[a("vault token create "),s("span",{class:"token parameter variable"},"-policy"),s("span",{class:"token operator"},"="),a("ui-kv-policy")]),a(`
`),s("span",{class:"line highlighted"})])])],-1),h=i(`<h2 id="조회-확인" tabindex="-1"><a class="header-anchor" href="#조회-확인"><span>조회 확인</span></a></h2><p>생성한 인증의 <code>Token</code>을 사용하여 데이터가 조회됨을 확인</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">curl</span>  <span class="token parameter variable">--request</span> GET <span class="token parameter variable">--header</span> <span class="token string">&quot;X-Vault-Token: s.FqFMzKL8ExjJeBrq79Jjh1eB&quot;</span> http://172.28.128.11:8200/v1/kv-v2/data/path/userid <span class="token operator">|</span> jq <span class="token builtin class-name">.</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;request_id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;d3db0633-2e13-ba98-4d79-ca48f2307d5e&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;lease_id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;renewable&quot;</span><span class="token builtin class-name">:</span> false,</span>
<span class="line">  <span class="token string">&quot;lease_duration&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,</span>
<span class="line">  <span class="token string">&quot;data&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;data&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;access_key&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1234&quot;</span>,</span>
<span class="line">      <span class="token string">&quot;secret_key&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1234&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span>,</span>
<span class="line">    <span class="token string">&quot;metadata&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;created_time&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2021-07-16T06:35:51.496079412Z&quot;</span>,</span>
<span class="line">      <span class="token string">&quot;deletion_time&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,</span>
<span class="line">      <span class="token string">&quot;destroyed&quot;</span><span class="token builtin class-name">:</span> false,</span>
<span class="line">      <span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span>,</span>
<span class="line">  <span class="token string">&quot;wrap_info&quot;</span><span class="token builtin class-name">:</span> null,</span>
<span class="line">  <span class="token string">&quot;warnings&quot;</span><span class="token builtin class-name">:</span> null,</span>
<span class="line">  <span class="token string">&quot;auth&quot;</span><span class="token builtin class-name">:</span> null</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>UI에서 접근가능한지 확인<br><img src="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/Vault 2021-07-16 15-35-48.png" alt="Vault 2021-07-16 15-35-48" loading="lazy"></p>`,4);function q(k,g){const t=c("CodeTabs");return o(),u("div",null,[v,d(t,{id:"21",data:[{id:"userpass"},{id:"token"}],"tab-id":"shell"},{title0:n(({value:e,isActive:l})=>[a("userpass")]),title1:n(({value:e,isActive:l})=>[a("token")]),tab0:n(({value:e,isActive:l})=>[m]),tab1:n(({value:e,isActive:l})=>[b]),_:1}),h])}const f=p(r,[["render",q],["__file","vault-kv-v2-ui-policy.html.vue"]]),x=JSON.parse('{"path":"/04-HashiCorp/06-Vault/03-Auth_Method/vault-kv-v2-ui-policy.html","title":"kv-v2 UI Policy","lang":"ko-KR","frontmatter":{"description":"사용자별 UI 접근에 대한 설정을 Kv-v2를 예로 확인","tag":["vault","kv","policy"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/06-Vault/03-Auth_Method/vault-kv-v2-ui-policy.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"kv-v2 UI Policy"}],["meta",{"property":"og:description","content":"사용자별 UI 접근에 대한 설정을 Kv-v2를 예로 확인"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/Great-Stone/images/master/uPic/Vault%202021-07-16%2015-35-48.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-18T13:12:54.000Z"}],["meta",{"property":"article:tag","content":"vault"}],["meta",{"property":"article:tag","content":"kv"}],["meta",{"property":"article:tag","content":"policy"}],["meta",{"property":"article:modified_time","content":"2023-09-18T13:12:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"kv-v2 UI Policy\\",\\"image\\":[\\"https://raw.githubusercontent.com/Great-Stone/images/master/uPic/Vault%202021-07-16%2015-35-48.png\\"],\\"dateModified\\":\\"2023-09-18T13:12:54.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Policy 구성","slug":"policy-구성","link":"#policy-구성","children":[]},{"level":2,"title":"인증 생성","slug":"인증-생성","link":"#인증-생성","children":[]},{"level":2,"title":"조회 확인","slug":"조회-확인","link":"#조회-확인","children":[]}],"git":{"createdTime":1628563561000,"updatedTime":1695042774000,"contributors":[{"name":"Administrator","email":"admin@example.com","commits":1},{"name":"Great-Stone","email":"hahohh@gmail.com","commits":1}]},"readingTime":{"minutes":3.78,"words":227},"filePathRelative":"04-HashiCorp/06-Vault/03-Auth_Method/vault-kv-v2-ui-policy.md","localizedDate":"2021년 8월 10일","excerpt":"\\n<blockquote>\\n<p>사용자별 UI 접근에 대한 설정을 Kv-v2를 예로 확인</p>\\n</blockquote>\\n<h2>Policy 구성</h2>\\n<p>UI 접근을 위해서는 <code>metadata</code>에 대한 권한 추가가 필요함</p>\\n<div class=\\"language-bash\\" data-highlighter=\\"prismjs\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"line\\">$ vault policy <span class=\\"token function\\">write</span> ui-kv-policy - <span class=\\"token operator\\">&lt;&lt;</span> <span class=\\"token string\\">EOF</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">path \\"kv-v2/data/path/\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"create\\", \\"update\\", \\"read\\", \\"delete\\", \\"list\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">path \\"kv-v2/delete/path/\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"update\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">path \\"kv-v2/metadata/path/\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"list\\", \\"read\\", \\"delete\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">path \\"kv-v2/destroy/path/\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"update\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">path \\"kv-v2/data/path/userid/*\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"create\\", \\"update\\", \\"read\\", \\"delete\\", \\"list\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">path \\"kv-v2/delete/path/userid/*\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"update\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">path \\"kv-v2/metadata/path/userid/*\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"list\\", \\"read\\", \\"delete\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">path \\"kv-v2/destroy/path/userid/*\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"update\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"># Additional access for UI</span>\\n<span class=\\"line\\">path \\"kv-v2/metadata\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"list\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">EOF</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span class=\\"token comment\\">##### or #####</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">vault policy <span class=\\"token function\\">write</span> ui-kv-policy - <span class=\\"token operator\\">&lt;&lt;</span> <span class=\\"token string\\">EOF</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">path \\"kv-v2/data/path/userid\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"create\\", \\"update\\", \\"read\\", \\"delete\\", \\"list\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">path \\"kv-v2/delete/path/userid\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"update\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">path \\"kv-v2/metadata/path/userid\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"list\\", \\"read\\", \\"delete\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">path \\"kv-v2/destroy/path/userid\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"update\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"># Additional access for UI</span>\\n<span class=\\"line\\">path \\"kv-v2/metadata/*\\" {</span>\\n<span class=\\"line\\">  capabilities = [\\"list\\"]</span>\\n<span class=\\"line\\">}</span>\\n<span class=\\"line\\">EOF</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"></span></code></pre></div>"}');export{f as comp,x as data};
