import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as n,h as t}from"./app-DVMlqOhY.js";const a={},o=t(`<h1 id="consul-health-check-on-vms" tabindex="-1"><a class="header-anchor" href="#consul-health-check-on-vms"><span>Consul Health Check on VMs</span></a></h1><blockquote><p><a href="https://www.consul.io/docs/discovery/services" target="_blank" rel="noopener noreferrer">https://www.consul.io/docs/discovery/services</a><br><a href="https://learn.hashicorp.com/tutorials/consul/service-registration-health-checks?in=consul/developer-discovery#tuning-scripts-to-be-compatible-with-consul" target="_blank" rel="noopener noreferrer">https://learn.hashicorp.com/tutorials/consul/service-registration-health-checks?in=consul/developer-discovery#tuning-scripts-to-be-compatible-with-consul</a></p></blockquote><h3 id="_1-스트립트-health-check를-위한-설정" tabindex="-1"><a class="header-anchor" href="#_1-스트립트-health-check를-위한-설정"><span>1. 스트립트 Health Check를 위한 설정</span></a></h3><p>Consul config 디렉토리 하위에 monitor.hcl파일을 만듭니다.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">services {</span>
<span class="line">  id = &quot;web-service&quot;</span>
<span class="line">  namd = &quot;web-service&quot;</span>
<span class="line">  address = &quot;10.10.10.201&quot;</span>
<span class="line">  port = 8080</span>
<span class="line">  checks = [</span>
<span class="line">    {</span>
<span class="line">      script = &quot;/opt/consul/script/ps-check.sh&quot;</span>
<span class="line">      interval = &quot;180s&quot;</span>
<span class="line">    }</span>
<span class="line">  ]</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-스크립트-health-check시-consul설정" tabindex="-1"><a class="header-anchor" href="#_2-스크립트-health-check시-consul설정"><span>2. 스크립트 Health Check시 Consul설정</span></a></h3><p>Consul에서 스크립트 기반의 설정시 Config파일 내에 하기와 같은 옵션이 추가되어야 합니다.</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">(기존설정)</span>
<span class="line">.....</span>
<span class="line">enable_script_checks = &quot;true&quot; 또는 </span>
<span class="line">enable_local_script_checks = &quot;true&quot;</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>참고 Url : <a href="https://www.consul.io/docs/agent/options#_enable_script_checks" target="_blank" rel="noopener noreferrer">https://www.consul.io/docs/agent/options#_enable_script_checks</a></p>`,9),l=[o];function c(i,r){return s(),n("div",null,l)}const u=e(a,[["render",c],["__file","Consul Health Check.html.vue"]]),d=JSON.parse('{"path":"/04-HashiCorp/04-Consul/03-UseCase/Consul%20Health%20Check.html","title":"Consul Health Check on VMs","lang":"ko-KR","frontmatter":{"description":"Consul Health Check","author":"euimokna","tag":["Consul"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/04-Consul/03-UseCase/Consul%20Health%20Check.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"Consul Health Check on VMs"}],["meta",{"property":"og:description","content":"Consul Health Check"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-18T13:12:54.000Z"}],["meta",{"property":"article:author","content":"euimokna"}],["meta",{"property":"article:tag","content":"Consul"}],["meta",{"property":"article:modified_time","content":"2023-09-18T13:12:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Consul Health Check on VMs\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-09-18T13:12:54.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"euimokna\\"}]}"]]},"headers":[{"level":3,"title":"1. 스트립트 Health Check를 위한 설정","slug":"_1-스트립트-health-check를-위한-설정","link":"#_1-스트립트-health-check를-위한-설정","children":[]},{"level":3,"title":"2. 스크립트 Health Check시 Consul설정","slug":"_2-스크립트-health-check시-consul설정","link":"#_2-스크립트-health-check시-consul설정","children":[]}],"git":{"createdTime":1629440338000,"updatedTime":1695042774000,"contributors":[{"name":"Great-Stone","email":"hahohh@gmail.com","commits":1},{"name":"euimokna","email":"euimok@gmail.com","commits":1}]},"readingTime":{"minutes":1.17,"words":70},"filePathRelative":"04-HashiCorp/04-Consul/03-UseCase/Consul Health Check.md","localizedDate":"2021년 8월 20일","excerpt":"\\n<blockquote>\\n<p><a href=\\"https://www.consul.io/docs/discovery/services\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://www.consul.io/docs/discovery/services</a><br>\\n<a href=\\"https://learn.hashicorp.com/tutorials/consul/service-registration-health-checks?in=consul/developer-discovery#tuning-scripts-to-be-compatible-with-consul\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://learn.hashicorp.com/tutorials/consul/service-registration-health-checks?in=consul/developer-discovery#tuning-scripts-to-be-compatible-with-consul</a></p>\\n</blockquote>","copyright":{"author":"euimokna"}}');export{u as comp,d as data};
