import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as l,c as t,h as a,a as s,g as n}from"./app-DVMlqOhY.js";const i="/assets/nomad_csi-Dc3RBitI.png",c={},o=a('<h1 id="nomad-csi-sample" tabindex="-1"><a class="header-anchor" href="#nomad-csi-sample"><span>Nomad CSI Sample</span></a></h1><ul><li>AWS에 EFS를 Nomad CSI로 활용</li><li>full code는 아래 github를 참고 <ul><li>참고 github: <a href="https://github.com/Great-Stone/nomad-demo-with-ecs" target="_blank" rel="noopener noreferrer">https://github.com/Great-Stone/nomad-demo-with-ecs</a><ul><li>branches: ung</li></ul></li></ul></li></ul><figure><img src="'+i+'" alt="nomad Architecture with CSI" tabindex="0" loading="lazy"><figcaption>nomad Architecture with CSI</figcaption></figure><h2 id="ec2-nomad-client-node-에-efs의-volume관련-권한이-필요합니다" tabindex="-1"><a class="header-anchor" href="#ec2-nomad-client-node-에-efs의-volume관련-권한이-필요합니다"><span>ec2(nomad client node)에 efs의 volume관련 권한이 필요합니다.</span></a></h2><ul><li>ec2와 efs는 같은 subnet이여야 합니다.</li><li>vpc에는 dns관련 권한설정이 필요합니다.</li></ul>',5),p=s("details",null,[s("summary",null,"ec2 iam policy"),s("div",{markdown:"1"},[s("div",{class:"language-ruby line-numbers-mode","data-highlighter":"prismjs","data-ext":"rb","data-title":"rb"},[s("pre",{class:"language-ruby"},[s("code",null,[s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_vpc"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad_demo"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  cidr_block "),s("span",{class:"token operator"},"="),n(" var"),s("span",{class:"token punctuation"},"."),n("vpc_cidr_block")]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token comment"},"#dns 권한설정이 필요함")]),n(`
`),s("span",{class:"line"},[n("  enable_dns_support   "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token boolean"},"true")]),n(`
`),s("span",{class:"line"},[n("  enable_dns_hostnames "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token boolean"},"true")]),n(`
`),s("span",{class:"line"},[n("  tags "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("    env "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad"')])]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_subnet"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad_demo"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  cidr_block "),s("span",{class:"token operator"},"="),n(" var"),s("span",{class:"token punctuation"},"."),n("vpc_cidr_block")]),n(`
`),s("span",{class:"line"},[n("  vpc_id     "),s("span",{class:"token operator"},"="),n(" aws_vpc"),s("span",{class:"token punctuation"},"."),n("nomad_demo"),s("span",{class:"token punctuation"},"."),n("id")]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token comment"},"#efs와 az가 같아야함")]),n(`
`),s("span",{class:"line"},[n("  availability_zone "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ap-northeast-2a"')])]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token comment"},"############")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token comment"},"# Policy")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("data "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_iam_policy_document"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"instance_role"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  statement "),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("    effect "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"Allow"')])]),n(`
`),s("span",{class:"line"},[n("    actions "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"[")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"sts:AssumeRole"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("    principals "),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("      type        "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"Service"')])]),n(`
`),s("span",{class:"line"},[n("      identifiers "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"["),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ec2.amazonaws.com"')]),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_iam_role"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"instance_role"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  name_prefix        "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"${var.prefix}-nomad"')])]),n(`
`),s("span",{class:"line"},[n("  assume_role_policy "),s("span",{class:"token operator"},"="),n(" data"),s("span",{class:"token punctuation"},"."),n("aws_iam_policy_document"),s("span",{class:"token punctuation"},"."),n("instance_role"),s("span",{class:"token punctuation"},"."),n("json")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_iam_role"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"instance_role"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  name_prefix        "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"${var.prefix}-nomad"')])]),n(`
`),s("span",{class:"line"},[n("  assume_role_policy "),s("span",{class:"token operator"},"="),n(" data"),s("span",{class:"token punctuation"},"."),n("aws_iam_policy_document"),s("span",{class:"token punctuation"},"."),n("instance_role"),s("span",{class:"token punctuation"},"."),n("json")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_iam_instance_profile"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"test_profile"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  name "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"test_profile"')])]),n(`
`),s("span",{class:"line"},[n("  role "),s("span",{class:"token operator"},"="),n(" aws_iam_role"),s("span",{class:"token punctuation"},"."),n("instance_role"),s("span",{class:"token punctuation"},"."),n("name")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_iam_role_policy"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"cluster_discovery"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  name   "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"${var.prefix}-nomad-cluster_discovery"')])]),n(`
`),s("span",{class:"line"},[n("  role   "),s("span",{class:"token operator"},"="),n(" aws_iam_role"),s("span",{class:"token punctuation"},"."),n("instance_role"),s("span",{class:"token punctuation"},"."),n("id")]),n(`
`),s("span",{class:"line"},[n("  policy "),s("span",{class:"token operator"},"="),n(" data"),s("span",{class:"token punctuation"},"."),n("aws_iam_policy_document"),s("span",{class:"token punctuation"},"."),n("cluster_discovery"),s("span",{class:"token punctuation"},"."),n("json")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("data "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_iam_policy_document"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"cluster_discovery"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token comment"},"# allow role with this policy to do the following: list instances, list tags, autoscale")]),n(`
`),s("span",{class:"line"},[n("  statement "),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("    effect "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"Allow"')])]),n(`
`),s("span",{class:"line"},[n("    actions "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"[")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ec2:DescribeInstances"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"autoscaling:CompleteLifecycleAction"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ec2:DescribeTags"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:ListClusters"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:DescribeClusters"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:DeregisterContainerInstance"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:ListContainerInstances"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:RegisterContainerInstance"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:SubmitContainerStateChange"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:SubmitTaskStateChange"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:DescribeContainerInstances"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:DescribeTasks"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:ListTasks"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:UpdateContainerAgent"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:StartTask"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:StopTask"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ecs:RunTask"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"elasticfilesystem:ClientMount"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"elasticfilesystem:ClientWrite"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"elasticfilesystem:ClientRootAccess"')])]),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"},[n("    resources "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"["),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"*"')]),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])])],-1),r=s("details",null,[s("summary",null,"efs volume and iam policy"),s("div",{markdown:"1"},[s("div",{class:"language-ruby line-numbers-mode","data-highlighter":"prismjs","data-ext":"rb","data-title":"rb"},[s("pre",{class:"language-ruby"},[s("code",null,[s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token comment"},"############")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token comment"},"#EFS")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_iam_role_policy"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"mount_efs_volumes"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  name   "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"mount-efs-volumes"')])]),n(`
`),s("span",{class:"line"},[n("  role   "),s("span",{class:"token operator"},"="),n(" aws_iam_role"),s("span",{class:"token punctuation"},"."),n("instance_role"),s("span",{class:"token punctuation"},"."),n("id")]),n(`
`),s("span",{class:"line"},[n("  policy "),s("span",{class:"token operator"},"="),n(" data"),s("span",{class:"token punctuation"},"."),n("aws_iam_policy_document"),s("span",{class:"token punctuation"},"."),n("mount_efs_volumes"),s("span",{class:"token punctuation"},"."),n("json")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("data "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_iam_policy_document"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"mount_efs_volumes"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  statement "),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("    effect "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"Allow"')])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("    actions "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"[")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ec2:DescribeInstances"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ec2:DescribeTags"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ec2:DescribeVolumes"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ec2:AttachVolume"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("      "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ec2:DetachVolume"')]),s("span",{class:"token punctuation"},",")]),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"},[n("    resources "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"["),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"*"')]),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token comment"},"# csi efs volume")]),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_efs_file_system"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad_csi"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  creation_token "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad-csi"')])]),n(`
`),s("span",{class:"line"},[n("  performance_mode "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"generalPurpose"')])]),n(`
`),s("span",{class:"line"},[n("  throughput_mode  "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"bursting"')])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("  tags "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("    Name "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad-csi"')])]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token comment"},"#az가 ec2와 동일해야함")]),n(`
`),s("span",{class:"line"},[n("  availability_zone_name "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ap-northeast-2a"')])]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token comment"},"#ec2와 subnet이 같아야함")]),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_efs_mount_target"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad_efs"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  file_system_id "),s("span",{class:"token operator"},"="),n(" aws_efs_file_system"),s("span",{class:"token punctuation"},"."),n("nomad_csi"),s("span",{class:"token punctuation"},"."),n("id")]),n(`
`),s("span",{class:"line"},[n("  subnet_id      "),s("span",{class:"token operator"},"="),n(" aws_subnet"),s("span",{class:"token punctuation"},"."),n("nomad_demo"),s("span",{class:"token punctuation"},"."),n("id")]),n(`
`),s("span",{class:"line"},[n("  security_groups "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"["),n(" aws_security_group"),s("span",{class:"token punctuation"},"."),n("efs"),s("span",{class:"token punctuation"},"."),n("id "),s("span",{class:"token punctuation"},"]"),n()]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws_security_group"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"efs"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  name        "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"allow_efs"')])]),n(`
`),s("span",{class:"line"},[n("  description "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"Allow EFS inbound traffic"')])]),n(`
`),s("span",{class:"line"},[n("  vpc_id      "),s("span",{class:"token operator"},"="),n(" aws_vpc"),s("span",{class:"token punctuation"},"."),n("nomad_demo"),s("span",{class:"token punctuation"},"."),n("id")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("  ingress "),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("    description "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"TLS from VPC"')])]),n(`
`),s("span",{class:"line"},[n("    from_port   "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token number"},"443")]),n(`
`),s("span",{class:"line"},[n("    to_port     "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token number"},"443")]),n(`
`),s("span",{class:"line"},[n("    protocol    "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"tcp"')])]),n(`
`),s("span",{class:"line"},[n("    cidr_blocks "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"["),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"0.0.0.0/0"')]),n(),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("  egress "),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("    from_port   "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token number"},"0")]),n(`
`),s("span",{class:"line"},[n("    to_port     "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token number"},"0")]),n(`
`),s("span",{class:"line"},[n("    protocol    "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"-1"')])]),n(`
`),s("span",{class:"line"},[n("    cidr_blocks "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"["),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"0.0.0.0/0"')]),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("  tags "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("    Name "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"allow_tls"')])]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])])],-1),u=s("h2",{id:"nomad-csi-create",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#nomad-csi-create"},[s("span",null,"nomad csi create")])],-1),m=s("ul",null,[s("li",null,"nomad csi job을 배포합니다."),s("li",null,"plugins을 생성합니다.")],-1),d=s("details",null,[s("summary",null,"nomad csi create"),s("div",{markdown:"1"},[s("div",{class:"language-ruby line-numbers-mode","data-highlighter":"prismjs","data-ext":"rb","data-title":"rb"},[s("pre",{class:"language-ruby"},[s("code",null,[s("span",{class:"line"},[s("span",{class:"token comment"},"#efs csi job을 생성")]),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad_job"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad_csi_node_job"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  jobspec "),s("span",{class:"token operator"},"="),n(" file"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"./job_file/csi-node.tpl"')]),s("span",{class:"token punctuation"},")")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"time_sleep"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"wait_30_seconds"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  depends_on "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"["),n("nomad_job"),s("span",{class:"token punctuation"},"."),n("nomad_csi_node_job"),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"},[n("  create_duration "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"30s"')])]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token comment"},"#생성된 plugin을 기다림")]),n(`
`),s("span",{class:"line"},[n("data "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad_plugin"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"efs"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  depends_on "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"["),n("time_sleep"),s("span",{class:"token punctuation"},"."),n("wait_30_seconds"),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"},[n("  plugin_id        "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws-efs0"')])]),n(`
`),s("span",{class:"line"},[n("  wait_for_registration "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token boolean"},"true")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token comment"},"#efs volume을 nomad에서 사용할 수 있게 plugins을 생성")]),n(`
`),s("span",{class:"line"},[n("resource "),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"nomad_volume"')]),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"efs_csi_volume"')]),n(),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("  depends_on  "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"["),n("data"),s("span",{class:"token punctuation"},"."),n("nomad_plugin"),s("span",{class:"token punctuation"},"."),n("efs"),s("span",{class:"token punctuation"},"]")]),n(`
`),s("span",{class:"line"},[n("  type        "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"csi"')])]),n(`
`),s("span",{class:"line"},[n("  plugin_id   "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"aws-efs0"')])]),n(`
`),s("span",{class:"line"},[n("  volume_id   "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"efs_csi_volume"')])]),n(`
`),s("span",{class:"line"},[n("  name        "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"efs_csi_volume"')])]),n(`
`),s("span",{class:"line"},[n("  external_id "),s("span",{class:"token operator"},"="),n(" data"),s("span",{class:"token punctuation"},"."),n("terraform_remote_state"),s("span",{class:"token punctuation"},"."),n("net"),s("span",{class:"token punctuation"},"."),n("outputs"),s("span",{class:"token punctuation"},"."),n("nomad_efs_name"),s("span",{class:"token punctuation"},"."),n("id")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("  capability "),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("    access_mode     "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"single-node-writer"')])]),n(`
`),s("span",{class:"line"},[n("    attachment_mode "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"file-system"')])]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[n("  mount_options "),s("span",{class:"token punctuation"},"{")]),n(`
`),s("span",{class:"line"},[n("    fs_type "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string-literal"},[s("span",{class:"token string"},'"ext4"')])]),n(`
`),s("span",{class:"line"},[n("  "),s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token punctuation"},"}")]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])])],-1),k=a(`<h2 id="efs-test-job-배포" tabindex="-1"><a class="header-anchor" href="#efs-test-job-배포"><span>efs test job 배포</span></a></h2><div class="language-ruby line-numbers-mode" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">job <span class="token string-literal"><span class="token string">&quot;efs_csi_job&quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">  datacenters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;dc1&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  type        <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;system&quot;</span></span></span>
<span class="line"></span>
<span class="line">  group <span class="token string-literal"><span class="token string">&quot;cache&quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">    count <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"></span>
<span class="line">    network <span class="token punctuation">{</span></span>
<span class="line">      port <span class="token string-literal"><span class="token string">&quot;db&quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">        to <span class="token operator">=</span> <span class="token number">6379</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment"># 생성한 volume id 값을 명시한 volume을 선언</span></span>
<span class="line">    volume <span class="token string-literal"><span class="token string">&quot;cache&quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">      type            <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;csi&quot;</span></span></span>
<span class="line">      source          <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;efs_csi_volume&quot;</span></span></span>
<span class="line">      attachment_mode <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;file-system&quot;</span></span></span>
<span class="line">      access_mode     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;single-node-writer&quot;</span></span></span>
<span class="line">      read_only    <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    task <span class="token string-literal"><span class="token string">&quot;redis&quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">      driver <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;docker&quot;</span></span></span>
<span class="line"></span>
<span class="line">      config <span class="token punctuation">{</span></span>
<span class="line">        image <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;redis:6.2.6-alpine3.15&quot;</span></span></span>
<span class="line">        ports <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;db&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      resources <span class="token punctuation">{</span></span>
<span class="line">        cpu    <span class="token operator">=</span> <span class="token number">500</span></span>
<span class="line">        memory <span class="token operator">=</span> <span class="token number">511</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token comment">#선언한 volume을 사용할 위치에 mount</span></span>
<span class="line">      volume_mount <span class="token punctuation">{</span></span>
<span class="line">        volume      <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;cache&quot;</span></span></span>
<span class="line">        destination <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;/data&quot;</span></span></span>
<span class="line">        read_only    <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),v=[o,p,r,u,m,d,k];function b(g,_){return l(),t("div",null,v)}const y=e(c,[["render",b],["__file","nomad-csi-sample.html.vue"]]),w=JSON.parse('{"path":"/04-HashiCorp/03-Terraform/03-Sample/nomad-csi-sample.html","title":"Nomad CSI Sample","lang":"ko-KR","frontmatter":{"description":"Nomad CSI Sample","tag":["Nomad","terrafom","CSI"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/03-Terraform/03-Sample/nomad-csi-sample.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"Nomad CSI Sample"}],["meta",{"property":"og:description","content":"Nomad CSI Sample"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-18T13:12:54.000Z"}],["meta",{"property":"article:tag","content":"Nomad"}],["meta",{"property":"article:tag","content":"terrafom"}],["meta",{"property":"article:tag","content":"CSI"}],["meta",{"property":"article:modified_time","content":"2023-09-18T13:12:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nomad CSI Sample\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-09-18T13:12:54.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"ec2(nomad client node)에 efs의 volume관련 권한이 필요합니다.","slug":"ec2-nomad-client-node-에-efs의-volume관련-권한이-필요합니다","link":"#ec2-nomad-client-node-에-efs의-volume관련-권한이-필요합니다","children":[]},{"level":2,"title":"nomad csi create","slug":"nomad-csi-create","link":"#nomad-csi-create","children":[]},{"level":2,"title":"efs test job 배포","slug":"efs-test-job-배포","link":"#efs-test-job-배포","children":[]}],"git":{"createdTime":1664548770000,"updatedTime":1695042774000,"contributors":[{"name":"swbs90","email":"swbs90@naver.com","commits":2},{"name":"Great-Stone","email":"hahohh@gmail.com","commits":1},{"name":"unghee","email":"ung@mz.co.kr","commits":1}]},"readingTime":{"minutes":7.53,"words":452},"filePathRelative":"04-HashiCorp/03-Terraform/03-Sample/nomad-csi-sample.md","localizedDate":"2022년 9월 30일","excerpt":"\\n<ul>\\n<li>AWS에 EFS를 Nomad CSI로 활용</li>\\n<li>full code는 아래 github를 참고\\n<ul>\\n<li>참고 github: <a href=\\"https://github.com/Great-Stone/nomad-demo-with-ecs\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/Great-Stone/nomad-demo-with-ecs</a>\\n<ul>\\n<li>branches: ung</li>\\n</ul>\\n</li>\\n</ul>\\n</li>\\n</ul>"}');export{y as comp,w as data};
