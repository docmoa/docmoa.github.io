import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as n,c as a,h as e}from"./app-DVMlqOhY.js";const o={},p=e(`<h1 id="required-node-js-engine-version" tabindex="-1"><a class="header-anchor" href="#required-node-js-engine-version"><span>Required Node.js engine version</span></a></h1><p><code>Docmoa</code>에서 사용하는 패키지를 업데이트 하던 중 다음과 같은 오류가 발생하였다.</p><h2 id="_1-배경" tabindex="-1"><a class="header-anchor" href="#_1-배경"><span>1. 배경</span></a></h2><div class="language-log line-numbers-mode" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token operator">$</span> npm run dev</span>
<span class="line"></span>
<span class="line"><span class="token url">file:///Users/gs/workspaces/docs/docmoa/node_modules/execa/lib/utils/max-listeners.js:1</span></span>
<span class="line">import <span class="token operator">{</span>addAbortListener<span class="token operator">}</span> from <span class="token string">&#39;node:events&#39;</span><span class="token operator">;</span></span>
<span class="line">        <span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span></span>
<span class="line"><span class="token property">SyntaxError:</span> The requested module <span class="token string">&#39;node:events&#39;</span> does not provide an export named <span class="token string">&#39;addAbortListener&#39;</span></span>
<span class="line">    at ModuleJob<span class="token punctuation">.</span>_instantiate <span class="token operator">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>esm<span class="token operator">/</span>module_job<span class="token operator">:</span><span class="token number">123</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">)</span></span>
<span class="line">    at async ModuleJob<span class="token punctuation">.</span>run <span class="token operator">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>esm<span class="token operator">/</span>module_job<span class="token operator">:</span><span class="token number">189</span><span class="token operator">:</span><span class="token number">5</span><span class="token operator">)</span></span>
<span class="line">    at async Promise<span class="token punctuation">.</span>all <span class="token operator">(</span>index <span class="token number">0</span><span class="token operator">)</span></span>
<span class="line">    at async ESMLoader<span class="token punctuation">.</span>import <span class="token operator">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>esm<span class="token operator">/</span>loader<span class="token operator">:</span><span class="token number">530</span><span class="token operator">:</span><span class="token number">24</span><span class="token operator">)</span></span>
<span class="line">    at async loadUserConfig <span class="token operator">(</span><span class="token url">file:///Users/gs/workspaces/docs/docmoa/node_modules/@vuepress/cli/dist/index.js:77:18)</span></span>
<span class="line">    at async CAC<span class="token punctuation">.</span>dev <span class="token operator">(</span><span class="token url">file:///Users/gs/workspaces/docs/docmoa/node_modules/@vuepress/cli/dist/index.js:443:52)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>업데이트 된 패키지에서 <code>addAbortListener</code>라는걸 사용하는 것 같은데, 이를 찾을 수 없어 오류가 발생하였다.</p><p>Node.js의 <a href="https://nodejs.org/en/blog/release/v20.5.0" target="_blank" rel="noopener noreferrer">CHANGELOG</a>를 찾아보니 <code>addAbortListener</code>는 v20.5.0 부터 언급되는것으로 보아 이때부터 추가된 api인 것으로 추측된다.</p><ul><li>Node.js events 설명 - <a href="https://runebook.dev/ko/docs/node/events" target="_blank" rel="noopener noreferrer">https://runebook.dev/ko/docs/node/events</a></li></ul><p>현재 Docmoa를 빌드하는 버전은 <code>v18.x</code>였으므로 앞으로는 빌드하기 위해 <code>v20.5.x</code> 이상으로 필요 버전에 대한 명시가 필요해졌다.</p><h2 id="_2-필요-버전-명시하기" tabindex="-1"><a class="header-anchor" href="#_2-필요-버전-명시하기"><span>2. 필요 버전 명시하기</span></a></h2><p><code>package.json</code>에서 <code>engine</code> 필드를 설정하고 <code>node</code>와 <code>npm</code>버전에 대한 요구 사항을 설정할 수 있다.</p><div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="package.json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;...&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;engines&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> </span>
<span class="line">    <span class="token property">&quot;npm&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&gt;=10.0.0 &lt;20.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;node&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&gt;=20.5.0&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>추가로 npm을 통해 이를 적용하려면 <code>.npmrc</code> 파일을 만들고 <code>engine-strict</code> 옵션을 <code>true</code>로 설정해야 한다.</p><div class="language-ini" data-highlighter="prismjs" data-ext="ini" data-title=".npmrc"><pre class="language-ini"><code><span class="line"><span class="token comment"># .npmrc</span></span>
<span class="line"><span class="token key attr-name">engine-strict</span><span class="token punctuation">=</span><span class="token value attr-value">true</span></span>
<span class="line"></span></code></pre></div><p>설정이 완료되면 필요한 엔진 버전이 일치하지 않는 경우 <code>npm install</code> 같은 npm 명령이 실패하게 된다.</p><p><code>.npmrc</code> 적용 전에는 WARN 메시지만 나오지만</p><div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token operator">$</span> node <span class="token operator">-</span><span class="token operator">-</span>version</span>
<span class="line"><span class="token number">v18.18.0</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">$</span> npm install</span>
<span class="line">npm <span class="token level warning important">WARN</span> EBADENGINE Unsupported engine <span class="token operator">{</span></span>
<span class="line">npm <span class="token level warning important">WARN</span> EBADENGINE   package<span class="token operator">:</span> <span class="token string">&#39;docmoa@2.3.0&#39;</span><span class="token punctuation">,</span></span>
<span class="line">npm <span class="token level warning important">WARN</span> EBADENGINE   required<span class="token operator">:</span> <span class="token operator">{</span> node<span class="token operator">:</span> <span class="token string">&#39;&gt;=20.5.0&#39;</span> <span class="token operator">}</span><span class="token punctuation">,</span></span>
<span class="line">npm <span class="token level warning important">WARN</span> EBADENGINE   current<span class="token operator">:</span> <span class="token operator">{</span> node<span class="token operator">:</span> <span class="token string">&#39;v18.18.0&#39;</span><span class="token punctuation">,</span> npm<span class="token operator">:</span> <span class="token string">&#39;9.8.1&#39;</span> <span class="token operator">}</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>생략<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"></span></code></pre></div><p>적용 후에는 <code>ERR!</code>를 출력하며 실행되지 않는다.</p><div class="language-log line-numbers-mode" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token operator">$</span> node <span class="token operator">-</span><span class="token operator">-</span>version</span>
<span class="line"><span class="token number">v18.18.0</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">$</span> npm install</span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> code EBADENGINE</span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> engine Unsupported engine</span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> engine Not compatible with your version of node<span class="token operator">/</span>npm<span class="token operator">:</span> docmoa<span class="token operator">@</span><span class="token number">2.3.0</span></span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> notsup Not compatible with your version of node<span class="token operator">/</span>npm<span class="token operator">:</span> docmoa<span class="token operator">@</span><span class="token number">2.3.0</span></span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> notsup Required<span class="token operator">:</span> <span class="token operator">{</span><span class="token string">&quot;node&quot;</span><span class="token operator">:</span><span class="token string">&quot;&gt;=20.5.0&quot;</span><span class="token operator">}</span></span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> notsup Actual<span class="token operator">:</span>   <span class="token operator">{</span><span class="token string">&quot;npm&quot;</span><span class="token operator">:</span><span class="token string">&quot;9.8.1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;node&quot;</span><span class="token operator">:</span><span class="token string">&quot;v18.18.0&quot;</span><span class="token operator">}</span></span>
<span class="line"></span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> A complete log of this run can be found in<span class="token operator">:</span> <span class="token file-path string">/Users/gs/.npm/_logs/2024-06-27T00_34_26_004Z-debug-0.log</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,18),t=[p];function r(l,c){return n(),a("div",null,t)}const k=s(o,[["render",r],["__file","required-node-version.html.vue"]]),u=JSON.parse(`{"path":"/05-Software/NodeJS/required-node-version.html","title":"Required Node.js engine version","lang":"ko-KR","frontmatter":{"description":"Node.js의 버전 요구사항을 package.js에 추가하기","tag":["nodejs"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/05-Software/NodeJS/required-node-version.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"Required Node.js engine version"}],["meta",{"property":"og:description","content":"Node.js의 버전 요구사항을 package.js에 추가하기"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-06-27T02:09:20.000Z"}],["meta",{"property":"article:tag","content":"nodejs"}],["meta",{"property":"article:modified_time","content":"2024-06-27T02:09:20.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Required Node.js engine version\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-27T02:09:20.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"1. 배경","slug":"_1-배경","link":"#_1-배경","children":[]},{"level":2,"title":"2. 필요 버전 명시하기","slug":"_2-필요-버전-명시하기","link":"#_2-필요-버전-명시하기","children":[]}],"git":{"createdTime":1719454160000,"updatedTime":1719454160000,"contributors":[{"name":"Great-Stone","email":"hahohh@gmail.com","commits":1}]},"readingTime":{"minutes":3.88,"words":233},"filePathRelative":"05-Software/NodeJS/required-node-version.md","localizedDate":"2024년 6월 27일","excerpt":"\\n<p><code>Docmoa</code>에서 사용하는 패키지를 업데이트 하던 중 다음과 같은 오류가 발생하였다.</p>\\n<h2>1. 배경</h2>\\n<div class=\\"language-log\\" data-highlighter=\\"prismjs\\" data-ext=\\"log\\" data-title=\\"log\\"><pre class=\\"language-log\\"><code><span class=\\"line\\"><span class=\\"token operator\\">$</span> npm run dev</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span class=\\"token url\\">file:///Users/gs/workspaces/docs/docmoa/node_modules/execa/lib/utils/max-listeners.js:1</span></span>\\n<span class=\\"line\\">import <span class=\\"token operator\\">{</span>addAbortListener<span class=\\"token operator\\">}</span> from <span class=\\"token string\\">'node:events'</span><span class=\\"token operator\\">;</span></span>\\n<span class=\\"line\\">        <span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span><span class=\\"token operator\\">^</span></span>\\n<span class=\\"line\\"><span class=\\"token property\\">SyntaxError:</span> The requested module <span class=\\"token string\\">'node:events'</span> does not provide an export named <span class=\\"token string\\">'addAbortListener'</span></span>\\n<span class=\\"line\\">    at ModuleJob<span class=\\"token punctuation\\">.</span>_instantiate <span class=\\"token operator\\">(</span>node<span class=\\"token operator\\">:</span>internal<span class=\\"token operator\\">/</span>modules<span class=\\"token operator\\">/</span>esm<span class=\\"token operator\\">/</span>module_job<span class=\\"token operator\\">:</span><span class=\\"token number\\">123</span><span class=\\"token operator\\">:</span><span class=\\"token number\\">21</span><span class=\\"token operator\\">)</span></span>\\n<span class=\\"line\\">    at async ModuleJob<span class=\\"token punctuation\\">.</span>run <span class=\\"token operator\\">(</span>node<span class=\\"token operator\\">:</span>internal<span class=\\"token operator\\">/</span>modules<span class=\\"token operator\\">/</span>esm<span class=\\"token operator\\">/</span>module_job<span class=\\"token operator\\">:</span><span class=\\"token number\\">189</span><span class=\\"token operator\\">:</span><span class=\\"token number\\">5</span><span class=\\"token operator\\">)</span></span>\\n<span class=\\"line\\">    at async Promise<span class=\\"token punctuation\\">.</span>all <span class=\\"token operator\\">(</span>index <span class=\\"token number\\">0</span><span class=\\"token operator\\">)</span></span>\\n<span class=\\"line\\">    at async ESMLoader<span class=\\"token punctuation\\">.</span>import <span class=\\"token operator\\">(</span>node<span class=\\"token operator\\">:</span>internal<span class=\\"token operator\\">/</span>modules<span class=\\"token operator\\">/</span>esm<span class=\\"token operator\\">/</span>loader<span class=\\"token operator\\">:</span><span class=\\"token number\\">530</span><span class=\\"token operator\\">:</span><span class=\\"token number\\">24</span><span class=\\"token operator\\">)</span></span>\\n<span class=\\"line\\">    at async loadUserConfig <span class=\\"token operator\\">(</span><span class=\\"token url\\">file:///Users/gs/workspaces/docs/docmoa/node_modules/@vuepress/cli/dist/index.js:77:18)</span></span>\\n<span class=\\"line\\">    at async CAC<span class=\\"token punctuation\\">.</span>dev <span class=\\"token operator\\">(</span><span class=\\"token url\\">file:///Users/gs/workspaces/docs/docmoa/node_modules/@vuepress/cli/dist/index.js:443:52)</span></span>\\n<span class=\\"line\\"></span></code></pre></div>"}`);export{k as comp,u as data};
