import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as t,c as a,h as n}from"./app-DVMlqOhY.js";const s={},i=n(`<h1 id="identifying-consul-split-brain" tabindex="-1"><a class="header-anchor" href="#identifying-consul-split-brain"><span>Identifying consul split-brain</span></a></h1><blockquote><p><a href="https://support.hashicorp.com/hc/en-us/articles/360058026733-Identifying-and-Recovering-from-a-Consul-Split-Brain" target="_blank" rel="noopener noreferrer">https://support.hashicorp.com/hc/en-us/articles/360058026733-Identifying-and-Recovering-from-a-Consul-Split-Brain</a></p></blockquote><ol><li>다음을 실행하여 각 서버에서 Consul 서버 로그를 확인</li></ol><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">consul monitor -log-level<span class="token operator">=</span>debug</span>
<span class="line"></span></code></pre></div><ol start="2"><li>Server들이 투표하는 로그 라인을 확인합니다. 다음과 같이 보여야 합니다.:</li></ol><p>==정상적인 경우</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">2020/10/19 16:21:23 [INFO] raft: Node at 10.90.168.42:8300 [Candidate] entering Candidate state in term 3732</span>
<span class="line">2020/10/19 16:21:23 [DEBUG] raft: Votes needed: 2</span>
<span class="line">2020/10/19 16:21:23 [DEBUG] raft: Vote granted from foobar in term 3732. Tally: 1</span>
<span class="line"></span></code></pre></div><p>== 비 정상적인 경우</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">2020/10/19 16:28:53 [WARN] raft: Election timeout reached, restarting election</span>
<span class="line">2020/10/19 16:28:53 [INFO] raft: Node at 00.00.000.00:8300 [Candidate] entering Candidate state in term 992</span>
<span class="line">2020/10/19 16:28:53 [DEBUG] raft: Votes needed: 2</span>
<span class="line">2020/10/19 16:28:53 [DEBUG] raft: Vote granted from foobar2 in term 992. Tally: 1</span>
<span class="line">2020/10/19 16:28:53 [ERR] raft: Failed to make RequestVote RPC to {Voter &lt;Voter ID&gt;)</span>
<span class="line"></span></code></pre></div><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">복구 시 정상화된 로그</span>
<span class="line">020/10/19 16:29:04 [WARN] raft: Election timeout reached, restarting election</span>
<span class="line">2020/10/19 16:29:04 [INFO] raft: Node at 00.00.000.00:8300 [Candidate] entering Candidate state in term 989</span>
<span class="line">2020/10/19 16:29:04 [DEBUG] raft: Votes needed: 2</span>
<span class="line">2020/10/19 16:29:04 [DEBUG] raft: Vote granted from &lt;ID&gt; in term 989. Tally: 1</span>
<span class="line"></span></code></pre></div>`,10),o=[i];function r(l,p){return t(),a("div",null,o)}const g=e(s,[["render",r],["__file","Consul Enterprise Feature.html.vue"]]),h=JSON.parse('{"path":"/04-HashiCorp/04-Consul/04-TroubleShooting/Consul%20Enterprise%20Feature.html","title":"Identifying consul split-brain","lang":"ko-KR","frontmatter":{"description":"Identifying consul split-brain","tag":["Consul"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/04-Consul/04-TroubleShooting/Consul%20Enterprise%20Feature.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"Identifying consul split-brain"}],["meta",{"property":"og:description","content":"Identifying consul split-brain"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-18T13:12:54.000Z"}],["meta",{"property":"article:tag","content":"Consul"}],["meta",{"property":"article:modified_time","content":"2023-09-18T13:12:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Identifying consul split-brain\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-09-18T13:12:54.000Z\\",\\"author\\":[]}"]]},"headers":[],"git":{"createdTime":1628556007000,"updatedTime":1695042774000,"contributors":[{"name":"Great-Stone","email":"hahohh@gmail.com","commits":2}]},"readingTime":{"minutes":3.23,"words":194},"filePathRelative":"04-HashiCorp/04-Consul/04-TroubleShooting/Consul Enterprise Feature.md","localizedDate":"2021년 8월 10일","excerpt":"\\n<blockquote>\\n<p><a href=\\"https://support.hashicorp.com/hc/en-us/articles/360058026733-Identifying-and-Recovering-from-a-Consul-Split-Brain\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://support.hashicorp.com/hc/en-us/articles/360058026733-Identifying-and-Recovering-from-a-Consul-Split-Brain</a></p>\\n</blockquote>"}');export{g as comp,h as data};
