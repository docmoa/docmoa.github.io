import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as n,c as a,h as e}from"./app-DVMlqOhY.js";const l={},t=e(`<h1 id="_01-install" tabindex="-1"><a class="header-anchor" href="#_01-install"><span>01. Install</span></a></h1><div class="hint-container tip"><p class="hint-container-title">팁</p><p>실습을 위한 조건은 다음과 같습니다.</p><ul><li>Kubernetes 1.21 이상의 환경</li><li>Consul binary <a href="http://releases.hashicorp.com/consul/" target="_blank" rel="noopener noreferrer">http://releases.hashicorp.com/consul/</a></li><li>Install helm 3</li><li>Install Kubectl</li><li>Consul Namespace 테스트는 Enterprise 라이선스가 필요합니다. : <a href="http://consul.io/trial" target="_blank" rel="noopener noreferrer">http://consul.io/trial</a></li></ul></div><blockquote><p>참고 : <a href="https://learn.hashicorp.com/collections/consul/kubernetes-production" target="_blank" rel="noopener noreferrer">https://learn.hashicorp.com/collections/consul/kubernetes-production</a></p></blockquote><h2 id="consul-gossip" tabindex="-1"><a class="header-anchor" href="#consul-gossip"><span>Consul Gossip</span></a></h2><p>다운받은 Consul 바이너리를 통해 Gossip 암호화 키를 생성합니다</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl create secret generic consul-gossip-encryption-key --from-literal<span class="token operator">=</span>key<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>consul keygen<span class="token variable">)</span></span></span>
<span class="line"></span></code></pre></div><h2 id="license-option" tabindex="-1"><a class="header-anchor" href="#license-option"><span>License (Option)</span></a></h2><p>발급받은 라이선스 파일을 저장(e.g. consul.hclic)하고 Kubernetes의 secret으로 적용합니다.</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl create secret generic license --from-file<span class="token operator">=</span><span class="token string">&#39;key=./consul.hclic&#39;</span></span>
<span class="line"></span></code></pre></div><h2 id="helm" tabindex="-1"><a class="header-anchor" href="#helm"><span>Helm</span></a></h2><p>Helm repo add &amp; update</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">helm repo <span class="token function">add</span> hashicorp https://helm.releases.hashicorp.com <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span></span>
<span class="line">helm repo update</span>
<span class="line"></span></code></pre></div><h2 id="helm-chart" tabindex="-1"><a class="header-anchor" href="#helm-chart"><span>Helm Chart</span></a></h2><blockquote><p>github : <a href="https://github.com/hashicorp/consul-helm/blob/master/values.yaml" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/consul-helm/blob/master/values.yaml</a></p></blockquote><p>Helm 설치를 위한 파일(e.g. value.yaml) 을 작성합니다.</p><ul><li>Enterprise <ul><li>Enterprse 이미지 태그는 <a href="https://hub.docker.com/r/hashicorp/consul-enterprise/tags" target="_blank" rel="noopener noreferrer">hub.docker.com</a>을 확인합니다.</li><li>적용 시 <code>enterpriseLicense</code> 항목의 주석을 해제합니다.</li></ul></li></ul><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">global</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> consul</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> hashicorp/consul<span class="token punctuation">-</span>enterprise<span class="token punctuation">:</span>1.11.3<span class="token punctuation">-</span>ent</span>
<span class="line">  <span class="token key atrule">enableConsulNamespaces</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">adminPartitions</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">datacenter</span><span class="token punctuation">:</span> dc1</span>
<span class="line">  <span class="token comment"># enterpriseLicense:</span></span>
<span class="line">  <span class="token comment">#   secretName: license</span></span>
<span class="line">  <span class="token comment">#   secretKey: key</span></span>
<span class="line">  <span class="token key atrule">gossipEncryption</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">secretName</span><span class="token punctuation">:</span> consul<span class="token punctuation">-</span>gossip<span class="token punctuation">-</span>encryption<span class="token punctuation">-</span>key</span>
<span class="line">    <span class="token key atrule">secretKey</span><span class="token punctuation">:</span> key</span>
<span class="line">  <span class="token key atrule">tls</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">    <span class="token key atrule">enableAutoEncrypt</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">enableConsulNamespaces</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">client</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">grpc</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">connectInject</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">dns</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">controller</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">syncCatalog</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">toConsul</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">consulNamespaces</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">mirroringK8S</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="설치" tabindex="-1"><a class="header-anchor" href="#설치"><span>설치</span></a></h2><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl config use-context <span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> gs-cluster-0 KCONFIG.txt<span class="token variable">)</span></span></span>
<span class="line">helm <span class="token function">install</span> consul <span class="token parameter variable">-f</span> ./values.yaml hashicorp/consul <span class="token parameter variable">--version</span> v0.40.0 <span class="token parameter variable">--debug</span></span>
<span class="line"></span></code></pre></div><h2 id="ui-확인" tabindex="-1"><a class="header-anchor" href="#ui-확인"><span>UI 확인</span></a></h2><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl port-forward service/consul-server <span class="token number">8500</span>:8500</span>
<span class="line"></span></code></pre></div><p><a href="http://localhost:8500/ui" target="_blank" rel="noopener noreferrer">http://localhost:8500/ui</a></p>`,22),p=[t];function i(c,o){return n(),a("div",null,p)}const d=s(l,[["render",i],["__file","01-Install.html.vue"]]),h=JSON.parse('{"path":"/04-HashiCorp/04-Consul/06-on_Kubernetes/ServiceMesh101/01-Install.html","title":"01. Install","lang":"ko-KR","frontmatter":{"description":"Consul Service Mesh on Kubernetes (Ent)","tag":["Consul","ServiceMesh","K8s","Kubernetes"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/04-Consul/06-on_Kubernetes/ServiceMesh101/01-Install.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"01. Install"}],["meta",{"property":"og:description","content":"Consul Service Mesh on Kubernetes (Ent)"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-18T13:12:54.000Z"}],["meta",{"property":"article:tag","content":"Consul"}],["meta",{"property":"article:tag","content":"ServiceMesh"}],["meta",{"property":"article:tag","content":"K8s"}],["meta",{"property":"article:tag","content":"Kubernetes"}],["meta",{"property":"article:modified_time","content":"2023-09-18T13:12:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"01. Install\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-09-18T13:12:54.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Consul Gossip","slug":"consul-gossip","link":"#consul-gossip","children":[]},{"level":2,"title":"License (Option)","slug":"license-option","link":"#license-option","children":[]},{"level":2,"title":"Helm","slug":"helm","link":"#helm","children":[]},{"level":2,"title":"Helm Chart","slug":"helm-chart","link":"#helm-chart","children":[]},{"level":2,"title":"설치","slug":"설치","link":"#설치","children":[]},{"level":2,"title":"UI 확인","slug":"ui-확인","link":"#ui-확인","children":[]}],"git":{"createdTime":1645936869000,"updatedTime":1695042774000,"contributors":[{"name":"Administrator","email":"admin@example.com","commits":1},{"name":"Great-Stone","email":"hahohh@gmail.com","commits":1}]},"readingTime":{"minutes":3.3,"words":198},"filePathRelative":"04-HashiCorp/04-Consul/06-on_Kubernetes/ServiceMesh101/01-Install.md","localizedDate":"2022년 2월 27일","excerpt":"\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">팁</p>\\n<p>실습을 위한 조건은 다음과 같습니다.</p>\\n<ul>\\n<li>Kubernetes 1.21 이상의 환경</li>\\n<li>Consul binary <a href=\\"http://releases.hashicorp.com/consul/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">http://releases.hashicorp.com/consul/</a></li>\\n<li>Install helm 3</li>\\n<li>Install Kubectl</li>\\n<li>Consul Namespace 테스트는 Enterprise 라이선스가 필요합니다. : <a href=\\"http://consul.io/trial\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">http://consul.io/trial</a></li>\\n</ul>\\n</div>"}');export{d as comp,h as data};
