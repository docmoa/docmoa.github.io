import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as n,h as e}from"./app-DVMlqOhY.js";const l={},t=e(`<h1 id="kv-sample" tabindex="-1"><a class="header-anchor" href="#kv-sample"><span>KV Sample</span></a></h1><p>참고 : <a href="https://learn.hashicorp.com/tutorials/consul/consul-template" target="_blank" rel="noopener noreferrer">https://learn.hashicorp.com/tutorials/consul/consul-template</a></p><h2 id="템플릿-파일-변환-하기" tabindex="-1"><a class="header-anchor" href="#템플릿-파일-변환-하기"><span>템플릿 파일 변환 하기</span></a></h2><h3 id="템플릿-파일-작성" tabindex="-1"><a class="header-anchor" href="#템플릿-파일-작성"><span>템플릿 파일 작성</span></a></h3><ul><li>대상 kv : apache/version</li></ul><div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment"># apache_install.sh.ctmpl</span></span>
<span class="line"><span class="token comment">#!/bin/bash</span></span>
<span class="line">sudo apt-get remove -y apache2</span>
<span class="line">sudo apt-get install -y <span class="token property">apache2</span><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> key <span class="token string">&quot;/apache/version&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3 id="consul에-kv추가" tabindex="-1"><a class="header-anchor" href="#consul에-kv추가"><span>consul에 KV추가</span></a></h3><p>consul kv put apache/version 2.2.14-5ubuntu8.7</p><h3 id="실행" tabindex="-1"><a class="header-anchor" href="#실행"><span>실행</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ consul-template <span class="token parameter variable">-template</span><span class="token operator">=</span><span class="token string">&quot;./apache_install.sh.ctmpl:./apache_install.sh&quot;</span> <span class="token parameter variable">-once</span></span>
<span class="line"></span></code></pre></div><div class="hint-container info"><p class="hint-container-title">파일 구조</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token builtin class-name">.</span></span>
<span class="line">├── apache_install.sh.ctmpl</span>
<span class="line">└── <span class="token variable"><span class="token variable">\`</span>apache_install.sh<span class="token variable">\`</span></span></span>
<span class="line"></span></code></pre></div></div><h3 id="내용-확인" tabindex="-1"><a class="header-anchor" href="#내용-확인"><span>내용 확인</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> remove <span class="token parameter variable">-y</span> apache2</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token assign-left variable">apache2</span><span class="token operator">=</span><span class="token number">2.2</span>.14-5ubuntu8.7</span>
<span class="line"></span></code></pre></div><h2 id="config-활용" tabindex="-1"><a class="header-anchor" href="#config-활용"><span>Config 활용</span></a></h2><h3 id="cli-inline의-옵션을-정의하는-config-작성" tabindex="-1"><a class="header-anchor" href="#cli-inline의-옵션을-정의하는-config-작성"><span>CLI Inline의 옵션을 정의하는 config 작성</span></a></h3><div class="language-hcl line-numbers-mode" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment"># consul-template-apache-install.hcl</span></span>
<span class="line"><span class="token keyword">consul</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">address</span> <span class="token punctuation">=</span> <span class="token string">&quot;localhost:8500&quot;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">retry</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">enabled</span>  <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token property">attempts</span> <span class="token punctuation">=</span> <span class="token number">12</span></span>
<span class="line">    <span class="token property">backoff</span>  <span class="token punctuation">=</span> <span class="token string">&quot;250ms&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">source</span>      <span class="token punctuation">=</span> <span class="token string">&quot;./apache_install.sh.ctmpl&quot;</span></span>
<span class="line">  <span class="token property">destination</span> <span class="token punctuation">=</span> <span class="token string">&quot;./apache_install.sh&quot;</span></span>
<span class="line">  <span class="token property">perms</span>       <span class="token punctuation">=</span> <span class="token number">0644</span></span>
<span class="line">  <span class="token property">command</span>     <span class="token punctuation">=</span> <span class="token string">&quot;echo &#39;./apache_install.sh&#39;&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="실행-1" tabindex="-1"><a class="header-anchor" href="#실행-1"><span>실행</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ consul-template <span class="token parameter variable">-config</span><span class="token operator">=</span>consul-template-apache-install.hcl</span>
<span class="line">apache_install.sh</span>
<span class="line"></span></code></pre></div>`,18),p=[t];function c(i,o){return s(),n("div",null,p)}const u=a(l,[["render",c],["__file","kv-sample.html.vue"]]),d=JSON.parse('{"path":"/04-HashiCorp/04-Consul/05-Template_Sample/kv-sample.html","title":"KV Sample","lang":"ko-KR","frontmatter":{"description":"Consul Template","tag":["Consul","Consul Template"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/04-Consul/05-Template_Sample/kv-sample.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"KV Sample"}],["meta",{"property":"og:description","content":"Consul Template"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-19T11:31:31.000Z"}],["meta",{"property":"article:tag","content":"Consul"}],["meta",{"property":"article:tag","content":"Consul Template"}],["meta",{"property":"article:modified_time","content":"2023-09-19T11:31:31.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"KV Sample\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-09-19T11:31:31.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"템플릿 파일 변환 하기","slug":"템플릿-파일-변환-하기","link":"#템플릿-파일-변환-하기","children":[{"level":3,"title":"템플릿 파일 작성","slug":"템플릿-파일-작성","link":"#템플릿-파일-작성","children":[]},{"level":3,"title":"consul에 KV추가","slug":"consul에-kv추가","link":"#consul에-kv추가","children":[]},{"level":3,"title":"실행","slug":"실행","link":"#실행","children":[]},{"level":3,"title":"내용 확인","slug":"내용-확인","link":"#내용-확인","children":[]}]},{"level":2,"title":"Config 활용","slug":"config-활용","link":"#config-활용","children":[{"level":3,"title":"CLI Inline의 옵션을 정의하는 config 작성","slug":"cli-inline의-옵션을-정의하는-config-작성","link":"#cli-inline의-옵션을-정의하는-config-작성","children":[]},{"level":3,"title":"실행","slug":"실행-1","link":"#실행-1","children":[]}]}],"git":{"createdTime":1634870622000,"updatedTime":1695123091000,"contributors":[{"name":"Great-Stone","email":"hahohh@gmail.com","commits":2},{"name":"Administrator","email":"admin@example.com","commits":1}]},"readingTime":{"minutes":1.82,"words":109},"filePathRelative":"04-HashiCorp/04-Consul/05-Template_Sample/kv-sample.md","localizedDate":"2021년 10월 22일","excerpt":"\\n<p>참고 : <a href=\\"https://learn.hashicorp.com/tutorials/consul/consul-template\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://learn.hashicorp.com/tutorials/consul/consul-template</a></p>\\n<h2>템플릿 파일 변환 하기</h2>\\n<h3>템플릿 파일 작성</h3>\\n<ul>\\n<li>대상 kv : apache/version</li>\\n</ul>\\n<div class=\\"language-hcl\\" data-highlighter=\\"prismjs\\" data-ext=\\"hcl\\" data-title=\\"hcl\\"><pre class=\\"language-hcl\\"><code><span class=\\"line\\"><span class=\\"token comment\\"># apache_install.sh.ctmpl</span></span>\\n<span class=\\"line\\"><span class=\\"token comment\\">#!/bin/bash</span></span>\\n<span class=\\"line\\">sudo apt-get remove -y apache2</span>\\n<span class=\\"line\\">sudo apt-get install -y <span class=\\"token property\\">apache2</span><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">{</span> key <span class=\\"token string\\">\\"/apache/version\\"</span> <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"></span></code></pre></div>"}');export{u as comp,d as data};
