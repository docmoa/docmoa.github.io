import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,h as p}from"./app-DVMlqOhY.js";const e={},t=p(`<h1 id="keycloak" tabindex="-1"><a class="header-anchor" href="#keycloak"><span>Keycloak</span></a></h1><p>Keycloak은 Stateful 한 특성이 있어서 볼륨을 붙여주는것이 좋다.</p><div class="language-hcl line-numbers-mode" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment">// nomad namespace apply -description &quot;Keycloak&quot; keycloak</span></span>
<span class="line"></span>
<span class="line">job <span class="token string">&quot;keycloak&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;service&quot;</span></span>
<span class="line">  <span class="token property">datacenters</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;dc1&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">namespace</span> <span class="token punctuation">=</span> <span class="token string">&quot;keycloak&quot;</span></span>
<span class="line"></span>
<span class="line">  group <span class="token string">&quot;keycloak&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">count</span> <span class="token punctuation">=</span> <span class="token number">1</span></span>
<span class="line"></span>
<span class="line">    volume <span class="token string">&quot;keycloak-vol&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;host&quot;</span></span>
<span class="line">      <span class="token property">read_only</span> <span class="token punctuation">=</span> <span class="token boolean">false</span></span>
<span class="line">      <span class="token property">source</span> <span class="token punctuation">=</span> <span class="token string">&quot;keycloak-vol&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    task <span class="token string">&quot;keycloak&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">driver</span> <span class="token punctuation">=</span> <span class="token string">&quot;docker&quot;</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">volume_mount</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">volume</span> <span class="token punctuation">=</span> <span class="token string">&quot;keycloak-vol&quot;</span></span>
<span class="line">        <span class="token property">destination</span> <span class="token punctuation">=</span> <span class="token string">&quot;/opt/jboss/keycloak/standalone/data&quot;</span></span>
<span class="line">        <span class="token property">read_only</span> <span class="token punctuation">=</span> <span class="token boolean">false</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">config</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">image</span> <span class="token punctuation">=</span> <span class="token string">&quot;quay.io/keycloak/keycloak:14.0.0&quot;</span></span>
<span class="line">        <span class="token keyword">port_map</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">keycloak</span> <span class="token punctuation">=</span> <span class="token number">8080</span></span>
<span class="line">          <span class="token property">callback</span> <span class="token punctuation">=</span> <span class="token number">8250</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">env</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">KEYCLOAK_USER</span> <span class="token punctuation">=</span> <span class="token string">&quot;admin&quot;</span></span>
<span class="line">        <span class="token property">KEYCLOAK_PASSWORD</span> <span class="token punctuation">=</span> <span class="token string">&quot;admin&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">resources</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">memory</span> <span class="token punctuation">=</span> <span class="token number">550</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">network</span> <span class="token punctuation">{</span></span>
<span class="line">          port <span class="token string">&quot;keycloak&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">static</span> <span class="token punctuation">=</span> <span class="token number">18080</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">          port <span class="token string">&quot;callback&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">static</span> <span class="token punctuation">=</span> <span class="token number">18250</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">service</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;keycloak&quot;</span></span>
<span class="line">        <span class="token property">tags</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;auth&quot;</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">check</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">type</span>  <span class="token punctuation">=</span> <span class="token string">&quot;tcp&quot;</span></span>
<span class="line">          <span class="token property">interval</span> <span class="token punctuation">=</span> <span class="token string">&quot;10s&quot;</span></span>
<span class="line">          <span class="token property">timeout</span>  <span class="token punctuation">=</span> <span class="token string">&quot;2s&quot;</span></span>
<span class="line">          <span class="token property">port</span>  <span class="token punctuation">=</span> <span class="token string">&quot;keycloak&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),l=[t];function c(o,i){return s(),a("div",null,l)}const k=n(e,[["render",c],["__file","keycloak.html.vue"]]),d=JSON.parse('{"path":"/04-HashiCorp/07-Nomad/05-SampleJob/keycloak.html","title":"Keycloak","lang":"ko-KR","frontmatter":{"description":"Nomad Sample","tag":["Nomad","Sample","Job"],"author":"GS","head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/07-Nomad/05-SampleJob/keycloak.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"Keycloak"}],["meta",{"property":"og:description","content":"Nomad Sample"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-03-08T06:55:52.000Z"}],["meta",{"property":"article:author","content":"GS"}],["meta",{"property":"article:tag","content":"Nomad"}],["meta",{"property":"article:tag","content":"Sample"}],["meta",{"property":"article:tag","content":"Job"}],["meta",{"property":"article:modified_time","content":"2024-03-08T06:55:52.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Keycloak\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-08T06:55:52.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"GS\\"}]}"]]},"headers":[],"git":{"createdTime":1632449100000,"updatedTime":1709880952000,"contributors":[{"name":"Administrator","email":"admin@example.com","commits":1},{"name":"Great-Stone","email":"hahohh@gmail.com","commits":1},{"name":"ung","email":"ung@mz.co.kr","commits":1}]},"readingTime":{"minutes":1.58,"words":95},"filePathRelative":"04-HashiCorp/07-Nomad/05-SampleJob/keycloak.md","localizedDate":"2021년 9월 24일","excerpt":"\\n<p>Keycloak은 Stateful 한 특성이 있어서 볼륨을 붙여주는것이 좋다.</p>\\n<div class=\\"language-hcl\\" data-highlighter=\\"prismjs\\" data-ext=\\"hcl\\" data-title=\\"hcl\\"><pre class=\\"language-hcl\\"><code><span class=\\"line\\"><span class=\\"token comment\\">// nomad namespace apply -description \\"Keycloak\\" keycloak</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">job <span class=\\"token string\\">\\"keycloak\\"</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">type</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"service\\"</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">datacenters</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"dc1\\"</span><span class=\\"token punctuation\\">]</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">namespace</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"keycloak\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">  group <span class=\\"token string\\">\\"keycloak\\"</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">    <span class=\\"token property\\">count</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token number\\">1</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">    volume <span class=\\"token string\\">\\"keycloak-vol\\"</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">      <span class=\\"token property\\">type</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"host\\"</span></span>\\n<span class=\\"line\\">      <span class=\\"token property\\">read_only</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token boolean\\">false</span></span>\\n<span class=\\"line\\">      <span class=\\"token property\\">source</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"keycloak-vol\\"</span></span>\\n<span class=\\"line\\">    <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">    task <span class=\\"token string\\">\\"keycloak\\"</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">      <span class=\\"token property\\">driver</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"docker\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token keyword\\">volume_mount</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">        <span class=\\"token property\\">volume</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"keycloak-vol\\"</span></span>\\n<span class=\\"line\\">        <span class=\\"token property\\">destination</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"/opt/jboss/keycloak/standalone/data\\"</span></span>\\n<span class=\\"line\\">        <span class=\\"token property\\">read_only</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token boolean\\">false</span></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token keyword\\">config</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">        <span class=\\"token property\\">image</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"quay.io/keycloak/keycloak:14.0.0\\"</span></span>\\n<span class=\\"line\\">        <span class=\\"token keyword\\">port_map</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">          <span class=\\"token property\\">keycloak</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token number\\">8080</span></span>\\n<span class=\\"line\\">          <span class=\\"token property\\">callback</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token number\\">8250</span></span>\\n<span class=\\"line\\">        <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">      </span>\\n<span class=\\"line\\">      <span class=\\"token keyword\\">env</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">        <span class=\\"token property\\">KEYCLOAK_USER</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"admin\\"</span></span>\\n<span class=\\"line\\">        <span class=\\"token property\\">KEYCLOAK_PASSWORD</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"admin\\"</span></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token keyword\\">resources</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">        <span class=\\"token property\\">memory</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token number\\">550</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">        <span class=\\"token keyword\\">network</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">          port <span class=\\"token string\\">\\"keycloak\\"</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">            <span class=\\"token property\\">static</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token number\\">18080</span></span>\\n<span class=\\"line\\">          <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">          port <span class=\\"token string\\">\\"callback\\"</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">            <span class=\\"token property\\">static</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token number\\">18250</span></span>\\n<span class=\\"line\\">          <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">        <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token keyword\\">service</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">        <span class=\\"token property\\">name</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"keycloak\\"</span></span>\\n<span class=\\"line\\">        <span class=\\"token property\\">tags</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"auth\\"</span><span class=\\"token punctuation\\">]</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">        <span class=\\"token keyword\\">check</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">          <span class=\\"token property\\">type</span>  <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"tcp\\"</span></span>\\n<span class=\\"line\\">          <span class=\\"token property\\">interval</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"10s\\"</span></span>\\n<span class=\\"line\\">          <span class=\\"token property\\">timeout</span>  <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"2s\\"</span></span>\\n<span class=\\"line\\">          <span class=\\"token property\\">port</span>  <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"keycloak\\"</span></span>\\n<span class=\\"line\\">        <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">    <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">  <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"></span></code></pre></div>","copyright":{"author":"GS"}}');export{k as comp,d as data};
