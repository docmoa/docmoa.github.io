import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as a,c as n,h as e}from"./app-DVMlqOhY.js";const t={},l=e(`<h1 id="vault-server-tls-설정" tabindex="-1"><a class="header-anchor" href="#vault-server-tls-설정"><span>Vault Server tls 설정</span></a></h1><ul><li>Consul tls create 명령어를 이용하여 인증서 생성, 그외에 사설인증서 만드는 방법으로는 더 테스트 해봐야 할듯</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># consul tls create로 인증서 생성</span></span>
<span class="line">consul tls ca create <span class="token parameter variable">-domain</span><span class="token operator">=</span>vault <span class="token parameter variable">-days</span> <span class="token number">3650</span></span>
<span class="line">consul tls cert create <span class="token parameter variable">-domain</span><span class="token operator">=</span>vault <span class="token parameter variable">-dc</span><span class="token operator">=</span>global  <span class="token parameter variable">-server</span> <span class="token parameter variable">-days</span> <span class="token number">3650</span></span>
<span class="line">consul tls cert create <span class="token parameter variable">-domain</span><span class="token operator">=</span>vault <span class="token parameter variable">-dc</span><span class="token operator">=</span>global  <span class="token parameter variable">-client</span> <span class="token parameter variable">-days</span> <span class="token number">3650</span></span>
<span class="line">consul tls cert create <span class="token parameter variable">-domain</span><span class="token operator">=</span>vault <span class="token parameter variable">-dc</span><span class="token operator">=</span>global  <span class="token parameter variable">-cli</span> <span class="token parameter variable">-days</span> <span class="token number">3650</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># vault config는 아래와 같다.</span></span>
<span class="line">ui <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">storage <span class="token string">&quot;consul&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">  address <span class="token operator">=</span> <span class="token string">&quot;127.0.0.1:8500&quot;</span></span>
<span class="line">  path    <span class="token operator">=</span> <span class="token string">&quot;vault/&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">listener <span class="token string">&quot;tcp&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">  address         <span class="token operator">=</span> <span class="token string">&quot;0.0.0.0:8200&quot;</span></span>
<span class="line">  <span class="token comment">#tls_disable = 1</span></span>
<span class="line">  tls_cert_file <span class="token operator">=</span> <span class="token string">&quot;/root/temp/global-server-vault-0.pem&quot;</span></span>
<span class="line">  tls_key_file  <span class="token operator">=</span> <span class="token string">&quot;/root/temp/global-server-vault-0-key.pem&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">disable_mlock <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">default_lease_ttl <span class="token operator">=</span> <span class="token string">&quot;768h&quot;</span></span>
<span class="line">max_lease_ttl <span class="token operator">=</span> <span class="token string">&quot;768h&quot;</span></span>
<span class="line"></span>
<span class="line">api_addr <span class="token operator">=</span>  <span class="token string">&quot;https://172.21.2.50:8200&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 명령어를 써야 할 경우 cli 인증서를 export 해줘야한다.</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_CACERT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${<span class="token environment constant">HOME</span>}</span>/temp/vault-agent-ca.pem&quot;</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_CLIENT_CERT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${<span class="token environment constant">HOME</span>}</span>/temp/global-cli-vault-0.pem&quot;</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_CLIENT_KEY</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${<span class="token environment constant">HOME</span>}</span>/temp/global-cli-vault-0-key.pem&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),p=[l];function o(r,c){return a(),n("div",null,p)}const u=s(t,[["render",o],["__file","tls-config.html.vue"]]),k=JSON.parse('{"path":"/04-HashiCorp/06-Vault/06-Config/tls-config.html","title":"Vault Server tls 설정","lang":"ko-KR","frontmatter":{"description":"Nomad Common Configuration","tag":["Vault","https","Configuration","Server"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/06-Vault/06-Config/tls-config.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"Vault Server tls 설정"}],["meta",{"property":"og:description","content":"Nomad Common Configuration"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-18T13:12:54.000Z"}],["meta",{"property":"article:tag","content":"Vault"}],["meta",{"property":"article:tag","content":"https"}],["meta",{"property":"article:tag","content":"Configuration"}],["meta",{"property":"article:tag","content":"Server"}],["meta",{"property":"article:modified_time","content":"2023-09-18T13:12:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Vault Server tls 설정\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-09-18T13:12:54.000Z\\",\\"author\\":[]}"]]},"headers":[],"git":{"createdTime":1645407262000,"updatedTime":1695042774000,"contributors":[{"name":"Great-Stone","email":"hahohh@gmail.com","commits":1},{"name":"ung","email":"swbs90@naver.com","commits":1}]},"readingTime":{"minutes":2.07,"words":124},"filePathRelative":"04-HashiCorp/06-Vault/06-Config/tls-config.md","localizedDate":"2022년 2월 21일","excerpt":"\\n<ul>\\n<li>Consul tls create 명령어를 이용하여 인증서 생성, 그외에 사설인증서 만드는 방법으로는 더 테스트 해봐야 할듯</li>\\n</ul>\\n<div class=\\"language-bash\\" data-highlighter=\\"prismjs\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"line\\"><span class=\\"token comment\\"># consul tls create로 인증서 생성</span></span>\\n<span class=\\"line\\">consul tls ca create <span class=\\"token parameter variable\\">-domain</span><span class=\\"token operator\\">=</span>vault <span class=\\"token parameter variable\\">-days</span> <span class=\\"token number\\">3650</span></span>\\n<span class=\\"line\\">consul tls cert create <span class=\\"token parameter variable\\">-domain</span><span class=\\"token operator\\">=</span>vault <span class=\\"token parameter variable\\">-dc</span><span class=\\"token operator\\">=</span>global  <span class=\\"token parameter variable\\">-server</span> <span class=\\"token parameter variable\\">-days</span> <span class=\\"token number\\">3650</span></span>\\n<span class=\\"line\\">consul tls cert create <span class=\\"token parameter variable\\">-domain</span><span class=\\"token operator\\">=</span>vault <span class=\\"token parameter variable\\">-dc</span><span class=\\"token operator\\">=</span>global  <span class=\\"token parameter variable\\">-client</span> <span class=\\"token parameter variable\\">-days</span> <span class=\\"token number\\">3650</span></span>\\n<span class=\\"line\\">consul tls cert create <span class=\\"token parameter variable\\">-domain</span><span class=\\"token operator\\">=</span>vault <span class=\\"token parameter variable\\">-dc</span><span class=\\"token operator\\">=</span>global  <span class=\\"token parameter variable\\">-cli</span> <span class=\\"token parameter variable\\">-days</span> <span class=\\"token number\\">3650</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span class=\\"token comment\\"># vault config는 아래와 같다.</span></span>\\n<span class=\\"line\\">ui <span class=\\"token operator\\">=</span> <span class=\\"token boolean\\">true</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">storage <span class=\\"token string\\">\\"consul\\"</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">  address <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"127.0.0.1:8500\\"</span></span>\\n<span class=\\"line\\">  path    <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"vault/\\"</span></span>\\n<span class=\\"line\\"><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">listener <span class=\\"token string\\">\\"tcp\\"</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">  address         <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"0.0.0.0:8200\\"</span></span>\\n<span class=\\"line\\">  <span class=\\"token comment\\">#tls_disable = 1</span></span>\\n<span class=\\"line\\">  tls_cert_file <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"/root/temp/global-server-vault-0.pem\\"</span></span>\\n<span class=\\"line\\">  tls_key_file  <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"/root/temp/global-server-vault-0-key.pem\\"</span></span>\\n<span class=\\"line\\"><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">disable_mlock <span class=\\"token operator\\">=</span> <span class=\\"token boolean\\">true</span></span>\\n<span class=\\"line\\">default_lease_ttl <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"768h\\"</span></span>\\n<span class=\\"line\\">max_lease_ttl <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"768h\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">api_addr <span class=\\"token operator\\">=</span>  <span class=\\"token string\\">\\"https://172.21.2.50:8200\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span class=\\"token comment\\"># 명령어를 써야 할 경우 cli 인증서를 export 해줘야한다.</span></span>\\n<span class=\\"line\\"><span class=\\"token builtin class-name\\">export</span> <span class=\\"token assign-left variable\\">VAULT_CACERT</span><span class=\\"token operator\\">=</span><span class=\\"token string\\">\\"<span class=\\"token variable\\">${<span class=\\"token environment constant\\">HOME</span>}</span>/temp/vault-agent-ca.pem\\"</span></span>\\n<span class=\\"line\\"><span class=\\"token builtin class-name\\">export</span> <span class=\\"token assign-left variable\\">VAULT_CLIENT_CERT</span><span class=\\"token operator\\">=</span><span class=\\"token string\\">\\"<span class=\\"token variable\\">${<span class=\\"token environment constant\\">HOME</span>}</span>/temp/global-cli-vault-0.pem\\"</span></span>\\n<span class=\\"line\\"><span class=\\"token builtin class-name\\">export</span> <span class=\\"token assign-left variable\\">VAULT_CLIENT_KEY</span><span class=\\"token operator\\">=</span><span class=\\"token string\\">\\"<span class=\\"token variable\\">${<span class=\\"token environment constant\\">HOME</span>}</span>/temp/global-cli-vault-0-key.pem\\"</span></span>\\n<span class=\\"line\\"></span></code></pre></div>"}');export{u as comp,k as data};
