import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as n,h as e}from"./app-DVMlqOhY.js";const t={},l=e(`<h1 id="vault-mariadb5-5-dynamic-secret" tabindex="-1"><a class="header-anchor" href="#vault-mariadb5-5-dynamic-secret"><span>Vault MariaDB5.5 Dynamic Secret</span></a></h1><ul><li><p>현상 : $vault read mysql/creds/my-role 입력시 오류</p></li><li><p>오류 내용 :</p></li></ul><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">Error reading mysql/creds/my-role: Error making API request.</span>
<span class="line">URL: GET http://127.0.0.1:8200/v1/mysql/creds/my-role</span>
<span class="line">Code: 500. Errors:</span>
<span class="line"></span>
<span class="line">* 1 error occurred:</span>
<span class="line">      * Error 1470: String &#39;v-root-my-role-87BP93fheiaHKGelc&#39; is too long for user name (should be no longer than 16)</span>
<span class="line"></span></code></pre></div><ul><li><p>원인 : mysql 버전이 오래되어 mysql-database-plugin이 아닌 mysql-legacy-database-plugin 을 사용해야 함.<br><a href="https://github.com/hashicorp/vault/issues/4602" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/vault/issues/4602</a></p></li><li><p>해결방안 : vault에서 database에 접근하기 위한 plugin설정시 아래와 같이 설정을 변경해야 함.</p><ul><li>기존설정</li></ul><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token function">write</span> mysql/config/mysql-database <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token assign-left variable">plugin_name</span><span class="token operator">=</span>mysql-database-plugin <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token assign-left variable">connection_url</span><span class="token operator">=</span><span class="token string">&quot;{{username}}:{{password}}@tcp(192.168.56.204:3306)/&quot;</span> <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token assign-left variable">allowed_roles</span><span class="token operator">=</span><span class="token string">&quot;my-role&quot;</span> <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token assign-left variable">username</span><span class="token operator">=</span><span class="token string">&quot;vault2&quot;</span> <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;vaultpass&quot;</span></span>
<span class="line"></span></code></pre></div><ul><li>변경설정</li></ul><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token function">write</span> mysql/config/mysql-database <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token assign-left variable">plugin_name</span><span class="token operator">=</span>mysql-legacy-database-plugin <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token assign-left variable">connection_url</span><span class="token operator">=</span><span class="token string">&quot;{{username}}:{{password}}@tcp(192.168.56.204:3306)/&quot;</span> <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token assign-left variable">allowed_roles</span><span class="token operator">=</span><span class="token string">&quot;my-role&quot;</span> <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token assign-left variable">username</span><span class="token operator">=</span><span class="token string">&quot;vault2&quot;</span> <span class="token punctuation">\\</span></span>
<span class="line"></span></code></pre></div></li></ul>`,4),o=[l];function p(r,i){return s(),n("div",null,o)}const m=a(t,[["render",p],["__file","vault-sizing.html.vue"]]),d=JSON.parse(`{"path":"/04-HashiCorp/06-Vault/05-TroubleShooting/vault-sizing.html","title":"Vault MariaDB5.5 Dynamic Secret","lang":"ko-KR","frontmatter":{"description":"MariaDB5.5버전에서 Dynamic Secret  구성을 위한 credential생성시 에러","tag":["vault","MiriaDB"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/06-Vault/05-TroubleShooting/vault-sizing.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"Vault MariaDB5.5 Dynamic Secret"}],["meta",{"property":"og:description","content":"MariaDB5.5버전에서 Dynamic Secret  구성을 위한 credential생성시 에러"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-18T13:12:54.000Z"}],["meta",{"property":"article:tag","content":"vault"}],["meta",{"property":"article:tag","content":"MiriaDB"}],["meta",{"property":"article:modified_time","content":"2023-09-18T13:12:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Vault MariaDB5.5 Dynamic Secret\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-09-18T13:12:54.000Z\\",\\"author\\":[]}"]]},"headers":[],"git":{"createdTime":1628563561000,"updatedTime":1695042774000,"contributors":[{"name":"Administrator","email":"admin@example.com","commits":1},{"name":"Great-Stone","email":"hahohh@gmail.com","commits":1}]},"readingTime":{"minutes":1.93,"words":116},"filePathRelative":"04-HashiCorp/06-Vault/05-TroubleShooting/vault-sizing.md","localizedDate":"2021년 8월 10일","excerpt":"\\n<ul>\\n<li>\\n<p>현상 : $vault read mysql/creds/my-role 입력시 오류</p>\\n</li>\\n<li>\\n<p>오류 내용 :</p>\\n</li>\\n</ul>\\n<div class=\\"language-text\\" data-highlighter=\\"prismjs\\" data-ext=\\"text\\" data-title=\\"text\\"><pre class=\\"language-text\\"><code><span class=\\"line\\">Error reading mysql/creds/my-role: Error making API request.</span>\\n<span class=\\"line\\">URL: GET http://127.0.0.1:8200/v1/mysql/creds/my-role</span>\\n<span class=\\"line\\">Code: 500. Errors:</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">* 1 error occurred:</span>\\n<span class=\\"line\\">      * Error 1470: String 'v-root-my-role-87BP93fheiaHKGelc' is too long for user name (should be no longer than 16)</span>\\n<span class=\\"line\\"></span></code></pre></div>"}`);export{m as comp,d as data};
