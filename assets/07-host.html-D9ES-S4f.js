import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as t,a,h as e}from"./app-DVMlqOhY.js";const o={},p=a("h1",{id:"_7-tomcat-host",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#_7-tomcat-host"},[a("span",null,"7. Tomcat HOST")])],-1),c=a("ul",null,[a("li",null,"호스트 구성"),a("li",null,"호스트 특징"),a("li",null,"host manager")],-1),l=a("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/hnLzh_WE8R8",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,-1),u=e(`<hr><h2 id="_7-1-호스트-구성" tabindex="-1"><a class="header-anchor" href="#_7-1-호스트-구성"><span>7.1 호스트 구성</span></a></h2><p>톰캣에 정의된 바로는 <code>Host</code>로 정의되나 일반적인 기능으로 표현한다면 가상 호스트(Virtual Host)와 같은 기능 입니다. 특정 host 명, 즉 http url로 서비스를 분기하는 역할을 합니다. <code>server.xml</code> 기본으로 설정되어있는 <code>localhost</code>인 호스트의 내용은 다음과 같습니다.</p><div class="language-xml" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Engine</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Catalina<span class="token punctuation">&quot;</span></span> <span class="token attr-name">defaultHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost<span class="token punctuation">&quot;</span></span> <span class="token attr-name">appBase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>webapps<span class="token punctuation">&quot;</span></span> <span class="token attr-name">unpackWARs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoDeploy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    ...</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Host</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Engine</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre></div><p>설정된 내용을 분석해본다면 <code>Catalina</code>라는 톰캣의 엔진에서 처리하는 기본 호스트는 <code>localhost</code>이고, <code>localhost</code>는 <code>webapps</code> 디렉토리를 기본 배치 디렉토리고 갖는다는 내용입니다. 기본 호스트로 지정된 호스트는 이외에 설정된 호스트 조건에 맞지 않은 모든 요청을 처리하게 됩니다. 이렇게 생성된 <code>localhost</code>는 <code>$CATALINA_HOME/conf/[ENGINENAME]/[HOSTNAME]</code> 과 같은 경로에 호스트만의 설정 값을 갖게 됩니다.</p><p>별도의 호스트 추가는 &#39;Engine&#39; 디스크립터 하위에 &#39;Host&#39; 디스크립터로 정의합니다. &#39;myhost&#39;라는 호스트는 다음과 같이 추가할 수 있습니다.</p><div class="language-xml" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Engine</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Catalina<span class="token punctuation">&quot;</span></span> <span class="token attr-name">defaultHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost<span class="token punctuation">&quot;</span></span> <span class="token attr-name">appBase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>webapps<span class="token punctuation">&quot;</span></span> <span class="token attr-name">unpackWARs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoDeploy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    ...</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Host</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myhost<span class="token punctuation">&quot;</span></span> <span class="token attr-name">appBase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>webapps_myhost<span class="token punctuation">&quot;</span></span> <span class="token attr-name">unpackWARs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoDeploy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    ...</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Host</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Engine</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre></div><p>새롭게 추가되는 호스트는 기본 배치경로를 다르게 설정합니다. 때문에 동일한 컨텍스트의 요청이라도 어떤 호스트가 처리하는가에 따라 다른 어플리케이션의 서비스를 이용하게 됩니다. 설정 후 톰캣 프로세스를 재기동하면 호스트 설정 디렉토리가 생성됨을 확인 할 수 있습니다.</p><h2 id="_7-2-호스트-특징" tabindex="-1"><a class="header-anchor" href="#_7-2-호스트-특징"><span>7.2 호스트 특징</span></a></h2><p>호스트의 기능은 주로 웹서버에서 많이 사용되는 기능입니다. 특정 url로 호출되는 요청을 각 요청 전달 목적지에 맞게 분배하는 역할을 수행하지요. 호스트는 톰캣에도 구현되어 있으며 이를 통해 하나의 톰캣 내에서 같은 컨텍스트를 갖는 요청의 처리가 가능합니다.</p><figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/hostRoot.jpg?token=ADUAZXPZNGFNIR7Z4S5S6MK67EUR6" alt="hostRoot" tabindex="0" loading="lazy"><figcaption>hostRoot</figcaption></figure><div class="hint-container tip"><p class="hint-container-title">팁</p><p>톰캣의 프로세스를 서비스 마다 생성하지 못하는 상황(e.g. 자원의 한계와 같은) 또는 서비스에서 소모하는 자원이 크지 않아 추가적인 프로세스를 기동하지 않아도 되는 상황 등 호스트의 기능을 활용 할수 있습니다.</p></div><h2 id="_7-3-host-manager" tabindex="-1"><a class="header-anchor" href="#_7-3-host-manager"><span>7.3 host manager</span></a></h2><p>호스트를 관리하기 위해 톰캣에서는 &#39;host manager&#39;를 제공합니다. 앞서 배치에서 보았던 &#39;Manage APP&#39;와 같이 호스트를 쉽게 구성할 수 있도록 UI환경을 제공합니다. 이를 통해 설정파일에 직접 수정하기보다 제공되는 UI로 정확하고 쉽게 구성하고 관리할 수 있도록 합니다.</p><ul><li><a href="http://ip" target="_blank" rel="noopener noreferrer">http://ip</a>:port 로 기본 톰캣 http 요청 (로컬에서 기본 설정으로 실행한 경우 <a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080</a>)</li><li>ROOT 어플리케이션의 호출 확인 후 좌/우측의 <code>Host Manager</code> 클릭</li><li>톰캣 유저의 설정이 되어있지 않으므로 로그인 창에서 &#39;취소&#39;버튼 클릭</li><li><code>$CATALINA_HOME/conf/tomcat-user.xml</code> 에 설정하는 방법을 에러페이지에서 확인</li><li>tomcat-user.xml에 다음과 같이 설정 추가 (e.g. <code>user/passwd</code>를 <code>admin/admin</code>으로 설정)</li></ul><div class="language-xml" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tomcat-users</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role</span> <span class="token attr-name">rolename</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manager-gui<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role</span> <span class="token attr-name">rolename</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin-gui<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user</span> <span class="token attr-name">username</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">roles</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manager-gui,admin-gui<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tomcat-users</span><span class="token punctuation">&gt;</span></span>\`\`\`</span>
<span class="line"></span></code></pre></div><ul><li>톰캣 재기동 후 다시 로그인 페이지 호출하여 설정한 <code>user/passwd</code> 입력 후 로그인</li></ul><figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/hostManager.jpg?token=ADUAZXORX3KILKKDCM4YLOK67EUSE" alt="hostManager" tabindex="0" loading="lazy"><figcaption>hostManager</figcaption></figure><p><code>host manager</code>에서는 기본 호스트 외에 추가적인 호스트에 대한 추가를 할 수 있도록 <code>Add Virtual Host</code>를 사용할 수 있습니다. <code>Host</code> 디스크립터에서 정의되는 내용을 각 항목에 맞게 입력 할 수 있고 이렇게 추가된 호스트는 <code>Host name</code> 테이블의 <code>commands</code>에서 개별적으로 시작과 정지가 가능합니다. 호스트가 정지되어 비활성화 된 상태에서는 해당 호스트의 요청 url에 맞게 들어오더라도 기본 호스트가 처리하게 됩니다. <code>host manager</code>는 웹페이지를 통한 호스트의 추가/삭제/컨트롤이 가능하므로 외부, 또는 관리자가 아닌 사용자가 접근하지 못하도록 해야 합니다.</p>`,19),i=[p,c,l,u];function r(k,m){return s(),t("div",null,i)}const h=n(o,[["render",r],["__file","07-host.html.vue"]]),q=JSON.parse('{"path":"/05-Software/Tomcat/tomcat101/07-host.html","title":"7. Tomcat HOST","lang":"ko-KR","frontmatter":{"description":"Tomcat","tag":["Tomcat","Java"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/05-Software/Tomcat/tomcat101/07-host.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"7. Tomcat HOST"}],["meta",{"property":"og:description","content":"Tomcat"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/Great-Stone/images/master/uPic/hostRoot.jpg?token=ADUAZXPZNGFNIR7Z4S5S6MK67EUR6"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-18T13:12:54.000Z"}],["meta",{"property":"article:tag","content":"Tomcat"}],["meta",{"property":"article:tag","content":"Java"}],["meta",{"property":"article:modified_time","content":"2023-09-18T13:12:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"7. Tomcat HOST\\",\\"image\\":[\\"https://raw.githubusercontent.com/Great-Stone/images/master/uPic/hostRoot.jpg?token=ADUAZXPZNGFNIR7Z4S5S6MK67EUR6\\",\\"https://raw.githubusercontent.com/Great-Stone/images/master/uPic/hostManager.jpg?token=ADUAZXORX3KILKKDCM4YLOK67EUSE\\"],\\"dateModified\\":\\"2023-09-18T13:12:54.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"7.1 호스트 구성","slug":"_7-1-호스트-구성","link":"#_7-1-호스트-구성","children":[]},{"level":2,"title":"7.2 호스트 특징","slug":"_7-2-호스트-특징","link":"#_7-2-호스트-특징","children":[]},{"level":2,"title":"7.3 host manager","slug":"_7-3-host-manager","link":"#_7-3-host-manager","children":[]}],"git":{"createdTime":1640259507000,"updatedTime":1695042774000,"contributors":[{"name":"Administrator","email":"admin@example.com","commits":1},{"name":"Great-Stone","email":"hahohh@gmail.com","commits":1}]},"readingTime":{"minutes":3.42,"words":205},"filePathRelative":"05-Software/Tomcat/tomcat101/07-host.md","localizedDate":"2021년 12월 23일","excerpt":"\\n<ul>\\n<li>호스트 구성</li>\\n<li>호스트 특징</li>\\n<li>host manager</li>\\n</ul>\\n<iframe width=\\"560\\" height=\\"315\\" src=\\"https://www.youtube.com/embed/hnLzh_WE8R8\\" frameborder=\\"0\\" allow=\\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\\" allowfullscreen=\\"\\"></iframe>\\n<hr>\\n<h2>7.1 호스트 구성</h2>\\n<p>톰캣에 정의된 바로는 <code>Host</code>로 정의되나 일반적인 기능으로 표현한다면 가상 호스트(Virtual Host)와 같은 기능 입니다. 특정 host 명, 즉 http url로 서비스를 분기하는 역할을 합니다. <code>server.xml</code> 기본으로 설정되어있는 <code>localhost</code>인 호스트의 내용은 다음과 같습니다.</p>"}');export{h as comp,q as data};
