import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,h as e}from"./app-DVMlqOhY.js";const p={},t=e(`<h1 id="nomad-클라이언트-설정" tabindex="-1"><a class="header-anchor" href="#nomad-클라이언트-설정"><span>Nomad 클라이언트 설정</span></a></h1><div class="hint-container tip"><p class="hint-container-title">팁</p><p>최대한 설정값을 넣어보고, 번역기도 돌려보고 물어도 보고 넣은 Client설정 파일입니다.<br> 네트워크는 프라이빗(온프레이머스) 환경입니다.</p></div><div class="language-hcl line-numbers-mode" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment">#nomad client 설정</span></span>
<span class="line"> </span>
<span class="line"><span class="token keyword">client</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">enabled</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">servers</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;172.30.1.17&quot;</span>,<span class="token string">&quot;172.30.1.18&quot;</span>,<span class="token string">&quot;172.30.1.19&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token keyword">server_join</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">retry_join</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;172.30.1.17&quot;</span>,<span class="token string">&quot;172.30.1.18&quot;</span>,<span class="token string">&quot;172.30.1.19&quot;</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token property">retry_max</span> <span class="token punctuation">=</span> <span class="token number">3</span></span>
<span class="line">    <span class="token property">retry_interval</span> <span class="token punctuation">=</span> <span class="token string">&quot;15s&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">#host에서 nomad에서 사용할 수 있는 volume 설정</span></span>
<span class="line">  host_volume <span class="token string">&quot;logs&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">path</span>      <span class="token punctuation">=</span> <span class="token string">&quot;/var/logs/elk/&quot;</span></span>
<span class="line">    <span class="token property">read_only</span> <span class="token punctuation">=</span> <span class="token boolean">false</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">#각각의 client의 레이블 작성</span></span>
<span class="line">  <span class="token comment">#meta {</span></span>
<span class="line">  <span class="token comment">#   name = &quot;moon&quot;</span></span>
<span class="line">  <span class="token comment">#   zone = &quot;web&quot;</span></span>
<span class="line">  <span class="token comment">#}</span></span>
<span class="line">  <span class="token comment">#nomad에서 예약할 자원</span></span>
<span class="line">  <span class="token keyword">reserved</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">#Specifies the amount of CPU to reserve, in MHz.</span></span>
<span class="line">    <span class="token property">cpu</span> <span class="token punctuation">=</span> <span class="token number">200</span></span>
<span class="line">    <span class="token comment">#Specifies the amount of memory to reserve, in MB.</span></span>
<span class="line">    <span class="token property">memory</span> <span class="token punctuation">=</span> <span class="token number">8192</span></span>
<span class="line">    <span class="token comment">#Specifies the amount of disk to reserve, in MB.</span></span>
<span class="line">    <span class="token property">disk</span> <span class="token punctuation">=</span> <span class="token number">102400</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token property">no_host_uuid</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token comment">#bridge network interface name</span></span>
<span class="line">  <span class="token property">bridge_network_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;nomad&quot;</span></span>
<span class="line">  <span class="token property">bridge_network_subnet</span> <span class="token punctuation">=</span> <span class="token string">&quot;172.26.64.0/20&quot;</span></span>
<span class="line">  <span class="token property">cni_path</span> <span class="token punctuation">=</span> <span class="token string">&quot;/opt/cni/bin&quot;</span></span>
<span class="line">  <span class="token property">cni_config_dir</span> <span class="token punctuation">=</span> <span class="token string">&quot;/opt/cni/config&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">#tls 설정</span></span>
<span class="line"><span class="token keyword">tls</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">http</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">rpc</span>  <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line"> </span>
<span class="line">  <span class="token property">ca_file</span>   <span class="token punctuation">=</span> <span class="token string">&quot;/opt/ssl/nomad/nomad-agent-ca.pem&quot;</span></span>
<span class="line">  <span class="token property">cert_file</span> <span class="token punctuation">=</span> <span class="token string">&quot;/opt/ssl/nomad/global-client-nomad-0.pem&quot;</span></span>
<span class="line">  <span class="token property">key_file</span>  <span class="token punctuation">=</span> <span class="token string">&quot;/opt/ssl/nomad/global-client-nomad-0-key.pem&quot;</span></span>
<span class="line"> </span>
<span class="line">  <span class="token property">verify_server_hostname</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">verify_https_client</span>    <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="nomad-클라이언트-최소-설정-20220807기준" tabindex="-1"><a class="header-anchor" href="#nomad-클라이언트-최소-설정-20220807기준"><span>Nomad 클라이언트 최소 설정 (20220807기준)</span></a></h1><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">data_dir  <span class="token operator">=</span> <span class="token string">&quot;/opt/nomad/data&quot;</span></span>
<span class="line">bind_addr <span class="token operator">=</span> <span class="token string">&quot;0.0.0.0&quot;</span></span>
<span class="line"></span>
<span class="line">client <span class="token punctuation">{</span></span>
<span class="line">  enabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  servers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;server ip&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token comment"># sidecar image 고정</span></span>
<span class="line">  meta <span class="token punctuation">{</span></span>
<span class="line">   connect.sidecar_image <span class="token operator">=</span> <span class="token string">&quot;envoyproxy/envoy:v1.21.3&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#consul 정보 입력</span></span>
<span class="line">consul <span class="token punctuation">{</span></span>
<span class="line">  address  <span class="token operator">=</span> <span class="token string">&quot;127.0.0.1:8501&quot;</span></span>
<span class="line">  <span class="token assign-left variable">grpc_address</span><span class="token operator">=</span><span class="token string">&quot;127.0.0.1:8502&quot;</span></span>
<span class="line">  server_service_name <span class="token operator">=</span> <span class="token string">&quot;nomad&quot;</span></span>
<span class="line">  client_service_name <span class="token operator">=</span> <span class="token string">&quot;nomad-client&quot;</span></span>
<span class="line">  auto_advertise  <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  server_auto_join  <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  client_auto_join  <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  ssl       <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  verify_ssl <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">  ca_file   <span class="token operator">=</span> <span class="token string">&quot;/opt/consul/consul-agent-ca.pem&quot;</span></span>
<span class="line">  cert_file <span class="token operator">=</span> <span class="token string">&quot;/opt/consul/my-dc-client-consul-0.pem&quot;</span></span>
<span class="line">  key_file  <span class="token operator">=</span> <span class="token string">&quot;/opt/consul/my-dc-client-consul-0-key.pem&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">plugin <span class="token string">&quot;docker&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">  config <span class="token punctuation">{</span></span>
<span class="line">    auth <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),l=[t];function o(c,i){return s(),a("div",null,l)}const d=n(p,[["render",o],["__file","client.html.vue"]]),m=JSON.parse('{"path":"/04-HashiCorp/07-Nomad/02-Config/client.html","title":"Nomad 클라이언트 설정","lang":"ko-KR","frontmatter":{"description":"Nomad Client Configuration","tag":["Nomad","Enterprise","Configuration","Client"],"head":[["meta",{"property":"og:url","content":"https://docmoa.github.io/04-HashiCorp/07-Nomad/02-Config/client.html"}],["meta",{"property":"og:site_name","content":"docmoa"}],["meta",{"property":"og:title","content":"Nomad 클라이언트 설정"}],["meta",{"property":"og:description","content":"Nomad Client Configuration"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2023-09-18T13:12:54.000Z"}],["meta",{"property":"article:tag","content":"Nomad"}],["meta",{"property":"article:tag","content":"Enterprise"}],["meta",{"property":"article:tag","content":"Configuration"}],["meta",{"property":"article:tag","content":"Client"}],["meta",{"property":"article:modified_time","content":"2023-09-18T13:12:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nomad 클라이언트 설정\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-09-18T13:12:54.000Z\\",\\"author\\":[]}"]]},"headers":[],"git":{"createdTime":1629555140000,"updatedTime":1695042774000,"contributors":[{"name":"Great-Stone","email":"hahohh@gmail.com","commits":2},{"name":"admin","email":"sulee@expernet.co.kr","commits":1},{"name":"swbs90","email":"swbs90@naver.com","commits":1}]},"readingTime":{"minutes":3.08,"words":185},"filePathRelative":"04-HashiCorp/07-Nomad/02-Config/client.md","localizedDate":"2021년 8월 21일","excerpt":"\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">팁</p>\\n<p>최대한 설정값을 넣어보고, 번역기도 돌려보고 물어도 보고 넣은 Client설정 파일입니다.<br>\\n네트워크는 프라이빗(온프레이머스) 환경입니다.</p>\\n</div>\\n<div class=\\"language-hcl\\" data-highlighter=\\"prismjs\\" data-ext=\\"hcl\\" data-title=\\"hcl\\"><pre class=\\"language-hcl\\"><code><span class=\\"line\\"><span class=\\"token comment\\">#nomad client 설정</span></span>\\n<span class=\\"line\\"> </span>\\n<span class=\\"line\\"><span class=\\"token keyword\\">client</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">enabled</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token boolean\\">true</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">servers</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"172.30.1.17\\"</span>,<span class=\\"token string\\">\\"172.30.1.18\\"</span>,<span class=\\"token string\\">\\"172.30.1.19\\"</span><span class=\\"token punctuation\\">]</span></span>\\n<span class=\\"line\\">  <span class=\\"token keyword\\">server_join</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">    <span class=\\"token property\\">retry_join</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"172.30.1.17\\"</span>,<span class=\\"token string\\">\\"172.30.1.18\\"</span>,<span class=\\"token string\\">\\"172.30.1.19\\"</span><span class=\\"token punctuation\\">]</span></span>\\n<span class=\\"line\\">    <span class=\\"token property\\">retry_max</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token number\\">3</span></span>\\n<span class=\\"line\\">    <span class=\\"token property\\">retry_interval</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"15s\\"</span></span>\\n<span class=\\"line\\">  <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">  <span class=\\"token comment\\">#host에서 nomad에서 사용할 수 있는 volume 설정</span></span>\\n<span class=\\"line\\">  host_volume <span class=\\"token string\\">\\"logs\\"</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">    <span class=\\"token property\\">path</span>      <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"/var/logs/elk/\\"</span></span>\\n<span class=\\"line\\">    <span class=\\"token property\\">read_only</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token boolean\\">false</span></span>\\n<span class=\\"line\\">  <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">  <span class=\\"token comment\\">#각각의 client의 레이블 작성</span></span>\\n<span class=\\"line\\">  <span class=\\"token comment\\">#meta {</span></span>\\n<span class=\\"line\\">  <span class=\\"token comment\\">#   name = \\"moon\\"</span></span>\\n<span class=\\"line\\">  <span class=\\"token comment\\">#   zone = \\"web\\"</span></span>\\n<span class=\\"line\\">  <span class=\\"token comment\\">#}</span></span>\\n<span class=\\"line\\">  <span class=\\"token comment\\">#nomad에서 예약할 자원</span></span>\\n<span class=\\"line\\">  <span class=\\"token keyword\\">reserved</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">    <span class=\\"token comment\\">#Specifies the amount of CPU to reserve, in MHz.</span></span>\\n<span class=\\"line\\">    <span class=\\"token property\\">cpu</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token number\\">200</span></span>\\n<span class=\\"line\\">    <span class=\\"token comment\\">#Specifies the amount of memory to reserve, in MB.</span></span>\\n<span class=\\"line\\">    <span class=\\"token property\\">memory</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token number\\">8192</span></span>\\n<span class=\\"line\\">    <span class=\\"token comment\\">#Specifies the amount of disk to reserve, in MB.</span></span>\\n<span class=\\"line\\">    <span class=\\"token property\\">disk</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token number\\">102400</span></span>\\n<span class=\\"line\\">  <span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">no_host_uuid</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token boolean\\">true</span></span>\\n<span class=\\"line\\">  <span class=\\"token comment\\">#bridge network interface name</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">bridge_network_name</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"nomad\\"</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">bridge_network_subnet</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"172.26.64.0/20\\"</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">cni_path</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"/opt/cni/bin\\"</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">cni_config_dir</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"/opt/cni/config\\"</span></span>\\n<span class=\\"line\\"><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"><span class=\\"token comment\\">#tls 설정</span></span>\\n<span class=\\"line\\"><span class=\\"token keyword\\">tls</span> <span class=\\"token punctuation\\">{</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">http</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token boolean\\">true</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">rpc</span>  <span class=\\"token punctuation\\">=</span> <span class=\\"token boolean\\">true</span></span>\\n<span class=\\"line\\"> </span>\\n<span class=\\"line\\">  <span class=\\"token property\\">ca_file</span>   <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"/opt/ssl/nomad/nomad-agent-ca.pem\\"</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">cert_file</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"/opt/ssl/nomad/global-client-nomad-0.pem\\"</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">key_file</span>  <span class=\\"token punctuation\\">=</span> <span class=\\"token string\\">\\"/opt/ssl/nomad/global-client-nomad-0-key.pem\\"</span></span>\\n<span class=\\"line\\"> </span>\\n<span class=\\"line\\">  <span class=\\"token property\\">verify_server_hostname</span> <span class=\\"token punctuation\\">=</span> <span class=\\"token boolean\\">true</span></span>\\n<span class=\\"line\\">  <span class=\\"token property\\">verify_https_client</span>    <span class=\\"token punctuation\\">=</span> <span class=\\"token boolean\\">true</span></span>\\n<span class=\\"line\\"><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\"></span></code></pre></div>"}');export{d as comp,m as data};
