<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="https://docmoa.github.io/rss.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <atom:link href="https://docmoa.github.io/rss.xml" rel="self" type="application/rss+xml"/>
    <title>docmoa</title>
    <link>https://docmoa.github.io/</link>
    <description>A docs for docmoa</description>
    <language>ko-KR</language>
    <pubDate>Wed, 12 Feb 2025 02:12:01 GMT</pubDate>
    <lastBuildDate>Wed, 12 Feb 2025 02:12:01 GMT</lastBuildDate>
    <generator>@vuepress/plugin-feed</generator>
    <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
    <item>
      <title>Vaultë¥¼ í™œìš©í•œ mTLS ì¸ì¦ ìë™í™”ë¡œ ì›¹ ì„œë¹„ìŠ¤ ë³´ì•ˆ ê°•í™”í•˜ê¸°</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/mtls-authentication-to-secure-web-services.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/mtls-authentication-to-secure-web-services.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vaultë¥¼ í™œìš©í•œ mTLS ì¸ì¦ ìë™í™”ë¡œ ì›¹ ì„œë¹„ìŠ¤ ë³´ì•ˆ ê°•í™”í•˜ê¸°</source>
      <description>Vaultë¥¼ í™œìš©í•œ mTLS ì¸ì¦ ìë™í™”ë¡œ ì›¹ ì„œë¹„ìŠ¤ ë³´ì•ˆ ê°•í™”í•˜ê¸° ì›¹ ì„œë¹„ìŠ¤ì˜ ë³´ì•ˆì€ í˜„ëŒ€ IT ì¸í”„ë¼ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. íŠ¹íˆ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ì„œë¹„ìŠ¤ì—ì„œëŠ” ë‹¨ìˆœí•œ ì‚¬ìš©ìëª…/íŒ¨ìŠ¤ì›Œë“œ ì¸ì¦ì„ ë„˜ì–´ì„  ë³´ë‹¤ ê°•ë ¥í•œ ë³´ì•ˆ ë©”ì»¤ë‹ˆì¦˜ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë§¥ë½ì—ì„œ ìƒí˜¸ TLS(mTLS) ì¸ì¦ì€ í´ë¼ì´...</description>
      <pubDate>Wed, 12 Feb 2025 01:58:15 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ì›¹ ì„œë¹„ìŠ¤ì˜ ë³´ì•ˆì€ í˜„ëŒ€ IT ì¸í”„ë¼ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. íŠ¹íˆ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ì„œë¹„ìŠ¤ì—ì„œëŠ” ë‹¨ìˆœí•œ ì‚¬ìš©ìëª…/íŒ¨ìŠ¤ì›Œë“œ ì¸ì¦ì„ ë„˜ì–´ì„  ë³´ë‹¤ ê°•ë ¥í•œ ë³´ì•ˆ ë©”ì»¤ë‹ˆì¦˜ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë§¥ë½ì—ì„œ ìƒí˜¸ TLS(mTLS) ì¸ì¦ì€ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ ì–‘ë°©í–¥ ì¸ì¦ì„ ì œê³µí•˜ëŠ” ê°•ë ¥í•œ ë³´ì•ˆ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.</p>
<h2>mTLSì˜ í•„ìš”ì„±ê³¼ ë„ì „ ê³¼ì œ</h2>
<blockquote>
<p>ì°¸ê³  'mTLS ì¸ì¦' : <a href="https://wiki.kreonet.net/web-auth-sso/mtls-51119765.html" target="_blank" rel="noopener noreferrer">https://wiki.kreonet.net/web-auth-sso/mtls-51119765.html</a></p>
</blockquote>
<p>mTLS(mutual TLS)ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ì„œë¡œë¥¼ ì¸ì¦í•˜ëŠ” í”„ë¡œí† ì½œì…ë‹ˆë‹¤. ì¼ë°˜ì ì¸ TLSê°€ ì„œë²„ë§Œì„ ì¸ì¦í•˜ëŠ” ê²ƒê³¼ ë‹¬ë¦¬, mTLSì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ë„ ì¸ì¦ì„œë¥¼ í†µí•´ ìì‹ ì˜ ì‹ ì›ì„ ì¦ëª…í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì„ ì œê³µí•©ë‹ˆë‹¤:</p>
<ul>
<li>ë¬´ë‹¨ ì•¡ì„¸ìŠ¤ ë°©ì§€</li>
<li>ì¤‘ê°„ì ê³µê²© ì°¨ë‹¨</li>
<li>í´ë¼ì´ì–¸íŠ¸ ì‹ ì›ì˜ ì•”í˜¸í™” ê¸°ë°˜ ê²€ì¦</li>
<li>APIì™€ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì„¸ë°€í•œ ì ‘ê·¼ ì œì–´</li>
</ul>
<p>íŠ¹íˆ ìƒí˜¸ê°„ ì¸ì¦ì´ë¼ëŠ” ì ì—ì„œ ë¬´ì‘ìœ„ë¡œ ì›¹ì‚¬ì´íŠ¸ë¥¼ í¬ë¡¤ë§ í•˜ê±°ë‚˜, ì™¸ë¶€ì¸ì´ ì ‘ê·¼í•˜ì§€ ë§ì•„ì•¼í•  ì›¹ ë¦¬ì†ŒìŠ¤ë¥¼ ë³´í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ mTLS êµ¬í˜„ì—ëŠ” ì—¬ëŸ¬ ê°€ì§€ ì–´ë ¤ì›€ì´ ìˆìŠµë‹ˆë‹¤:</p>
<ul>
<li>ì¸ì¦ì„œ ìˆ˜ëª… ì£¼ê¸° ê´€ë¦¬ì˜ ë³µì¡ì„±</li>
<li>ì¸ì¦ì„œ ë°°í¬ì™€ ê°±ì‹ ì˜ ë²ˆê±°ë¡œì›€</li>
<li>ì‚¬ìš©ì ê²½í—˜ ì €í•˜ ê°€ëŠ¥ì„±</li>
<li>ì¸í”„ë¼ êµ¬ì„±ì˜ ë³µì¡ì„± ì¦ê°€</li>
</ul>
<h2>HashiCorp Vaultë¥¼ í™œìš©í•œ ìë™í™”ëœ mTLS êµ¬í˜„</h2>
<p>HashiCorp VaultëŠ” ì´ëŸ¬í•œ mTLS êµ¬í˜„ì˜ ì–´ë ¤ì›€ì„ í•´ê²°í•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤. Vaultì˜ PKI ì‹œí¬ë¦¿ ì—”ì§„ì„ í™œìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<h3>1. ìë™í™”ëœ ì¸ì¦ì„œ ìˆ˜ëª… ì£¼ê¸° ê´€ë¦¬</h3>
<p>VaultëŠ” PKI ì‹œí¬ë¦¿ ì—”ì§„ì„ í†µí•´ ì¸ì¦ì„œì˜ ë°œê¸‰, ê°±ì‹ , íê¸°ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì„ ì œê³µí•©ë‹ˆë‹¤:</p>
<ul>
<li>ì¸ì¦ì„œ ë§Œë£Œ ê´€ë¦¬ì˜ ìë™í™”</li>
<li>ì‹¤ì‹œê°„ ì¸ì¦ì„œ ë°œê¸‰ ë° ê°±ì‹ </li>
<li>ì¤‘ì•™í™”ëœ ì¸ì¦ì„œ ê´€ë¦¬</li>
</ul>
<h3>2. ì„¸ë°€í•œ ì ‘ê·¼ ì œì–´</h3>
<p>Vaultì˜ ì •ì±… ê¸°ë°˜ ì ‘ê·¼ ì œì–´ë¥¼ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ë³´ì•ˆ ê°•í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤:</p>
<ul>
<li>ì‚¬ìš©ì/ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ë§ì¶¤í˜• ì¸ì¦ì„œ ì •ì±…</li>
<li>ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´(RBAC) êµ¬í˜„</li>
<li>ê°ì‚¬ ë¡œê·¸ë¥¼ í†µí•œ ëª¨ë“  ì¸ì¦ì„œ ì‘ì—… ì¶”ì </li>
</ul>
<h3>3. ë³´ì•ˆ ê°•í™”</h3>
<p>Vaultë¥¼ í†µí•œ mTLS êµ¬í˜„ì€ ë‹¤ìŒê³¼ ê°™ì€ ë³´ì•ˆ ì´ì ì„ ì œê³µí•©ë‹ˆë‹¤:</p>
<ul>
<li>ì¤‘ìš” ì‹œìŠ¤í…œì— ëŒ€í•œ ë¬´ë‹¨ ì ‘ê·¼ ì°¨ë‹¨</li>
<li>ì•”í˜¸í™”ëœ í†µì‹  ë³´ì¥</li>
<li>ë¯¼ê°í•œ ë°ì´í„°ì˜ ë…¸ì¶œ ìœ„í—˜ ê°ì†Œ</li>
</ul>
<h2>ì‹¤ì œ ì ìš© ì‚¬ë¡€</h2>
<p>Vaultë¥¼ í†µí•œ mTLS êµ¬í˜„ì€ ë‹¤ìŒê³¼ ê°™ì€ í™˜ê²½ì—ì„œ íŠ¹íˆ ìœ ìš©í•©ë‹ˆë‹¤:</p>
<ul>
<li>ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜
<ul>
<li>ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì˜ ë³´ì•ˆ ê°•í™”</li>
<li>ì„œë¹„ìŠ¤ ì‹ ì› í™•ì¸ì˜ ìë™í™”</li>
</ul>
</li>
<li>ê¸°ì—… ë‚´ë¶€ ì‹œìŠ¤í…œ
<ul>
<li>ì¤‘ìš” ê´€ë¦¬ ë„êµ¬ì— ëŒ€í•œ ì ‘ê·¼ ì œì–´</li>
<li>ë‚´ë¶€ APIì˜ ë³´ì•ˆ ê°•í™”</li>
</ul>
</li>
<li>ê·œì œ ëŒ€ìƒ ì‚°ì—…
<ul>
<li>ì»´í”Œë¼ì´ì–¸ìŠ¤ ìš”êµ¬ì‚¬í•­ ì¶©ì¡±</li>
<li>ê°ì‚¬ ì¶”ì  ê¸°ëŠ¥ ì œê³µ</li>
</ul>
</li>
</ul>
<div class="hint-container info">
<p class="hint-container-title">ê´€ë ¨ ê¸€</p>
<p>ì„œë¹„ìŠ¤ ê°„ mTLSì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒ ê¸€ì—ì„œ ë°ëª¨ì™€ í•¨ê»˜ ë‹¤ë£¨ì—ˆìŠµë‹ˆë‹¤.</p>
<p><a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/mtls.html" target="_blank" rel="noopener noreferrer">Vault PKI - mTLS demo</a></p>
</div>
<h2>êµ¬í˜„ ì˜ˆì‹œ</h2>
<blockquote>
<ul>
<li>
<p>GitHub Source : <a href="https://github.com/Great-Stone/vault-pki-ssl-client-auth" target="_blank" rel="noopener noreferrer">https://github.com/Great-Stone/vault-pki-ssl-client-auth</a></p>
</li>
<li>
<p>GitHub í•œêµ­ì–´ README (macOS, Linux) : <a href="https://github.com/Great-Stone/vault-pki-ssl-client-auth/blob/main/README_KR.md" target="_blank" rel="noopener noreferrer">https://github.com/Great-Stone/vault-pki-ssl-client-auth/blob/main/README_KR.md</a></p>
</li>
<li>
<p>GitHub í•œêµ­ì–´ README (windows11) : <a href="https://github.com/Great-Stone/vault-pki-ssl-client-auth/blob/main/README_WIN.md" target="_blank" rel="noopener noreferrer">https://github.com/Great-Stone/vault-pki-ssl-client-auth/blob/main/README_WIN.md</a></p>
</li>
</ul>
</blockquote>
<p>Vaultë¥¼ ì‚¬ìš©í•œ mTLS êµ¬í˜„ì€ ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤:</p>
<ul>
<li>Vault PKI ì‹œí¬ë¦¿ ì—”ì§„ ì„¤ì •</li>
<li>ì¸ì¦ì„œ ë°œê¸‰ ì •ì±… ë° ì—­í•  êµ¬ì„±</li>
<li>í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ(ì¸ì¦ìš©) ìë™ ë°œê¸‰ ì‹œìŠ¤í…œ êµ¬ì¶•</li>
<li>ì›¹ ì„œë²„ì˜ mTLS êµ¬ì„±</li>
<li>í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ ìë™í™” êµ¬í˜„</li>
</ul>
<p>ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ê³ , ëŒ€ìƒ ì›¹ì„œë²„ì— ì ‘ê·¼í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="hint-container warning">
<p class="hint-container-title">ë°ëª¨ ì‹¤í–‰ ì¤€ë¹„ì‚¬í•­</p>
<p>í•„ìˆ˜ ì„¤ì¹˜ ë° ì‹¤í–‰ í™˜ê²½ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
<li>Vault, Nomad, Dockerê°€ ì‹¤í–‰ê°€ëŠ¥í•œ í™˜ê²½ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.
<ul>
<li>Install Vault - <a href="https://developer.hashicorp.com/vault/install?product_intent=vault" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/install?product_intent=vault</a></li>
<li>Install Nomad - <a href="https://developer.hashicorp.com/nomad/install?product_intent=nomad" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/nomad/install?product_intent=nomad</a></li>
</ul>
</li>
<li>Python 3 ë° í•„ìš”í•œ íŒ¨í‚¤ì§€ (flask, hvac, cryptography)ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</li>
</ul>
</div>
<div class="hint-container info">
<p class="hint-container-title">ì •ë³´</p>
<p>ë¹ ë¥¸ êµ¬ì„± ë° í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ CLI(shell, powershell)ë¡œ ì„¤ëª…ë˜ì—ˆìŠµë‹ˆë‹¤. UIë‚˜ Terraformì„ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ë¬´ë°©í•©ë‹ˆë‹¤.</p>
</div>
<h3>1. Setup ENV</h3>
<p>ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒì„ ì„¤ì •í•©ë‹ˆë‹¤.</p>

<h3>2. Run Vault</h3>
<p>ë‹¤ë¥¸ ì°½ì—ì„œ ì‹¤í–‰</p>

<h3>3. Setup Vault PKI</h3>
<ul>
<li>ì›¹ì„œë²„ì˜ <code>HTTPS(TLS)</code> êµ¬ì„±ì„ ìœ„í•œ PKIì™€ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„ ìœ„í•œ PKIëŠ” ë³„ê°œ ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” êµ¬ì„± í¸ì˜ ìƒ ê°™ì€ PKI ì—”ì§„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</li>
<li>ì‚¬ìš©ì ì¸ì¦ì„ ë°›ê¸° ìœ„í•œ PKI Roleì¸ <code>pki/roles/user-auth</code>ì—ëŠ” <code>client_flag=true</code> ì˜µì…˜ì´ ì¶”ê°€ë˜ì–´ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ìš© ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ë„ë¡ í•©ë‹ˆë‹¤.</li>
</ul>

<h3>4. Vault Policy &amp; Token for Nomad</h3>
<p>ì¸ì¦ì„œ ì ìš©ì„ ìë™í™”í•˜ê¸°ìœ„í•´ Nomadë¥¼ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ì˜ˆì œì—ì„œ ì œì‹œí•œ Nginxì˜ ì¸ì¦ì„œë¥¼ ìˆ˜ë™ìœ¼ë¡œ íŒŒì¼ì„ ì‘ì„±í•˜ì—¬ ì„¤ì •í•´ì£¼ì–´ë„ ë¬´ë°©í•©ë‹ˆë‹¤. ë˜í•œ K8s í™˜ê²½ì—ì„œëŠ” VSOë¥¼ ì—°ê³„í•˜ì—¬ ì‚¬ìš©í•˜ì—¬ë„ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>VSO ì„¤ëª… : <a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/vault-k8s-usecase-csi-injection.html" target="_blank" rel="noopener noreferrer">https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/vault-k8s-usecase-csi-injection.html</a></p>
</blockquote>

<h3>5. Run Nomad with Vault Toekn</h3>
<p>Nginxë¥¼ ì‹¤í–‰ ë° ê´€ë¦¬í•˜ê¸° ìœ„í•œ Nomadë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. Nomadì—ì„œ Vaultì˜ PKIê°€ ë°œê¸‰í•˜ëŠ” ì¸ì¦ì„œë¥¼ ìë™ ìƒì„±/ê°±ì‹  í•˜ê¸°ìœ„í•´ Vaultì˜ Tokenì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<ul>
<li><a href="#4-vault-policy--token-for-nomad">4. Vault Policy &amp; Token for Nomad</a>ì—ì„œ êµ¬ì„±í•œ Vaultì™€ì˜ ì¸ì¦ì„ ìœ„í•œ Token Roleì„ ìƒì„±í•©ë‹ˆë‹¤.
<ul>
<li>Token Role ìƒì„± ì‹œ pkiì— ëŒ€í•œ ê¶Œí•œì´ ë¶€ì—¬ëœ ì •ì±…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ <code>allowed_policies="pki_policy"</code> ì˜µì…˜ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</li>
<li>Nomad ì—°ê³„ë¥¼ ìœ„í•œ ìì²´ ì •ì±…ì¸ <code>nomad-server</code>ëŠ” ìƒì„±í•  ìˆ˜ ì—†ë„ë¡ <code>disallowed_policies="$NOMAD_POLICY"</code> ì˜µì…˜ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</li>
<li><code>orphan=true</code> ì˜µì…˜ì„ ì£¼ë©´ ìµœëŒ€ ë§Œë£Œ TTL ì—†ì´ ê³„ì† ê°±ì‹ í•  ìˆ˜ ìˆëŠ” ê³ ì•„ í† í°ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>

<h3>6. Setup Vault Userpass</h3>
<p>ì‚¬ìš©ìëŠ” ë¸Œë¼ìš°ì € ì ‘ì†ì„ ìœ„í•œ ì¸ì¦ì„œë¥¼ ë°›ê¸°ìœ„í•œ ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ì´ í•„ìš”í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ë³„ë„ì˜ IDPë¥¼ êµ¬ì„±í•˜ì§€ ì•Šê³  Vaultì˜ <code>userpass</code>ì¸ì¦ìœ¼ë¡œ ì‚¬ìš©ì ì¸ì¦ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
<ul>
<li><code>user1</code>ì´ë¼ëŠ” ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ê³ , í•´ë‹¹ ì‚¬ìš©ìëŠ” pkië¥¼ ìš”ì²­í•  ìˆ˜ ìˆëŠ” ì •ì±…ì„ ì†Œìœ í•©ë‹ˆë‹¤.</li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">íŒ</p>
<p>VaultëŠ” APIë¥¼ ì œê³µí•˜ë¯€ë¡œ, íƒ€ ì‹œìŠ¤í…œì—ì„œ ì¸ì¦ IDPë¡œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</div>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault auth <span class="token builtin class-name">enable</span> userpass</span>
<span class="line">vault <span class="token function">write</span> auth/userpass/users/user1 <span class="token assign-left variable">password</span><span class="token operator">=</span>password <span class="token assign-left variable">policies</span><span class="token operator">=</span>pki_policy</span>
<span class="line"></span></code></pre></div><h3>7. Nginx run on Nomad with mTLS configuration</h3>
<p>í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ ì¸ì¦ ì˜µì…˜ì´ ì ìš©ëœ Nginxë¥¼ ë°°í¬ í•©ë‹ˆë‹¤. UIì—ì„œ ë°°í¬í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

<details class="hint-container details"><summary>Nomad Job ì„¤ëª…</summary>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line">job <span class="token string">"nginx"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">datacenters</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"dc1"</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  group <span class="token string">"nginx"</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">network</span> <span class="token punctuation">{</span></span>
<span class="line">      port <span class="token string">"https"</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">to</span>      <span class="token punctuation">=</span> <span class="token number">443</span></span>
<span class="line">        <span class="token property">static</span>  <span class="token punctuation">=</span> <span class="token number">443</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    task <span class="token string">"server"</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">      <span class="token property">driver</span> <span class="token punctuation">=</span> <span class="token string">"docker"</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">config</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">image</span> <span class="token punctuation">=</span> <span class="token string">"nginx"</span></span>
<span class="line">        <span class="token property">ports</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"https"</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># Dockerì˜ Volumeìœ¼ë¡œ ìƒì„±ëœ ì¸ì¦ì„œì™€ ì›¹í˜ì´ì§€ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.</span></span>
<span class="line">        <span class="token property">volumes</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">          <span class="token string">"local/conf.d:/etc/nginx/conf.d"</span>,</span>
<span class="line">          <span class="token string">"local/certs:/etc/nginx/certs"</span>,</span>
<span class="line">          <span class="token string">"local/www:/home/www"</span>,</span>
<span class="line">          <span class="token string">"local/secure:/home/secure"</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment"># Nginxìš© êµ¬ì„± íŒŒì¼ì„ í…œí”Œë¦¿íŒ… í•©ë‹ˆë‹¤.</span></span>
<span class="line">      <span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;-EOF</span>
<span class="line">        server {</span>
<span class="line">          listen 443 ssl;</span>
<span class="line">          server_name service-a.example.com;</span>
<span class="line">          ssl_certificate "/etc/nginx/certs/server.pem";</span>
<span class="line">          ssl_certificate_key "/etc/nginx/certs/server.key";</span>
<span class="line"></span>
<span class="line">          ssl_client_certificate  "/etc/nginx/certs/server.pem"; # í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ í™•ì¸ì„ ìœ„í•œ CA ì¸ì¦ì„œ, TLSë¥¼ ìœ„í•œ ì›¹ì„œë²„ìš© ì¸ì¦ì„œì™€ëŠ” ë³„ë„ ê´€ë¦¬ ê°€ëŠ¥</span>
<span class="line">          # ssl_verify_client       on; # í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ ê²€ì¦ í™œì„±í™”</span>
<span class="line">          ssl_verify_client       optional;</span>
<span class="line"></span>
<span class="line">          ssl_protocols           TLSv1.2 TLSv1.3;</span>
<span class="line">          ssl_session_timeout     10m;</span>
<span class="line">          </span>
<span class="line">          proxy_read_timeout      300;</span>
<span class="line">          proxy_buffers           64 16k;</span>
<span class="line"></span>
<span class="line">          location / {</span>
<span class="line">            root /home/www;</span>
<span class="line">            index index.html;</span>
<span class="line">          }</span>
<span class="line"></span>
<span class="line">          location /secure { # í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œê°€ í™•ì¸ë˜ì§€ ì•Šìœ¼ë©´ ì´ ê²½ë¡œì—ëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</span>
<span class="line">            if ($ssl_client_verify != SUCCESS) { return 403; }</span>
<span class="line">            alias /home/secure;</span>
<span class="line">            index index.html;</span>
<span class="line">          }</span>
<span class="line">        }</span>
<span class="line">        EOF</span></span>
<span class="line"></span>
<span class="line">        <span class="token property">destination</span>   <span class="token punctuation">=</span> <span class="token string">"local/conf.d/default.conf"</span></span>
<span class="line">        <span class="token property">change_mode</span>   <span class="token punctuation">=</span> <span class="token string">"signal"</span></span>
<span class="line">        <span class="token property">change_signal</span> <span class="token punctuation">=</span> <span class="token string">"SIGHUP"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment"># Nginxìš© ì„œë²„ì¸ì¦ì„œ(HTTPS)ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</span></span>
<span class="line">      <span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;-EOF</span>
<span class="line">        {{ with secret "pki/issue/example-dot-com" "common_name=service-a.example.com" "ttl=60m" }}</span>
<span class="line">        {{ .Data.certificate }}</span>
<span class="line">        {{ .Data.issuing_ca }}{{ end }}</span>
<span class="line">        EOF</span></span>
<span class="line">        <span class="token property">destination</span>   <span class="token punctuation">=</span> <span class="token string">"local/certs/server.pem"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment"># Nginxìš© ì„œë²„ì¸ì¦ì„œ(HTTPS) í‚¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</span></span>
<span class="line">      <span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;-EOF</span>
<span class="line">        {{ with secret "pki/issue/example-dot-com" "common_name=service-a.example.com" "ttl=60m" }}</span>
<span class="line">        {{ .Data.private_key }}{{ end }}</span>
<span class="line">        EOF</span></span>
<span class="line">        <span class="token property">destination</span>   <span class="token punctuation">=</span> <span class="token string">"local/certs/server.key"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment"># Nginxìš© í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” CA ì¸ì¦ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</span></span>
<span class="line">      <span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;-EOF</span>
<span class="line">        {{ with secret "pki/root/generate/internal" "common_name=example.com" "ttl=87600h" }}</span>
<span class="line">        {{ .Data.certificate }}{{ end }}</span>
<span class="line">        EOF</span></span>
<span class="line">        <span class="token property">destination</span>   <span class="token punctuation">=</span> <span class="token string">"local/certs/ca.pem"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;-EOF</span>
<span class="line">        &lt;h1&gt;Default page&lt;/h1&gt;</span>
<span class="line">        EOF</span></span>
<span class="line">        <span class="token property">destination</span>   <span class="token punctuation">=</span> <span class="token string">"local/www/index.html"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;-EOF</span>
<span class="line">        &lt;h1&gt;Secure page&lt;/h1&gt;</span>
<span class="line">        EOF</span></span>
<span class="line">        <span class="token property">destination</span>   <span class="token punctuation">=</span> <span class="token string">"local/secure/index.html"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details>
<h3>8. Set <code>hosts</code> file and browser check</h3>
<p>dnsë¡œ í˜ì´ì§€ë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ <code>hosts</code> íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.</p>

<h4>8.1 check page - Default</h4>
<p>ê° í˜ì´ì§€ì— ì ‘ì†í•˜ì—¬ ì–´ë–»ê²Œ ì¶œë ¥ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
<p>click(allow) : <a href="https://service-a.example.com" target="_blank" rel="noopener noreferrer">https://service-a.example.com</a></p>
<p>ì„œë¹„ìŠ¤ìš© ì¸ì¦ì„œëŠ” ê³µì¸ ì¸ì¦ì„œê°€ ì•„ë‹ˆê³ , Vaultê°€ ìƒì„±í•œ Root CAë¥¼ ì‹œìŠ¤í…œì— ë“±ë¡í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ê²½ê³  í˜ì´ì§€ê°€ ë°œìƒí•©ë‹ˆë‹¤. <code>ì„¸ë¶€ì‚¬í•­ ë³´ê¸°</code>ë¡œ ì´ë™í•˜ì—¬ ì›¹ ì‚¬ì´íŠ¸ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.</p>
<figure><figcaption>browser-ca-issue</figcaption></figure>
<figure><figcaption>browser-ca-issue</figcaption></figure>
<p>Default pageê°€ ìˆëŠ” <code>Root</code>ê²½ë¡œëŠ” ì¸ì¦ì„ ìš”êµ¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì ‘ì†ì´ í™•ì¸ë©ë‹ˆë‹¤.</p>
<figure><figcaption>browser-default-page</figcaption></figure>
<h4>8.2 check page - Default</h4>
<p>Nginx ì„œë²„ êµ¬ì„±ì—ì„œ <code>/secure</code> ê²½ë¡œëŠ” ì¸ì¦ì´ ì•ˆë˜ëŠ”ê²½ìš° ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•˜ë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.</p>
<div class="language-ini" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="line">location /secure { # í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œê°€ í™•ì¸ë˜ì§€ ì•Šìœ¼ë©´ ì´ ê²½ë¡œì—ëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</span>
<span class="line highlighted">  <span class="token key attr-name">if ($ssl_client_verify !</span><span class="token punctuation">=</span> <span class="token value attr-value">SUCCESS) { return 403; }</span></span>
<span class="line">  alias /home/secure;</span>
<span class="line">  index index.html;</span>
<span class="line">}</span>
<span class="line"></span></code></pre></div><p>click(deny) : <a href="https://service-a.example.com/secure" target="_blank" rel="noopener noreferrer">https://service-a.example.com/secure</a></p>
<p>ì¸ì¦ì— í•„ìš”í•œ ì¸ì¦ì„œê°€ ì œì‹œë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ, í•´ë‹¹ í˜ì´ì§€ì—ì„œëŠ” 403ì—ëŸ¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p>
<figure><figcaption>browser-secure-page-forbidden</figcaption></figure>
<h3>9. pkcs12 client key ë°›ê¸°</h3>
<p>ì›¹ì„œë²„ ì¸ì¦ì— í•„ìš”í•œ ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ëŠ” ì ˆì°¨ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤. GitHubì—ì„œ ë‹¤ìš´ë°›ì€ ë””ë ‰í† ë¦¬ì—ì„œ <code>â‚©pk12-app</code> ìœ„ì¹˜ì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<div class="hint-container warning">
<p class="hint-container-title">ê²½ê³ </p>
<ul>
<li>Python3 ê°€ í•„ìš”í•©ë‹ˆë‹¤.</li>
<li>í•„ìš” íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> flask hvac cryptography</span>
<span class="line"></span></code></pre></div></div>
<p>Pythonìœ¼ë¡œ ì‘ì„±ëœ íŒŒì¼ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">python main.py</span>
<span class="line"></span></code></pre></div><p>í•´ë‹¹ ì•±ì€ <code>8888</code>í¬íŠ¸ë¡œ ì—´ë ¤ìˆìŠµë‹ˆë‹¤. <a href="http://127.0.0.1:8888" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8888</a> í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
<figure><figcaption>pki-get</figcaption></figure>
<p>ì•ì„œ ìƒì„±í•œ Vault userpass ì¸ì¦ì˜ usernameì¸ <code>user1</code>ê³¼ passwordì¸ <code>password</code>ë¥¼ ì…ë ¥í•˜ê³ , ì¸ì¦ì„œìš© ë¹„ë°€ë²ˆí˜¸(ì˜ˆ: <code>1234</code>)ë¥¼ ì…ë ¥í•˜ë©´ Vaultë¡œ ë¶€í„° PEMì¸ì¦ì„œë¥¼ ë°›ì•„ pkcs#12 ì¸ì¦ì„œë¡œ ë³€í™˜ í›„ ë‹¤ìš´ë¡œë“œê°€ ì§„í–‰ë©ë‹ˆë‹¤.</p>
<p>ë§Œì•½ Vault ì—ì„œ PEMì„ ì§ì ‘ ë°›ëŠ” ê²½ìš°, <code>OpenSSL</code>ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ PEM ì¸ì¦ì„œë¥¼ pkcs#12 í˜•íƒœë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">openssl pkcs12 <span class="token parameter variable">-export</span> <span class="token parameter variable">-out</span> user1.p12 <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">-inkey</span> private_key.pem <span class="token parameter variable">-in</span> certificate.pem <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">-certfile</span> issuing_ca.pem</span>
<span class="line"></span></code></pre></div><p>ë‹¤ìš´ ë°›ì€ ì¸ì¦ì„œë¥¼ ë”ë¸”í´ë¦­í•˜ì—¬ Host OSì— ì¸ì¦ì„œë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. ë“±ë¡ì‹œ ì¸ì¦ì„œ ë°œê¸‰ ë•Œ ì…ë ¥í•œ ì¸ì¦ì„œìš© ë¹„ë°€ë²ˆí˜¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
<figure><figcaption>pk12 registration - macOS</figcaption></figure>
<p>ì¸ì¦ì„œ ë“±ë¡ì´ ì™„ë£Œë˜ë©´ ë‚´ ì¸ì¦ì„œ ëª©ë¡ì— í‘œê¸°ë©ë‹ˆë‹¤.</p>
<figure><figcaption>Key Chain - macOS</figcaption></figure>
<h2>10. ì¸ì¦ì„œë¡œ ì›¹ì„œë²„ ì¸ì¦ ë°›ê¸°</h2>
<p>ë‹¤ì‹œ ì¸ì¦ì„œë¥¼ ìš”êµ¬í•˜ëŠ” í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
<p>click : <a href="https://service-a.example.com/secure" target="_blank" rel="noopener noreferrer">https://service-a.example.com/secure</a></p>
<p><code>example.com</code>ì— ëŒ€í•œ ì¸ì¦ì„œì´ë¯€ë¡œ, ë¸Œë¼ìš°ì €ì—ì„œëŠ” í•´ë‹¹ DNSê°€ ê°™ìœ¼ë©´ ìë™ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.</p>
<figure><figcaption>Check Cert</figcaption></figure>
<p>ì¸ì¦ì„œë¥¼ ë“±ë¡í•˜ë©´ ì´ì œ <code>secure</code> ê²½ë¡œì˜ í˜ì´ì§€ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<figure><figcaption>browser-secure-page-access</figcaption></figure>
<h2>ê²°ë¡ </h2>
<p>Vaultë¥¼ í™œìš©í•œ mTLS êµ¬í˜„ì€ í˜„ëŒ€ ì›¹ ì„œë¹„ìŠ¤ì˜ ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ì„ íš¨ê³¼ì ìœ¼ë¡œ ì¶©ì¡±ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. ìë™í™”ëœ ì¸ì¦ì„œ ê´€ë¦¬, ì„¸ë°€í•œ ì ‘ê·¼ ì œì–´, ê°•ë ¥í•œ ë³´ì•ˆì„±ì„ í†µí•´ ë¯¼ê°í•œ ë°ì´í„°ì™€ ì‹œìŠ¤í…œì„ ë³´í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ Vaultì˜ ìë™í™” ê¸°ëŠ¥ì€ ìš´ì˜ ë¶€ë‹´ì„ ì¤„ì´ë©´ì„œë„ ë³´ì•ˆì„ ê°•í™”í•  ìˆ˜ ìˆëŠ” ê· í˜• ì¡íŒ ì ‘ê·¼ ë°©ì‹ì„ ì œê³µí•©ë‹ˆë‹¤.<br>
ë³´ì•ˆì€ ë‹¨ìˆœí•œ ê¸°ëŠ¥ì´ ì•„ë‹Œ ì§€ì†ì ì¸ í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤. Vaultë¥¼ í†µí•œ mTLS êµ¬í˜„ì€ ì´ëŸ¬í•œ ë³´ì•ˆ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™”í•˜ê³  í‘œì¤€í™”í•˜ëŠ” ë° í° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.</p>
]]></content:encoded>
    </item>
    <item>
      <title>ì•ˆì „í•œ RAG ì‹œìŠ¤í…œ êµ¬ì¶•: HashiCorp Vaultì™€ Amazon Bedrock í™œìš©</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/Secured-RAG-with-Vault-on-aws.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/Secured-RAG-with-Vault-on-aws.html</guid>
      <source url="https://docmoa.github.io/rss.xml">ì•ˆì „í•œ RAG ì‹œìŠ¤í…œ êµ¬ì¶•: HashiCorp Vaultì™€ Amazon Bedrock í™œìš©</source>
      <description>ì•ˆì „í•œ RAG ì‹œìŠ¤í…œ êµ¬ì¶•: HashiCorp Vaultì™€ Amazon Bedrock í™œìš© ê°œìš” AI ê¸°ìˆ ì˜ ë°œì „ê³¼ í•¨ê»˜ ê¸°ì—…ë“¤ì€ ë°ì´í„°ë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ í™œìš©í•˜ê¸° ìœ„í•œ ìƒˆë¡œìš´ ë°©ë²•ë“¤ì„ ëª¨ìƒ‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ, ìƒì„±í˜• AI(GenAI) ì™€ ëŒ€ê·œëª¨ ì–¸ì–´ ëª¨ë¸(LLM) ì€ ì¡°ì§ì´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  í™œìš©í•˜ëŠ” ë°©ì‹ì„ ë³€í™”ì‹œ...</description>
      <pubDate>Tue, 07 Jan 2025 09:23:20 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>ê°œìš”</h2>
<p>AI ê¸°ìˆ ì˜ ë°œì „ê³¼ í•¨ê»˜ ê¸°ì—…ë“¤ì€ ë°ì´í„°ë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ í™œìš©í•˜ê¸° ìœ„í•œ ìƒˆë¡œìš´ ë°©ë²•ë“¤ì„ ëª¨ìƒ‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ, <strong>ìƒì„±í˜• AI(GenAI)</strong> ì™€ <strong>ëŒ€ê·œëª¨ ì–¸ì–´ ëª¨ë¸(LLM)</strong> ì€ ì¡°ì§ì´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  í™œìš©í•˜ëŠ” ë°©ì‹ì„ ë³€í™”ì‹œí‚¤ëŠ” í•µì‹¬ ë„êµ¬ë¡œ ìë¦¬ ì¡ê³  ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê¸°ì¡´ì˜ LLMì€ ì‚¬ì „ì— í•™ìŠµëœ ë°ì´í„°ì—ë§Œ ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— ìµœì‹  ì •ë³´ì— ì ‘ê·¼í•˜ê±°ë‚˜ ì¡°ì§ ë‚´ íŠ¹ì • ìš”êµ¬ì‚¬í•­ì— ë§ì¶˜ ë‹µë³€ì„ ì œê³µí•˜ëŠ” ë° í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ëŸ¬í•œ í•œê³„ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ê¸°ìˆ ì´ ë°”ë¡œ <strong>Retrieval-Augmented Generation (RAG)</strong> ì…ë‹ˆë‹¤. RAGëŠ” ëª¨ë¸ì´ ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ê²€ìƒ‰í•˜ì—¬ ìµœì‹  ì •ë³´ë¥¼ í†µí•©í•˜ê³ , ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§ì¶¤í˜• ë‹µë³€ì„ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì¡°ì§ì€ ë” ì •êµí•˜ê³  ìœ ìš©í•œ ì§€ì‹ ê¸°ë°˜ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ RAG ì‹œìŠ¤í…œì€ ê°œì¸ì •ë³´(PII), ë¯¼ê°ì •ë³´, í´ë¼ìš°ë“œ ìê²© ì¦ëª… ë“± ì¤‘ìš”í•œ ë°ì´í„°ë¥¼ ë‹¤ë£° ìˆ˜ë°–ì— ì—†ê¸°ì— ë°ì´í„° ë³´ì•ˆê³¼ ë³´í˜¸ê°€ í•„ìˆ˜ì ì…ë‹ˆë‹¤.</p>
<p><strong>HashiCorp Vault</strong> ëŠ” ì´ëŸ¬í•œ ë¯¼ê°ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ê³  ë³´í˜¸í•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. VaultëŠ” <strong>Transit ì•”í˜¸í™”, Tokenization, Masking, FPE(í˜•íƒœ ë³´ì¡´ ì•”í˜¸í™”)</strong> ë“±ì˜ ê¸°ëŠ¥ì„ í†µí•´ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ì•”í˜¸í™”í•˜ê³ , ì»´í”Œë¼ì´ì–¸ìŠ¤ì™€ ê·œì œ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.</p>
<figure><figcaption>ì°¸ê³ : Vault Masking ê¸°ëŠ¥ì„ í™œìš©í•œ ì•ˆì „í•œ ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì˜ˆì‹œ</figcaption></figure>
<p>ë³¸ í¬ìŠ¤íŒ…ì—ì„œëŠ” AWS í™˜ê²½ì—ì„œ <strong>Amazon Bedrock</strong> ê³¼ í•¨ê»˜ RAGë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•˜ë©°, Vaultë¥¼ í™œìš©í•´ ë¯¼ê°ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ëŠ” ë°©ì•ˆì„ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
<div class="hint-container tip">
<p class="hint-container-title">ğŸ’¡ ê°ì‚¬í•œ ë¶„(Special Thanks)</p>
<p>ë³¸ ê¸€ì€ HashiCorpì˜ <a href="https://www.linkedin.com/in/david-wright-57336a4/" target="_blank" rel="noopener noreferrer">David Wright</a>ì˜ <a href="https://github.com/dawright22/aws-rag-terraform-deployment-demo" target="_blank" rel="noopener noreferrer">GitHub ì €ì¥ì†Œ</a> ë°ëª¨ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë¶„ì„ ë° ì°¸ê³ í•˜ì—¬ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Nomad, Vaultë¥¼ keycloak oidcë¡œ ê´€ë¦¬í•˜ê¸° with terraform</title>
      <link>https://docmoa.github.io/04-HashiCorp/03-Terraform/03-Sample/hashicorp-oidc.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/03-Terraform/03-Sample/hashicorp-oidc.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Nomad, Vaultë¥¼ keycloak oidcë¡œ ê´€ë¦¬í•˜ê¸° with terraform</source>
      <description>Nomad, Vaultë¥¼ keycloak oidcë¡œ ê´€ë¦¬í•˜ê¸° with terraform ìš”ì¦˜ê°™ì´ ì‚¬ë‚´ì— ë§ì€ Open Source, Enterprise Soulitionì´ ì‚¬ìš©ë˜ëŠ” ì‹œê¸°ì— ê° Solutionë³„ë¡œ ID/Passwordë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•ŠìŠµë‹ˆë‹¤. ê±°ê¸°ë‹¤ ë§Œì•½ Dev, Stage, Production...</description>
      <pubDate>Tue, 24 Sep 2024 03:11:56 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ìš”ì¦˜ê°™ì´ ì‚¬ë‚´ì— ë§ì€ Open Source, Enterprise Soulitionì´ ì‚¬ìš©ë˜ëŠ” ì‹œê¸°ì— ê° Solutionë³„ë¡œ <strong>ID/Passwordë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒ</strong>ì€ ì‰½ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
ê±°ê¸°ë‹¤ ë§Œì•½ Dev, Stage, Productionë“±ì˜ í™˜ê²½ë³„ë¡œ êµ¬ì¶•ì´ ë˜ì–´ ìˆë‹¤ë©´ ì´ë¯¸ ID/Passwordë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒë§Œ ìœ¼ë¡œë„ <strong>êµ‰ì¥íˆ ë°˜ë³µì ì´ê³  ê·€ì°®ì€ ì‘ì—…</strong>ì´ ë  ê²ƒ ì…ë‹ˆë‹¤.</p>
<p>ìš°ë¦¬ëŠ” ì´ëŸ¬í•œ ìƒí™©ì„ í•´ê²°í•˜ê¸° ìœ„í•´ IDP(Identity Provider) Solutionì„ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
ë‹¤ì–‘í•œ IDPê°€ ìˆê² ìœ¼ë‚˜ ì œê°€ ì†í•œ íšŒì‚¬ì—ì„œëŠ” <strong>Keycloak</strong>ì„ ì‚¬ìš©í•˜ê³  ìˆê³  ê·¸ Keycloakì„ í†µí•´<br>
gitlab, grafana, nomad, vaultì˜ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œê´€ë¦¬ë¥¼ í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br>
ì´ ì¤‘ <strong>Terraform code</strong>ë¡œ êµ¬í˜„ì´ ì™„ë²½íˆ ëœ <strong>Nomadì™€ Vault</strong>ì˜ Codeì— ëŒ€í•´ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>
<h2>Keycloak ê³µí†µì˜ì—­</h2>
<ul>
<li>Realm, Users, Groupsë“±ì„ ë¯¸ë¦¬ ì„¤ì •í•©ë‹ˆë‹¤.
<ul>
<li>Groupsì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
<ul>
<li>opsTeam: Writeê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ì ê·¸ë£¹</li>
<li>devTeam: Readê¶Œí•œë§Œ ìˆëŠ” ì‚¬ìš©ì ê·¸ë£¹</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Terraformìœ¼ë¡œ Keycloakì˜ ì‚¬ì „ ì •ë³´ë¥¼ êµ¬í˜„</h3>
<ul>
<li>ê³„ì • ì •ë³´ëŠ” Yamlë¡œ ê´€ë¦¬í•˜ë©°, Groupì€ ì•„ì§ ë‘ê°œ ë¿ì´ë¼ Variablesë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.</li>
<li>reader, mgmtì˜ role ë˜í•œ ì—¬ê¸°ì„œ ìƒì„±ë©ë‹ˆë‹¤.</li>
</ul>
<details>
  <summary>Keycloak Common ì½”ë“œ ë³´ê¸°</summary>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#main.tf </span></span>
<span class="line">resource <span class="token string">"keycloak_realm"</span> <span class="token string">"realm"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm   <span class="token operator">=</span> var.keycloak_realm</span>
<span class="line">  enabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_user"</span> <span class="token string">"user_reader"</span> <span class="token punctuation">{</span></span>
<span class="line">  for_each <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">for</span> <span class="token for-or-select variable">user</span> <span class="token keyword">in</span> local.keycloak_reader<span class="token punctuation">[</span><span class="token string">"users"</span><span class="token punctuation">]</span> <span class="token builtin class-name">:</span> user<span class="token punctuation">[</span><span class="token string">"username"</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">&gt;</span> user <span class="token punctuation">}</span></span>
<span class="line">  realm_id <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  username <span class="token operator">=</span> each.value<span class="token punctuation">[</span><span class="token string">"username"</span><span class="token punctuation">]</span></span>
<span class="line">  enabled  <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">  email      <span class="token operator">=</span> each.value<span class="token punctuation">[</span><span class="token string">"email"</span><span class="token punctuation">]</span></span>
<span class="line">  first_name <span class="token operator">=</span> each.value<span class="token punctuation">[</span><span class="token string">"first_name"</span><span class="token punctuation">]</span></span>
<span class="line">  last_name  <span class="token operator">=</span> each.value<span class="token punctuation">[</span><span class="token string">"last_name"</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  initial_password <span class="token punctuation">{</span></span>
<span class="line">    value     <span class="token operator">=</span> each.value<span class="token punctuation">[</span><span class="token string">"pwd"</span><span class="token punctuation">]</span></span>
<span class="line">    temporary <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_user"</span> <span class="token string">"user_management"</span> <span class="token punctuation">{</span></span>
<span class="line">  for_each <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">for</span> <span class="token for-or-select variable">user</span> <span class="token keyword">in</span> local.keycloak_mgmt<span class="token punctuation">[</span><span class="token string">"users"</span><span class="token punctuation">]</span> <span class="token builtin class-name">:</span> user<span class="token punctuation">[</span><span class="token string">"username"</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">&gt;</span> user <span class="token punctuation">}</span></span>
<span class="line">  realm_id <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  username <span class="token operator">=</span> each.value<span class="token punctuation">[</span><span class="token string">"username"</span><span class="token punctuation">]</span></span>
<span class="line">  enabled  <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">  email      <span class="token operator">=</span> each.value<span class="token punctuation">[</span><span class="token string">"email"</span><span class="token punctuation">]</span></span>
<span class="line">  first_name <span class="token operator">=</span> each.value<span class="token punctuation">[</span><span class="token string">"first_name"</span><span class="token punctuation">]</span></span>
<span class="line">  last_name  <span class="token operator">=</span> each.value<span class="token punctuation">[</span><span class="token string">"last_name"</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  initial_password <span class="token punctuation">{</span></span>
<span class="line">    value     <span class="token operator">=</span> each.value<span class="token punctuation">[</span><span class="token string">"pwd"</span><span class="token punctuation">]</span></span>
<span class="line">    temporary <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_role"</span> <span class="token string">"realm_role"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id    <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  name        <span class="token operator">=</span> <span class="token string">"nomadoidc"</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string">"My Realm Role"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_role"</span> <span class="token string">"mgmt_realm_role"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id    <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  name        <span class="token operator">=</span> var.keycloak_mgmt</span>
<span class="line">  description <span class="token operator">=</span> <span class="token string">"My mgmt Role"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_role"</span> <span class="token string">"redaer_realm_role"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id    <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  name        <span class="token operator">=</span> <span class="token string">"reader"</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string">"My redaer Role"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_group"</span> <span class="token string">"reader_group"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  name     <span class="token operator">=</span> var.keycloak_reader_group</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_group"</span> <span class="token string">"management_group"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  name     <span class="token operator">=</span> var.keycloak_mgmt_group</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">locals <span class="token punctuation">{</span></span>
<span class="line">  reader_usernames <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token for-or-select variable">user</span> <span class="token keyword">in</span> local.keycloak_reader<span class="token punctuation">[</span><span class="token string">"users"</span><span class="token punctuation">]</span> <span class="token builtin class-name">:</span> user<span class="token punctuation">[</span><span class="token string">"username"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line">  mgmt_usernames <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token for-or-select variable">user</span> <span class="token keyword">in</span> local.keycloak_mgmt<span class="token punctuation">[</span><span class="token string">"users"</span><span class="token punctuation">]</span> <span class="token builtin class-name">:</span> user<span class="token punctuation">[</span><span class="token string">"username"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">]</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_group_memberships"</span> <span class="token string">"reader_group_members"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  group_id <span class="token operator">=</span> keycloak_group.reader_group.id</span>
<span class="line"></span>
<span class="line">  members  <span class="token operator">=</span> local.reader_usernames</span>
<span class="line">  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_group_memberships"</span> <span class="token string">"management_group_members"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  group_id <span class="token operator">=</span> keycloak_group.management_group.id</span>
<span class="line"></span>
<span class="line">  members  <span class="token operator">=</span> local.mgmt_usernames</span>
<span class="line">  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_group_roles"</span> <span class="token string">"reader_group_roles"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  group_id <span class="token operator">=</span> keycloak_group.reader_group.id</span>
<span class="line"></span>
<span class="line">  role_ids   <span class="token operator">=</span> <span class="token punctuation">[</span>keycloak_role.redaer_realm_role.id<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_group_roles"</span> <span class="token string">"mgmt_group_roles"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  group_id <span class="token operator">=</span> keycloak_group.management_group.id</span>
<span class="line"></span>
<span class="line">  role_ids   <span class="token operator">=</span> <span class="token punctuation">[</span>keycloak_role.mgmt_realm_role.id<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_openid_client_scope"</span> <span class="token string">"groups"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  name     <span class="token operator">=</span> <span class="token string">"groups"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_openid_user_realm_role_protocol_mapper"</span> <span class="token string">"user_realm_role_mapper"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id        <span class="token operator">=</span> keycloak_realm.realm.id</span>
<span class="line">  client_scope_id <span class="token operator">=</span> keycloak_openid_client_scope.groups.id</span>
<span class="line">  name            <span class="token operator">=</span> <span class="token string">"groups"</span></span>
<span class="line"></span>
<span class="line">  claim_name <span class="token operator">=</span> <span class="token string">"groups"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#var.tf</span></span>
<span class="line">variable <span class="token string">"nomad_addr"</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_addr"</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_admin_user"</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_admin_password"</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_scheme"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"https"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_realm"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"HashiCorp"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"reader_yaml"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"reader.yaml"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"mgmt_yaml"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"mgmt.yaml"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">locals <span class="token punctuation">{</span></span>
<span class="line">  keycloak_reader <span class="token operator">=</span> yamldecode<span class="token punctuation">(</span>file<span class="token punctuation">(</span>var.reader_yaml<span class="token punctuation">))</span></span>
<span class="line">  keycloak_mgmt   <span class="token operator">=</span> yamldecode<span class="token punctuation">(</span>file<span class="token punctuation">(</span>var.mgmt_yaml<span class="token punctuation">))</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_mgmt"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"mgmt"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_reader_group"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"devTeam"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_mgmt_group"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"opsTeam"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">#mgmt.yaml</span></span>
<span class="line">users:</span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line">users:</span>
<span class="line">  - username: ung</span>
<span class="line">    email: ung@mz.co.kr</span>
<span class="line">    first_name: ung</span>
<span class="line">    last_name: hee</span>
<span class="line">    pwd: ungungung</span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"><span class="token comment">#reader.yaml</span></span>
<span class="line">users:</span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line">users:</span>
<span class="line">  - username: gslee</span>
<span class="line">    email: gs@hashicorp.com</span>
<span class="line">    first_name: gs</span>
<span class="line">    last_name: lee</span>
<span class="line">    pwd: gsgsgsgs</span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre></div></details>
<h2>Nomad OIDC Terraform Code</h2>
<h3>Terraformìœ¼ë¡œ Keycloakê³¼ Nomad OIDC ì„¤ì •</h3>
<ul>
<li>Keycloak oidc clientë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
<ul>
<li>valid_redirect_uriì— nomad oidc uriì¸ /oidc/callback, /ui/settings/tokensë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.</li>
<li>Nomad Role = Keycloak Groupsì„ ë§µí•‘ ì‹œì¼œì„œ ê¶Œí•œì„ ë™ê¸°í™” ì‹œí‚µë‹ˆë‹¤.</li>
</ul>
</li>
<li>NomadëŠ” Token Baseë¡œ ì¸ì¦ì¸ê°€ë¥¼ í•©ë‹ˆë‹¤.
<ul>
<li>Tokenì˜ ê° read, write roleì„ ë§Œë“­ë‹ˆë‹¤.</li>
<li>ê·¸ roleê¸°ë°˜ìœ¼ë¡œ Keycloak groupê³¼ ë§µí•‘í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<details>
  <summary>Nomad, Keycloak ì½”ë“œ ë³´ê¸°</summary>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#keycloak.tf</span></span>
<span class="line">resource <span class="token string">"keycloak_openid_client"</span> <span class="token string">"openid_client"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id  <span class="token operator">=</span> var.relam_id</span>
<span class="line">  client_id <span class="token operator">=</span> <span class="token string">"nomadoidc"</span></span>
<span class="line"></span>
<span class="line">  name                  <span class="token operator">=</span> <span class="token string">"nomadoidc"</span></span>
<span class="line">  enabled               <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  standard_flow_enabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">  access_type <span class="token operator">=</span> <span class="token string">"CONFIDENTIAL"</span></span>
<span class="line">  valid_redirect_uris <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">"<span class="token variable">${var.nomad_scheme}</span>://<span class="token variable">${var.nomad_addr}</span>/oidc/callback"</span>,</span>
<span class="line">    <span class="token string">"<span class="token variable">${var.nomad_scheme}</span>://<span class="token variable">${var.nomad_addr}</span>/ui/settings/tokens"</span>,</span>
<span class="line">    <span class="token string">"http://localhost:4649/oidc/callback"</span>,</span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  login_theme <span class="token operator">=</span> <span class="token string">"keycloak"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_openid_client_default_scopes"</span> <span class="token string">"client_default_scopes"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id  <span class="token operator">=</span> var.relam_id</span>
<span class="line">  client_id <span class="token operator">=</span> keycloak_openid_client.openid_client.id</span>
<span class="line"></span>
<span class="line">  default_scopes <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">"profile"</span>,</span>
<span class="line">    <span class="token string">"email"</span>,</span>
<span class="line">    <span class="token string">"roles"</span>,</span>
<span class="line">    <span class="token string">"groups"</span>,</span>
<span class="line">    keycloak_openid_client_scope.openid_client_scope.name</span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">resource <span class="token string">"keycloak_role"</span> <span class="token string">"management_role"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id    <span class="token operator">=</span> var.relam_id</span>
<span class="line">  client_id   <span class="token operator">=</span> keycloak_openid_client.openid_client.id</span>
<span class="line">  name        <span class="token operator">=</span> <span class="token string">"mgmt"</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string">"Management role"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_role"</span> <span class="token string">"reader_role"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id    <span class="token operator">=</span> var.relam_id</span>
<span class="line">  client_id   <span class="token operator">=</span> keycloak_openid_client.openid_client.id</span>
<span class="line">  name        <span class="token operator">=</span> <span class="token string">"reader"</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string">"Reader role"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_openid_client_scope"</span> <span class="token string">"openid_client_scope"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id               <span class="token operator">=</span> var.relam_id</span>
<span class="line">  name                   <span class="token operator">=</span> keycloak_openid_client.openid_client.name</span>
<span class="line">  description            <span class="token operator">=</span> <span class="token string">"When requested, this scope will map a user's group memberships to a claim"</span></span>
<span class="line">  include_in_token_scope <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#nomad.tf</span></span>
<span class="line">resource <span class="token string">"nomad_acl_auth_method"</span> <span class="token string">"keycloak"</span> <span class="token punctuation">{</span></span>
<span class="line">  name           <span class="token operator">=</span> <span class="token string">"keycloak"</span></span>
<span class="line">  <span class="token builtin class-name">type</span>           <span class="token operator">=</span> <span class="token string">"OIDC"</span></span>
<span class="line">  token_locality <span class="token operator">=</span> <span class="token string">"global"</span></span>
<span class="line">  max_token_ttl  <span class="token operator">=</span> <span class="token string">"150m0s"</span></span>
<span class="line">  default        <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">  config <span class="token punctuation">{</span></span>
<span class="line">    oidc_discovery_url <span class="token operator">=</span> format<span class="token punctuation">(</span><span class="token string">"<span class="token variable">${var.keycloak_scheme}</span>://<span class="token variable">${var.keycloak_addr}</span>/realms/%s"</span>, var.keycloak_realm<span class="token punctuation">)</span></span>
<span class="line">    oidc_client_id     <span class="token operator">=</span> var.client_id</span>
<span class="line">    oidc_client_secret <span class="token operator">=</span> keycloak_openid_client.openid_client.client_secret</span>
<span class="line">    bound_audiences <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">      var.client_id</span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    oidc_scopes <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"groups"</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    allowed_redirect_uris <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"<span class="token variable">${var.nomad_scheme}</span>://<span class="token variable">${var.nomad_addr}</span>/oidc/callback"</span>,</span>
<span class="line">      <span class="token string">"<span class="token variable">${var.nomad_scheme}</span>://<span class="token variable">${var.nomad_addr}</span>/ui/settings/tokens"</span>,</span>
<span class="line">      <span class="token string">"http://localhost:4649/oidc/callback"</span>, // CLIë¡œ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ë¥¼ ìœ„í•´ í•„ìš”</span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    list_claim_mappings <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">groups</span> <span class="token operator">=</span> <span class="token string">"roles"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"nomad_acl_binding_rule"</span> <span class="token string">"reader"</span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string">"reader rule"</span></span>
<span class="line">  auth_method <span class="token operator">=</span> nomad_acl_auth_method.keycloak.name</span>
<span class="line">  selector    <span class="token operator">=</span> <span class="token string">"reader in list.roles"</span></span>
<span class="line">  bind_type   <span class="token operator">=</span> <span class="token string">"role"</span></span>
<span class="line">  bind_name   <span class="token operator">=</span> nomad_acl_role.dev.name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"nomad_acl_binding_rule"</span> <span class="token string">"mgmt"</span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string">"management rule"</span></span>
<span class="line">  auth_method <span class="token operator">=</span> nomad_acl_auth_method.keycloak.name</span>
<span class="line">  selector    <span class="token operator">=</span> <span class="token string">"mgmt in list.roles"</span></span>
<span class="line">  bind_type   <span class="token operator">=</span> <span class="token string">"role"</span></span>
<span class="line">  bind_name   <span class="token operator">=</span> nomad_acl_role.mgmt.name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"nomad_acl_policy"</span> <span class="token string">"dev"</span> <span class="token punctuation">{</span></span>
<span class="line">  name <span class="token operator">=</span> var.nomad_reader</span>
<span class="line"></span>
<span class="line">  rules_hcl <span class="token operator">=</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOT</span>
<span class="line">namespace "*" {</span>
<span class="line">  policy = "read"</span>
<span class="line">  capabilities = [</span>
<span class="line">    "list-jobs",</span>
<span class="line">    "parse-job",</span>
<span class="line">    "read-job",</span>
<span class="line">    "csi-list-volume",</span>
<span class="line">    "csi-read-volume",</span>
<span class="line">    "list-scaling-policies",</span>
<span class="line">    "read-scaling-policy"</span>
<span class="line">  ]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">EOT</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"nomad_acl_role"</span> <span class="token string">"dev"</span> <span class="token punctuation">{</span></span>
<span class="line">  name        <span class="token operator">=</span> <span class="token string">"<span class="token variable">${var.nomad_reader}</span>-acl-role"</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string">"An ACL Role for cluster dev"</span></span>
<span class="line"></span>
<span class="line">  policy <span class="token punctuation">{</span></span>
<span class="line">    name <span class="token operator">=</span> nomad_acl_policy.dev.name</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"nomad_acl_policy"</span> <span class="token string">"mgmt"</span> <span class="token punctuation">{</span></span>
<span class="line">  name <span class="token operator">=</span> var.nomad_mgmt</span>
<span class="line"></span>
<span class="line">  rules_hcl <span class="token operator">=</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOT</span>
<span class="line">namespace "*" {</span>
<span class="line">  policy = "write"</span>
<span class="line">    capabilities = [</span>
<span class="line">      "list-jobs",</span>
<span class="line">      "parse-job",</span>
<span class="line">      "read-job",</span>
<span class="line">      "submit-job",</span>
<span class="line">      "dispatch-job",</span>
<span class="line">      "read-logs",</span>
<span class="line">      "read-fs",</span>
<span class="line">      "alloc-exec",</span>
<span class="line">      "alloc-lifecycle",</span>
<span class="line">      "csi-write-volume",</span>
<span class="line">      "csi-mount-volume",</span>
<span class="line">      "list-scaling-policies",</span>
<span class="line">      "read-scaling-policy",</span>
<span class="line">      "read-job-scaling",</span>
<span class="line">      "scale-job"</span>
<span class="line">  ]</span>
<span class="line">}</span>
<span class="line">EOT</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"nomad_acl_role"</span> <span class="token string">"mgmt"</span> <span class="token punctuation">{</span></span>
<span class="line">  name        <span class="token operator">=</span> <span class="token string">"<span class="token variable">${var.nomad_mgmt}</span>-acl-role"</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string">"An ACL Role for cluster mgmt"</span></span>
<span class="line"></span>
<span class="line">  policy <span class="token punctuation">{</span></span>
<span class="line">    name <span class="token operator">=</span> nomad_acl_policy.mgmt.name</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment"># var.tf</span></span>
<span class="line">variable <span class="token string">"nomad_addr"</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_addr"</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_admin_user"</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_admin_password"</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"nomad_scheme"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"https"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"nomad_region"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"global"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_scheme"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"https"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"keycloak_realm"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"HashiCorp"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"nomad_reader"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"devTeam"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"nomad_mgmt"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"opsTeam"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string">"client_id"</span> <span class="token punctuation">{</span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string">"nomadoidc"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details>
<h3>ê²°ê³¼í™”ë©´ ì¶”ê°€</h3>
<ul>
<li>Nomad UIì—ì„œ SSO ì—°ë™ ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤.</li>
</ul>
<figure><figcaption>Nomad UI</figcaption></figure>
<ul>
<li>Mgmt groupì¸ ung ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í•˜ë©´ opsTeamì˜ writeê¶Œí•œì„ í• ë‹¹ë°›ìŠµë‹ˆë‹¤.</li>
</ul>
<figure><figcaption>Nomad UI</figcaption></figure>
<ul>
<li>Reader groupì¸ gslee ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í•˜ë©´ devTeamì˜ readê¶Œí•œì„ í• ë‹¹ë°›ìŠµë‹ˆë‹¤.</li>
</ul>
<figure><figcaption>Nomad UI</figcaption></figure>
<h2>Vault OIDC Terraform Code</h2>
<h3>Terraformìœ¼ë¡œ Keycloakê³¼ Vault OIDC ì„¤ì •</h3>
<ul>
<li>Keycloak oidc clientë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</li>
<li>VaultëŠ” entity groupì˜ alias nameê³¼ Keycloak group nameì„ ë§µí•‘í•©ë‹ˆë‹¤.
<ul>
<li>Vault group ìƒì„± ì‹œì—ëŠ” externalë¡œ ìƒì„±ì´ í•„ìš”í•©ë‹ˆë‹¤.</li>
<li>opsTeamì—ëŠ” ì „ì²´ Writeê¶Œí•œì„, devTeamì—ëŠ” ì „ì²´ Readê¶Œí•œì„ ì ìš©í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<details>
  <summary>Vault, Keycloak ì½”ë“œ ë³´ê¸°</summary>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#keycloak.tf</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_openid_client"</span> <span class="token string">"openid_client"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id  <span class="token operator">=</span> var.relam_id</span>
<span class="line">  client_id <span class="token operator">=</span> <span class="token string">"vault-oidc-ung"</span></span>
<span class="line"></span>
<span class="line">  name                  <span class="token operator">=</span> <span class="token string">"vault-oidc-ung"</span></span>
<span class="line">  enabled               <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  standard_flow_enabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">  access_type <span class="token operator">=</span> <span class="token string">"CONFIDENTIAL"</span></span>
<span class="line">  valid_redirect_uris <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">"<span class="token variable">${var.vault_url}</span>/*"</span></span>
<span class="line">   <span class="token punctuation">]</span></span>
<span class="line">  login_theme <span class="token operator">=</span> <span class="token string">"keycloak"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"keycloak_openid_user_client_role_protocol_mapper"</span> <span class="token string">"user_client_role_mapper"</span> <span class="token punctuation">{</span></span>
<span class="line">  realm_id  <span class="token operator">=</span> var.relam_id</span>
<span class="line">  client_id <span class="token operator">=</span> keycloak_openid_client.openid_client.id</span>
<span class="line">  name      <span class="token operator">=</span> <span class="token string">"ung-user-client-role-mapper"</span></span>
<span class="line">  claim_name <span class="token operator">=</span> format<span class="token punctuation">(</span><span class="token string">"resource_access.%s.roles"</span>,</span>
<span class="line">  keycloak_openid_client.openid_client.client_id<span class="token punctuation">)</span></span>
<span class="line">  multivalued <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#vault.tf</span></span>
<span class="line">resource <span class="token string">"vault_identity_oidc_key"</span> <span class="token string">"keycloak_provider_key"</span> <span class="token punctuation">{</span></span>
<span class="line">  name      <span class="token operator">=</span> <span class="token string">"keycloak"</span></span>
<span class="line">  algorithm <span class="token operator">=</span> <span class="token string">"RS256"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"vault_jwt_auth_backend"</span> <span class="token string">"keycloak"</span> <span class="token punctuation">{</span></span>
<span class="line">  path               <span class="token operator">=</span> <span class="token string">"oidc-keycloak"</span></span>
<span class="line">  <span class="token builtin class-name">type</span>               <span class="token operator">=</span> <span class="token string">"oidc"</span></span>
<span class="line">  default_role       <span class="token operator">=</span> <span class="token string">"default"</span></span>
<span class="line">  oidc_discovery_url <span class="token operator">=</span> format<span class="token punctuation">(</span><span class="token string">"<span class="token variable">${var.keycloak_url}</span>/realms/HashiCorp"</span><span class="token punctuation">)</span></span>
<span class="line">  oidc_client_id     <span class="token operator">=</span> keycloak_openid_client.openid_client.client_id</span>
<span class="line">  oidc_client_secret <span class="token operator">=</span> keycloak_openid_client.openid_client.client_secret</span>
<span class="line">  </span>
<span class="line">  tune <span class="token punctuation">{</span></span>
<span class="line">    audit_non_hmac_request_keys  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">    audit_non_hmac_response_keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">    default_lease_ttl            <span class="token operator">=</span> <span class="token string">"1h"</span></span>
<span class="line">    listing_visibility           <span class="token operator">=</span> <span class="token string">"unauth"</span></span>
<span class="line">    max_lease_ttl                <span class="token operator">=</span> <span class="token string">"1h"</span></span>
<span class="line">    passthrough_request_headers  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">    token_type                   <span class="token operator">=</span> <span class="token string">"default-service"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"vault_jwt_auth_backend_role"</span> <span class="token string">"devteam"</span> <span class="token punctuation">{</span></span>
<span class="line">  backend       <span class="token operator">=</span> vault_jwt_auth_backend.keycloak.path</span>
<span class="line">  role_name     <span class="token operator">=</span> <span class="token string">"devTeam"</span></span>
<span class="line">  token_ttl     <span class="token operator">=</span> <span class="token number">3600</span></span>
<span class="line">  token_max_ttl <span class="token operator">=</span> <span class="token number">3600</span></span>
<span class="line">  token_policies <span class="token operator">=</span> concat<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"devTeam"</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">  bound_audiences <span class="token operator">=</span> <span class="token punctuation">[</span>keycloak_openid_client.openid_client.client_id<span class="token punctuation">]</span></span>
<span class="line">  user_claim      <span class="token operator">=</span> <span class="token string">"sub"</span></span>
<span class="line">  claim_mappings <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    preferred_username <span class="token operator">=</span> <span class="token string">"username"</span></span>
<span class="line">    email              <span class="token operator">=</span> <span class="token string">"email"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  role_type             <span class="token operator">=</span> <span class="token string">"oidc"</span></span>
<span class="line">  allowed_redirect_uris <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"<span class="token variable">${var.vault_url}</span>/ui/vault/auth/oidc-keycloak/oidc/callback"</span>, </span>
<span class="line">                            <span class="token string">"<span class="token variable">${var.vault_url}</span>/oidc/callback"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token comment">#groups_claim          = format("/resource_access/%s/roles", keycloak_openid_client.openid_client.client_id)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"vault_identity_oidc_key"</span> <span class="token string">"keycloak_provider_key"</span> <span class="token punctuation">{</span></span>
<span class="line">  name      <span class="token operator">=</span> <span class="token string">"keycloak"</span></span>
<span class="line">  algorithm <span class="token operator">=</span> <span class="token string">"RS256"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"vault_jwt_auth_backend"</span> <span class="token string">"keycloak"</span> <span class="token punctuation">{</span></span>
<span class="line">  path               <span class="token operator">=</span> <span class="token string">"oidc-keycloak"</span></span>
<span class="line">  <span class="token builtin class-name">type</span>               <span class="token operator">=</span> <span class="token string">"oidc"</span></span>
<span class="line">  default_role       <span class="token operator">=</span> <span class="token string">"default"</span></span>
<span class="line">  oidc_discovery_url <span class="token operator">=</span> format<span class="token punctuation">(</span><span class="token string">"<span class="token variable">${var.keycloak_url}</span>/realms/HashiCorp"</span><span class="token punctuation">)</span></span>
<span class="line">  oidc_client_id     <span class="token operator">=</span> keycloak_openid_client.openid_client.client_id</span>
<span class="line">  oidc_client_secret <span class="token operator">=</span> keycloak_openid_client.openid_client.client_secret</span>
<span class="line">  </span>
<span class="line">  tune <span class="token punctuation">{</span></span>
<span class="line">    audit_non_hmac_request_keys  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">    audit_non_hmac_response_keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">    default_lease_ttl            <span class="token operator">=</span> <span class="token string">"1h"</span></span>
<span class="line">    listing_visibility           <span class="token operator">=</span> <span class="token string">"unauth"</span></span>
<span class="line">    max_lease_ttl                <span class="token operator">=</span> <span class="token string">"1h"</span></span>
<span class="line">    passthrough_request_headers  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">    token_type                   <span class="token operator">=</span> <span class="token string">"default-service"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"vault_jwt_auth_backend_role"</span> <span class="token string">"devteam"</span> <span class="token punctuation">{</span></span>
<span class="line">  backend       <span class="token operator">=</span> vault_jwt_auth_backend.keycloak.path</span>
<span class="line">  role_name     <span class="token operator">=</span> <span class="token string">"devTeam"</span></span>
<span class="line">  token_ttl     <span class="token operator">=</span> <span class="token number">3600</span></span>
<span class="line">  token_max_ttl <span class="token operator">=</span> <span class="token number">3600</span></span>
<span class="line">  token_policies <span class="token operator">=</span> concat<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"devTeam"</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">  bound_audiences <span class="token operator">=</span> <span class="token punctuation">[</span>keycloak_openid_client.openid_client.client_id<span class="token punctuation">]</span></span>
<span class="line">  user_claim      <span class="token operator">=</span> <span class="token string">"sub"</span></span>
<span class="line">  claim_mappings <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    preferred_username <span class="token operator">=</span> <span class="token string">"username"</span></span>
<span class="line">    email              <span class="token operator">=</span> <span class="token string">"email"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  role_type             <span class="token operator">=</span> <span class="token string">"oidc"</span></span>
<span class="line">  allowed_redirect_uris <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"<span class="token variable">${var.vault_url}</span>/ui/vault/auth/oidc-keycloak/oidc/callback"</span>, </span>
<span class="line">                            <span class="token string">"<span class="token variable">${var.vault_url}</span>/oidc/callback"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token comment">#groups_claim          = format("/resource_access/%s/roles", keycloak_openid_client.openid_client.client_id)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">resource <span class="token string">"vault_jwt_auth_backend_role"</span> <span class="token string">"opsteam"</span> <span class="token punctuation">{</span></span>
<span class="line">  backend       <span class="token operator">=</span> vault_jwt_auth_backend.keycloak.path</span>
<span class="line">  role_name     <span class="token operator">=</span> <span class="token string">"opsTeam"</span></span>
<span class="line">  token_ttl     <span class="token operator">=</span> <span class="token number">3600</span></span>
<span class="line">  token_max_ttl <span class="token operator">=</span> <span class="token number">3600</span></span>
<span class="line">  token_policies <span class="token operator">=</span> concat<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"opsTeam"</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">  bound_audiences <span class="token operator">=</span> <span class="token punctuation">[</span>keycloak_openid_client.openid_client.client_id<span class="token punctuation">]</span></span>
<span class="line">  user_claim      <span class="token operator">=</span> <span class="token string">"sub"</span></span>
<span class="line">  claim_mappings <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    preferred_username <span class="token operator">=</span> <span class="token string">"username"</span></span>
<span class="line">    email              <span class="token operator">=</span> <span class="token string">"email"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  role_type             <span class="token operator">=</span> <span class="token string">"oidc"</span></span>
<span class="line">  allowed_redirect_uris <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"<span class="token variable">${var.vault_url}</span>/ui/vault/auth/oidc-keycloak/oidc/callback"</span>, </span>
<span class="line">                            <span class="token string">"<span class="token variable">${var.vault_url}</span>/oidc/callback"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token comment">#groups_claim          = format("/resource_access/%s/roles", keycloak_openid_client.openid_client.client_id)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#</span></span></code></pre></div></details>]]></content:encoded>
    </item>
    <item>
      <title>Gitlab íŒŒì´í”„ë¼ì¸ì˜ Secretì„ Vaultë¡œ ê´€ë¦¬</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/gitlabci-with-vault.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/gitlabci-with-vault.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Gitlab íŒŒì´í”„ë¼ì¸ì˜ Secretì„ Vaultë¡œ ê´€ë¦¬</source>
      <description>Gitlab íŒŒì´í”„ë¼ì¸ì˜ Secretì„ Vaultë¡œ ê´€ë¦¬ Vault ì„¤ì • ì°¸ê³  ë§í¬: Hashicorp ê³µí™ˆ Nomad Vault ì—°ë™ ì°¸ê³  ë§í¬: docmoa Applicationì„ ë°°í¬í• ë•Œ ìš°ë¦¬ëŠ” Applicationì˜ Secretë§Œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, CIë˜ëŠ” CD ë‹¨ê³„ì—ì„œ ì‚¬ìš©ë˜ëŠ” Secretì˜ ì •ë³´ ë˜í•œ ...</description>
      <pubDate>Wed, 18 Sep 2024 09:45:16 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Vault ì„¤ì • ì°¸ê³  ë§í¬: <a href="https://developer.hashicorp.com/well-architected-framework/security/security-cicd-vault" target="_blank" rel="noopener noreferrer">Hashicorp ê³µí™ˆ</a></p>
</blockquote>
<blockquote>
<p>Nomad Vault ì—°ë™ ì°¸ê³  ë§í¬: <a href="https://docmoa.github.io/04-HashiCorp/07-Nomad/04-UseCase/spring-boot-with-vaultandNomad.html" target="_blank" rel="noopener noreferrer">docmoa</a></p>
</blockquote>
<p>Applicationì„ ë°°í¬í• ë•Œ ìš°ë¦¬ëŠ” <strong>Applicationì˜ Secret</strong>ë§Œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, <strong>CIë˜ëŠ” CD ë‹¨ê³„ì—ì„œ ì‚¬ìš©ë˜ëŠ” Secret</strong>ì˜ ì •ë³´ ë˜í•œ ìš°ë¦¬ê°€ ê´€ë¦¬í•˜ëŠ” ëŒ€ìƒì´ ë©ë‹ˆë‹¤.</p>
<p>ê°€ë ¹ ê·¸ëŸ¬í•œ ì •ë³´ë“¤ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
<li>kubernetes api í†µì‹ ì„ ìœ„í•œ <strong>kubectl</strong></li>
<li>Nomad Deployì— í•„ìš”í•œ roleì´ ì ìš©ëœ <strong>Token</strong></li>
<li>ë‹¤ì´ë ‰íŠ¸ë¡œ EC2ì— ë°°í¬í•˜ê¸° ìœ„í•œ <strong>ssh pem</strong></li>
<li>Argo-cd ë°°í¬ë¥¼ ìœ„í•œ ì¸ì¦ì •ë³´</li>
<li>ê·¸ë°–ì— ë‹¤ì–‘í•œ ì—°ë™ toolì˜ ì¸ì¦, ì¸ê°€ì •ë³´</li>
</ul>
<p>ì´ëŸ¬í•œ ë‹¤ì–‘í•œ Secretì€ Vaultë¥¼ í†µí•´ <strong>ë™ì ìœ¼ë¡œ ê´€ë¦¬</strong>í•  ìˆ˜ ìˆìœ¼ë©°, ë™ì ì¸ Secret Engineì´ ì œê³µë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ KV Secret Engineì„ í†µí•´ì„œ <strong>Staticí•œ Data</strong>ë¥¼ ì €ì¥í•´ì„œ ê´€ë¦¬ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ë²ˆ íŒŒì´í”„ë¼ì¸ì€ Vaultì—ì„œ Nomad Tokenì„ ë°›ì•„ì˜¤ê¸° ìœ„í•œ Secret Engineì„ ë§Œë“¤ê³  Gitlab CIì—ì„œ ë°°í¬ ì‹œ Tokenì„ ìƒì„±í•˜ì—¬ Applicationì„ ë°°í¬í•˜ëŠ” ê³¼ì •ì„ í…ŒìŠ¤íŠ¸í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<ol>
<li>Vault Secret Engine ì„¤ì •</li>
</ol>
<ul>
<li>Vault Secret Engineì€ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.</li>
</ul>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment">#Vaultì—ì„œ ì œê³µí•˜ëŠ” Nomad Secret Engineì„ ìƒì„±í•©ë‹ˆë‹¤.</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_nomad_secret_backend"</span></span> <span class="token string">"config"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">backend</span>                   <span class="token punctuation">=</span> <span class="token string">"nomad"</span></span>
<span class="line">  <span class="token property">description</span>               <span class="token punctuation">=</span> <span class="token string">"mzc nomad-server description"</span></span>
<span class="line">  <span class="token property">default_lease_ttl_seconds</span> <span class="token punctuation">=</span> <span class="token string">"360"</span></span>
<span class="line">  <span class="token property">max_lease_ttl_seconds</span>     <span class="token punctuation">=</span> <span class="token string">"720"</span></span>
<span class="line">  <span class="token property">address</span>                   <span class="token punctuation">=</span> <span class="token string">"https://<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">nomad_addr</span><span class="token punctuation">}</span></span>"</span></span>
<span class="line">  <span class="token property">token</span>                     <span class="token punctuation">=</span> data.local_file.nomad_bootstrap.content</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#í•´ë‹¹ roleì— ëŒ€í•´ì„œëŠ” ë°°í¬ë¥¼ ìœ„í•´ management ê¶Œí•œìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_nomad_secret_role"</span></span> <span class="token string">"nomad_role"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">backend</span>   <span class="token punctuation">=</span> vault_nomad_secret_backend.config.backend</span>
<span class="line">  <span class="token property">role</span>      <span class="token punctuation">=</span> <span class="token string">"nomad_role"</span></span>
<span class="line">  <span class="token property">global</span>    <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">type</span>      <span class="token punctuation">=</span> <span class="token string">"management"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ol start="2">
<li>Vault gitlab jwt ì—°ë™</li>
</ol>
<ul>
<li>Gitlab CIì—ì„œ Vaultì˜ ì¸ì¦ì¸ê°€ë¥¼ ë°›ê¸° ìœ„í•´ JWT ì—°ë™ì„ ì§„í–‰í•©ë‹ˆë‹¤.
<ul>
<li>í•´ë‹¹ authì˜ roleì— token policyëŠ” 1ë²ˆì—ì„œ ìƒì„±í•œ nomad secret engineì˜ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token keyword">resource <span class="token type variable">"vault_jwt_auth_backend"</span></span> <span class="token string">"gitlab"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">description</span> <span class="token punctuation">=</span> <span class="token string">"JWT Auth for GitLab"</span>  </span>
<span class="line">  <span class="token property">path</span>               <span class="token punctuation">=</span> <span class="token string">"gitlab-jwt"</span></span>
<span class="line">  <span class="token property">oidc_discovery_url</span> <span class="token punctuation">=</span> <span class="token string">"https://gitlab-url.url"</span></span>
<span class="line">  <span class="token property">bound_issuer</span>       <span class="token punctuation">=</span> <span class="token string">"https://gitlab-url.url"</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_policy"</span></span> <span class="token string">"nomad_mgmt"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"nomad-mgmt"</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">policy</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;EOT</span>
<span class="line">path "nomad/creds/nomad_role" {</span>
<span class="line">  capabilities = ["read","create"]</span>
<span class="line">}</span>
<span class="line">path "nomad/creds/nomad_role/*" {</span>
<span class="line">  capabilities = ["read","create"]</span>
<span class="line">}</span>
<span class="line">EOT</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#ì œ í™˜ê²½ì˜ gitlab repository(project)ì˜ idê°€ 5ì…ë‹ˆë‹¤.</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_jwt_auth_backend_role"</span></span> <span class="token string">"gitlab_role"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">backend</span>            <span class="token punctuation">=</span> vault_jwt_auth_backend.gitlab.path</span>
<span class="line">  <span class="token property">role_name</span>          <span class="token punctuation">=</span> <span class="token string">"gitlab-role"</span></span>
<span class="line">  <span class="token property">role_type</span>          <span class="token punctuation">=</span> <span class="token string">"jwt"</span></span>
<span class="line">  <span class="token property">bound_audiences</span>    <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"https://gitlab-url.url"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">user_claim</span>         <span class="token punctuation">=</span> <span class="token string">"user_email"</span></span>
<span class="line">  <span class="token property">token_policies</span>     <span class="token punctuation">=</span> <span class="token punctuation">[</span>vault_policy.nomad_mgmt.name<span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">bound_claims</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">project_id</span> <span class="token punctuation">=</span> <span class="token string">"5"</span>,</span>
<span class="line">    <span class="token property">ref</span> <span class="token punctuation">=</span> <span class="token string">"main"</span>,</span>
<span class="line">    <span class="token property">ref_type</span> <span class="token punctuation">=</span> <span class="token string">"branch"</span></span>
<span class="line">  <span class="token punctuation">}</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ol start="3">
<li>Gitlab-CI ì„¤ì •</li>
</ol>
<ul>
<li>.gitlab-ci.yml íŒŒì¼ì…ë‹ˆë‹¤.
<ul>
<li>íŒŒì´í”„ë¼ì¸ ì „ì²´ëŠ” ì•„ë‹ˆë©° Gitlab ciì—ì„œ Vaultì˜ ì¸ì¦ì¸ê°€ë¥¼ ë°›ê³  Nomad Tokenì„ í™œìš©í•˜ëŠ” CD ë‹¨ê³„ë¡œ ë³´ì‹œë©´ ë©ë‹ˆë‹¤.</li>
<li>bound_audiencesì— ê¸°ì… í•œ ê°’ ê¸°ì¤€ìœ¼ë¡œ ì²´í¬ í›„ ì„ì‹œ Tokenì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.</li>
<li>jwt Tokenì„ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë¦¬ ì—°ë™í•´ ë‘” gitlab-roleì— ëŒ€í•œ tokenì„ ë°›ì•„ì˜µë‹ˆë‹¤.</li>
<li>gitlab-role tokenì„ í™œìš©í•˜ì—¬ Nomad tokenì„ ë‹¤ìŒ stageë¡œ ë„˜ê²¨ì¤ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Vaultë¡œ Spring Boot êµ¬ì„±ê´€ë¦¬ Nomad Version</title>
      <link>https://docmoa.github.io/04-HashiCorp/07-Nomad/04-UseCase/spring-boot-with-vaultandNomad.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/07-Nomad/04-UseCase/spring-boot-with-vaultandNomad.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vaultë¡œ Spring Boot êµ¬ì„±ê´€ë¦¬ Nomad Version</source>
      <description>Vaultë¡œ Spring Boot êµ¬ì„±ê´€ë¦¬ Nomad Version token, app-roleë¡œ ê´€ë¦¬: docmoa aws-authë¡œ ê´€ë¦¬: docmoa Spring Bootì—ì„œëŠ” Token, AppRole ì™¸ì—ë„ AWS Authë¥¼ í†µí•´ ì‹œí¬ë¦¿ì„ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. AWS Auth ë°©ì‹ì€ AWS IAMê³¼ EC2 ...</description>
      <pubDate>Sun, 08 Sep 2024 11:26:38 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>token, app-roleë¡œ ê´€ë¦¬: <a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/spring-boot.html" target="_blank" rel="noopener noreferrer">docmoa</a></p>
</blockquote>
<blockquote>
<p>aws-authë¡œ ê´€ë¦¬: <a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/spring-boot-with-vault.html" target="_blank" rel="noopener noreferrer">docmoa</a></p>
</blockquote>
<p>Spring Bootì—ì„œëŠ” <strong>Token, AppRole</strong> ì™¸ì—ë„ <strong>AWS Auth</strong>ë¥¼ í†µí•´ ì‹œí¬ë¦¿ì„ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. AWS Auth ë°©ì‹ì€ <strong>AWS IAMê³¼ EC2 Tag</strong>ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ê³¼ì •ì„ ê°„ì†Œí™”í•˜ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ AWS Authì˜ ë‹¨ì ì€ <strong>AWSì— ì¢…ì†</strong>ëœë‹¤ëŠ” ì ê³¼, <strong>IAM ê¶Œí•œ ì„¤ì •</strong> ê³¼ì •ì´ ë³µì¡í•´ì ¸ ê´€ë¦¬ê°€ ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. IAM ì •ì±… ë° ê¶Œí•œì„ ì˜ëª» ì„¤ì •í•˜ë©´ ë³´ì•ˆ ì·¨ì•½ì ì´ ë°œìƒí•˜ê±°ë‚˜ ì ‘ê·¼ì´ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ” ë¬¸ì œë¥¼ ê²ªì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë˜ì„œ ì´ì— ëŒ€í•œ í•´ê²°ì±…ìœ¼ë¡œ <strong>Nomadë¥¼ í†µí•´ Vaultì™€ í†µí•©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê´€ë¦¬</strong>í•˜ëŠ” ë°©ì‹ì„ ì œì•ˆë“œë¦½ë‹ˆë‹¤. Nomadë¥¼ ì‚¬ìš©í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°°í¬ì™€ Vault ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ê³¼ì •ì´ Nomadì™€ Vault ê°„ì—ë§Œ ì²˜ë¦¬ë˜ë©°, ê°œë°œìëŠ” ì´ë¥¼ ì‹ ê²½ ì“°ì§€ ì•Šê³  ë°°í¬ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>Nomadì™€ Vaultì˜ í†µí•©ì„ í†µí•´ ì¸ì¦ê³¼ ì¸ê°€ë¥¼ ìë™í™”í•˜ê³  ê´€ë¦¬ ë³µì¡ì„±ì„ ì¤„ì´ëŠ” ë°©ë²•ì„ ì•„ë˜ í…ŒìŠ¤íŠ¸ì—ì„œ í•¨ê»˜ ì‚´í´ë³´ì‹œì£ .</p>
<p>ë¨¼ì € ì•„ë˜ ë‘ê°€ì§€ ë°©ì‹ì´ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
<li>tokenë§Œ ì¹˜í™˜í•˜ë©´ ë˜ëŠ” ìƒí™©</li>
<li>secretì„ ë°›ì•„ì˜¤ê³  Nomad jobì— ì£¼ì…í•˜ëŠ” ë°©ì‹</li>
</ul>
<p>ì²˜ìŒ ê±°ëŠ” Spring boot appìœ¼ë¡œ ì§„í–‰ í•  ê²ƒì´ë©°, ë‘ë²ˆì§¸ëŠ” keycloak envë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒìœ¼ë¡œ ì§„í–‰í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<ol>
<li>Vault Secret ì„¤ì •</li>
</ol>
<ul>
<li>Vault Secretì€ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.
<ul>
<li>vault_token_auth_backend_role.nomad_clusterì—ì„œëŠ” Nomad Clusterì˜ ì ìš© ë  tokenì˜ role ì„¤ì •ì…ë‹ˆë‹¤.</li>
<li>vault_policy.adminì—ì„œëŠ” Nomad Clusterì—ì„œ tokenì„ ì¸ì¦ì¸ê°€ ë°›ëŠ” ê¶Œí•œì´ ì„¤ì •ë©ë‹ˆë‹¤.</li>
<li>vault_policy.vault_and_springì—ì„œëŠ” Nomad jobì—ì„œ ì‚¬ìš© í•  Secretì˜ Pathì˜ ê¶Œí•œì„ ì„¤ì •í•©ë‹ˆë‹¤.</li>
<li>vault_kv_secret_v2.keycloak_envì—ì„œëŠ” keycloakì—ì„œ ì‚¬ìš©ë˜ëŠ” í™˜ê²½ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment">#Nomad Clusterì˜ ì ìš© ë  policyì™€ jobì—ì„œ ì‚¬ìš© ë  policyë¥¼ roleì— ì„¤ì •í•©ë‹ˆë‹¤.</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_token_auth_backend_role"</span></span> <span class="token string">"nomad_cluster"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">allowed_policies</span>        <span class="token punctuation">=</span> <span class="token punctuation">[</span>vault_policy.admin.name,vault_policy.vault_and_spring.name<span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">orphan</span>                  <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">token_period</span>            <span class="token punctuation">=</span> <span class="token number">94608000</span></span>
<span class="line">  <span class="token property">renewable</span>               <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">token_explicit_max_ttl</span>  <span class="token punctuation">=</span> <span class="token number">0</span>    </span>
<span class="line">  <span class="token property">role_name</span>               <span class="token punctuation">=</span> <span class="token string">"nomad-admin"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Admin ì •ì±… ìƒì„±</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_policy"</span></span> <span class="token string">"admin"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"nomad-admin"</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">policy</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;EOT</span>
<span class="line"># Read system health check</span>
<span class="line">path "sys/health" {</span>
<span class="line">  capabilities = ["read", "sudo"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"># List existing policies</span>
<span class="line">path "sys/policies/acl" {</span>
<span class="line">  capabilities = ["list"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"># Create and manage ACL policies</span>
<span class="line">path "sys/policies/acl/*" {</span>
<span class="line">  capabilities = ["create", "read", "update", "delete", "list", "sudo"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"># Manage auth methods broadly across Vault</span>
<span class="line">path "auth/*" {</span>
<span class="line">  capabilities = ["create", "read", "update", "delete", "list", "sudo"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"># Create, update, and delete auth methods</span>
<span class="line">path "sys/auth/*" {</span>
<span class="line">  capabilities = ["create", "update", "delete", "sudo"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"># List auth methods</span>
<span class="line">path "sys/auth" {</span>
<span class="line">  capabilities = ["read"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"># List, create, update, and delete key/value secrets</span>
<span class="line">path "nomad-job/*" {</span>
<span class="line">  capabilities = ["create", "read", "update", "delete", "list", "sudo"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"># Manage secrets engines</span>
<span class="line">path "sys/mounts/*" {</span>
<span class="line">  capabilities = ["create", "read", "update", "delete", "list", "sudo"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"># List existing secrets engines.</span>
<span class="line">path "sys/mounts" {</span>
<span class="line">  capabilities = ["read"]</span>
<span class="line">}</span>
<span class="line">EOT</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#applicationì—ì„œ ì ‘ê·¼ ì‹œ ì‚¬ìš© ë˜ëŠ” policyì…ë‹ˆë‹¤.</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_policy"</span></span> <span class="token string">"vault_and_spring"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"vault_and_spring"</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">policy</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;EOT</span>
<span class="line">path "mzc-spring/data/java_and_vault" {</span>
<span class="line">  capabilities = ["read","update","create"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">path "mzc-spring/data/java_and_vault/dev" {</span>
<span class="line">  capabilities = ["read","update","create"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">EOT</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Token ìƒì„±</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_token"</span></span> <span class="token string">"admin_token"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">policies</span>  <span class="token punctuation">=</span> <span class="token punctuation">[</span>vault_policy.admin.name<span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">period</span>    <span class="token punctuation">=</span> <span class="token string">"36500h"</span> <span class="token comment"># 36500ì‹œê°„ (ì•½ 4ë…„)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Vaultì— KV secret engine ë§ˆìš´íŠ¸</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_mount"</span></span> <span class="token string">"nomad-job"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">path</span>    <span class="token punctuation">=</span> <span class="token string">"nomad-job"</span></span>
<span class="line">  <span class="token property">type</span>    <span class="token punctuation">=</span> <span class="token string">"kv"</span></span>
<span class="line">  <span class="token property">options</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"2"</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># sampleë¡œ ë³´ê²Œ ë  keycloak secret ì…ë‹ˆë‹¤.</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_kv_secret_v2"</span></span> <span class="token string">"keycloak_env"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">mount</span>               <span class="token punctuation">=</span> vault_mount.nomad-job.path</span>
<span class="line">  <span class="token property">name</span>                <span class="token punctuation">=</span> <span class="token string">"keycloak/config"</span></span>
<span class="line">  <span class="token property">cas</span>                 <span class="token punctuation">=</span> <span class="token number">1</span></span>
<span class="line">  <span class="token property">delete_all_versions</span> <span class="token punctuation">=</span> <span class="token boolean">false</span></span>
<span class="line">  <span class="token property">data_json</span> <span class="token punctuation">=</span> jsonencode(<span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">KEYCLOAK_ADMIN</span>                   <span class="token punctuation">=</span> <span class="token string">"id"</span>,</span>
<span class="line">    <span class="token property">KEYCLOAK_ADMIN_PASSWORD</span>          <span class="token punctuation">=</span> <span class="token string">"passowrd"</span>,</span>
<span class="line">    <span class="token property">KEYCLOAK_BASE_URL</span>                <span class="token punctuation">=</span> <span class="token string">"/realms/master/hostname-debug"</span>,</span>
<span class="line">    <span class="token property">KC_HOSTNAME_DEBUG</span>                <span class="token punctuation">=</span> <span class="token boolean">true</span>,</span>
<span class="line">    <span class="token property">KC_HOSTNAME_STRICT</span>               <span class="token punctuation">=</span> <span class="token boolean">true</span>,</span>
<span class="line">    <span class="token property">KC_HOSTNAME</span>                      <span class="token punctuation">=</span> <span class="token string">"keycloak.domain"</span>,</span>
<span class="line">    <span class="token property">KC_HOSTNAME_STRICT_HTTPS</span>         <span class="token punctuation">=</span> <span class="token boolean">true</span>,</span>
<span class="line">    <span class="token property">KC_HTTP_ENABLED</span>                  <span class="token punctuation">=</span> <span class="token boolean">false</span>,</span>
<span class="line">    <span class="token property">KC_HTTPS_CERTIFICATE_FILE</span>        <span class="token punctuation">=</span> <span class="token string">"/etc/x509/https/keycloak.crt"</span>,</span>
<span class="line">    <span class="token property">KC_HTTPS_CERTIFICATE_KEY_FILE</span>    <span class="token punctuation">=</span> <span class="token string">"/etc/x509/https/keycloak.key"</span>,</span>
<span class="line">    <span class="token property">QUARKUS_HTTP_HOST</span>                <span class="token punctuation">=</span> <span class="token string">"0.0.0.0"</span></span>
<span class="line">  <span class="token punctuation">}</span>)</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ol start="2">
<li>Nomad ì„¤ì •</li>
</ol>
<ul>
<li>Nomad Serverì™€ Clientì— ë‹¤ìŒê³¼ ê°™ì€ ì„¤ì •ì´ ì¶”ê°€ë©ë‹ˆë‹¤.</li>
</ul>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment"># Nomad Server /etc/nomad.d/nomad.hcl</span></span>
<span class="line">...</span>
<span class="line"><span class="token keyword">vault</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">enabled</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token property">address</span> <span class="token punctuation">=</span> <span class="token string">"vault Server url:port"</span></span>
<span class="line">    <span class="token property">namespace</span> <span class="token punctuation">=</span> <span class="token string">"admin"</span></span>
<span class="line">    <span class="token property">create_from_role</span> <span class="token punctuation">=</span> <span class="token string">"nomad-admin"</span></span>
<span class="line">    <span class="token property">token</span> <span class="token punctuation">=</span> <span class="token string">"1ë²ˆì—ì„œ ìƒì„±í•œ token"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">...</span>
<span class="line"><span class="token comment"># Nomad Client /etc/nomad.d/nomad.hcl</span></span>
<span class="line"><span class="token keyword">vault</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">enabled</span>   <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">address</span>   <span class="token punctuation">=</span> <span class="token string">"vault Server url:port"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">...</span>
<span class="line"></span></code></pre></div><ol start="3">
<li>Nomad jobì—ì„œ Secret ì„¤ì •</li>
</ol>
<ul>
<li>NomadëŠ” ë°°í¬ë¥¼ jobì´ë¼ëŠ” í˜•ì‹ì„ í†µí•´ì„œ ë°°í¬í•©ë‹ˆë‹¤.</li>
<li>ë°°í¬ë¥¼ ì§„í–‰í• ë•Œ Vaultì— ìˆëŠ” Secretì„ fileí™” í•˜ê±°ë‚˜ í™˜ê²½ë³€ìˆ˜ì— ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>keycloak appì—ì„œ ì–´ë–¤ì‹ìœ¼ë¡œ ì ìš©ë˜ëŠ” ì§€ ê°™ì´ ì‚´í´ë³´ì‹œì£ .</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">job "keycloak" {</span>
<span class="line">  type = "service"</span>
<span class="line">  datacenters = ["dc1"]</span>
<span class="line"></span>
<span class="line">  group "keycloak" {</span>
<span class="line">    count = 1</span>
<span class="line">....................       </span>
<span class="line">    </span>
<span class="line">    task "keycloak" {</span>
<span class="line">      driver = "docker"</span>
<span class="line">  </span>
<span class="line">      config {</span>
<span class="line">        image = "quay.io/keycloak/keycloak:24.0.0"</span>
<span class="line">        args = ["start",</span>
<span class="line">        "--optimized",</span>
<span class="line">        "--https-port=9443"]</span>
<span class="line">        volumes = [</span>
<span class="line">          "local/keycloak.conf:/etc/keycloak.conf",</span>
<span class="line">        ] </span>
<span class="line">        ports = ["http"]</span>
<span class="line"></span>
<span class="line">      }</span>
<span class="line">      #Vaultì˜ policyë¥¼ ì§€ì •í•©ë‹ˆë‹¤.</span>
<span class="line">      vault {</span>
<span class="line">        policies  = ["nomad-admin"]</span>
<span class="line">        change_mode   = "signal"</span>
<span class="line">        change_signal = "SIGINT"</span>
<span class="line">      }</span>
<span class="line">      #ë°ì´í„°ë¥¼ ë°›ì•„ ì˜¬ secretì˜ pathë¥¼ ì§€ì •í•˜ê³  ëª¨ë“  key, valueë¥¼ key=valueë¡œ ì¹˜í™˜í•©ë‹ˆë‹¤.</span>
<span class="line">      template {</span>
<span class="line">        data = &lt;&lt;EOH</span>
<span class="line">    {{- with secret "nomad-job/data/keycloak/config" }}</span>
<span class="line">    {{- range $key, $value := .Data.data }}</span>
<span class="line">    {{ $key }}="{{ $value }}"</span>
<span class="line">    {{- end }}</span>
<span class="line">    {{- end }}</span>
<span class="line">    EOH</span>
<span class="line"></span>
<span class="line">        destination = "secrets/file.env"</span>
<span class="line">        env         = true</span>
<span class="line">     }      </span>
<span class="line">....................      </span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span></code></pre></div><ol start="4">
<li>ë°°í¬ í™•ì¸</li>
</ol>
<ul>
<li>
<p>ë¨¼ì € secretí•œ ê°’ë“¤ì€ ìœ ì €ê°€ ì•Œì§€ ëª»í•´ì•¼ í•˜ë©°, í™•ì¸ë„ í•  ìˆ˜ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤.</p>
</li>
<li>
<p>ë°°í¬ëŒ€ìƒ(container ë˜ëŠ” ì„œë²„)ì— ì ‘ê·¼í•œë‹¤ë©´ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ í–‰ìœ„ ìì²´ëŠ” ì´ë¯¸ ë³´ì•ˆì ì¸ ì´ìŠˆê°€ ìƒê¸´ ìƒí™©ì´ë‚˜ ê¸´ê¸‰í•œ ìƒí™©ì¼ ê²½ìš°ì¼ ê²ƒì…ë‹ˆë‹¤.</p>
</li>
<li>
<p>nomad uiì—ì„œëŠ” env íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
</p>
</li>
<li>
<p>nomad uiì—ì„œëŠ” token ë˜í•œ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
</p>
</li>
<li>
<p>Containerì— ë‹¤ì´ë ‰íŠ¸ë¡œ ì ‘ê·¼í•´ì•¼ ë§Œ envë¥¼ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
</p>
</li>
</ul>
<ol start="5">
<li>ë¯¸ë¦¬ Applicationì— Tokenë§Œ ì£¼ì…í•˜ë©´ ë˜ëŠ” ìƒí™©</li>
</ol>
<ul>
<li>ì´ë¯¸ <a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/spring-boot.html" target="_blank" rel="noopener noreferrer">docmoa</a>ì—ì„œ ì•Œì•„ ë³¸ Tokenë°©ì‹ì˜ ì¸ì¦ ì¼ ê²½ìš°ëŠ” CI/CDì—ì„œ Tokenì„ ì£¼ì…í•´ì•¼í•©ë‹ˆë‹¤.</li>
<li>ë§Œì•½ Nomadë¡œ ë°°í¬í•˜ë©´ ì´ëŸ¬í•œ Token ë˜í•œ Nomadê°€ ì£¼ì…, ë¡œí…Œì´íŠ¸ê¹Œì§€ ì§„í–‰í•´ì¤ë‹ˆë‹¤.</li>
<li>keycloak sampleê³¼ ë‹¤ë¥´ê²Œ ë§¤ìš° ë‹¨ìˆœí•©ë‹ˆë‹¤. tokenë§Œ ì£¼ì…í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</li>
<li>ë¨¼ì € ì§€ë‚œ yamlì„ í•œë²ˆ ë” í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">spring:</span>
<span class="line">  cloud:</span>
<span class="line">    vault:</span>
<span class="line">      host: vault_url</span>
<span class="line">      port: 8200</span>
<span class="line">      scheme: https</span>
<span class="line">      namespace: admin</span>
<span class="line">      authentication: TOKEN</span>
<span class="line">      application-name: java_and_vault</span>
<span class="line">      # VAULT_TOKENì´ë¼ëŠ” í™˜ê²½ë³€ìˆ˜ì˜ Vault tokenë§Œ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.</span>
<span class="line">      token: ${VAULT_TOKEN:root}</span>
<span class="line">      # profiles: dev</span>
<span class="line">      generic:</span>
<span class="line">        enabled: false</span>
<span class="line">      kv:</span>
<span class="line">        enabled: true</span>
<span class="line">        backend: mzc-spring</span>
<span class="line">        profile-separator: /</span>
<span class="line"></span></code></pre></div><ul>
<li>
<p>spring.cloud.vault.tokenì— í™˜ê²½ë³€ìˆ˜ë¡œ VAULT_TOKENë§Œ ìˆìœ¼ë©´ ë˜ëŠ” ìƒí™©ì…ë‹ˆë‹¤.</p>
</li>
<li>
<p>í•´ë‹¹ í† í°ë§Œ ìˆë‹¤ë©´ ë‚˜ë¨¸ì§€ Secretì€ spring.cloud.vault.kv.backend ì„¤ì •ì— ë”°ë¼ ë¶ˆëŸ¬ ì˜¬ ìˆ˜ ìˆëŠ” ìƒí™©ì…ë‹ˆë‹¤.</p>
</li>
<li>
<p>ë‹¤ìŒì€ Nomad jobì…ë‹ˆë‹¤.</p>
</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">job "vault_and_spring" {</span>
<span class="line">  type = "service"</span>
<span class="line">  datacenters = ["dc1"]</span>
<span class="line"></span>
<span class="line">  group "vault_and_spring" {</span>
<span class="line">    count = 1</span>
<span class="line">    </span>
<span class="line">    service {</span>
<span class="line">      name = "spring"</span>
<span class="line">      tags = ["vault","spring"]</span>
<span class="line">      provider = "nomad"</span>
<span class="line">      check {</span>
<span class="line">        type  = "tcp"</span>
<span class="line">        interval = "20s"</span>
<span class="line">        timeout  = "2s"</span>
<span class="line">        port  = "vault_and_spring"</span>
<span class="line">      }      </span>
<span class="line">    }</span>
<span class="line">    </span>
<span class="line">    network {</span>
<span class="line">      port "vault_and_spring" {</span>
<span class="line">        static  = 8081</span>
<span class="line">        to      = 8081</span>
<span class="line">      }</span>
<span class="line">    }</span>
<span class="line">    task "ecr-login" {</span>
<span class="line">      driver = "raw_exec"</span>
<span class="line"></span>
<span class="line">      config {</span>
<span class="line">        command = "/bin/bash"</span>
<span class="line">        args    = ["local/ecr-login.sh"]</span>
<span class="line">      }</span>
<span class="line">      template {</span>
<span class="line">        data = &lt;&lt;EOH</span>
<span class="line">aws ecr get-login-password --region ap-northeast-2 | docker login --username AWS --password-stdin account.dkr.ecr.ap-northeast-2.amazonaws.com</span>
<span class="line">cat /root/.docker/config.json</span>
<span class="line">EOH</span>
<span class="line">    destination = "local/ecr-login.sh"</span>
<span class="line">      }</span>
<span class="line"></span>
<span class="line">      resources {</span>
<span class="line">        cpu    = 100</span>
<span class="line">        memory = 256</span>
<span class="line">      }</span>
<span class="line"></span>
<span class="line">      lifecycle {</span>
<span class="line">        hook   = "prestart"</span>
<span class="line">        sidecar = false</span>
<span class="line">      }</span>
<span class="line">    }    </span>
<span class="line">      </span>
<span class="line">    task "vault_and_spring" {</span>
<span class="line">      driver = "docker"</span>
<span class="line">  </span>
<span class="line">      config {</span>
<span class="line">        image = "account.dkr.ecr.ap-northeast-2.amazonaws.com/vault_and_spring:latest"</span>
<span class="line">        args = ["--spring.profiles.active=dev"] </span>
<span class="line">        ports = ["vault_and_spring"]</span>
<span class="line">      }</span>
<span class="line">      #ë¯¸ë¦¬ ìƒì„±í•œ Vault tokenì„ ê¸°ì…í•´ì¤ë‹ˆë‹¤.</span>
<span class="line">      vault {</span>
<span class="line">        policies  = ["vault_and_spring"]</span>
<span class="line">        change_mode   = "signal"</span>
<span class="line">        change_signal = "SIGINT"</span>
<span class="line">      }      </span>
<span class="line">...................</span>
<span class="line">}</span>
<span class="line"></span></code></pre></div><ul>
<li>keycloakê³¼ëŠ” ë‹¤ë¥´ê²Œ secretì„ envì— ë„£ëŠ” êµ¬ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.</li>
</ul>
<ol start="6">
<li>ì ìš© í™•ì¸</li>
</ol>
<ul>
<li>ë°°í¬ ê²°ê³¼ë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.<br>
</li>
<li>ì´ì œëŠ” ìµìˆ™í•œ urlê³¼ db id, passwordê°€ ì˜ ì°íˆê³  ìˆìŠµë‹ˆë‹¤.</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Vaultë¡œ Spring Boot êµ¬ì„±ê´€ë¦¬ aws-auth Version</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/spring-boot-with-vault.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/spring-boot-with-vault.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vaultë¡œ Spring Boot êµ¬ì„±ê´€ë¦¬ aws-auth Version</source>
      <description>Vaultë¡œ Spring Boot êµ¬ì„±ê´€ë¦¬ aws-auth Version token, app-roleë¡œ ê´€ë¦¬: docmoa Spring bootì—ì„œëŠ” Token, App-roleì„ ì œì™¸í•˜ê³  aws-authë¥¼ í†µí•´ì„œë„ Secretì„ ì£¼ì… í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. aws-authì—ì„œëŠ” ë‹¤ìŒì˜ ë‘ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤. AWS IA...</description>
      <pubDate>Wed, 04 Sep 2024 10:00:02 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>token, app-roleë¡œ ê´€ë¦¬: <a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/spring-boot.html" target="_blank" rel="noopener noreferrer">docmoa</a></p>
</blockquote>
<p>Spring bootì—ì„œëŠ” Token, App-roleì„ ì œì™¸í•˜ê³  aws-authë¥¼ í†µí•´ì„œë„ Secretì„ ì£¼ì… í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
aws-authì—ì„œëŠ” ë‹¤ìŒì˜ ë‘ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>
<ul>
<li>AWS IAM
<ul>
<li>EC2ì— ì ìš©ë˜ëŠ” AWS IAM Nameì„ ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦, ì¸ê°€ë¥¼ ë°›ê³  Applicationì´ <strong>ì‹¤í–‰</strong> ë  ë•Œ Secretì„ ì£¼ì…í•©ë‹ˆë‹¤.</li>
</ul>
</li>
<li>EC2 Tag
<ul>
<li>EC2ì— ì ìš©ë˜ëŠ” AWS Tag Nameì˜ Value ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦, ì¸ê°€ë¥¼ ë°›ê³  Applicationì´ <strong>ì‹¤í–‰</strong> ë  ë•Œ Secretì„ ì£¼ì…í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<p>ë‘ ê¸°ëŠ¥ì— ëŒ€í•œ ì¥ì ì€ Spring bootì˜ ê³µí†µ ì˜ì—­ì¸ application.yamlì˜ tokenì´ë‚˜ app-roleì˜ ê°’ì´ ë…¸ì¶œë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆê³ , ci/cd ë‹¨ê³„ ë˜í•œ ì¹˜í™˜í•˜ëŠ” ê³¼ì •ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.</p>
<p>ìì„¸í•œ ê¸°ëŠ¥ë“¤ì€ ì•„ë˜ì˜ ì„¤ì •ì„ ë³´ë©´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>
<ol>
<li>Vault Secret ì„¤ì •</li>
</ol>
<ul>
<li>Vault Secretì€ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.</li>
<li>ì—¬ê¸°ì„œ ìƒì„±í•˜ëŠ” <strong>Secret Engine</strong>ëª…ê³¼ <strong>KV Path</strong>ëª…ì„ ê¸°ì¤€ìœ¼ë¡œ ìë™í™”ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment"># Vault Secret engineì˜ ì´ë¦„ì„ spring* application ì´ë¦„ê³¼ ë™ì¼í•˜ê²Œ ë§ì¶”ë©´ ì¡°ê¸ˆ ë” ì„¤ì •ì´ ì‰½ìŠµë‹ˆë‹¤.</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_mount"</span></span> <span class="token string">"kv_spring"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">path</span>    <span class="token punctuation">=</span> <span class="token string">"java_and_vault"</span></span>
<span class="line">  <span class="token property">type</span>    <span class="token punctuation">=</span> <span class="token string">"kv"</span></span>
<span class="line">  <span class="token property">options</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"2"</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># secret engine pathëŠ” profile ëª…ìœ¼ë¡œ ì§€ì •í•œë‹¤ë©´ ì¡°ê¸ˆ ë” ì„¤ì •ì´ ì‰½ìŠµë‹ˆë‹¤.</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_kv_secret_v2"</span></span> <span class="token string">"kv_java_and_vault_dev"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">mount</span>               <span class="token punctuation">=</span> vault_mount.kv_spring.path</span>
<span class="line">  <span class="token property">name</span>                <span class="token punctuation">=</span> <span class="token string">"dev"</span></span>
<span class="line">  <span class="token property">cas</span>                 <span class="token punctuation">=</span> <span class="token number">1</span></span>
<span class="line">  <span class="token property">delete_all_versions</span> <span class="token punctuation">=</span> <span class="token boolean">false</span></span>
<span class="line">  <span class="token property">data_json</span> <span class="token punctuation">=</span> jsonencode(<span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"cloud.aws.s3.accessKey"</span>     <span class="token punctuation">=</span> <span class="token string">"aws_access"</span>,</span>
<span class="line">    <span class="token property">"cloud.aws.s3.bucket"</span>        <span class="token punctuation">=</span> <span class="token string">"gc-vault-test"</span>,</span>
<span class="line">    <span class="token property">"cloud.aws.s3.region"</span>        <span class="token punctuation">=</span> <span class="token string">"ap-northeast-2"</span>,</span>
<span class="line">    <span class="token property">"cloud.aws.s3.secretKey"</span>     <span class="token punctuation">=</span> <span class="token string">"aws_secret"</span>,</span>
<span class="line">    <span class="token property">"spring.datasource.password"</span> <span class="token punctuation">=</span> <span class="token string">"password"</span>,</span>
<span class="line">    <span class="token property">"spring.datasource.url"</span>      <span class="token punctuation">=</span> <span class="token string">"db_url"</span>,</span>
<span class="line">    <span class="token property">"spring.datasource.username"</span> <span class="token punctuation">=</span> <span class="token string">"username"</span></span>
<span class="line">  <span class="token punctuation">}</span>)</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ol start="2">
<li>Vault AWS-Auth ì„¤ì • (IAM, EC2-Tag)</li>
</ol>
<ul>
<li>aws_spring_boot_iam
<ul>
<li>iam ê¸°ì¤€ìœ¼ë¡œ ì¸ì¦í•˜ëŠ” aws-auth roleì…ë‹ˆë‹¤.</li>
<li>ë¯¸ë¦¬ ìƒì„±í•œ aws iamì„ "bound_iam_role_arns"ì— ëª…ì‹œí•©ë‹ˆë‹¤.</li>
</ul>
</li>
<li>aws_spring_boot_ec2
<ul>
<li>ec2 tag ê¸°ì¤€ìœ¼ë¡œ ì¸ì¦í•˜ëŠ” aws-auth roleì…ë‹ˆë‹¤.</li>
<li>ec2ì— tag keyë¡œ "role_tag" valueë¡œëŠ” outputì¸ "vault_ec2_tag"ì— ê°’ì„ ì…ë ¥í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token keyword">resource <span class="token type variable">"vault_policy"</span></span> <span class="token string">"policy_spring_boot"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"spring-boot-vault"</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">policy</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;EOT</span>
<span class="line">path "${vault_mount.kv_spring.path}/data/java_and_vault" {</span>
<span class="line">  capabilities = ["read"]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">path "${vault_mount.kv_spring.path}/data/java_and_vault/dev" {</span>
<span class="line">  capabilities = ["read"]</span>
<span class="line">}</span>
<span class="line">EOT</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_auth_backend"</span></span> <span class="token string">"aws"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">"aws"</span></span>
<span class="line">  <span class="token property">path</span> <span class="token punctuation">=</span> <span class="token string">"aws"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_aws_auth_backend_role"</span></span> <span class="token string">"aws_spring_boot_iam"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">backend</span>   <span class="token punctuation">=</span> vault_auth_backend.aws.path</span>
<span class="line">  <span class="token property">role</span>      <span class="token punctuation">=</span> <span class="token string">"aws-spring-boot-iam"</span></span>
<span class="line">  <span class="token property">auth_type</span> <span class="token punctuation">=</span> <span class="token string">"iam"</span></span>
<span class="line">  <span class="token property">bound_iam_role_arns</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">"arn:aws:iam::accountID:role/vault_role"</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">inferred_entity_type</span> <span class="token punctuation">=</span> <span class="token string">"ec2_instance"</span></span>
<span class="line">  <span class="token property">inferred_aws_region</span>  <span class="token punctuation">=</span> <span class="token string">"ap-northeast-2"</span></span>
<span class="line">  <span class="token property">token_policies</span>       <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>vault_policy<span class="token punctuation">.</span>policy_spring_boot<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_aws_auth_backend_role"</span></span> <span class="token string">"aws_spring_boot_ec2"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">backend</span>           <span class="token punctuation">=</span> vault_auth_backend.aws.path</span>
<span class="line">  <span class="token property">role</span>              <span class="token punctuation">=</span> <span class="token string">"aws-spring-boot-ec2"</span></span>
<span class="line">  <span class="token property">auth_type</span>         <span class="token punctuation">=</span> <span class="token string">"ec2"</span></span>
<span class="line">  <span class="token property">bound_account_ids</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"accountID"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">role_tag</span>          <span class="token punctuation">=</span> <span class="token string">"svc_type"</span></span>
<span class="line">  <span class="token property">token_policies</span>    <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>vault_policy<span class="token punctuation">.</span>policy_spring_boot<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_aws_auth_backend_role_tag"</span></span> <span class="token string">"aws_spring_boot_ec2_tag"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">backend</span> <span class="token punctuation">=</span> vault_auth_backend.aws.path</span>
<span class="line">  <span class="token property">role</span>    <span class="token punctuation">=</span> vault_aws_auth_backend_role.aws_spring_boot_ec2.role</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">output<span class="token type variable"> "vault_ec2_tag" </span></span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">value</span> <span class="token punctuation">=</span> vault_aws_auth_backend_role_tag.aws_spring_boot_ec2_tag.tag_value</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ol start="3">
<li>ê³µí†µì˜ì—­ (AWS-IAM)</li>
</ol>
<ul>
<li>application.yaml íŒŒì¼ì…ë‹ˆë‹¤.</li>
<li>ì•„ë˜ì™€ ê°™ì´ datasourceì™€ aws ì ‘ê·¼ ì •ë³´ë¥¼ ìƒëµí•œë‹¤ê³  í•´ë„ ì œ ë°ì´í„°ëŠ” Vault Secret Engine Pathì˜ keyëª… ê¸°ì¤€ìœ¼ë¡œ Valueê°’ì„ ì¹˜í™˜í•©ë‹ˆë‹¤.</li>
<li>ex)s3 ì ‘ê·¼í•˜ëŠ” accesskeyëŠ” "cloud.aws.s3.accessKey"ì˜ Value ê°’ì¸ "aws_access"ë¥¼ ì¹˜í™˜í•©ë‹ˆë‹¤.</li>
</ul>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">thymeleaf</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">check-template-location</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">prefix</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>/templates/</span>
<span class="line">    <span class="token key atrule">suffix</span><span class="token punctuation">:</span> .html</span>
<span class="line">    <span class="token key atrule">mode</span><span class="token punctuation">:</span> HTML</span>
<span class="line">    <span class="token key atrule">encoding</span><span class="token punctuation">:</span> UTF<span class="token punctuation">-</span><span class="token number">8</span></span>
<span class="line">    <span class="token key atrule">content-type</span><span class="token punctuation">:</span> text/html</span>
<span class="line">    <span class="token key atrule">cache</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">devtools</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">livereload</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">vault</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">host</span><span class="token punctuation">:</span> vault_URL</span>
<span class="line">      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8200</span></span>
<span class="line">      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> https</span>
<span class="line">      <span class="token key atrule">namespace</span><span class="token punctuation">:</span> admin</span>
<span class="line">      <span class="token comment">#ì¸ì¦ì€ AWS IAMìœ¼ë¡œ í•©ë‹ˆë‹¤.</span></span>
<span class="line">      <span class="token key atrule">authentication</span><span class="token punctuation">:</span> AWS_IAM</span>
<span class="line">      <span class="token key atrule">aws-iam</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">aws-path</span><span class="token punctuation">:</span> aws</span>
<span class="line">        <span class="token comment">#ìœ„ì—ì„œ Vaultì—ì„œ ë§Œë“  roleì„ ëª…ì‹œí•©ë‹ˆë‹¤.</span></span>
<span class="line">        <span class="token key atrule">role</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>spring<span class="token punctuation">-</span>boot<span class="token punctuation">-</span>iam</span>
<span class="line">        <span class="token key atrule">endpoint-uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//sts.ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2.amazonaws.com</span>
<span class="line">      <span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">lifecycle</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">          <span class="token key atrule">min-renewal</span><span class="token punctuation">:</span> 10s</span>
<span class="line">          <span class="token key atrule">renew-interval</span><span class="token punctuation">:</span> 10s</span>
<span class="line">      <span class="token key atrule">kv</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">        <span class="token key atrule">backend</span><span class="token punctuation">:</span> kv_example</span>
<span class="line">        <span class="token key atrule">profile-separator</span><span class="token punctuation">:</span> /</span>
<span class="line">      <span class="token key atrule">application-name</span><span class="token punctuation">:</span> java_and_vault</span>
<span class="line">      <span class="token key atrule">profiles</span><span class="token punctuation">:</span> dev</span>
<span class="line">      <span class="token key atrule">generic</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">import</span><span class="token punctuation">:</span> vault<span class="token punctuation">:</span>//</span>
<span class="line"></span></code></pre></div><ol start="4">
<li>ê³µí†µì˜ì—­ (AWS-EC2-Tag)</li>
</ol>
<ul>
<li>application.yaml íŒŒì¼ì…ë‹ˆë‹¤.</li>
<li>ì•„ë˜ì™€ ê°™ì´ datasourceì™€ aws ì ‘ê·¼ ì •ë³´ë¥¼ ìƒëµí•œë‹¤ê³  í•´ë„ ì œ ë°ì´í„°ëŠ” Vault Secret Engine Pathì˜ keyëª… ê¸°ì¤€ìœ¼ë¡œ Valueê°’ì„ ì¹˜í™˜í•©ë‹ˆë‹¤.</li>
<li>ex)s3 ì ‘ê·¼í•˜ëŠ” accesskeyëŠ” "cloud.aws.s3.accessKey"ì˜ Value ê°’ì¸ "aws_access"ë¥¼ ì¹˜í™˜í•©ë‹ˆë‹¤.</li>
</ul>
<div class="hint-container warning">
<p class="hint-container-title">ê²½ê³ </p>
<p>nonceëŠ” applicationì˜ ì¸ì‹ê°’ì…ë‹ˆë‹¤. ì§€ì •í•˜ì§€ ì•Šê³  í•´ë‹¹ ec2ì—ì„œ ì‹¤í–‰ëœë‹¤ë©´ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¡œ í™•ì¸í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#vault read auth/ung/identity-accesslist/instance-id</span></span>
<span class="line">$ vault <span class="token builtin class-name">read</span> auth/ung/identity-accesslist/i-044a58e2f2c812e70</span>
<span class="line"></span>
<span class="line">Key                          Value</span>
<span class="line"></span></code></pre></div></div>
]]></content:encoded>
    </item>
    <item>
      <title>Vault ì‚¬ì„¤ ì¸ì¦ì„œ ê´€ë¦¬ í…ŒìŠ¤íŠ¸</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/06-Config/vault-cert-test.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/06-Config/vault-cert-test.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault ì‚¬ì„¤ ì¸ì¦ì„œ ê´€ë¦¬ í…ŒìŠ¤íŠ¸</source>
      <description>Vault ì‚¬ì„¤ ì¸ì¦ì„œ ê´€ë¦¬ í…ŒìŠ¤íŠ¸</description>
      <pubDate>Sat, 31 Aug 2024 05:01:41 GMT</pubDate>
      <content:encoded><![CDATA[
<ul>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%82%AC%EC%A0%84%EC%A4%80%EB%B9%84%EC%82%AC%ED%95%AD">ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-1.vault%EC%82%AC%EC%84%A4%EC%9D%B8%EC%A6%9D%EC%84%9C%EB%A7%8C%EB%93%A4%EA%B8%B0">1. Vault ì‚¬ì„¤ ì¸ì¦ì„œ ë§Œë“¤ê¸°</a>
<ul>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-1.1%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98%EC%84%A4%EC%A0%95">1.1 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •</a>
<ul>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-1.1.1kubernetes%EC%97%90%EC%84%9C%EC%84%9C%EB%AA%85%ED%95%A0%ED%82%A4%EC%83%9D%EC%84%B1">1.1.1 Kubernetesì—ì„œ ì„œëª…í•  í‚¤ ìƒì„±</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-1.1.2%EC%9D%B8%EC%A6%9D%EC%84%9C%EC%84%9C%EB%AA%85%EC%9A%94%EC%B2%AD(csr)%EC%9D%84%EC%83%9D%EC%84%B1">1.1.2 ì¸ì¦ì„œ ì„œëª… ìš”ì²­(CSR)ì„ ìƒì„±</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-1.1.3csr%EC%9D%84%EC%83%9D%EC%84%B1">1.1.3 CSRì„ ìƒì„±</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-1.1.4csr.yaml%EC%83%9D%EC%84%B1">1.1.4 csr.yaml ìƒì„±</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-1.1.5csr.yaml%EB%B0%B0%ED%8F%AC">1.1.5 csr.yaml ë°°í¬</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-1.1.6csr%EC%9D%84%EC%8A%B9%EC%9D%B8%EC%9A%94%EC%B2%AD">1.1.6 CSRì„ ìŠ¹ì¸ ìš”ì²­</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-1.1.7%EC%8A%B9%EC%9D%B8%EC%83%81%ED%83%9C%ED%99%95%EC%9D%B8">1.1.7 ìŠ¹ì¸ ìƒíƒœ í™•ì¸</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-2.%ED%82%A4,%EC%9D%B8%EC%A6%9D%EC%84%9C%EB%B0%8Fkubernetesca%EB%A5%BCkubernetessecret%EC%A0%80%EC%9E%A5">2. í‚¤, ì¸ì¦ì„œ ë° Kubernetes CAë¥¼ Kubernetes secret ì €ì¥</a>
<ul>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-2.1crt%ED%8C%8C%EC%9D%BC%EC%83%9D%EC%84%B1">2.1 crt íŒŒì¼ ìƒì„±</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-2.2%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4ca%EC%84%A4%EC%A0%95%ED%8C%8C%EC%9D%BC">2.2 ì¿ ë²„ë„¤í‹°ìŠ¤ ca ì„¤ì • íŒŒì¼</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-2.3key,crt,ca%EC%9D%B8%EC%A6%9D%EC%84%9C%EC%8B%9C%ED%81%AC%EB%A6%BF%EC%83%9D%EC%84%B1">2.3 key, crt, ca ì¸ì¦ì„œ ì‹œí¬ë¦¿ ìƒì„±</a></li>
</ul>
</li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-3.vaulttls%EC%9D%B8%EC%A6%9D%EC%84%9C%EC%A0%81%EC%9A%A9">3. Vault tls ì¸ì¦ì„œ ì ìš©</a>
<ul>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-3.1helmvalues.yaml%ED%8C%8C%EC%9D%BC">3.1 helm values.yaml íŒŒì¼</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-3.2awsnlb%EB%A5%BC%ED%86%B5%ED%95%B4%EC%A0%91%EA%B7%BC%EC%9D%B8%EC%A6%9D%EC%84%9C%ED%99%95%EC%9D%B8">3.2 AWS NLBë¥¼ í†µí•´ ì ‘ê·¼ ì¸ì¦ì„œ í™•ì¸</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-3.3acm%EC%9D%B8%EC%A6%9D%EC%84%9C%EB%A5%BC%ED%86%B5%ED%95%B4%EC%A0%91%EA%B7%BC">3.3 ACM ì¸ì¦ì„œë¥¼ í†µí•´ ì ‘ê·¼</a>
<ul>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-3.3.1route53%EC%84%A4%EC%A0%95">3.3.1 Route53 ì„¤ì •</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-3.3.2%EB%A0%88%EC%BD%94%EB%93%9C%EC%83%9D%EC%84%B1">3.3.2 ë ˆì½”ë“œ ìƒì„±</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-3.3.3%EB%A0%88%EC%BD%94%EB%93%9C%EC%84%A4%EC%A0%95">3.3.3 ë ˆì½”ë“œ ì„¤ì •</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-3.3.4aws%EC%9D%B8%EC%A6%9D%EC%84%9C%EB%A5%BC%ED%86%B5%ED%95%B4vaultui%EC%A0%91%EA%B7%BC">3.3.4 AWS ì¸ì¦ì„œë¥¼ í†µí•´ Vault UI ì ‘ê·¼</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-4.awsprivateca%EB%A5%BC%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%EC%9D%B8%EC%A6%9D%EC%84%9C%EC%83%9D%EC%84%B1">4. AWS Private Caë¥¼ ì‚¬ìš© í•˜ëŠ” ì¸ì¦ì„œ ìƒì„±</a>
<ul>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-4.1%EC%82%AC%EC%A0%84%EC%A4%80%EB%B9%84%EC%9A%94%EA%B1%B4">4.1 ì‚¬ì „ ì¤€ë¹„ ìš”ê±´</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-4.2acm%EC%9D%B8%EC%A6%9D%EC%84%9C%EC%83%9D%EC%84%B1">4.2 ACM ì¸ì¦ì„œ ìƒì„±</a></li>
</ul>
</li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-5.awsprivateca%EA%B8%B0%EB%B0%98%EC%9C%BC%EB%A1%9C%EC%83%9D%EC%84%B1%EB%90%9C%EC%9D%B8%EC%A6%9D%EC%84%9C%EB%A5%BCvault%EC%97%90%EC%A0%81%EC%9A%A9">5. AWS Private Ca ê¸°ë°˜ìœ¼ë¡œ ìƒì„± ëœ ì¸ì¦ì„œë¥¼ Vaultì— ì ìš©</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-%EA%B2%B0%EB%A1%A0">ê²°ë¡ </a>
<ul>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%A7%84%ED%96%89%EB%B0%A9%EC%8B%9D">ì§„í–‰ ë°©ì‹</a></li>
<li><a href="#vault%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%8C%80%EC%95%88">ëŒ€ì•ˆ</a></li>
</ul>
</li>
</ul>
<h1><a class="header-anchor" href="#á„‰á…¡á„Œá…¥á†«-á„Œá…®á†«á„‡á…µ-á„‰á…¡á„’á…¡á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-ì‚¬ì „ì¤€ë¹„ì‚¬í•­"></a><strong>ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­</strong></h1>
<ul>
<li>k8s í™˜ê²½
<ul>
<li>NLB ì„¤ì¹˜</li>
<li>AWS ENS CSI Driver</li>
<li>AWS Load Balancer Controller</li>
</ul>
</li>
<li>Vault ë¼ì´ì„ ìŠ¤</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">touch vault.hclic =&gt; vault ë¼ì´ì„¼ìŠ¤ ë‚´ìš© ì²¨ë¶€</span>
<span class="line"></span>
<span class="line">vaultsecret=$(cat vault.hclic)</span>
<span class="line"></span>
<span class="line">kubectl create secret generic vault-ent-license --from-literal="license=${vaultsecret}"</span>
<span class="line"></span></code></pre></div><ul>
<li>eks ìê²©ì¦ëª… secret ìƒì„±</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">kubectl create secret generic eks-creds \</span>
<span class="line">    --from-literal=AWS_ACCESS_KEY_ID="[AWS_ACCESS_KEY_ID]" \</span>
<span class="line">    --from-literal=AWS_SECRET_ACCESS_KEY="[AWS_SECRET_ACCESS_KEY]"</span>
<span class="line"></span></code></pre></div><ul>
<li>helm ì„¤ì¹˜ ë° vault repo add</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 &gt; get_helm.sh</span>
<span class="line">chmod 700 get_helm.sh</span>
<span class="line">./get_helm.sh</span>
<span class="line"></span>
<span class="line">curl -L https://git.io/get_helm.sh | bash -s -- --version v3.8.2</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">helm repo add hashicorp https://helm.releases.hashicorp.com</span>
<span class="line">helm repo list</span>
<span class="line"></span></code></pre></div><div class="hint-container caution">
<p class="hint-container-title">ìœ„í—˜</p>
<ul>
<li>AWS Private CA ìš”ê¸ˆ<br>
ì°¸ì¡°: <a href="https://aws.amazon.com/ko/private-ca/pricing/" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/ko/private-ca/pricing/</a></li>
</ul>
</div>
<h1><a class="header-anchor" href="#_1-vault-á„‰á…¡á„‰á…¥á†¯-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥-á„†á…¡á†«á„ƒá…³á†¯á„€á…µ"><span></span></a><a name="vaultì¸ì¦ì„œ-1.vaultì‚¬ì„¤ì¸ì¦ì„œë§Œë“¤ê¸°"></a><strong>1. Vault ì‚¬ì„¤ ì¸ì¦ì„œ ë§Œë“¤ê¸°</strong></h1>
<h2><a class="header-anchor" href="#_1-1-á„’á…ªá†«á„€á…§á†¼-á„‡á…§á†«á„‰á…®-á„‰á…¥á†¯á„Œá…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-1.1í™˜ê²½ë³€ìˆ˜ì„¤ì •"></a><strong>1.1 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •</strong></h2>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line"># SERVICE is the name of the Vault service in Kubernetes.</span>
<span class="line">export SERVICE=vault</span>
<span class="line"></span>
<span class="line"># NAMESPACE where the Vault service is running.</span>
<span class="line">export NAMESPACE=default</span>
<span class="line"></span>
<span class="line"># SECRET_NAME to create in the Kubernetes secrets store.</span>
<span class="line">export SECRET_NAME=vault-tls</span>
<span class="line"></span>
<span class="line"># TMPDIR is a temporary working directory.</span>
<span class="line">export TMPDIR=/home/ec2-user/tls-vault</span>
<span class="line"></span>
<span class="line"># certificate request</span>
<span class="line">export CSR_NAME=vault-csr</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3><a class="header-anchor" href="#_1-1-1-kubernetesá„‹á…¦á„‰á…¥-á„‰á…¥á„†á…§á†¼á„’á…¡á†¯-á„á…µ-á„‰á…¢á†¼á„‰á…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-1.1.1kubernetesì—ì„œì„œëª…í• í‚¤ìƒì„±"></a><strong>1.1.1 Kubernetesì—ì„œ ì„œëª…í•  í‚¤ ìƒì„±</strong></h3>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">openssl genrsa -out ${TMPDIR}/vault.key 2048</span>
<span class="line"></span></code></pre></div><h3><a class="header-anchor" href="#_1-1-2-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥-á„‰á…¥á„†á…§á†¼-á„‹á…­á„á…¥á†¼-csr-á„‹á…³á†¯-á„‰á…¢á†¼á„‰á…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-1.1.2ì¸ì¦ì„œì„œëª…ìš”ì²­(csr)ì„ìƒì„±"></a><strong>1.1.2 ì¸ì¦ì„œ ì„œëª… ìš”ì²­(CSR)ì„ ìƒì„±</strong></h3>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">cat &lt;&lt;EOF &gt;${TMPDIR}/csr.conf</span>
<span class="line"></span>
<span class="line">[req]</span>
<span class="line">default_bits = 2048</span>
<span class="line">prompt = no</span>
<span class="line">encrypt_key = yes</span>
<span class="line">default_md = sha256</span>
<span class="line">req_extensions = v3_req</span>
<span class="line">distinguished_name = req_distinguished_name</span>
<span class="line">[req_distinguished_name]</span>
<span class="line">emailAddress = admin@admin.dev</span>
<span class="line">CN = ${SERVICE}.${NAMESPACE}.svc</span>
<span class="line">[ v3_req ]</span>
<span class="line">basicConstraints = CA:FALSE</span>
<span class="line">keyUsage = nonRepudiation, digitalSignature, keyEncipherment</span>
<span class="line">extendedKeyUsage = serverAuth</span>
<span class="line">subjectAltName = @alt_names</span>
<span class="line">[alt_names]</span>
<span class="line">DNS.1 = ${SERVICE}</span>
<span class="line">DNS.2 = ${SERVICE}.${NAMESPACE}</span>
<span class="line">DNS.3 = ${SERVICE}.${NAMESPACE}.svc</span>
<span class="line">DNS.4 = ${SERVICE}.${NAMESPACE}.svc.cluster.local</span>
<span class="line">DNS.5 = \*.vault-internal</span>
<span class="line">IP.1 = 127.0.0.1</span>
<span class="line">EOF</span>
<span class="line"></span></code></pre></div><h3><a class="header-anchor" href="#_1-1-3-csrá„‹á…³á†¯-á„‰á…¢á†¼á„‰á…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-1.1.3csrì„ìƒì„±"></a><strong>1.1.3 CSRì„ ìƒì„±</strong></h3>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">openssl req -config ${TMPDIR}/csr.conf -new -key ${TMPDIR}/vault.key -subj "/CN=${SERVICE}.${NAMESPACE}.svc" -out ${TMPDIR}/server.csr</span>
<span class="line"></span></code></pre></div><h3><a class="header-anchor" href="#_1-1-4-csr-yaml-á„‰á…¢á†¼á„‰á…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-1.1.4csr.yamlìƒì„±"></a><strong>1.1.4 csr.yaml ìƒì„±</strong></h3>
<div class="hint-container warning">
<p class="hint-container-title">ê²½ê³ </p>
<figure><figcaption></figcaption></figure>
</div>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">cat &lt;&lt;EOF &gt;${TMPDIR}/csr.yaml</span>
<span class="line"></span>
<span class="line">apiVersion: certificates.k8s.io/v1</span>
<span class="line">kind: CertificateSigningRequest</span>
<span class="line">metadata:</span>
<span class="line">   name: ${CSR_NAME}</span>
<span class="line">spec:</span>
<span class="line">   groups:</span>
<span class="line">   - system:authenticated</span>
<span class="line">   request: $(cat ${TMPDIR}/server.csr | base64 | tr -d '\n')</span>
<span class="line">   signerName: beta.eks.amazonaws.com/app-serving</span>
<span class="line">   usages:</span>
<span class="line">   - digital signature</span>
<span class="line">   - key encipherment</span>
<span class="line">   - server auth</span>
<span class="line">EOF</span>
<span class="line"></span></code></pre></div><h3><a class="header-anchor" href="#_1-1-5-csr-yaml-á„‡á…¢á„‘á…©"><span></span></a><a name="vaultì¸ì¦ì„œ-1.1.5csr.yamlë°°í¬"></a><strong>1.1.5 csr.yaml ë°°í¬</strong></h3>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">kubectl create -f ${TMPDIR}/csr.yaml</span>
<span class="line"></span>
<span class="line">- ìŠ¹ì¸(approve)ì´ ë˜ê¸° ì „ê¹Œì§€ ìƒíƒœëŠ” pending</span>
<span class="line"></span></code></pre></div><h3><a class="header-anchor" href="#_1-1-6-csrá„‹á…³á†¯-á„‰á…³á†¼á„‹á…µá†«-á„‹á…­á„á…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-1.1.6csrì„ìŠ¹ì¸ìš”ì²­"></a><strong>1.1.6 CSRì„ ìŠ¹ì¸ ìš”ì²­</strong></h3>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">kubectl certificate approve ${CSR_NAME}</span>
<span class="line"></span></code></pre></div><h3><a class="header-anchor" href="#_1-1-7-á„‰á…³á†¼á„‹á…µá†«-á„‰á…¡á†¼á„á…¢-á„’á…ªá†¨á„‹á…µá†«"><span></span></a><a name="vaultì¸ì¦ì„œ-1.1.7ìŠ¹ì¸ìƒíƒœí™•ì¸"></a><strong>1.1.7 ìŠ¹ì¸ ìƒíƒœ í™•ì¸</strong></h3>
<figure><figcaption></figcaption></figure>
<h1><a class="header-anchor" href="#_2-á„á…µ-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥-á„†á…µá†¾-kubernetes-caá„…á…³á†¯-kubernetes-secret-á„Œá…¥á„Œá…¡á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-2.í‚¤,ì¸ì¦ì„œë°kubernetescaë¥¼kubernetessecretì €ì¥"></a><strong>2. í‚¤, ì¸ì¦ì„œ ë° Kubernetes CAë¥¼ Kubernetes secret ì €ì¥</strong></h1>
<h2><a class="header-anchor" href="#_2-1-crt-á„‘á…¡á„‹á…µá†¯-á„‰á…¢á†¼á„‰á…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-2.1crtíŒŒì¼ìƒì„±"></a><strong>2.1 crt íŒŒì¼ ìƒì„±</strong></h2>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">serverCert=$(kubectl get csr ${CSR_NAME} -o jsonpath="{.status.certificate}")</span>
<span class="line"></span>
<span class="line">echo "${serverCert}" | openssl base64 -d -A -out ${TMPDIR}/vault.crt</span>
<span class="line"></span></code></pre></div><h2><a class="header-anchor" href="#_2-2-á„á…®á„‡á…¥á„‚á…¦á„á…µá„‰á…³-ca-á„‰á…¥á†¯á„Œá…¥á†¼-á„‘á…¡á„‹á…µá†¯"><span></span></a><a name="vaultì¸ì¦ì„œ-2.2ì¿ ë²„ë„¤í‹°ìŠ¤caì„¤ì •íŒŒì¼"></a><strong>2.2 ì¿ ë²„ë„¤í‹°ìŠ¤ ca ì„¤ì • íŒŒì¼</strong></h2>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">kubectl config view --raw --minify --flatten -o jsonpath='{.clusters[].cluster.certificate-authority-data}' | base64 -d &gt; ${TMPDIR}/vault.ca</span>
<span class="line"></span></code></pre></div><h2><a class="header-anchor" href="#_2-3-key-crt-ca-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥-á„‰á…µá„á…³á„…á…µá†º-á„‰á…¢á†¼á„‰á…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-2.3key,crt,caì¸ì¦ì„œì‹œí¬ë¦¿ìƒì„±"></a><strong>2.3 key, crt, ca ì¸ì¦ì„œ ì‹œí¬ë¦¿ ìƒì„±</strong></h2>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">kubectl create secret generic ${SECRET_NAME} \</span>
<span class="line">   --namespace ${NAMESPACE} \</span>
<span class="line">   --from-file=vault.key=${TMPDIR}/vault.key \</span>
<span class="line">   --from-file=vault.crt=${TMPDIR}/vault.crt \</span>
<span class="line">   --from-file=vault.ca=${TMPDIR}/vault.ca</span>
<span class="line"></span></code></pre></div><h1><a class="header-anchor" href="#_3-vault-tls-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥-á„Œá…¥á†¨á„‹á…­á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-3.vaulttlsì¸ì¦ì„œì ìš©"></a><strong>3. Vault tls ì¸ì¦ì„œ ì ìš©</strong></h1>
<h2><a class="header-anchor" href="#_3-1-helm-values-yaml-á„‘á…¡á„‹á…µá†¯"><span></span></a><a name="vaultì¸ì¦ì„œ-3.1helmvalues.yamlíŒŒì¼"></a><strong>3.1 helm values.yaml íŒŒì¼</strong></h2>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">global:</span>
<span class="line"></span>
<span class="line">    enabled: true</span>
<span class="line"></span>
<span class="line">    tlsDisable: false</span>
<span class="line"></span>
<span class="line">server:</span>
<span class="line"></span>
<span class="line">    enterpriseLicense:</span>
<span class="line">      secretName: vault-ent-license</span>
<span class="line"></span>
<span class="line">    extraVolumes:</span>
<span class="line"></span>
<span class="line">    - type: secret</span>
<span class="line"></span>
<span class="line">      name: vault-tls</span>
<span class="line"></span>
<span class="line">    extraEnvironmentVars:</span>
<span class="line"></span>
<span class="line">      VAULT_CACERT: "/vault/userconfig/vault-tls/vault.ca"</span>
<span class="line"></span>
<span class="line">      CA_CERT: "/var/run/secrets/kubernetes.io/serviceaccount/ca.crt"</span>
<span class="line"></span>
<span class="line">    ha:</span>
<span class="line"></span>
<span class="line">      enabled: true</span>
<span class="line">      raft:</span>
<span class="line"></span>
<span class="line">        enabled: true</span>
<span class="line"></span>
<span class="line">        setNodeId: true</span>
<span class="line"></span>
<span class="line">        config: |</span>
<span class="line"></span>
<span class="line">          ui = true</span>
<span class="line">          listener "tcp" {</span>
<span class="line"></span>
<span class="line">            tls_disable = 0</span>
<span class="line"></span>
<span class="line">            address = "[::]:8200"</span>
<span class="line"></span>
<span class="line">            cluster_address = "[::]:8201"</span>
<span class="line"></span>
<span class="line">            tls_cert_file = "/vault/userconfig/vault-tls/vault.crt"</span>
<span class="line"></span>
<span class="line">            tls_key_file  = "/vault/userconfig/vault-tls/vault.key"</span>
<span class="line"></span>
<span class="line">            tls_client_ca_file = "/vault/userconfig/vault-tls/vault.ca"</span>
<span class="line"></span>
<span class="line">          }</span>
<span class="line"></span>
<span class="line">          storage "raft" {</span>
<span class="line"></span>
<span class="line">            path = "/vault/data"</span>
<span class="line"></span>
<span class="line">            retry_join {</span>
<span class="line"></span>
<span class="line">              leader_api_addr = "https://vault-0.vault-internal:8200"</span>
<span class="line"></span>
<span class="line">              leader_ca_cert_file = "/vault/userconfig/vault-tls/vault.ca"</span>
<span class="line"></span>
<span class="line">              leader_client_cert_file = "/vault/userconfig/vault-tls/vault.crt"</span>
<span class="line"></span>
<span class="line">              leader_client_key_file = "/vault/userconfig/vault-tls/vault.key"</span>
<span class="line"></span>
<span class="line">            }</span>
<span class="line">            retry_join {</span>
<span class="line"></span>
<span class="line">              leader_api_addr = "https://vault-1.vault-internal:8200"</span>
<span class="line"></span>
<span class="line">              leader_ca_cert_file = "/vault/userconfig/vault-tls/vault.ca"</span>
<span class="line"></span>
<span class="line">              leader_client_cert_file = "/vault/userconfig/vault-tls/vault.crt"</span>
<span class="line">              leader_client_key_file = "/vault/userconfig/vault-tls/vault.key"</span>
<span class="line">            }</span>
<span class="line">            retry_join {</span>
<span class="line">              leader_api_addr = "https://vault-2.vault-internal:8200"</span>
<span class="line">              leader_ca_cert_file = "/vault/userconfig/vault-tls/vault.ca"</span>
<span class="line"></span>
<span class="line">              leader_client_cert_file = "/vault/userconfig/vault-tls/vault.crt"</span>
<span class="line"></span>
<span class="line">              leader_client_key_file = "/vault/userconfig/vault-tls/vault.key"</span>
<span class="line">            }</span>
<span class="line"></span>
<span class="line">            autopilot {</span>
<span class="line"></span>
<span class="line">              last_contact_threshold = "200ms"</span>
<span class="line"></span>
<span class="line">              last_contact_failure_threshold = "10m"</span>
<span class="line"></span>
<span class="line">              max_trailing_logs = 250000</span>
<span class="line"></span>
<span class="line">              min_quorum = 5</span>
<span class="line"></span>
<span class="line">              server_stabilization_time = "10s"</span>
<span class="line"></span>
<span class="line">            }</span>
<span class="line"></span>
<span class="line">           }</span>
<span class="line"></span>
<span class="line">          seal "awskms" {</span>
<span class="line">             region     = "ap-northeast-2"</span>
<span class="line"></span>
<span class="line">             kms_key_id = "{ kms_key_id }"</span>
<span class="line"></span>
<span class="line">           }</span>
<span class="line"></span>
<span class="line">          service_registration "kubernetes" {}</span>
<span class="line"></span>
<span class="line">    image:</span>
<span class="line"></span>
<span class="line">      repository: hashicorp/vault-enterprise</span>
<span class="line"></span>
<span class="line">      tag: 1.12.1-ent</span>
<span class="line"></span>
<span class="line">    env:</span>
<span class="line"></span>
<span class="line">    - name: VAULT_CACERT</span>
<span class="line"></span>
<span class="line">      value: "/vault/userconfig/vault-tls/vault.ca"</span>
<span class="line"></span>
<span class="line">    extraSecretEnvironmentVars:</span>
<span class="line"></span>
<span class="line">      - envName: AWS_ACCESS_KEY_ID</span>
<span class="line"></span>
<span class="line">        secretName: eks-creds</span>
<span class="line"></span>
<span class="line">        secretKey: AWS_ACCESS_KEY_ID</span>
<span class="line"></span>
<span class="line">      - envName: AWS_SECRET_ACCESS_KEY</span>
<span class="line"></span>
<span class="line">        secretName: eks-creds</span>
<span class="line"></span>
<span class="line">        secretKey: AWS_SECRET_ACCESS_KEY</span>
<span class="line"></span>
<span class="line">    service:</span>
<span class="line"></span>
<span class="line">      enabled: true</span>
<span class="line"></span>
<span class="line">      active:</span>
<span class="line"></span>
<span class="line">        enabled: false</span>
<span class="line"></span>
<span class="line">      standby:</span>
<span class="line"></span>
<span class="line">        enabled: false</span>
<span class="line"></span>
<span class="line">      type: ClusterIP</span>
<span class="line">      loadBalancerClass: service.k8s.aws/nlb</span>
<span class="line"></span>
<span class="line">      annotations:</span>
<span class="line">    dataStorage:</span>
<span class="line">      enabled: true</span>
<span class="line"></span>
<span class="line">      storageClass: gp3</span>
<span class="line"></span>
<span class="line">      size: 100Gi</span>
<span class="line"></span>
<span class="line">    auditStorage:</span>
<span class="line"></span>
<span class="line">      enabled: true</span>
<span class="line"></span>
<span class="line">      # Size of the PVC created</span>
<span class="line"></span>
<span class="line">      size: 100Gi</span>
<span class="line"></span>
<span class="line">      # Location where the PVC will be mounted.</span>
<span class="line"></span>
<span class="line">      mountPath: "/vault/audit"</span>
<span class="line"></span>
<span class="line">      # Name of the storage class to use.  If null it will use the</span>
<span class="line"></span>
<span class="line">      # configured default Storage Class.</span>
<span class="line"></span>
<span class="line">      storageClass: gp3</span>
<span class="line"></span>
<span class="line">      # Access Mode of the storage device being used for the PVC</span>
<span class="line"></span>
<span class="line">      accessMode: ReadWriteOnce</span>
<span class="line"></span>
<span class="line">      # Annotations to apply to the PVC</span>
<span class="line"></span>
<span class="line">      annotations: {}</span>
<span class="line"></span>
<span class="line">ui:</span>
<span class="line"></span>
<span class="line">    enabled: true</span>
<span class="line"></span>
<span class="line">    publishNotReadyAddresses: true</span>
<span class="line"></span>
<span class="line">    activeVaultPodOnly: false</span>
<span class="line"></span>
<span class="line">    serviceType: "LoadBalancer"</span>
<span class="line"></span>
<span class="line">    serviceNodePort: null</span>
<span class="line"></span>
<span class="line">    externalPort: 443</span>
<span class="line"></span>
<span class="line">    targetPort: 8200</span>
<span class="line"></span>
<span class="line">    annotations:</span>
<span class="line"></span>
<span class="line">       service.beta.kubernetes.io/aws-load-balancer-ip-address-type: ipv4</span>
<span class="line"></span>
<span class="line">       service.beta.kubernetes.io/aws-load-balancer-name: gbkim-vault-test-lb</span>
<span class="line"></span>
<span class="line">       service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing</span>
<span class="line"></span>
<span class="line">       service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip</span>
<span class="line"></span>
<span class="line">       service.beta.kubernetes.io/aws-load-balancer-subnets: { ì„œë¸Œë„· id }</span>
<span class="line"></span>
<span class="line">       service.beta.kubernetes.io/aws-load-balancer-type: external</span>
<span class="line"></span>
<span class="line">       service.beta.kubernetes.io/aws-load-balancer-ssl-cert: { ì¸ì¦ì„œ arn }</span>
<span class="line"></span>
<span class="line">       service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"</span>
<span class="line"></span>
<span class="line">       service.beta.kubernetes.io/aws-load-balancer-backend-protocol: ssl</span>
<span class="line"></span></code></pre></div><h2><a class="header-anchor" href="#_3-2-aws-nlbá„…á…³á†¯-á„á…©á†¼á„’á…¢-á„Œá…¥á†¸á„€á…³á†«-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥-á„’á…ªá†¨á„‹á…µá†«"><span></span></a><a name="vaultì¸ì¦ì„œ-3.2awsnlbë¥¼í†µí•´ì ‘ê·¼ì¸ì¦ì„œí™•ì¸"></a><strong>3.2 AWS NLBë¥¼ í†µí•´ ì ‘ê·¼ ì¸ì¦ì„œ í™•ì¸</strong></h2>
<figure><figcaption></figcaption></figure>
<h2><a class="header-anchor" href="#_3-3-acm-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥á„…á…³á†¯-á„á…©á†¼á„’á…¢-á„Œá…¥á†¸á„€á…³á†«"><span></span></a><a name="vaultì¸ì¦ì„œ-3.3acmì¸ì¦ì„œë¥¼í†µí•´ì ‘ê·¼"></a><strong>3.3 ACM ì¸ì¦ì„œë¥¼ í†µí•´ ì ‘ê·¼</strong></h2>
<h3><a class="header-anchor" href="#_3-3-1-route53-á„‰á…¥á†¯á„Œá…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-3.3.1route53ì„¤ì •"></a><strong>3.3.1 Route53 ì„¤ì •</strong></h3>
<figure><figcaption></figcaption></figure>
<h3><a class="header-anchor" href="#_3-3-2-á„…á…¦á„á…©á„ƒá…³-á„‰á…¢á†¼á„‰á…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-3.3.2ë ˆì½”ë“œìƒì„±"></a><strong>3.3.2 ë ˆì½”ë“œ ìƒì„±</strong></h3>
<figure><figcaption></figcaption></figure>
<h3><a class="header-anchor" href="#_3-3-3-á„…á…¦á„á…©á„ƒá…³-á„‰á…¥á†¯á„Œá…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-3.3.3ë ˆì½”ë“œì„¤ì •"></a><strong>3.3.3 ë ˆì½”ë“œ ì„¤ì •</strong></h3>
<ul>
<li>ë ˆì½”ë“œ ì´ë¦„
<ul>
<li>ëŒ€ìƒ ë„ë©”ì¸ ì´ë¦„ ì„¤ì •</li>
</ul>
</li>
<li>ë ˆì½”ë“œ ìœ í˜•
<ul>
<li>A</li>
</ul>
</li>
<li>ë³„ì¹­
<ul>
<li>On</li>
</ul>
</li>
<li>íŠ¸ë˜í”½ ë¼ìš°íŒ… ëŒ€ìƒ
<ul>
<li>NLB</li>
<li>ap-northeast-2(ì„œìš¸)</li>
<li>ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” AWS ë¡œë“œ ë°¸ëŸ°ì„œ ì§€ì •</li>
</ul>
</li>
<li>ë¼ìš°íŒ… ì •ì±…
<ul>
<li>ë‹¨ìˆœ ë¼ìš°íŒ…</li>
</ul>
</li>
</ul>
<figure><figcaption></figcaption></figure>
<h3><a class="header-anchor" href="#_3-3-4-aws-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥á„…á…³á†¯-á„á…©á†¼á„’á…¢-vault-ui-á„Œá…¥á†¸á„€á…³á†«"><span></span></a><a name="vaultì¸ì¦ì„œ-3.3.4awsì¸ì¦ì„œë¥¼í†µí•´vaultuiì ‘ê·¼"></a><strong>3.3.4 AWS ì¸ì¦ì„œë¥¼ í†µí•´ Vault UI ì ‘ê·¼</strong></h3>
<figure><figcaption></figcaption></figure>
<h1><a class="header-anchor" href="#_4-aws-private-caá„…á…³á†¯-á„‰á…¡á„‹á…­á†¼-á„’á…¡á„‚á…³á†«-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥-á„‰á…¢á†¼á„‰á…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-4.awsprivatecaë¥¼ì‚¬ìš©í•˜ëŠ”ì¸ì¦ì„œìƒì„±"></a><strong>4. AWS Private Caë¥¼ ì‚¬ìš© í•˜ëŠ” ì¸ì¦ì„œ ìƒì„±</strong></h1>
<h2><a class="header-anchor" href="#_4-1-á„‰á…¡á„Œá…¥á†«-á„Œá…®á†«á„‡á…µ-á„‹á…­á„€á…¥á†«"><span></span></a><a name="vaultì¸ì¦ì„œ-4.1ì‚¬ì „ì¤€ë¹„ìš”ê±´"></a><strong>4.1 ì‚¬ì „ ì¤€ë¹„ ìš”ê±´</strong></h2>
<ul>
<li>Private Ca ìƒì„±<br>
</li>
</ul>
<h2><a class="header-anchor" href="#_4-2-acm-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥-á„‰á…¢á†¼á„‰á…¥á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-4.2acmì¸ì¦ì„œìƒì„±"></a><strong>4.2 ACM ì¸ì¦ì„œ ìƒì„±</strong></h2>
<ul>
<li>
<p>ìš”ì²­<br>
</p>
</li>
<li>
<p>ì¸ì¦ì„œ ìš”ì²­</p>
<ul>
<li>í”„ë¼ì´ë¹— ì¸ì¦ì„œ ìš”ì²­(ì¸ì¦ì„œ ê¸°ê´€ì´ awsê°€ ì•„ë‹Œ PrivateCAë¡œ ë§Œë“  ì£¼ì²´ë¡œ í•¨)</li>
<li>ë‹¤ìŒ<br>
</li>
</ul>
</li>
<li>
<p>ì¸ì¦ ê¸°ê´€ ì„¸ë¶€ ì •ë³´</p>
</li>
</ul>
<p><br>
</p>
<ul>
<li>
<p>ë„ë©”ì¸ ì´ë¦„<br>
</p>
</li>
<li>
<p>í‚¤ ì•Œê³ ë¦¬ì¦˜<br>
</p>
</li>
<li>
<p>íƒœê·¸</p>
</li>
<li>
<p>ì¸ì¦ì„œ ê°±ì‹  ê¶Œí•œ</p>
</li>
<li>
<p>ìš”ì²­</p>
</li>
</ul>
<figure><figcaption></figcaption></figure>
<ul>
<li>Private Caì— ëŒ€í•œ ì¸ì¦ ê¸°ê´€ ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦ì„œ ìƒì„±<br>
</li>
</ul>
<h1><a class="header-anchor" href="#_5-aws-private-ca-á„€á…µá„‡á…¡á†«á„‹á…³á„…á…©-á„‰á…¢á†¼á„‰á…¥á†¼-á„ƒá…¬á†«-á„‹á…µá†«á„Œá…³á†¼á„‰á…¥á„…á…³á†¯-vaultá„‹á…¦-á„Œá…¥á†¨á„‹á…­á†¼"><span></span></a><a name="vaultì¸ì¦ì„œ-5.awsprivatecaê¸°ë°˜ìœ¼ë¡œìƒì„±ëœì¸ì¦ì„œë¥¼vaultì—ì ìš©"></a><strong>5. AWS Private Ca ê¸°ë°˜ìœ¼ë¡œ ìƒì„± ëœ ì¸ì¦ì„œë¥¼ Vaultì— ì ìš©</strong></h1>
<ul>
<li>
<p>ë‚´ë³´ë‚´ê¸°<br>
</p>
</li>
<li>
<p>ì¸ì¦ì„œ ë‚´ë³´ë‚´ê¸°</p>
<ul>
<li>AWS ìƒì—ì„œ ë‚´ë³´ê¸°ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìƒì„± í›„ ë‚´ë³´ê¸°ê°€ ê°€ëŠ¥<br>
</li>
</ul>
</li>
<li>
<p>ë‚´ë³´ë‚¸ ì¸ì¦ì„œ</p>
</li>
<li>
<p>ë‹¤ìš´ë¡œë“œ<br>
</p>
</li>
<li>
<p>ì‚¬ì„¤ ì¸ì¦ì„œ ê°€ì ¸ì˜¤ê¸°<br>
</p>
</li>
</ul>
<h1><a class="header-anchor" href="#á„€á…§á†¯á„…á…©á†«"><span></span></a><a name="vaultì¸ì¦ì„œ-ê²°ë¡ "></a><strong>ê²°ë¡ </strong></h1>
<p>í…ŒìŠ¤íŠ¸ í•œ ê²°ê³¼ë¡œëŠ” Private Caë¡œ EKS í™˜ê²½ì—ì„œ Vaultì— ì‚¬ì„¤ ì¸ì¦ì„œë¥¼ ì ìš©ì€ ë¶ˆê°€ëŠ¥</p>
<p>ì•ˆë˜ëŠ” ì´ìœ </p>
]]></content:encoded>
    </item>
    <item>
      <title>Vault Secretë¥¼ AWS Secret manager ì—°ë™</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/secret-sync.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/secret-sync.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault Secretë¥¼ AWS Secret manager ì—°ë™</source>
      <description>Vault Secretë¥¼ AWS Secret manager ì—°ë™ Secret Sync ê³µì‹ ìë£Œ: Secret Sync AWS Secret Manager Sync ìë£Œ: Secret Manager Sync í˜„ëŒ€ì˜ IT í™˜ê²½ì—ì„œëŠ” ë‹¤ì–‘í•œ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° AWSë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜...</description>
      <pubDate>Sat, 31 Aug 2024 04:59:08 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Secret Sync ê³µì‹ ìë£Œ: <a href="https://developer.hashicorp.com/vault/docs/sync" target="_blank" rel="noopener noreferrer">Secret Sync</a><br>
AWS Secret Manager Sync ìë£Œ: <a href="https://developer.hashicorp.com/vault/docs/sync/awssm" target="_blank" rel="noopener noreferrer">Secret Manager Sync</a></p>
</blockquote>
<p>í˜„ëŒ€ì˜ IT í™˜ê²½ì—ì„œëŠ” ë‹¤ì–‘í•œ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.<br>
ëŒ€ë¶€ë¶„ì˜ ê²½ìš° AWSë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ, AWSë¥¼ ë¹„ë¡¯í•œ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ì œê³µì(CSP)ì—ì„œ ê°„í—ì ìœ¼ë¡œ ë°œìƒí•˜ëŠ” ì„œë¹„ìŠ¤ ì´ìŠˆë¥¼ ê²½í—˜í•  ë•Œê°€ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ, AWS ë¦¬ì „ì˜ ì¥ì• ê°€ ë°œìƒí•  ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬, GCPë‚˜ Azure, ë‚˜ì•„ê°€ IDCë¥¼ ë°±ì—… ìš©ë„ë¡œ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.<br>
ê´€ë¦¬í˜• Kubernetesì™€ ê°™ì€ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ì˜ ëŒ€ì±…ë„ ì¤‘ìš”í•˜ì§€ë§Œ, ì˜¤ëŠ˜ì€ ê´€ë¦¬í˜• Secret ë„êµ¬ì— ëŒ€í•œ ëŒ€ì²˜ ë°©ì•ˆì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>Vaultë¥¼ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ CSPì˜ Syncë¥¼ í†µí•´ í•˜ë‚˜ì˜ Vault Secretìœ¼ë¡œ ì—¬ëŸ¬ CSPì— Secretì„ ë™ê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê° CSPì˜ ê´€ë¦¬í˜• Kubernetes í™˜ê²½ì— ë™ì¼í•œ Secretì„ ì ìš©í•  ìˆ˜ ìˆì–´, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ Secret í˜•ìƒì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ì œ, ì´ ê¸°ëŠ¥ì„ ì–´ë–»ê²Œ ì ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h2>Vault Secretê³¼ AWS Secret Managerì˜ ë¹„ë°€ì •ë³´ë¥¼ ë™ê¸°í™” ê³¼ì •</h2>
<ol>
<li>ë¨¼ì € Vault PolicyëŠ” ë‹¤ìŒê³¼ ê°™ì´ í•„ìš”í•©ë‹ˆë‹¤.</li>
</ol>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line">path <span class="token string">"sys/sync/*"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"read"</span>, <span class="token string">"list"</span>, <span class="token string">"create"</span>, <span class="token string">"update"</span>, <span class="token string">"delete"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"> </span>
<span class="line">path <span class="token string">"secret_sync/*"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"read"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ol start="2">
<li>Secret Engineì„ ë§Œë“¤ê³  ë°ì´í„°ë¥¼ ë„£ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</li>
</ol>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token keyword">resource <span class="token type variable">"vault_mount"</span></span> <span class="token string">"secret_sync"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">path</span>        <span class="token punctuation">=</span> <span class="token string">"secret_sync"</span></span>
<span class="line">  <span class="token property">type</span>        <span class="token punctuation">=</span> <span class="token string">"kv"</span></span>
<span class="line">  <span class="token property">options</span>     <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"2"</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token property">description</span> <span class="token punctuation">=</span> <span class="token string">"KV Version 2 secret engine mount"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_kv_secret_v2"</span></span> <span class="token string">"secret_sync"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">mount</span>                      <span class="token punctuation">=</span> vault_mount.secret_sync.path</span>
<span class="line">  <span class="token property">name</span>                       <span class="token punctuation">=</span> <span class="token string">"dev"</span></span>
<span class="line">  <span class="token property">cas</span>                        <span class="token punctuation">=</span> <span class="token number">1</span></span>
<span class="line">  <span class="token property">delete_all_versions</span>        <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">data_json</span>                  <span class="token punctuation">=</span> jsonencode(local.secrets_map)</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul>
<li>ë”ë¯¸ ë°ì´í„°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">cat</span> secret.csv</span>
<span class="line"></span>
<span class="line">key,secret_path,secret_key,secret_value</span>
<span class="line"><span class="token number">1</span>,path1,oEyzn3Ko,ueWXdREVkbO8</span>
<span class="line"><span class="token number">2</span>,path2,L1wxhMoU,McY5TAQDQFfQ</span>
<span class="line"><span class="token number">3</span>,path3,92ky4qgj,onahCbfYh8IN</span>
<span class="line"><span class="token number">4</span>,path4,oj2aquZr,YvPZOwthQpii</span>
<span class="line"><span class="token number">5</span>,path5,vIqHT6mI,xRRxYsMwklPK</span>
<span class="line"><span class="token number">6</span>,path6,C6dsxbmR,Gryegjb99vvR</span>
<span class="line"><span class="token number">7</span>,path7,e5ksUpsi,hLNFqIFF7gl7</span>
<span class="line"><span class="token number">8</span>,path8,1K7TRAIC,r4uSkISmyvWp</span>
<span class="line"><span class="token number">9</span>,path9,xfTzJl3r,tSFrxHjhpXfs</span>
<span class="line"><span class="token number">10</span>,path10,72ABuQWZ,FthcwQESffIo</span>
<span class="line"></span></code></pre></div><ol start="3">
<li>vault uiì—ì„œ ì •ìƒì ìœ¼ë¡œ ë°°í¬ëœ secretì„ í™•ì¸í•©ë‹ˆë‹¤.</li>
</ol>
<figure><figcaption></figcaption></figure>
<ol start="4">
<li>ì •ìƒì ìœ¼ë¡œ ë°°í¬ëœ Vault Secretì„ AWS Secret Managerì— Syncë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.</li>
</ol>
<ul>
<li>Terraform codeëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</li>
</ul>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment"># name template ì°¸ê³  ë§í¬: https://developer.hashicorp.com/vault/docs/sync#name-template</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_secrets_sync_aws_destination"</span></span> <span class="token string">"static_aws"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span>                 <span class="token punctuation">=</span> <span class="token string">"aws_secret_sync"</span></span>
<span class="line">  <span class="token property">access_key_id</span>        <span class="token punctuation">=</span> var.aws_access_key_id</span>
<span class="line">  <span class="token property">secret_access_key</span>    <span class="token punctuation">=</span> var.aws_secret_access_key</span>
<span class="line">  <span class="token property">region</span>               <span class="token punctuation">=</span> <span class="token string">"ap-northeast-2"</span></span>
<span class="line">  <span class="token property">secret_name_template</span> <span class="token punctuation">=</span> <span class="token string">"vault_{{ .MountAccessor | lowercase }}_{{ .SecretPath | lowercase }}"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"vault_secrets_sync_association"</span></span> <span class="token string">"static_gh_token"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span>        <span class="token punctuation">=</span> vault_secrets_sync_aws_destination.static_aws.name</span>
<span class="line">  <span class="token property">type</span>        <span class="token punctuation">=</span> vault_secrets_sync_aws_destination.static_aws.type</span>
<span class="line">  <span class="token property">mount</span>       <span class="token punctuation">=</span> <span class="token string">"secret_sync"</span></span>
<span class="line">  <span class="token property">secret_name</span> <span class="token punctuation">=</span> <span class="token string">"dev"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ol start="5">
<li>ë°°í¬ë¥¼ ì§„í–‰í•˜ê³  AWS Consoleì—ì„œ í™•ì¸í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</li>
</ol>
<div class="hint-container info">
<p class="hint-container-title">Vault Secretì˜ Licenseê°€ ì—†ì–´, ê³µì‹í™ˆí˜ì´ì§€ì˜ ê²°ê³¼ í™”ë©´ì…ë‹ˆë‹¤.</p>
<figure><figcaption></figcaption></figure>
</div>
<h2>Secret Sync ê¸°ëŠ¥ì€ ë‹¤ìŒì˜ ì„œë¹„ìŠ¤ì˜ ë™ê¸°í™”ë¥¼ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.</h2>
<ul>
<li>aws</li>
<li>azure</li>
<li>gcp</li>
<li>github</li>
<li>vercel</li>
</ul>
<div class="hint-container info">
<p class="hint-container-title">ì°¸ê³ </p>
<p>github actionì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ í™œìš©ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Login to AWS ECR</span>
<span class="line">  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span>
<span class="line">    echo "Set vars"</span>
<span class="line">    AWS_ACCOUNT_ID=$(echo "$AWS_ACCOUNT_ID" | jq -r '.AWS_ACCOUNT_ID')</span>
<span class="line">    AWS_ACCESS_KEY_ID=$(echo "$AWS_ACCESS_KEY_ID" | jq -r '.AWS_ACCESS_KEY_ID')</span>
<span class="line">    AWS_SECRET_ACCESS_KEY=$(echo "$AWS_SECRET_ACCESS_KEY" | jq -r '.AWS_SECRET_ACCESS_KEY')</span>
<span class="line">    echo "Login to AWS ECR"</span>
<span class="line">    aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com</span></span>
<span class="line">  <span class="token key atrule">env</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">AWS_DEFAULT_REGION</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> vars.AWS_DEFAULT_REGION <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token key atrule">AWS_ACCOUNT_ID</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.VAULT_KV_5047F8B7_AWS_ACCOUNT_ID <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token key atrule">AWS_ACCESS_KEY_ID</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.VAULT_KV_5047F8B7_AWS_ACCESS_KEY_ID <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token key atrule">AWS_SECRET_ACCESS_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.VAULT_KV_5047F8B7_AWS_SECRET_ACCESS_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>      </span>
<span class="line"></span></code></pre></div></div>
]]></content:encoded>
    </item>
    <item>
      <title>UbuCon Korea 2024</title>
      <link>https://docmoa.github.io/06-etc/class/ubucon-korea-2024.html</link>
      <guid>https://docmoa.github.io/06-etc/class/ubucon-korea-2024.html</guid>
      <source url="https://docmoa.github.io/rss.xml">UbuCon Korea 2024</source>
      <description>ìš°ë¶„íˆ¬ì™€ í•¨ê»˜ ë°°í¬í•˜ê¸°</description>
      <pubDate>Sun, 11 Aug 2024 03:52:01 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://eventusstorage.blob.core.windows.net/evs/Image/ubuntukr/81549/ProjectInfo/Cover/f16d8e1dd7af46cfb910dfaf9574dd60.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h1>UbuCon Korea 2024</h1>
<blockquote>
<p><a href="https://2024.ubuntu-kr.org/ko/" target="_blank" rel="noopener noreferrer">í–‰ì‚¬ í™ˆí˜ì´ì§€</a><br>
2024ë…„ 8ì›” 10ì¼<br>
í•œêµ­ ë§ˆì´í¬ë¡œì†Œí”„íŠ¸<br>
ì¼ì •í‘œ : <a href="https://events.canonical.com/event/48/timetable/#20240810" target="_blank" rel="noopener noreferrer">https://events.canonical.com/event/48/timetable/#20240810</a></p>
</blockquote>
<h2>1. Opening remarks (10:00)</h2>
<p>ìš°ë¶„íˆ¬ ì»¤ë®¤ë‹ˆí‹°ì˜ ë§´ë²„ ì†Œê°œì™€ UbuCon Koreaì˜ ë°œê±¸ìŒì„ ì´ì•¼ê¸°í•´ ì£¼ì—ˆë‹¤.<br>
<code>UbuCon Asia 2022</code> í–‰ì‚¬ ì´í›„ UbuCon Koreaê°€ ë³„ë„ë¡œ ì§„í–‰ë˜ê³  ìˆë‹¤. 2022ë…„ <code>UbuCon Asia</code>ê°€ ì„œìš¸ì—ì„œ ê°œìµœëœ ì´í›„ ë¶„ë¦¬ë˜ì–´ ìš´ì˜ë˜ëŠ” ê±¸ë¡œ ë³´ì—¬ì§„ë‹¤. ì¸ìƒì ì¸ê±´ <code>UbuCon Asia 2022</code>ì˜ ë¡œê³ ê°€ ì´ˆë¡±ë¶ˆì´ í˜•ìƒí™”ë˜ì–´ìˆë‹¤.</p>
<figure><img src="https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize,c_fill,w_1664,h_568/https://ubuntu.com/wp-content/uploads/0cc4/Untitled.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>2023ë…„ë¶€í„° UbuCon Koreaê°€ ì§„í–‰ë˜ì—ˆë‹¤.</p>
<figure><img src="https://eventusstorage.blob.core.windows.net/evs/Image/ubuntukr/65995/ProjectInfo/Cover/7fe204e41d664c8fb9a806ee6faf806e.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p><a href="https://2023.ubuntu-kr.org/ko/" target="_blank" rel="noopener noreferrer">UbuCon Korea 2023 - í™ˆí˜ì´ì§€</a></p>
<h2>2. ê¸°ì¡°ì—°ì„¤ Keynote (10:30)</h2>
<p>ì•„ì‰½ê²Œë„ ìºë…¸ë‹ˆì»¬ì—ì„œì˜ í‚¤ë…¸íŠ¸ëŠ” ì‚¬ì •ìƒ ìƒëµ ë˜ì—ˆë‹¤.</p>
<p>ìš°ë¶„íˆ¬ ì½”ë¦¬ì•„ì˜ 7ê¸° ìš´ì˜ì§„ì˜ ë¬¸ì¤€ìƒ ëŒ€í‘œì˜ ëŒ€í‘œëœ ì°(?)ì„ ì´ì•¼ê¸°í•´ì£¼ì—ˆë‹¤.</p>
<ul>
<li><a href="https://disclosures.ubuntu-kr.org/organizers/gen7/" target="_blank" rel="noopener noreferrer">7ê¸° ìš´ì˜ì§„ ì •ë³´</a></li>
</ul>
<p>í‘œí˜„ì€ ë‚©ì¹˜ë¼ëŠ” í‘œí˜„ì´ë¼ í–ˆì§€ë§Œ, ì»¤ë®¤ë‹ˆí‹° ìš´ì˜ê³¼ ì±…ì„ìë¡œì„œì˜ ì–´ê¹¨ê°€ ë¬´ê±°ìš´ ë§Œí¼, ë¶€ë‹´ì´ ìˆì„ê±°ë¼ ìƒê°ë˜ì—ˆë‹¤.</p>
<p>ì´í›„ 7ê¸° ìš´ì˜ì§„ì—ì„œ ìš°ë¶„íˆ¬ ì»¤ë®¤ë‹ˆí‹°ì˜ ë©¤ë²„ì‰½ì— ëŒ€í•œ ì•ˆë‚´ì™€ ìê²©ì— ëŒ€í•´ ì•ˆë‚´í•´ì£¼ì—ˆë‹¤.</p>
<ul>
<li><a href="https://ubuntu.com/community/membership" target="_blank" rel="noopener noreferrer">Ubuntu Membership ì•ˆë‚´</a></li>
</ul>
<p>ë©¤ë²„ì‹­ íŠ¹ì „ì— ëª…ì‹œë˜ì–´ìˆì§€ëŠ” ì•Šìœ¼ë‚˜, Ubuntu Summitê°™ì€ í–‰ì‚¬ê°€ ìˆëŠ” ê²½ìš° ê²½ë¹„ë¥¼ ì§€ì›ë°›ì„ ìˆ˜ ìˆë‹¤ê³ ë„ ì–¸ê¸‰ë˜ì—ˆë‹¤.</p>
<h3>2.1 ë©¤ë²„ì‹­ ìš”ê±´</h3>
<ul>
<li><a href="https://ubuntu.com/community/membership/requirements" target="_blank" rel="noopener noreferrer">Membership Requirements</a></li>
</ul>
<p>Ubuntu êµ¬ì„±ì› ì„ ì • ê¸°ì¤€ì˜ ê°„ë‹¨í•œ ìš”ì•½ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<p>ì‹œê°„: 6ê°œì›” ì´ìƒì˜ ì§€ì†ì ì¸ Ubuntu ê´€ë ¨ ê³µí—Œì´ í•„ìš”í•©ë‹ˆë‹¤. ì¶”ì²œì„œê°€ í•„ìš”í•©ë‹ˆë‹¤.<br>
ê³µí—Œ ë°©ì‹: ê¸°ìˆ ì  ê³µí—Œ ì™¸ì—ë„, ì•„íŠ¸ì›Œí¬, ë¬¸ì„œ, í¬ëŸ¼, IRC, ë²„ê·¸ ì¡°ì •, ë²ˆì—­, ê°œë°œ ë° íŒ¨í‚¤ì§•, ë§ˆì¼€íŒ… ë° í™ë³´ ë“± ëª¨ë“  ì¢…ë¥˜ì˜ ê³µí—Œì´ ì¸ì •ë©ë‹ˆë‹¤.<br>
ìƒë¥˜ í”„ë¡œì íŠ¸(Upstream) ê³µí—Œ: UbuntuëŠ” Debian ë° ê¸°íƒ€ ìƒë¥˜ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ê³µí—Œì„ í™˜ì˜í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë©¤ë²„ì‹­ì€ ìš°ë¶„íˆ¬ ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ ì°¸ì—¬ë¥¼ í•„ìš”ë¡œ í•©ë‹ˆë‹¤.<br>
ì¶”ì²œì„œ: ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì¶”ì²œì„œê°€ ì¤‘ìš”í•©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ êµ¬ì„±ì›ë“¤ë¡œë¶€í„° ì¶”ì²œì„œë¥¼ ë°›ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h3>2.2 ë©¤ë²„ì‹­ íŠ¹ì „</h3>
<ul>
<li><a href="https://ubuntu.com/community/membership/perks" target="_blank" rel="noopener noreferrer">Membership Perks</a></li>
</ul>
<p>ìš°ë¶„íˆ¬ ì»¤ë®¤ë‹ˆí‹°ë¥¼ ë” ì¢‹ê²Œ ë§Œë“œëŠ” ê²ƒ ì™¸ì—ë„, ê³µì‹ íšŒì›ì´ ë˜ëŠ” ê²ƒì€ ë§ì€ ì´ì ì´ ìˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì „ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<ul>
<li>ì ì¬ì ì¸ ê³ ìš©ì£¼ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‹´ë¡  ê²Œì‹œë¬¼ í˜•íƒœì˜ ìš°ë¶„íˆ¬ ì´ë ¥ì„œ.</li>
<li>ìš°ë¶„íˆ¬ ì»¤ë®¤ë‹ˆí‹° ìœ„ì›íšŒ ì§€ëª…ì„ í™•ì¸í•˜ê¸° ìœ„í•œ íˆ¬í‘œ ê¶Œí•œ.</li>
<li>ë‹¹ì‹ ì˜ ì‹¤ì œ ì´ë©”ì¼ ì£¼ì†Œë¡œ ì „ë‹¬í•˜ëŠ” @ubuntu.com ì´ë©”ì¼ ë³„ì¹­.</li>
<li>An ubuntu/member/your_nick cloak on Libera.Chat.</li>
<li>ìš°ë¶„íˆ¬ ë¡œê³ ê°€ ìˆëŠ” ëª…í•¨ì„ ì¸ì‡„í•  ê¶Œë¦¬</li>
<li>ìš°ë¶„íˆ¬ ë¸”ë¡œê·¸ì˜ í–‰ì„± ìš°ë¶„íˆ¬ ì‹ ë””ì¼€ì´ì…˜.</li>
<li>ìš°ë¶„íˆ¬ í¬ëŸ¼ì˜ ìš°ë¶„íˆ¬ íšŒì› íƒ€ì´í‹€.</li>
<li>people.ubuntu.comì˜ ì›¹ ì•¡ì„¸ìŠ¤ ê°€ëŠ¥í•œ ë””ë ‰í† ë¦¬ì— ëŒ€í•œ SFTP ì•¡ì„¸ìŠ¤</li>
<li>ESM ë° ì»¤ë„ ë¼ì´ë¸Œ íŒ¨ì¹˜ì— ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•œ ìµœëŒ€ 50ê°œì˜ ì‹œìŠ¤í…œì„ ìœ„í•œ ìš°ë¶„íˆ¬ í”„ë¡œ</li>
<li>Canonical CEOì™€ sabdfl, Mark Shuttleworthê°€ ì„œëª…í•œ ì¸ì¦ì„œ.</li>
<li>ë¦¬ëˆ…ìŠ¤ ì£¼ê°„ ë‰´ìŠ¤ êµ¬ë….</li>
<li>ë ˆë”§ì˜ ìš°ë¶„íˆ¬ ë©¤ë²„ í”Œë ˆì–´.</li>
<li>Gandi.netì—ì„œ í˜¸ìŠ¤íŒ…ì„ ìœ„í•œ í• ì¸ëœ ë„ë©”ì¸ ë“±ë¡ ê°€ê²© ë° íŒŒíŠ¸ë„ˆ ìš”ê¸ˆ.</li>
</ul>
<h2>3. Dockerfile ì—†ì´ë„ ì»¨í…Œì´ë„ˆ ì•± ë¹Œë“œí•  ìˆ˜ ìˆì–´ìš” (feat .NET Aspire) (11:00)</h2>
<blockquote>
<p>ì¼ë°˜ì ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•´ì„œëŠ” Dockerfileì´ í•„ìš”í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ê³¼ì—° ê·¸ê²ƒì´ í•„ìˆ˜ì ìœ¼ë¡œ í•„ìš”í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”? ë§Œì•½ Dockerfile ì—†ì´ë„ ì»¨í…Œì´ë„ˆ ì•±ì„ ë¹Œë“œí•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”?</p>
<p>ì´ë²ˆ ì„¸ì…˜ì—ì„œëŠ” MSBuildì˜ ì˜µì…˜ ì¡°ì •ë§Œìœ¼ë¡œ ë‹¤ì–‘í•œ ìš°ë¶„íˆ¬ ê¸°ë°˜ì˜ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¨ê·¼ì°¨ê·¼ ì•Œì•„ë´…ë‹ˆë‹¤. íŠ¹íˆ ìµœê·¼ì— ë§ˆì´í¬ë¡œì†Œí”„íŠ¸ì™€ ìºë…¸ë‹ˆì»¬ì´ í˜‘ì—…í•˜ì—¬ ì œê³µí•˜ëŠ” ì¹˜ì¦ë“œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¡œ ê²½ëŸ‰í™”í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì— ëŒ€í•´ì„œë„ ì•Œì•„ë´…ë‹ˆë‹¤.</p>
<p>ë”ë¶ˆì–´ .NET Aspire ë¼ëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ê¸°ë°˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”„ë ˆì„ì›Œí¬ë¥¼ í†µí•´ ì•ì„œ Dockerfile ì—†ì´ ë¹Œë“œí•œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ê³§ë°”ë¡œ í´ë¼ìš°ë“œë¡œ ë°°í¬í•˜ëŠ” ê³¼ì •ì— ëŒ€í•´ì„œë„ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.</p>
</blockquote>
<blockquote>
<p>Speaker : Justin Yoo</p>
</blockquote>
<blockquote>
<p>Slide : <a href="https://1drv.ms/b/s!ArWHNGHxF7lBhJon5HmBTqHtGrnn2A?e=ZKNQO3" target="_blank" rel="noopener noreferrer">https://1drv.ms/b/s!ArWHNGHxF7lBhJon5HmBTqHtGrnn2A?e=ZKNQO3</a></p>
</blockquote>
<p>ë§í¬ë“œì¸ì—ì„œ ê°€ë” ëµˆë˜ ë¶„ì¸ë°, ê·¸ ì‚¬ì§„ì´ ë’¤ë¡œ ë¬¶ì€ ìƒíƒœì˜€ì–´ì„œ ì•Œì•„ë³´ì§ˆ ëª»í–ˆë‹¤;</p>
<h3>3.1  <code>Dockerfile</code> ì‘ì„±ì˜ ë¶€ë‹´</h3>
<p>ì¼ë°˜ì ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆë¥¼ ë¹Œë“œí•œë‹¤ê³  í•˜ë©´ <code>DockerFile</code>ì„ ë– ì˜¬ë¦¬ê²Œ ëœë‹¤. í•˜ì§€ë§Œ <code>DockerFile</code>ì„ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ì½”ë”©ì´ë¼ê³  ë³¸ë‹¤ë©´ ì´ë˜í•œ ê°œë°œìì—ê²Œ ë¶€ë‹´ì´ ë  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li>ê¸°ë³¸ ì´ë¯¸ì§€</li>
<li>ì‘ì—… ë””ë ‰í† ë¦¬</li>
<li>ì¶”ê°€ ëª…ë ¹ì–´ / í™˜ê²½ ë³€ìˆ˜</li>
<li>ì‹œì‘ ëª…ë ¹ì–´</li>
</ul>
<div class="language-docker" data-highlighter="prismjs" data-ext="docker" data-title="docker"><pre class="language-docker"><code><span class="line"><span class="token instruction"><span class="token keyword">FROM</span> mcr.microsoft.com/dotnet/sdk:8.0@sha256:35792ea4ad1db051981f62b313f1be3b46b1f45cadbaa3c288cd0d3056eefb83 <span class="token keyword">AS</span> build-env</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /App</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Copy everything</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">COPY</span> . ./</span></span>
<span class="line"><span class="token comment"># Restore as distinct layers</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">RUN</span> dotnet restore</span></span>
<span class="line"><span class="token comment"># Build and publish a release</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">RUN</span> dotnet publish -c Release -o out</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Build runtime image</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">FROM</span> mcr.microsoft.com/dotnet/aspnet:8.0@sha256:6c4df091e4e531bb93bdbfe7e7f0998e7ced344f54426b7e874116a3dc3233ff</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /App</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">build-env</span></span> /App/out .</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">"dotnet"</span>, <span class="token string">"DotNet.Docker.dll"</span>]</span></span>
<span class="line"></span></code></pre></div><h3>3.2 <code>docker init</code> ì‚¬ìš©í•´ë³´ê¸°</h3>
<p><code>Docker Destop 4.19.0</code> ì— í¬í•¨ëœ ëª…ë ¹ìœ¼ë¡œ, <code>Dockerfile</code>ì„ ìƒì„±í•˜ëŠ”ë° ë„ì›€ì„ ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.</p>
<p>ì˜ˆë¥¼ ë“¤ì–´ Python ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìˆëŠ” ë””ë ‰í„°ë¦¬ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ëª…ë ¹ì„ ìˆ˜í–‰í•˜ë©´,</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> init python</span>
<span class="line"></span></code></pre></div><p>ë‹¤ìŒê³¼ ê°™ì€ ìƒí˜¸ì‘ìš©ì„ í†µí•´ <code>Dockerfile</code>ì´ ìƒì„±ëœë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">? What application platform does your project use? Python</span>
<span class="line">? What version of Python <span class="token keyword">do</span> you want to use? <span class="token number">3.8</span></span>
<span class="line">? What port <span class="token keyword">do</span> you want your app to listen on? <span class="token number">8000</span></span>
<span class="line">? What is the <span class="token builtin class-name">command</span> to run your app <span class="token punctuation">(</span>e.g., gunicorn <span class="token string">'myapp.example:app'</span> <span class="token parameter variable">--bind</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0:8000<span class="token punctuation">)</span>? python ./app.py</span>
<span class="line"></span>
<span class="line">CREATED: .dockerignore</span>
<span class="line">CREATED: Dockerfile</span>
<span class="line">CREATED: compose.yaml</span>
<span class="line">CREATED: README.Docker.md</span>
<span class="line"></span>
<span class="line">âœ” Your Docker files are ready<span class="token operator">!</span></span>
<span class="line"></span>
<span class="line">Take a moment to review them and tailor them to your application.</span>
<span class="line"></span>
<span class="line">When you're ready, start your application by running: <span class="token function">docker</span> compose up <span class="token parameter variable">--build</span></span>
<span class="line"></span>
<span class="line">Your application will be available at http://localhost:8000</span>
<span class="line"></span>
<span class="line">Consult README.Docker.md <span class="token keyword">for</span> <span class="token function">more</span> information about using the generated files.</span>
<span class="line"></span></code></pre></div><h3>3.3  <code>Dockerfile</code> ì—†ì´ ë¹Œë“œí•˜ê¸°</h3>
<p><code>docker init</code> ëª…ë ¹ì€ Docker Desktopì´ í•„ìš”í•˜ë©°, ëª¨ë‘ì—ê²Œ í•´ë‹¹ë˜ëŠ” ì‚¬í•­ì€ ì•„ë‹ˆë¯€ë¡œ, ë²™ìš©ì ì´ì§€ ì•Šì„ ìˆ˜ ìˆê³ , ê²°êµ­ <code>Dockerfile</code>ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ê´€ë¦¬í•˜ëŠ” ì ˆì°¨ëŠ” ì—¬ì „íˆ ì¡´ì¬í•œë‹¤.</p>
<p>ë”°ë¼ì„œ ì´ë²ˆ ì„¸ì…˜ì—ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŒ¨í‚¤ì§€ ë„êµ¬ì—ì„œ ì§ì ‘ <code>Dockerfile</code>ì—†ì´ë„ ì»¨í…Œì´ë„ˆë¥¼ ë¹Œë“œí•˜ëŠ” ê¸°ëŠ¥ì´ ì†Œê°œë˜ì—ˆë‹¤.ë”°ì§€ê³  ë³´ë©´ ì—†ë‹¤ê¸° ë³´ë‹¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ ë„êµ¬ì˜ ì •ì˜ë¡œ <code>Dockerfile</code>ì˜ ì •ì˜ë¥¼ ëŒ€ì‹ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì˜ˆì‹œì—ì„œëŠ” <code>dotnet</code>ì´ ì‚¬ìš©ë˜ì—ˆì§€ë§Œ <code>gradle</code>ì—ì„œë„ ìœ ì‚¬í•œ ê³¼ì •ì„ ì§€ì›í•˜ì˜€ë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">dotnet publish <span class="token parameter variable">-t:PubilshContainer</span></span>
<span class="line"></span></code></pre></div><ul>
<li>ê´€ë ¨ ê³µì‹ ë¬¸ì„œ : <a href="https://learn.microsoft.com/ko-kr/dotnet/core/docker/publish-as-container?pivots=dotnet-8-0" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/ko-kr/dotnet/core/docker/publish-as-container?pivots=dotnet-8-0</a></li>
</ul>
<details class="hint-container details"><summary>gradleì˜ ì˜ˆ</summary>
<p>ìƒ˜í”Œ ì˜ˆì‹œ : <a href="https://github.com/gorohoroh/getting-started-building-docker-images-with-gradle" target="_blank" rel="noopener noreferrer">https://github.com/gorohoroh/getting-started-building-docker-images-with-gradle</a></p>
<p>Javaì˜ Gradleì—ì„œëŠ” taskë¡œ <code>Dockerfile</code>ì„ ì •ì˜í•˜ê³  ë¹Œë“œí•˜ëŠ” ê³¼ì •ì„ êµ¬ì„±í•˜ë„ë¡ ë˜ì–´ìˆì—ˆë‹¤. ë§ˆì¹˜ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•˜ëŠ” ëŠë‚Œì´ë‹¤.</p>
<div class="language-gradle" data-highlighter="prismjs" data-ext="gradle" data-title="gradle"><pre class="language-gradle"><code><span class="line">task <span class="token function">createDockerFile</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Dockerfile<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    from <span class="token string">'openjdk:8-jre-alpine'</span></span>
<span class="line">    copyFile jar<span class="token punctuation">.</span>archiveFileName<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'/app/test_service.jar'</span></span>
<span class="line">    entryPoint <span class="token string">'java'</span></span>
<span class="line">    defaultCommand <span class="token string">'-jar'</span><span class="token punctuation">,</span> <span class="token string">'/app/test_service.jar'</span></span>
<span class="line">    exposePort <span class="token number">8080</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">task <span class="token function">syncJar</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Copy<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    dependsOn assemble</span>
<span class="line">    from jar<span class="token punctuation">.</span>destinationDirectory</span>
<span class="line">    into <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">buildDir</span></span><span class="token string">/docker"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">task <span class="token function">buildImage</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> DockerBuildImage<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    dependsOn createDockerFile<span class="token punctuation">,</span> syncJar</span>
<span class="line">    inputDir <span class="token operator">=</span> createDockerFile<span class="token punctuation">.</span><span class="token function">getDestDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    images <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"yourdockerhubusername/tuneit-gradle-docker:1.0"</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">gradlew buildImage</span>
<span class="line"></span></code></pre></div></details>
<h3>3.4 ì—¬ëŸ¬ ì•±ì„ ë™ì‹œì— ìë™ìœ¼ë¡œ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•˜ê¸° - .NET Aspire</h3>
<p>Java, Python, JavaScript ì•±ì„ ë°°í¬í•  ìˆ˜ ìˆê³ , Kubernetesë¡œ ë°°í¬í•  ìˆ˜ ìˆëŠ” ë„êµ¬ì´ë‹¤. ê´€ì¸¡ìš©ì´ì„±ê³¼ íšŒë³µíƒ„ë ¥ì„±ì„ ì œê³µí•˜ê³ , ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ë¥¼ ìœ„í•œ ì»¤ë„¥ì…˜ ìŠ¤íŠ¸ë§ì„ ìë™ìƒì„± í•´ì¤€ë‹¤.</p>
<p>ì„¸ì…˜ê°„ ë°ëª¨ì™€ ìœ ì‚¬í•œ ì„¤ëª…ì´ <code>.NetDev</code>ì— ì˜¬ë¼ì™€ ìˆì—ˆë‹¤.</p>
<ul>
<li><a href="https://forum.dotnetdev.kr/t/net-aspire-net-8/8949" target="_blank" rel="noopener noreferrer">.NET Aspire: .NET 8ì„ í†µí•œ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ê°œë°œ ê°„ì†Œí™”</a></li>
</ul>
<p><code>Open Telemetry</code>ê°€ ê¸°ë³¸ ì œê³µë˜ì–´ ë‚´ë¶€ API ì„¤ê³„ì— ìœ ìš©í•´ë³´ì˜€ë‹¤.</p>
<figure><img src="https://learn.microsoft.com/en-us/dotnet/aspire/docs/fundamentals/dashboard/media/explore/trace.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Kubernetesê°™ì€ ì»¨í…Œì´ë„ˆ í”Œë«í¼ì´ ì•Œë ¤ì§€ë©´ì„œ ì»¨í…Œì´ë„ˆì˜ í•„ìš”ì„±ê³¼ ê´€ì‹¬ì€ ì¦ê°€í–ˆì§€ë§Œ, ì»¨í…Œì´ë„ˆë¥¼ ì§€ì›í•˜ëŠ” í”Œë«í¼ì´ ì‹œì¥ì— ë‚˜ì˜¨ ì‹œê¸°ì— ë¹„í•´ ì‹¤ì œ ì•±ì´ ì»¨í…Œì´ë„ˆ í™” ë˜ëŠ” ê³¼ì •ì´ ëŠ¦ë‹¤ë³´ë‹ˆ í”Œë«í¼ê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ê°„ì˜ ê°„ê·¹ì´ ì»·ë˜ê²ƒ ê°™ë‹¤. ì´ê°™ì€ í˜„ìƒì€ í•„ìš”ì— ì˜í•œ í”Œë«í¼ ì´ê¸°ë³´ë‹¤ëŠ”, í”Œë«í¼ì˜ ë„ì…ì„ ìœ„í•œ ê°œë°œ í™˜ê²½ì˜ ë³€í™”ë¥¼ ìš”êµ¬í•˜ë‹¤ë³´ë‹ˆ ìƒê¸°ëŠ” ê°ˆë“±ì„ ì´ˆë˜í–ˆë‹¤ê³  ë³´ì—¬ì§„ë‹¤.</p>
<p>ì§€ê¸ˆì€ ì»¨í…Œì´ë„ˆì— ëŒ€í•œ ì¸ì‹ì´ ì¼ë°˜í™”ë˜ê³  ìˆëŠ” ì¶”ì„¸ë¼ ë³´ì—¬ì§„ë‹¤. ê°œë°œì í”Œë«í¼ì´ë‚˜ ë„êµ¬ë“¤ë„ ì»¨í…Œì´ë„ˆí™”ë¥¼ ìœ„í•œ í¸ì˜ì„±ì„ ì œê³µí•˜ë©´ì„œ, ì ì°¨ ê°œë°œìê°€ ì•±ì„ ì»¨í…Œì´ë„ˆí™” í•˜ëŠ”ë°ì˜ ì¥ì• ë¬¼ì„ ë‚®ì¶”ëŠ” ì‘ì—…ë“¤ì´ ë°˜ë³µë˜ë©´, ì–¸ì  ê°€ëŠ” ì»¨í…Œì´ë„ˆê°€ ì¼ë°˜ì ì¸ ë°°í¬ í˜•íƒœì˜ í•˜ë‚˜ë¡œ ìë¦¬ì¡ê²Œë  ê²ƒìœ¼ë¡œ ë³´ì—¬ì§„ë‹¤.</p>
<h2>4. NHN Cloud ì˜¤í”ˆìŠ¤íƒ, CentOSì—ì„œ Ubuntuë¡œ ì´ì‚¬í•˜ê¸° (11:30)</h2>
<blockquote>
<p>2014ë…„ NHN Cloud IaaSê°€ ì„¸ìƒì— ì²˜ìŒ ë‚˜ì˜¬ ë•ŒëŠ” CentOSê¸°ë°˜ì˜ OpenStackìœ¼ë¡œ êµ¬ì¶•í•˜ì˜€ìŠµë‹ˆë‹¤.<br>
ê·¸ë¦¬ê³  2019ë…„ NHN Cloud IaaSëŠ” ìƒˆë¡œìš´ í™˜ê²½ ëŒ€ì‘ì„ ìœ„í•´ CentOS ê¸°ë°˜ì˜ í™˜ê²½ì—ì„œ Ubuntuë¡œ ì´ì „í•˜ëŠ” ì‘ì—…ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤.<br>
Ubuntuë¡œ ì „í™˜ í›„ 4ë…„ ë™ì•ˆ ìš°ë¦¬ëŠ” ì–´ë–¤ ê²½í—˜ì„ í•˜ì˜€ì„ê¹Œìš”? CentOSì—ì„œ Ubuntuë¡œ ì „í™˜í•˜ë©´ì„œ ì–´ë–¤ ë„ì „ê³¼ì œë“¤ì´ ìˆì—ˆì„ê¹Œìš”?</p>
<p>ì´ ë°œí‘œì—ì„œëŠ” OpenStack í™˜ê²½ì„ CentOSì—ì„œ Ubuntuë¡œ ì „í™˜í•˜ë©° ê²ªì€ ëª¨ë“  ì´ì•¼ê¸°ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.</p>
<ul>
<li>ìš´ì˜í™˜ê²½ì„ Ubuntuë¡œ ì „í™˜í•œ ì´ìœ </li>
<li>Ubuntu private repository êµ¬ì¶• ë° ìš´ì˜</li>
<li>OpenStack ì»´í¬ë„ŒíŠ¸ ìì²´ íŒ¨í‚¤ì§• ì „ëµ</li>
<li>Ubuntu í™˜ê²½ ìš´ì˜ ì¤‘ ë°œìƒí•œ ë¬¸ì œ ê³µìœ </li>
<li>Ubuntu ì €ì¥ì†Œë¥¼ ì§ì ‘ êµ¬ì¶•í•˜ê³  ê´€ë¦¬í•˜ê³  ì‹¶ìœ¼ì‹  ë¶„, íŒŒì´ì¬ ì†ŒìŠ¤ì½”ë“œë¥¼ ë°ë¹„ì•ˆ íŒ¨í‚¤ì§•ì„ í†µí•´ apt ë¡œ ì„¤ì¹˜í•˜ë„ë¡ ë§Œë“¤ì–´ë³´ê³  ì‹¶ìœ¼ì‹  ë¶„ì´ë¼ë©´ ì´ ë°œí‘œê°€ ë§ì€ ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.</li>
</ul>
</blockquote>
<blockquote>
<p>Speaker : Seongsoo Cho, Wonkyu Choi</p>
</blockquote>
<h3>4.1 ë‚´ë¶€ íŒ¨í‚¤ì§€ ì €ì¥ì†Œ</h3>
<p>2019ë…„ CentOSë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ë˜ì—ˆë˜ ì´ˆê¸° NHN í´ë¼ìš°ë“œëŠ”, <code>CentOS 7.x</code>ì—ì„œ <code>Ubuntu 18.0.4</code>ë¡œ ì˜ ì „í™˜ê³¼ì •ì„ ìˆ˜í–‰í•˜ì˜€ë‹¤. Ubuntuë¡œì˜ ì „í™˜ ì´ìœ  ëª‡ê°€ì§€ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li>CentOSì˜ EOL</li>
<li>OpenStackê³¼ì˜ í˜¸í™˜ì„±</li>
<li>ê¸°ì¡´ Yum Packageì™€ Pip ê´€ë¦¬ ì´ì›í™”ë¥¼ ê°œì„ </li>
</ul>
<p>ì¶”í›„ <code>Ubuntu 20.0.4</code>ê°€ ì¶œì‹œë˜ë©´ì„œ ì¶”ê°€ì ìœ¼ë¡œ ê²€í†  ë° ë§ˆì´ê·¸ë ˆì´ì…˜ì´ í•„ìš”í–ˆë˜ ì‘ì—… ì¤‘ì—ì„œ ì¼ë¶€ ë¦¬ìŠ¤íŠ¸ë¡œ ê´€ë¦¬ë˜ë˜ êµ¬ì„±ì´ yamlë¡œ ë³€ê²½ë˜ëŠ” ìƒí™©ë„ ìˆì—ˆë‹¤.</p>
<ol>
<li>
<p>Netplanì˜ ë„¤íŠ¸ì›Œí¬ ì„¤ì • íŒŒì¼ - <code>Ubuntu 18.04</code>ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„¤ì •í•˜ëŠ” ë° <code>Netplan</code>ì´ ë„ì…ë˜ì—ˆìœ¼ë©°, ì´ì „ì˜ ë°©ì‹ì¸ /etc/network/interfaces íŒŒì¼ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë„ ìˆì—ˆë‹¤. <code>Ubuntu 20.04</code>ì—ì„œë„ Netplanì´ ê³„ì† ì‚¬ìš©ë˜ë©°, ì„¤ì • íŒŒì¼ì€ <code>/etc/netplan/</code> ë””ë ‰í† ë¦¬ì— <code>YAML</code> í˜•ì‹ìœ¼ë¡œ ì €ì¥ëœë‹¤.</p>
</li>
<li>
<p>APT íŒ¨í‚¤ì§€ ê´€ë¦¬ - ì¼ë¶€ ê²½ìš°ì— íŠ¹ì • íŒ¨í‚¤ì§€ë‚˜ ì„¤ì •ì— ëŒ€í•´ YAML í˜•ì‹ì˜ íŒŒì¼ì´ í•„ìš”í•  ìˆ˜ ìˆë‹¤.</p>
</li>
<li>
<p>Snap íŒ¨í‚¤ì§€ - <code>Ubuntu 20.04</code>ì—ì„œëŠ” Snap íŒ¨í‚¤ì§€ ì‹œìŠ¤í…œì´ ë”ìš± ê°•ì¡°ë˜ë©°, Snap íŒ¨í‚¤ì§€ì˜ ë©”íƒ€ë°ì´í„°ì™€ ì„¤ì • íŒŒì¼ YAML í˜•ì‹ì„ ì‚¬ìš©í•œë‹¤.</p>
</li>
</ol>
<p>ê°œë°œ íŒ¨í‚¤ì§€ë¥¼ ê³µê°œëœ íŒ¨í‚¤ì§€ë“¤ê³¼ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ ë‚´ë¶€ì— ë³„ë„ ë¯¸ëŸ¬ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ì˜€ëŠ”ë°, ê¸°ì¡´ <code>Pulp</code>ë¥¼ ì‚¬ìš©í•˜ì˜€ìœ¼ë‚˜ ì‹ ê·œ ë²„ì „ì¸ <code>Pulp3</code>ì—ì„œëŠ” ë‹¹ì‹œ CLIë¥¼ ì§€ì›í•˜ì§€ ì•Šì•„ <code>Aptly</code> ë¥¼ ì„ íƒí–ˆë‹¤ê³  í–ˆë‹¤.</p>
<ul>
<li><a href="https://www.aptly.info/" target="_blank" rel="noopener noreferrer">aptly.info</a></li>
<li><a href="https://pulpproject.org/pulp-cli/" target="_blank" rel="noopener noreferrer">Pulp3 CLI</a></li>
</ul>
<h3>4.2 unattended-upgrades</h3>
<p>ë‚´ë¶€ ì €ì¥ì†Œì— ëŒ€í•´ ê°•ì¡°í•œ ì´ìœ ëŠ” ë‚´ë¶€ì— ìˆ˜ë§ì€ ì„œë²„ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ìˆì–´ íŒ¨í‚¤ì§€ ë²„ì „ì´ ë‹¤ë¥¸ê²½ìš° ìš´ì˜ìƒ ë¶€ë‹´ì´ ì»¤ì§€ëŠ” ê²ƒì´ ìˆì—ˆê³ , íŒ¨í‚¤ì§€ ê´€ë¦¬ ë¯¸í¡ìœ¼ë¡œ ì¸í•´ ì¥ì• ê°€ ë°œìƒí•œ ê²½í—˜ì´ ìˆì–´ ê³„ì† ê°•ì¡°ë˜ì—ˆë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/Monosnap Untitled | onemodel 2024-08-11 11-55-11.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>ì¥ì• ê°€ ë°œìƒí•œ ìƒí™©ì„ ê°„ë‹¨íˆ ì •ë¦¬í•˜ë©´,</p>
<ol>
<li>ì˜ë„í•˜ì§€ ì•Šê²Œ ë‚´ë¶€ íŒ¨í‚¤ì§€ ì €ì¥ì†Œê°€ ì™¸ë¶€ ì €ì¥ì†Œì˜ ìƒˆë¡œìš´ íŒ¨í‚¤ì§€ë¡œ ì—…ë°ì´íŠ¸ ë˜ì—ˆê³ ,</li>
<li>Ubuntuì—ëŠ” ìë™ìœ¼ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì—…ê·¸ë ˆì´ë“œ í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ ì¼œì ¸ ìˆì—ˆë‹¤.</li>
<li>ì´ëŸ° ì¥ì• ëŠ” ê¼­ ìƒˆë²½ì— ë°œìƒí•˜ë”ë¼...</li>
</ol>
<p>ì´ê±´ ë§ˆì¹˜ ì´ì „ì— ìœˆë„ìš° ì„œë²„ì˜ ìë™ ì—…ê·¸ë ˆì´ë“œê°€ ì¼œì ¸ìˆì–´ì„œ ì¬ë¶€íŒ…ë˜ë©´ì„œ ì¥ì• ë‚¬ë˜ ìˆœê°„ì„ ìƒê¸°ì‹œì¼œì¤¬ë‹¤.</p>
<ul>
<li><a href="https://ly.lv/128" target="_blank" rel="noopener noreferrer">Unattended upgrade ë¹„í™œì„±í™”</a></li>
</ul>
<h2>5. ì‰¬ìš´ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°, ë…¸ë§ˆë“œ ê²½í—˜í•˜ê¸° (13:30)</h2>
<blockquote>
<p>BM, VM, Cloud, IoT, Edgeì— ì´ë¥´ê¸°ê¹Œì§€ ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆëŠ” HashiCorp Nomadë¥¼ ê²½í—˜í•´ ë³´ì„¸ìš”.</p>
<ul>
<li>Nomad ì†Œê°œ</li>
<li>Nomad ì»¨ì…‰ê³¼ êµ¬ì¡°</li>
<li>Nomad ì•„í‚¤í…ì²˜</li>
<li>Nomad ìŠ¤ì¼€ì¤„ëŸ¬ ë™ì‘</li>
<li>Nomad ìƒí˜¸ì‘ìš© í™•ì¸</li>
<li>Nomad Job &amp; Driver</li>
<li>Nomad Cluster</li>
<li>Nomad HA</li>
<li>Job ì˜ˆì œ</li>
<li>ì‹¤ìŠµ ì°¸ì—¬ì ê°„ í´ëŸ¬ìŠ¤í„° êµ¬ì„±</li>
</ul>
</blockquote>
<blockquote>
<p>Speaker : GyuSeok Lee</p>
</blockquote>
<blockquote>
<p>Slide : <a href="https://docs.google.com/presentation/d/18H1j4kEqBd-9eYHx0jfbgG4v_plWy0_QkZpS8_wksDE/edit?usp=sharing" target="_blank" rel="noopener noreferrer">https://docs.google.com/presentation/d/18H1j4kEqBd-9eYHx0jfbgG4v_plWy0_QkZpS8_wksDE/edit?usp=sharing</a></p>
</blockquote>
<p>Ubuntu ë¦¬ëˆ…ìŠ¤ë„ ì„œë²„í™˜ê²½ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´, ëª©ì ì€ ê·¸ìœ„ì— ì‹¤í–‰ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ”ê²ƒ ë˜í•œ í•˜ë‚˜ì˜ ëª©ì ì´ë¯€ë¡œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Nomadì˜ ì‹¤ìŠµì„ í¬í•¨í•œ ì›Œí¬ìƒµì„ ì§„í–‰í•˜ì˜€ë‹¤.</p>
<p>Nomadë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ë¡€ë¥¼ ë³´ë©´ ì´ë¯¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ë¥¼ ì´í•´í•˜ê³  ì‚¬ìš©í•´ë³¸ ê²½í—˜ì¹˜ê°€ ìˆëŠ” ì‚¬ìš©ìë“¤ì´ ì¢€ë” ì‰½ê³  ê´€ë¦¬í•˜ê¸° ìš©ì´í•œ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ë¡œì„œ Nomadë¥¼ ì°¾ê³  ìˆë‹¤ëŠ” ê³µí†µì ì´ ìˆë‹¤.</p>
<p>Nomadì˜ ì¥ì ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li>ê°„ë‹¨í•œ êµ¬ì„±</li>
<li>ë‹¤ì–‘í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ í˜•íƒœë¥¼ ì§€ì›
<ul>
<li>Docker / Podman</li>
<li>Java</li>
<li>Exec(ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸)</li>
</ul>
</li>
<li>ìŠ¤ì¼€ì¤„ë§ ì§€ì›
<ul>
<li>Service : ì§€ì† ì‹¤í–‰ë˜ëŠ” í˜•íƒœ</li>
<li>System : ëª¨ë“  ì„œë²„ì—ì„œ í•˜ë‚˜ì”© ì‹¤í–‰</li>
<li>Batch : ì‹¤í–‰ í›„ ì¢…ë£Œ, AWS Lambda ì²˜ëŸ¼ ì‹¤í–‰</li>
<li>SysBatch : ëª¨ë“  ì„œë²„ì—ì„œ ë°°ì¹˜ë¥¼ ì‹¤í–‰</li>
</ul>
</li>
<li>ëŒ€ëŸ‰ì˜ ì„œë²„ ê·œëª¨ ì§€ì› : 6000ëŒ€ ì´ìƒì˜ í…ŒìŠ¤íŠ¸ëœ ë…¸ë“œ ìˆ˜</li>
<li>Edge : ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ ìƒí™© ì§€ì›</li>
<li>IoT : ê°€ì¥ ì ì€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë¦¬ì†ŒìŠ¤</li>
</ul>
<h2>6. ë¡œë´‡ ì†Œí”„íŠ¸ì›¨ì–´ ë°°í¬ ì‚¬ë¡€ (16:20)</h2>
<blockquote>
<p>í˜„ì—…ì—ì„œ ë‹¤ì–‘í•œ ë¡œë´‡ í”„ë¡œì íŠ¸ë“¤ì„ ìˆ˜í–‰í•˜ë©´ì„œ ê°œë°œìë¡œì„œ ê²ªì—ˆë˜ ì†Œí”„íŠ¸ì›¨ì–´ ì—…ë°ì´íŠ¸ ê²½í—˜ë‹´ì„ ê³µìœ í•©ë‹ˆë‹¤. ë¡œë´‡ í†µí•© ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ëŠ”ë° ë°œìƒí–ˆë˜ ì˜ì¡´ì„± ë¬¸ì œì™€ ìµœì‹  ë²„ì „ì˜ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ë°°í¬í•˜ê³ ì í•  ë•Œ ê²ªì—ˆë˜ ë¬¸ì œì ì„ ì´ì•¼ê¸°í•˜ê³ , ì´ë¡œì„œ Ubuntu Snap ì„ í™œìš©í•˜ë©´ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” ì¥ì ì— ëŒ€í•´ ë°œí‘œí•©ë‹ˆë‹¤.</p>
</blockquote>
<blockquote>
<p>Speakers: Jihyeon Kwon (robot software engineer), Sung Hoon Kim</p>
</blockquote>
<p><a href="https://clobot.co.kr" target="_blank" rel="noopener noreferrer">í´ë¡œë´‡</a> ì—ì„œ ë¡œë´‡ì— íƒ‘ì¬ë˜ëŠ” Ubuntuê°€ íƒ‘ì¬ëœ ë¡œë´‡ì˜ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë°©ì•ˆì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì—ˆë‹¤.</p>
<h3>6.1 ë¡œë´‡ ì†Œí”„íŠ¸ì›¨ì–´ ì—…ë°ì´íŠ¸ ë°©ì‹</h3>
<h4>6.1.1	ì„¤ì¹˜ìê°€ ì§ì ‘ ë¡œë´‡ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì—…ë°ì´íŠ¸</h4>
<p>ì†ŒìŠ¤ì½”ë“œë¥¼ ë¡œë´‡ì—ì„œ ì§ì ‘ ë¹Œë“œí–ˆë˜, ê°€ì¥ ë‹¨ìˆœí•œ ë°©ì‹ì´ì§€ë§Œ íœ´ë¨¼ ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥ì„±ì´ ë†’ê³ , í˜„ì¥ì— ê°€ì„œ ì‘ì—…í•˜ëŠ” ìƒí™©ìœ¼ë¡œ ì¸ë ¥, ì‹œê°„, ë¹„ìš©ì¸¡ë©´ì˜ ë¦¬ì†ŒìŠ¤ ì†Œëª¨ê°€ ì‹¬í•˜ë‹¤.</p>
<h4>6.1.2	Debian íŒ¨í‚¤ì§€ë¡œ ì†ŒìŠ¤ì½”ë“œë¥¼ ë¹Œë“œ ë° ì„¤ì¹˜</h4>
<p>ë¡œë´‡ì—ì„œ ë¹Œë“œí•˜ì§€ ì•Šê³  íŒ¨í‚¤ì§€í™”í•˜ë©´ ì„¤ì¹˜ê°€ ë‹¨ìˆœí•´ì§€ê³  íœ´ë¨¼ì—ëŸ¬ëŠ” ì¤„ì¼ ìˆ˜ ìˆì§€ë§Œ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ë“¤ê°„ì˜ ì˜ì¡´ì„± ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ìƒí™©ì´ ì¦ë‹¤.</p>
<h4>6.1.3	ë¡œë´‡ ê¸°ë™ ì‹œ OTA(Over-the-air) ì„œë²„ì— ì—°ë™í•˜ì—¬ ì—…ë°ì´íŠ¸</h4>
<p>ì•ˆì •ëœ ì—…ë°ì´íŠ¸ë¥¼ ì œê³µí•˜ì§€ë§Œ ì†Œê·œëª¨ì¸ ê²½ìš° OTA ì„œë²„ë¥¼ ë”°ë¡œ êµ¬ì„±í•˜ëŠ” ë¹„ìš©ì— ëŒ€í•œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ì‹œìŠ¤í…œ ì‚¬ì–‘ì´ ë³€ê²½ë˜ì–´ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” ìƒˆë¡œ ê°œë°œ ë° ë¹Œë“œí•´ì•¼ í•˜ëŠ” ì´ìŠˆëŠ” ì—¬ì „íˆ ì¡´ì¬í–ˆë‹¤.</p>
<h4>6.1.4 ì»¨í…Œì´ë„ˆë¡œ êµ¬ì„±í•˜ì—¬ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì—…ë°ì´íŠ¸</h4>
<p>í˜„ì¬ ê°€ì¥ ë§ì´ í™œìš©í•˜ê³  ìˆëŠ” ë°©ì‹ìœ¼ë¡œ, ì†Œí”„íŠ¸ì›¨ì–´ ì˜ì¡´ì„± ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ì—…ë°ì´íŠ¸ ì†Œìš” ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ ì»¨í…Œì´ë„ˆì˜ ìš©ëŸ‰ì´ ì»¤ì§€ë©´ì„œ ê²½ëŸ‰í™”ì— ëŒ€í•œ ê³¼ì œê°€ ìˆë‹¤.</p>
<h4>6.1.5 Ubuntu Snap í™œìš© ê³„íš</h4>
<p>Ubuntu Snap ì„ í™œìš©í•˜ì—¬ ë¡œë´‡ ê¸°ë™ ì‹œ ìë™ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì„ í…ŒìŠ¤íŠ¸ í•˜ê³  ìˆë‹¤. Snapì€ ì‰¬ìš´ ì„¤ì¹˜ ë°©ë²•ê³¼ ìë™ ì—…ë°ì´íŠ¸ë¥¼ ì œê³µí•˜ê³  ì¢…ì†ì„±ì„ ê´€ë¦¬í•´ì¤€ë‹¤.</p>
<h3>6.2 Snap</h3>
<figure><img src="https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize,c_fill,w_5444,h_3062/https://design.canonical.com/wp-content/uploads/3124/snapcraft_db_brandmark@4x.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<ul>
<li><a href="https://ubuntu.com/core/services/guide/snaps-intro" target="_blank" rel="noopener noreferrer">Introduction to snaps</a></li>
</ul>
<p>Ubuntu Snapì€ Canonicalì´ ê°œë°œí•œ ì†Œí”„íŠ¸ì›¨ì–´ íŒ¨í‚¤ì§€ í˜•ì‹ì´ì, ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ì‹œìŠ¤í…œì´ë‹¤. Snapì€ ì£¼ë¡œ Ubuntuì—ì„œ ì‚¬ìš©ë˜ì§€ë§Œ, ë‹¤ë¥¸ ì—¬ëŸ¬ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒì—ì„œë„ ì§€ì›ëœë‹¤. Snap StoreëŠ” ë§ˆì¹˜ ìŠ¤ë§ˆíŠ¸í°ì˜ ì•±ìŠ¤í† ì–´ ê°™ì•„, Snapìœ¼ë¡œ ì„¤ì¹˜ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li>
<p>ìê¸‰ìì¡± íŒ¨í‚¤ì§€ (Self-contained Packages) : Snap íŒ¨í‚¤ì§€ëŠ” ëª¨ë“  í•„ìš”í•œ ì¢…ì†ì„±ì„ í¬í•¨í•˜ê³  ìˆì–´, ê° Snapì´ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ ì‹œìŠ¤í…œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë²„ì „ ì¶©ëŒ ì—†ì´ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</p>
</li>
<li>
<p>ìƒŒë“œë°•ì‹± ë° ë³´ì•ˆ : Snap ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìƒŒë“œë°•ìŠ¤ í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ë©°, í•„ìš”í•œ ê¶Œí•œì´ ëª…ì‹œì ìœ¼ë¡œ ë¶€ì—¬ë˜ì§€ ì•Šìœ¼ë©´ ì‹œìŠ¤í…œì˜ ë‹¤ë¥¸ ë¶€ë¶„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.</p>
</li>
<li>
<p>ë¡¤ë§ ì—…ë°ì´íŠ¸ : Snap íŒ¨í‚¤ì§€ëŠ” ìë™ìœ¼ë¡œ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ëœë‹¤. ê°œë°œìëŠ” ìƒˆë¡œìš´ ë²„ì „ì„ ë¦´ë¦¬ìŠ¤í•˜ë©´ ì‚¬ìš©ìì˜ ì‹œìŠ¤í…œì—ì„œ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ë©°, ì‚¬ìš©ìëŠ” í•„ìš”ì— ë”°ë¼ íŠ¹ì • ë²„ì „ì„ ê³ ì •í•˜ê±°ë‚˜, ë¡¤ë°±í•  ìˆ˜ ìˆë‹¤.</p>
</li>
<li>
<p>ë…ë¦½ì ì¸ ì‹œìŠ¤í…œ íŒŒì¼ êµ¬ì¡°<br>
Snap ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì¼ë°˜ì ìœ¼ë¡œ /snap ë””ë ‰í† ë¦¬ì— ì„¤ì¹˜ë˜ë©°, ë…ë¦½ëœ íŒŒì¼ ì‹œìŠ¤í…œì„ ê°€ì§„ë‹¤.</p>
</li>
</ul>
<h2>7. Ubuntu Frame &amp; Ubuntu Core ê¸°ë°˜ ì²´í¬ì¸ í‚¤ì˜¤ìŠ¤í¬ ê°œë°œê¸° (16:20)</h2>
<blockquote>
<p>UbuCon Korea 2023ì˜ ì²´í¬ì¸ í‚¤ì˜¤ìŠ¤í¬ ê°œë°œ ë’·ì´ì•¼ê¸°ì— ëŒ€í•´ ì´ì•¼ê¸° í•´ ë´…ë‹ˆë‹¤. í‚¤ì˜¤ìŠ¤í¬ë¥¼ ê°œë°œì„ ì‹œì‘í•œ ê³„ê¸°ë¥¼ ì´ì•¼ê¸° í•´ ë³´ê³ , ê°œë°œì— í™œìš©í•œ ë„êµ¬ì¸ Ubuntu Frame, Ubuntu Core ê·¸ë¦¬ê³  Flutter ë“±ì— ëŒ€í•´ ì´ì•¼ê¸° í•´ ë³´ê³ ì í•©ë‹ˆë‹¤.</p>
<p>ê°œë°œ ê³¼ì •ê³¼ í•¨ê»˜ Ubuntu Core í™˜ê²½ì— ë°°í¬í•˜ê¸° ìœ„í•´ Snap íŒ¨í‚¤ì§•ì„ í•˜ëŠ” ê³¼ì •ì— ëŒ€í•´ì„œë„ ì´ì•¼ê¸° í•˜ê³ , ë°ìŠ¤í¬íƒ‘ ì•± Snap íŒ¨í‚¤ì§•ê³¼ ì–´ë–¤ì ì´ ë‹¤ë¥¸ì§€ë„ ì´ì•¼ê¸° í•´ ë´…ë‹ˆë‹¤.</p>
</blockquote>
<blockquote>
<p>Speaker: Youngbin Han (Ubuntu Korea Community)</p>
</blockquote>
<p>ì»¨í¼ëŸ°ìŠ¤ë‚˜ ì„¸ë¯¸ë‚˜ì—ì„œ ì°¸ì„ìë“±ë¡ì„ ì²´í¬í•˜ëŠ” ì¼ì„ ìˆ˜ë™ìœ¼ë¡œ í•œë‹¤ë©´ ë§¤ìš° í˜ë“  ì¼ì¼ ê²ƒì´ë‹¤. Ubuntu coreì™€ Ubuntu Frameì„ ì‚¬ìš©í•˜ì—¬ í„°ì¹˜ íŒ¨ë„ì´ ìˆëŠ” í‚¤ì˜¤ìŠ¤í¬ë¥¼ ê°œë°œí•œ ì´ì•¼ê¸°ê°€ í¥ë¯¸ë¡œì› ë‹¤.</p>
<h3>7.1 Ubuntu Core</h3>
<ul>
<li><a href="https://ubuntu.com/core" target="_blank" rel="noopener noreferrer">Ubuntu Core</a></li>
</ul>
<p>Ubuntu CoreëŠ” Canonicalì—ì„œ ê°œë°œí•œ ê²½ëŸ‰í™”ëœ ë²„ì „ì˜ Ubuntu ìš´ì˜ì²´ì œë¡œ, ì£¼ë¡œ IoT(ì‚¬ë¬¼ì¸í„°ë„·) ì¥ì¹˜ì™€ ì„ë² ë””ë“œ ì‹œìŠ¤í…œì„ ìœ„í•´ ì„¤ê³„ë˜ì—ˆë‹¤. Ubuntu CoreëŠ” ì „í†µì ì¸ Ubuntuì™€ëŠ” ë‹¬ë¦¬, ëª¨ë“  ì†Œí”„íŠ¸ì›¨ì–´ê°€ Snap íŒ¨í‚¤ì§€ë¡œ ë°°í¬ë˜ê³  ê´€ë¦¬ë˜ëŠ” ê²ƒì´ íŠ¹ì§•ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë³´ë‹¤ ì•ˆì •ì ì´ê³  ë³´ì•ˆì´ ê°•í™”ëœ ì‹œìŠ¤í…œì„ ì œê³µí•œë‹¤.</p>
<p>ê¸°ì¡´ Ubuntuì™€ ë‹¬ë¦¬ ê²½ëŸ‰í™”ëœ OSì´ê¸° ë•Œë¬¸ì— ê¸°ì¡´ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê±°ë‚˜ ë“œë¼ì´ë²„ í˜¸í™˜ì´ ì•ˆë˜ëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤ê³  í–ˆë‹¤. ë˜í•œ í™œìš©í–ˆë˜ ë¼ì¦ˆë² ë¦¬íŒŒì´ ìƒì—ì„œì˜ ë””ë²„ê¹…ë„ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì— ì œí•œì´ ìˆì„ ìˆ˜ ìˆì–´ ë°©ë²•ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤ê³  í–ˆë‹¤.</p>
<ul>
<li><a href="https://ubuntu.com/download/raspberry-pi-core" target="_blank" rel="noopener noreferrer">Install Ubuntu Core on a Raspberry Pi</a></li>
</ul>
<h3>7.2 Ubuntu Frame</h3>
<ul>
<li><a href="https://ubuntu.com/blog/tag/ubuntu-frame" target="_blank" rel="noopener noreferrer">Ubuntu Frame</a></li>
</ul>
<p>Ubuntu Frameì— ëŒ€í•´ì„œëŠ” ê¹€ê´‘ì—°ë‹˜ì´ ì»¤ë®¤ë‹ˆí‹°ì— ê¸°ê³ í•œ ê¸€ì— ì˜ ì •ë¦¬ë˜ì–´ìˆë‹¤.</p>
<ul>
<li><a href="https://blog.ubuntu-kr.org/2023/02/07/ubuntuframe-recap/" target="_blank" rel="noopener noreferrer">Ubuntu Frame ì²˜ìŒ ë§Œë‚˜ë³´ê¸°</a></li>
</ul>
<p>Ubuntu Frameì€ Canonicalì—ì„œ ê°œë°œí•œ ê·¸ë˜í”½ ì„œë²„ë¡œ, ì„ë² ë””ë“œ ì¥ì¹˜ì™€ IoT ë””ìŠ¤í”Œë ˆì´ë¥¼ ìœ„í•œ ê²½ëŸ‰í™”ëœ ë””ìŠ¤í”Œë ˆì´ ì„œë²„ ì†”ë£¨ì…˜ì´ë‹¤. Ubuntu Frameì€ íŠ¹íˆ í‚¤ì˜¤ìŠ¤í¬, ë””ì§€í„¸ ì‚¬ì´ë‹ˆì§€, ì •ë³´ ë‹¨ë§ê¸° ë“±ì˜ ê·¸ë˜í”½ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•˜ëŠ” ë° ìµœì í™”ë˜ì–´ ìˆë‹¤.</p>
<h2>UbuCon Korea 2024 í›„ê¸°</h2>
<p>ì˜¤ë˜ê°„ë§Œì˜ ì»¤ë®¤ë‹ˆí‹° í–‰ì‚¬ê°€ ë°˜ê°€ìš¸ ë¿ì´ë‹¤. ì—¬íƒ€ ìƒì—…ì ì¸ ì„¸ë¯¸ë‚˜ í–‰ì‚¬ì— ê¸¸ë“¤ì—¬ì§„ í„°ë¼ ë¯¸ìˆ™í•œ ì§„í–‰ê³¼ ë¬¸ì œë“¤ì´ ê±°ìŠ¬ë¦´ ìˆ˜ëŠ” ìˆìœ¼ë‚˜, ì»¤ë®¤ë‹ˆí‹° ìš´ì˜ì§„ê³¼ ìì›ë´‰ì‚¬ìë“¤ì´ ë³¸ì—… ì´ì™¸ì˜ ì‹œê°„ì„ ìª¼ê°œì–´ ì´ê°™ì€ í–‰ì‚¬ë¥¼ ê¸°íší•˜ê³  ì§„í–‰í•œë‹¤ëŠ” ê²ƒì„ ê³ ë ¤í•œë‹¤ë©´ ê·¸ì € ê°ì‚¬í•  ë”°ë¦„ì´ë‹¤.</p>
<p>íŠ¸ë™ì´ ë‚˜ëˆ ì ¸ ìˆê¸°ë„ í–ˆê³  ì›Œí¬ìƒµì„ ì§„í–‰í•˜ëŠ” ì—­í• ë¡œë„ ì°¸ì—¬í•˜ì—¬ ë§ì€ ì„¸ì…˜ì„ ë“£ì§€ëŠ” ëª»í–ˆì§€ë§Œ, ê°œë°œê³¼ ë°°í¬ì— ëŒ€í•œ ì—¬ëŸ¬ ê³ ë¯¼ë“¤ê³¼ ë‚˜ë¦„ì˜ í•´ê²°ì±…ì„ ì°¾ì•„ê°€ëŠ” ê³¼ì •ë“¤ì´ ë„ì›€ì´ ë˜ì—ˆë‹¤.</p>
<p>ë§ˆì§€ë§‰ ì¶”ì²¨ì‹œê°„ì—ë„ ë‹´ì²¨ë˜ì–´ ì±…ì„ ë°›ì•˜ëŠ”ë°, ì½ì–´ì•¼ í•  ì±…ì´ ë„˜ì²˜ë‚˜ëŠ” ìƒí™©ì—ì„œ ê·¸ì € ì´ ìƒí™©ì„ ë°›ì•„ë“¤ì¼ ìˆ˜ ë°–ì— ì—†ì—ˆë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/image-20240811124726739.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
]]></content:encoded>
      <enclosure url="https://eventusstorage.blob.core.windows.net/evs/Image/ubuntukr/81549/ProjectInfo/Cover/f16d8e1dd7af46cfb910dfaf9574dd60.png" type="image/png"/>
    </item>
    <item>
      <title>í•˜ë²„ë“œ ë¹„ì¦ˆë‹ˆìŠ¤ ìŠ¤ì¿¨ì—ì„œ ë‚´ê°€ ë°°ìš´ ê²ƒë“¤</title>
      <link>https://docmoa.github.io/06-etc/book-memo/what-i-learn-at-HBS.html</link>
      <guid>https://docmoa.github.io/06-etc/book-memo/what-i-learn-at-HBS.html</guid>
      <source url="https://docmoa.github.io/rss.xml">í•˜ë²„ë“œ ë¹„ì¦ˆë‹ˆìŠ¤ ìŠ¤ì¿¨ì—ì„œ ë‚´ê°€ ë°°ìš´ ê²ƒë“¤</source>
      <description>ë‚´ì¼ì˜ ì„¸ìƒì— â€˜ë‹¤ë¦„â€™ì„ ë˜ì§€ëŠ” ì Šì€ ë¦¬ë”ë“¤ì˜ ì„±ì¥ ìˆ˜ì—…</description>
      <pubDate>Thu, 18 Jul 2024 13:23:05 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>ì±… ì •ë³´</h2>
<blockquote>
<ul>
<li>ì €ì : ìµœë‹¤í˜œ</li>
<li>ì¶œê°„ì¼ : 2023-4-13</li>
<li>í˜ì´ì§€ : 252ìª½</li>
<li>ì¶œíŒì‚¬ ë§í¬ : <a href="https://www.instagram.com/tornadobooks/p/CrQJMUdL5bX/?img_index=1" target="_blank" rel="noopener noreferrer">https://www.instagram.com/tornadobooks/p/CrQJMUdL5bX/?img_index=1</a></li>
<li>ì±…ì†Œê°œ : ë‚´ì¼ì˜ ì„¸ìƒì— â€˜ë‹¤ë¦„â€™ì„ ë˜ì§€ëŠ” ì Šì€ ë¦¬ë”ë“¤ì˜ ì„±ì¥ ìˆ˜ì—…<br>
<img src="https://image.yes24.com/goods/118299749/L" alt="í‘œì§€" loading="lazy"><br>
ìš°ë¦¬ëŠ” ì„¸ê³„ë¥¼ ë³€í™”ì‹œí‚¬ ë¦¬ë”ë¥¼ ì–‘ì„±í•œë‹¤.<br>
We educate leaders who make a differnce in the world.<br>
[í•˜ë²„ë“œ ë¹„ì¦ˆë‹ˆìŠ¤ ìŠ¤ì¿¨ì˜ êµìœ¡ì´ë…]</li>
</ul>
</blockquote>
]]></content:encoded>
      <enclosure url="https://image.yes24.com/goods/118299749/L" type="image/"/>
    </item>
    <item>
      <title>EKS Vault auto unsealì— ëŒ€í•œ kms ID ë³€ê²½ ì‹œ ì„¤ì • ë²•</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/06-Config/Vault-KMS-%EB%B3%80%EA%B2%BD%EB%B2%95.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/06-Config/Vault-KMS-%EB%B3%80%EA%B2%BD%EB%B2%95.html</guid>
      <source url="https://docmoa.github.io/rss.xml">EKS Vault auto unsealì— ëŒ€í•œ kms ID ë³€ê²½ ì‹œ ì„¤ì • ë²•</source>
      <description>vault container KMS</description>
      <pubDate>Mon, 15 Jul 2024 05:44:59 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>1. ì‚¬ì „ ìš”êµ¬ì¡°ê±´ ë° KMS ID ì •ë³´ í™•ì¸</h2>
<h3>1.1 config.hcl íŒŒì¼</h3>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">seal "awskms" {</span>
<span class="line">  region     = "ap-northeast-2"</span>
<span class="line">  kms_key_id = "[kms_key_id]"</span>
<span class="line">}</span>
<span class="line"></span></code></pre></div><h3>1.2 ì´ˆê¸° vault helm ë°°í¬ ì‹œ kms ID ì„¤ì •ì€ secretìœ¼ë¡œ ê´€ë¦¬</h3>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="values.yaml"><pre class="language-yaml"><code><span class="line"><span class="token comment"># ì¤‘ëµ</span></span>
<span class="line">    <span class="token key atrule">extraArgs</span><span class="token punctuation">:</span> <span class="token string">"-config=/vault/userconfig/vault-seal-config/config.hcl"</span></span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> userconfig<span class="token punctuation">-</span>vault<span class="token punctuation">-</span>seal<span class="token punctuation">-</span>config</span>
<span class="line">        <span class="token key atrule">secret</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">defaultMode</span><span class="token punctuation">:</span> <span class="token number">420</span></span>
<span class="line">          <span class="token key atrule">secretName</span><span class="token punctuation">:</span> vault<span class="token punctuation">-</span>seal<span class="token punctuation">-</span>config</span>
<span class="line">    <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /vault/userconfig/vault<span class="token punctuation">-</span>seal<span class="token punctuation">-</span>config</span>
<span class="line">        <span class="token key atrule">name</span><span class="token punctuation">:</span> userconfig<span class="token punctuation">-</span>vault<span class="token punctuation">-</span>seal<span class="token punctuation">-</span>config</span>
<span class="line">        <span class="token key atrule">readOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span></code></pre></div><h3>1.3 kms ID secret</h3>
<figure><figcaption></figcaption></figure>
<h2>2. KMS ID ë³€ê²½</h2>
<h3>2.1 ì´ˆê¸° KMS ID í™•ì¸</h3>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line">seal <span class="token string">"awskms"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">region</span>     <span class="token punctuation">=</span> <span class="token string">"ap-northeast-2"</span></span>
<span class="line">  <span class="token property">kms_key_id</span> <span class="token punctuation">=</span> <span class="token string">"[kms_key_id]"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>2.2 kubernetesì— ì˜¬ë¼ê°„ config.hcl ì •ë³´ë¥¼ base64 ì¸ì½”ë”©í•œ secret ê°’</h3>

<h3>2.3 ì•”í˜¸í™” ì •ë³´ ë³µí˜¸í™”</h3>
<figure><figcaption></figcaption></figure>
<h3>2.3 vault ë°°í¬ ì‹œ Container ë‚´ë¶€ KMS ID ê°’ í™•ì¸</h3>
<figure><figcaption></figcaption></figure>
<h3>2.3 ë³€ê²½ ë˜ëŠ” KMS ID ë³€ê²½</h3>
<ul>
<li><code>d62b42cc-03e1-4950-9364-8830143f5c70</code> =&gt; <code>8dc36bf2-c2f8-4686-bba1-f8ef143a2715</code> KMS ID ë³€ê²½</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">seal "awskms" {</span>
<span class="line">  region     = "ap-northeast-2"</span>
<span class="line">  kms_key_id = "8dc36bf2-c2f8-4686-bba1-f8ef143a2715"</span>
<span class="line">}</span>
<span class="line"></span></code></pre></div><h3>2.4 ë³€ê²½ ëœ config.hcl íŒŒì¼ secret update</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl create secret generic vault-seal-config <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--namespace</span><span class="token operator">=</span>default <span class="token punctuation">\</span></span>
<span class="line">  --from-file<span class="token operator">=</span>./config.hcl <span class="token punctuation">\</span></span>
<span class="line">  --dry-run <span class="token parameter variable">-o</span> yaml <span class="token operator">|</span> kubectl apply <span class="token parameter variable">-f</span> -</span>
<span class="line"></span></code></pre></div><h3>2.5 ë³€ê²½ ëœ kubernetesì— ì˜¬ë¼ê°„ config.hcl ì •ë³´ê°€ ì•”í˜¸í™” ëœ secret ê°’</h3>

<h3>2.6 ë³€ê²½ ëœ ì•”í˜¸í™” ì •ë³´ ë³µí˜¸í™”</h3>
<figure><figcaption></figcaption></figure>
<h3>2.7 ë³€ê²½ ëœ secret ì •ë³´ê°€ ì‹¤ì œ pod ë‚´ ì ìš© ë˜ì–´ ìˆëŠ” í™•ì¸</h3>
<figure><figcaption></figcaption></figure>
<h3>2.8 KMS ID ë³€ê²½ ì´í›„ auto-unseal ì •ìƒ ì‘ë™ í™•ì¸</h3>
<figure><figcaption></figcaption></figure>
<h2>3. values.yaml</h2>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="values.yaml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enterpriseLicense</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">secretName</span><span class="token punctuation">:</span> vault<span class="token punctuation">-</span>ent<span class="token punctuation">-</span>license</span>
<span class="line">  <span class="token key atrule">ha</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
<span class="line">    <span class="token key atrule">raft</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">      <span class="token key atrule">config</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span>
<span class="line">        ui = true</span></span>
<span class="line"></span>
<span class="line">        listener "tcp" <span class="token punctuation">{</span></span>
<span class="line">          tls_disable = 1</span>
<span class="line">          address = "<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>8200"</span>
<span class="line">          cluster_address = "<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>8201"</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">#seal "awskms" {</span></span>
<span class="line">        <span class="token comment">#  region     = "ap-northeast-2"</span></span>
<span class="line">        <span class="token comment">#  kms_key_id = "d62b42cc-03e1-4950-9364-8830143f5c70"</span></span>
<span class="line">        <span class="token comment">#}</span></span>
<span class="line">        storage "raft" <span class="token punctuation">{</span></span>
<span class="line">          path = "/vault/data"</span>
<span class="line">          retry_join <span class="token punctuation">{</span></span>
<span class="line">            leader_api_addr = "https<span class="token punctuation">:</span>//vault<span class="token punctuation">-</span>0.vault<span class="token punctuation">-</span>internal<span class="token punctuation">:</span>8200"</span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        service_registration "kubernetes" <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">repository</span><span class="token punctuation">:</span> hashicorp/vault<span class="token punctuation">-</span>enterprise</span>
<span class="line">    <span class="token key atrule">tag</span><span class="token punctuation">:</span> 1.12.1<span class="token punctuation">-</span>ent</span>
<span class="line">  <span class="token key atrule">extraArgs</span><span class="token punctuation">:</span> <span class="token string">"-config=/vault/userconfig/vault-seal-config/config.hcl"</span></span>
<span class="line">  <span class="token key atrule">extraSecretEnvironmentVars</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">envName</span><span class="token punctuation">:</span> AWS_ACCESS_KEY_ID</span>
<span class="line">      <span class="token key atrule">secretName</span><span class="token punctuation">:</span> eks<span class="token punctuation">-</span>creds</span>
<span class="line">      <span class="token key atrule">secretKey</span><span class="token punctuation">:</span> AWS_ACCESS_KEY_ID</span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">envName</span><span class="token punctuation">:</span> AWS_SECRET_ACCESS_KEY</span>
<span class="line">      <span class="token key atrule">secretName</span><span class="token punctuation">:</span> eks<span class="token punctuation">-</span>creds</span>
<span class="line">      <span class="token key atrule">secretKey</span><span class="token punctuation">:</span> AWS_SECRET_ACCESS_KEY</span>
<span class="line">  <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> userconfig<span class="token punctuation">-</span>vault<span class="token punctuation">-</span>seal<span class="token punctuation">-</span>config</span>
<span class="line">      <span class="token key atrule">secret</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">defaultMode</span><span class="token punctuation">:</span> <span class="token number">420</span></span>
<span class="line">        <span class="token key atrule">secretName</span><span class="token punctuation">:</span> vault<span class="token punctuation">-</span>seal<span class="token punctuation">-</span>config</span>
<span class="line">  <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /vault/userconfig/vault<span class="token punctuation">-</span>seal<span class="token punctuation">-</span>config</span>
<span class="line">      <span class="token key atrule">name</span><span class="token punctuation">:</span> userconfig<span class="token punctuation">-</span>vault<span class="token punctuation">-</span>seal<span class="token punctuation">-</span>config</span>
<span class="line">      <span class="token key atrule">readOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">service</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer</span>
<span class="line">    <span class="token key atrule">loadBalancerClass</span><span class="token punctuation">:</span> service.k8s.aws/nlb</span>
<span class="line">    <span class="token key atrule">annotations</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">dataStorage</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token comment">#storageClass: efs-sc</span></span>
<span class="line">    <span class="token key atrule">size</span><span class="token punctuation">:</span> 10Gi</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>EKS Vault sidecarë¥¼ í™œìš©í•œ logrotate ì„¤ì •</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/06-Config/vault-sidecat-logrotate.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/06-Config/vault-sidecat-logrotate.html</guid>
      <source url="https://docmoa.github.io/rss.xml">EKS Vault sidecarë¥¼ í™œìš©í•œ logrotate ì„¤ì •</source>
      <description>vault container logrotate</description>
      <pubDate>Mon, 15 Jul 2024 05:44:59 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<ul>
<li><a href="#eksvaultsidecar%EB%A5%BC%ED%99%9C%EC%9A%A9%ED%95%9Clogrotate%EC%84%A4%EC%A0%95-%EC%B0%B8%EA%B3%A0:https://github.com/hansemerkur/vault-logrotate">ì°¸ê³ : https://github.com/HanseMerkur/vault-logrotate</a></li>
<li><a href="#eksvaultsidecar%EB%A5%BC%ED%99%9C%EC%9A%A9%ED%95%9Clogrotate%EC%84%A4%EC%A0%95-%EC%B0%B8%EA%B3%A0:%EB%B2%84%EC%A0%84%ED%99%95%EC%9D%B8">ì°¸ê³ : ë²„ì „ í™•ì¸</a></li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">í™•ì¸ ë²„ì „</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">eks cluster</td>
<td style="text-align:center">v1.24</td>
</tr>
<tr>
<td style="text-align:center">aws cli</td>
<td style="text-align:center">v2.10.1</td>
</tr>
<tr>
<td style="text-align:center">eks ctl</td>
<td style="text-align:center">v0.130.0</td>
</tr>
<tr>
<td style="text-align:center">helm</td>
<td style="text-align:center">v3.10.3</td>
</tr>
</tbody>
</table>
<h2>1. EFS CSI Driver ì„¤ì¹˜</h2>
<h3>1.1 IAM ì •ì±…ì„ ë§Œë“¤ json íŒŒì¼ ê°€ì ¸ì˜¤ê¸° iam-policy-example.json</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">-O</span> https://raw.githubusercontent.com/kubernetes-sigs/aws-efs-csi-driver/master/docs/iam-policy-example.json</span>
<span class="line"></span></code></pre></div><div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="iam-policy-example.json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"elasticfilesystem:DescribeAccessPoints"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"elasticfilesystem:DescribeFileSystems"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"elasticfilesystem:DescribeMountTargets"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"ec2:DescribeAvailabilityZones"</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"\*"</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"elasticfilesystem:CreateAccessPoint"</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"\*"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Condition"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">"StringLike"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">"aws:RequestTag/efs.csi.aws.com/cluster"</span><span class="token operator">:</span> <span class="token string">"true"</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token string">"elasticfilesystem:DeleteAccessPoint"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"\*"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Condition"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"StringEquals"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">"aws:ResourceTag/efs.csi.aws.com/cluster"</span><span class="token operator">:</span> <span class="token string">"true"</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>1.2 IAM ì •ì±…</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">aws iam create-policy <span class="token punctuation">\</span></span>
<span class="line">  --policy-name AmazonEKS<span class="token punctuation">\</span>_EFS_CSI_Driver_Policy <span class="token punctuation">\</span></span>
<span class="line">  --policy-document file://iam-policy-example.json</span>
<span class="line"></span></code></pre></div><h3>1.3 í´ëŸ¬ìŠ¤í„°ì˜ OIDC ê³µê¸‰ì URL</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">aws eks describe-cluster <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--name</span> my-cluster <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--query</span> <span class="token string">"cluster.identity.oidc.issuer"</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--output</span> text <span class="token punctuation">\</span></span>
<span class="line">  https://oidc.eks.region-code.amazonaws.com/id/EXAMPLED539D4633E53DE1B71EXAMPLE</span>
<span class="line"></span></code></pre></div><h3>1.4 trust-policy</h3>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="trust-policy.json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Principal"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">"Federated"</span><span class="token operator">:</span> <span class="token string">"arn:aws:iam::111122223333:oidc-provider/oidc.eks.region-code.amazonaws.com/id/EXAMPLED539D4633E53DE1B71EXAMPLE"</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token string">"sts:AssumeRoleWithWebIdentity"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Condition"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">"StringEquals"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">"oidc.eks.region-code.amazonaws.com/id/EXAMPLED539D4633E53DE1B71EXAMPLE:sub"</span><span class="token operator">:</span><span class="token string">"system:serviceaccount:kube-system:efs-csi-controller-sa"</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>1.4 ì—­í•  ìƒì„±</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">aws iam create-role <span class="token punctuation">\</span></span>
<span class="line">  --role-name AmazonEKS<span class="token punctuation">\</span>_EFS<span class="token punctuation">\</span>_CSI<span class="token punctuation">\</span>_DriverRole <span class="token punctuation">\</span></span>
<span class="line">  --assume-role-policy-document file://<span class="token string">"trust-policy.json"</span></span>
<span class="line"></span></code></pre></div><h3>1.5 IAM ì •ì±…ì„ ì—­í• ì— ì—°ê²°</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">aws iam attach-role-policy <span class="token punctuation">\</span></span>
<span class="line">  --policy-arn arn:aws:iam::111122223333:policy/AmazonEKS<span class="token punctuation">\</span>_EFS<span class="token punctuation">\</span>_CSI<span class="token punctuation">\</span>_Driver<span class="token punctuation">\</span>_Policy <span class="token punctuation">\</span></span>
<span class="line">  --role-name AmazonEKS<span class="token punctuation">\</span>_EFS<span class="token punctuation">\</span>_CSI<span class="token punctuation">\</span>_DriverRole</span>
<span class="line"></span></code></pre></div><h3>1.6 ìƒì„±í•œ IAM ì—­í• ì˜ ARNì´ ì¶”ê°€ëœ Kubernetes SAì„ ìƒì„±</h3>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">labels</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>efs<span class="token punctuation">-</span>csi<span class="token punctuation">-</span>driver</span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> efs<span class="token punctuation">-</span>csi<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>sa</span>
<span class="line">    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system</span>
<span class="line">    <span class="token key atrule">annotations</span><span class="token punctuation">:</span> </span>
<span class="line">    <span class="token key atrule">eks.amazonaws.com/role-arn</span><span class="token punctuation">:</span> arn<span class="token punctuation">:</span>aws<span class="token punctuation">:</span>iam<span class="token punctuation">:</span><span class="token punctuation">:</span>111122223333<span class="token punctuation">:</span>role/AmazonEKS\_EFS\_CSI\_DriverRole</span>
<span class="line">kubectl apply <span class="token punctuation">-</span>f efs<span class="token punctuation">-</span>service<span class="token punctuation">-</span>account.yaml</span>
<span class="line"></span></code></pre></div><h2>2. Amazon EFS ë“œë¼ì´ë²„ ì„¤ì¹˜</h2>
<h3>2.1 Helm ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì¶”ê°€</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">helm repo <span class="token function">add</span> aws-efs-csi-driver https://kubernetes-sigs.github.io/aws-efs-csi-driver/</span>
<span class="line"></span></code></pre></div><h3>2.2 ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì—…ë°ì´íŠ¸</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">helm repo update</span>
<span class="line"></span></code></pre></div><h3>2.3 Helm ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë“œë¼ì´ë²„ ë¦´ë¦¬ìŠ¤ë¥¼ ì„¤ì¹˜</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">helm upgrade <span class="token parameter variable">-i</span> aws-efs-csi-driver aws-efs-csi-driver/aws-efs-csi-driver <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--namespace</span> kube-system <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--set</span> <span class="token assign-left variable">image.repository</span><span class="token operator">=</span><span class="token number">602401143452</span>.dkr.ecr.region-code.amazonaws.com/eks/aws-efs-csi-driver <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--set</span> <span class="token assign-left variable">controller.serviceAccount.create</span><span class="token operator">=</span>false <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--set</span> <span class="token assign-left variable">controller.serviceAccount.name</span><span class="token operator">=</span>efs-csi-controller-sa</span>
<span class="line"></span></code></pre></div><h3>2.4 EFS ìƒì„±</h3>
<figure><figcaption></figcaption></figure>
<h3>2.4 EFS SG ìƒì„± í›„ ì„¤ì •</h3>
<figure><figcaption></figcaption></figure>
<h3>2.5 storageclass.yamlë¡œ ë°°í¬</h3>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="sc.yaml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> StorageClass</span>
<span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> efs<span class="token punctuation">-</span>sc</span>
<span class="line"><span class="token key atrule">provisioner</span><span class="token punctuation">:</span> efs.csi.aws.com</span>
<span class="line"><span class="token key atrule">reclaimPolicy</span><span class="token punctuation">:</span> Retain</span>
<span class="line"><span class="token key atrule">parameters</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">provisioningMode</span><span class="token punctuation">:</span> efs<span class="token punctuation">-</span>ap</span>
<span class="line">    <span class="token key atrule">fileSystemId</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>ìƒì„±í•œ EFS ID ê¸°ì…<span class="token punctuation">}</span></span>
<span class="line">    <span class="token key atrule">directoryPerms</span><span class="token punctuation">:</span> <span class="token string">"700"</span></span>
<span class="line">    <span class="token key atrule">gidRangeStart</span><span class="token punctuation">:</span> <span class="token string">"1000"</span></span>
<span class="line">    <span class="token key atrule">gidRangeEnd</span><span class="token punctuation">:</span> <span class="token string">"2000"</span></span>
<span class="line"></span></code></pre></div><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl apply sc.yaml</span>
<span class="line"></span></code></pre></div><h2>3. helmìœ¼ë¡œ Vault sidecarë¥¼ í™œìš©í•œ logrotate yaml íŒŒì¼ ì¤€ë¹„</h2>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="cm-logrotate.yaml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> logrotate<span class="token punctuation">-</span>config</span>
<span class="line"><span class="token key atrule">data</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">logrotate.conf</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">    </span>
<span class="line">     /vault/audit/*.txt {       </span>
<span class="line">     missingok              </span>
<span class="line">     compress               </span>
<span class="line">     maxsize 1M             </span>
<span class="line">     crate                  </span>
<span class="line">     dateext                </span>
<span class="line">     dateformat -%Y-%m-%d_%H</span>
<span class="line">     postrotate             </span>
<span class="line">         pkill -HUP vault   </span>
<span class="line">     endscript              </span></span>
<span class="line"> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>3.1 vault helmìœ¼ë¡œ ë°°í¬</h3>
<h4>3.1.1 license secret ìƒì„±</h4>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">touch</span> vault.hclic <span class="token comment"># vault ë¼ì´ì„¼ìŠ¤ ë‚´ìš© ì²¨ë¶€</span></span>
<span class="line"></span>
<span class="line"><span class="token assign-left variable">vaultsecret</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> vault.hclic<span class="token variable">)</span></span></span>
<span class="line"></span>
<span class="line">kubectl create secret generic vault-ent-license --from-literal<span class="token operator">=</span><span class="token string">"license=<span class="token variable">${vaultsecret}</span>"</span></span>
<span class="line"></span></code></pre></div><h4>3.1.2 eks ìê²©ì¦ëª… secret ìƒì„±</h4>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl create secret generic eks-creds <span class="token punctuation">\</span></span>
<span class="line">  --from-literal<span class="token operator">=</span>AWS_ACCESS_KEY_ID<span class="token operator">=</span><span class="token string">"[AWS_ACCESS_KEY_ID]"</span> <span class="token punctuation">\</span></span>
<span class="line">  --from-literal<span class="token operator">=</span>AWS_SECRET_ACCESS_KEY<span class="token operator">=</span><span class="token string">"[AWS_SECRET_ACCESS_KEY]"</span></span>
<span class="line"></span></code></pre></div><h4>3.1.3 vault helm values.yaml ë°°í¬</h4>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="values.yaml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># HUP signal for logrotate</span></span>
<span class="line">  <span class="token key atrule">shareProcessNamespace</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token comment"># Add the lograte config from a config map</span></span>
<span class="line">  <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> logrotate<span class="token punctuation">-</span>config</span>
<span class="line">      <span class="token key atrule">configMap</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">name</span><span class="token punctuation">:</span> logrotate<span class="token punctuation">-</span>config</span>
<span class="line">  <span class="token comment"># And finally the container</span></span>
<span class="line">  <span class="token key atrule">extraContainers</span><span class="token punctuation">:</span></span>
<span class="line">   <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> auditlog<span class="token punctuation">-</span>rotator</span>
<span class="line">     <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>aws account ID<span class="token punctuation">]</span>.dkr.ecr.ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2.amazonaws.com/hasicorp<span class="token punctuation">-</span>repo<span class="token punctuation">:</span>logrotate </span>
<span class="line">     <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> Always</span>
<span class="line">     <span class="token key atrule">env</span><span class="token punctuation">:</span></span>
<span class="line">       <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> CRONTAB</span>
<span class="line">         <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">"*/3 * * * *"</span></span>
<span class="line">     <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span></span>
<span class="line">     <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /etc/logrotate.conf</span>
<span class="line">       <span class="token key atrule">name</span><span class="token punctuation">:</span> logrotate<span class="token punctuation">-</span>config</span>
<span class="line">       <span class="token key atrule">subPath</span><span class="token punctuation">:</span> logrotate.conf</span>
<span class="line">       <span class="token key atrule">readOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">     <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /vault/audit</span>
<span class="line">       <span class="token key atrule">name</span><span class="token punctuation">:</span> audit</span>
<span class="line">  <span class="token key atrule">enterpriseLicense</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">secretName</span><span class="token punctuation">:</span> vault<span class="token punctuation">-</span>ent<span class="token punctuation">-</span>license</span>
<span class="line">  <span class="token key atrule">ha</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">raft</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">      <span class="token key atrule">config</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span>
<span class="line">        ui = true</span></span>
<span class="line"></span>
<span class="line">        listener "tcp" <span class="token punctuation">{</span></span>
<span class="line">          tls_disable = 1</span>
<span class="line">          address = "<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>8200"</span>
<span class="line">          cluster_address = "<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>8201"</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        seal "awskms" <span class="token punctuation">{</span></span>
<span class="line">           region     = "ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2"</span>
<span class="line">           kms_key_id = "<span class="token punctuation">[</span>kms_key_id<span class="token punctuation">]</span>"</span>
<span class="line">         <span class="token punctuation">}</span></span>
<span class="line">        storage "raft" <span class="token punctuation">{</span></span>
<span class="line">          path = "/vault/data"</span>
<span class="line">          retry_join <span class="token punctuation">{</span></span>
<span class="line">            leader_api_addr = "https<span class="token punctuation">:</span>//vault<span class="token punctuation">-</span>0.vault<span class="token punctuation">-</span>internal<span class="token punctuation">:</span>8200"</span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">          retry_join <span class="token punctuation">{</span></span>
<span class="line">            leader_api_addr = "https<span class="token punctuation">:</span>//vault<span class="token punctuation">-</span>1.vault<span class="token punctuation">-</span>internal<span class="token punctuation">:</span>8200"</span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">          retry_join <span class="token punctuation">{</span></span>
<span class="line">            leader_api_addr = "https<span class="token punctuation">:</span>//vault<span class="token punctuation">-</span>2.vault<span class="token punctuation">-</span>internal<span class="token punctuation">:</span>8200"</span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">         <span class="token punctuation">}</span></span>
<span class="line">        service_registration "kubernetes" <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">repository</span><span class="token punctuation">:</span> hashicorp/vault<span class="token punctuation">-</span>enterprise</span>
<span class="line">    <span class="token key atrule">tag</span><span class="token punctuation">:</span> 1.12.1<span class="token punctuation">-</span>ent</span>
<span class="line">  <span class="token key atrule">extraSecretEnvironmentVars</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">envName</span><span class="token punctuation">:</span> AWS_ACCESS_KEY_ID</span>
<span class="line">      <span class="token key atrule">secretName</span><span class="token punctuation">:</span> eks<span class="token punctuation">-</span>creds</span>
<span class="line">      <span class="token key atrule">secretKey</span><span class="token punctuation">:</span> AWS_ACCESS_KEY_ID</span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">envName</span><span class="token punctuation">:</span> AWS_SECRET_ACCESS_KEY</span>
<span class="line">      <span class="token key atrule">secretName</span><span class="token punctuation">:</span> eks<span class="token punctuation">-</span>creds</span>
<span class="line">      <span class="token key atrule">secretKey</span><span class="token punctuation">:</span> AWS_SECRET_ACCESS_KEY</span>
<span class="line">  <span class="token key atrule">service</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer</span>
<span class="line">    <span class="token key atrule">loadBalancerClass</span><span class="token punctuation">:</span> service.k8s.aws/nlb</span>
<span class="line">    <span class="token key atrule">annotations</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">dataStorage</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">storageClass</span><span class="token punctuation">:</span> efs<span class="token punctuation">-</span>sc</span>
<span class="line">    <span class="token key atrule">size</span><span class="token punctuation">:</span> 100Gi</span>
<span class="line">  <span class="token key atrule">auditStorage</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> </span>
<span class="line">    <span class="token comment"># Size of the PVC created</span></span>
<span class="line">    <span class="token key atrule">size</span><span class="token punctuation">:</span> 100Gi</span>
<span class="line">    <span class="token comment"># Location where the PVC will be mounted.</span></span>
<span class="line">    <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> <span class="token string">"/vault/audit"</span></span>
<span class="line">    <span class="token comment"># Name of the storage class to use.  If null it will use the</span></span>
<span class="line">    <span class="token comment"># configured default Storage Class.</span></span>
<span class="line">    <span class="token key atrule">storageClass</span><span class="token punctuation">:</span> efs<span class="token punctuation">-</span>sc </span>
<span class="line">    <span class="token comment"># Access Mode of the storage device being used for the PVC</span></span>
<span class="line">    <span class="token key atrule">accessMode</span><span class="token punctuation">:</span> ReadWriteOnce</span>
<span class="line">    <span class="token comment"># Annotations to apply to the PVC</span></span>
<span class="line">    <span class="token key atrule">annotations</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h4>3.1.3 helm repo ë“±ë¡ ë° values.yaml ê¸°ë°˜ìœ¼ë¡œ vault ë°°í¬</h4>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">helm repo <span class="token function">add</span> hashicorp https://helm.releases.hashicorp.com</span>
<span class="line"></span>
<span class="line">helm repo list</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ì„¤ì¹˜</span></span>
<span class="line">helm <span class="token function">install</span> vault hashicorp/vault <span class="token parameter variable">-f</span> values.yaml</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ì‚­ì œ</span></span>
<span class="line">helm uninstall vault hashicorp/vault <span class="token parameter variable">-f</span> values.yaml</span>
<span class="line"></span></code></pre></div><h4>3.1.4 logrotate ì ìš© í™•ì¸</h4>
<figure><figcaption></figcaption></figure>
<h4>3.1.5 auditlog-logrotate ì„¤ì • í™•ì¸</h4>
<figure><figcaption></figcaption></figure>
<ul>
<li>1Mê°€ ë„˜ì–´ê°€ë©´ ìƒˆë¡œ ìƒì„± ëœ íŒŒì¼ë“¤ì€ ì••ì¶•íŒŒì¼ë¡œ ë³€í™˜ ì„¤ì •</li>
</ul>
<figure><figcaption></figcaption></figure>
]]></content:encoded>
    </item>
    <item>
      <title>Vault Secret Engine ì¡°íšŒ ìŠ¤í¬ë¦½íŠ¸</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/get-all-secret-engine.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/get-all-secret-engine.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault Secret Engine ì¡°íšŒ ìŠ¤í¬ë¦½íŠ¸</source>
      <description>Vault Secret Engine ì¡°íšŒ ìŠ¤í¬ë¦½íŠ¸ 1. Policy namespace í•˜ìœ„ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. sys/namespaces/*: ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ë‚˜ì—´í•˜ê³  ì½ì„ ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤. í™œì„±í™”ëœ Secret Engineì„ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. sys/mount...</description>
      <pubDate>Fri, 12 Jul 2024 13:36:28 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>1. Policy</h2>
<ul>
<li><code>namespace</code>  í•˜ìœ„ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.
<ul>
<li><code>sys/namespaces/*</code>: ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ë‚˜ì—´í•˜ê³  ì½ì„ ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.</li>
</ul>
</li>
<li>í™œì„±í™”ëœ Secret Engineì„ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.
<ul>
<li><code>sys/mounts</code>: ë£¨íŠ¸ ë ˆë²¨ì˜ ë§ˆìš´íŠ¸ í¬ì¸íŠ¸(ì‹œí¬ë¦¿ ì—”ì§„)ë¥¼ ì½ì„ ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.</li>
<li><code>+/sys/mounts</code>: ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ë§ˆìš´íŠ¸ í¬ì¸íŠ¸ë¥¼ ì½ì„ ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.</li>
<li><code>+/*/metadata/*</code>: í•„ìš”í•œ ê²½ìš°, ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ KV ì‹œí¬ë¦¿ ì—”ì§„ ë©”íƒ€ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment"># ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ëŒ€í•œ ì½ê¸° ê¶Œí•œ</span></span>
<span class="line">path <span class="token string">"sys/namespaces/*"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"list"</span>, <span class="token string">"read"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ë§ˆìš´íŠ¸ í¬ì¸íŠ¸(ì‹œí¬ë¦¿ ì—”ì§„) ì¡°íšŒ ê¶Œí•œ</span></span>
<span class="line">path <span class="token string">"sys/mounts"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"read"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ì‹œí¬ë¦¿ ì—”ì§„ ëª©ë¡ ì¡°íšŒ ê¶Œí•œ</span></span>
<span class="line">path <span class="token string">"+/sys/mounts"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"read"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># í•„ìš”í•œ ê²½ìš°, íŠ¹ì • ì‹œí¬ë¦¿ ì—”ì§„ì— ëŒ€í•œ ë©”íƒ€ë°ì´í„° ì½ê¸° ê¶Œí•œ</span></span>
<span class="line"><span class="token comment"># ì˜ˆ: KV ì‹œí¬ë¦¿ ì—”ì§„</span></span>
<span class="line">path <span class="token string">"+/*/metadata/*"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"list"</span>, <span class="token string">"read"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>ì •ì±… ìƒì„± :</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault policy <span class="token function">write</span> secret-list-getter ./policy.hcl</span>
<span class="line"></span></code></pre></div><h2>2. CLI script (list_vault_secrets.sh)</h2>
<ul>
<li><code>list_vault_secrets.sh</code>ì˜ ì²«ë²ˆì§¸ Argumentê°€ ê¸°ì¤€ì´ ë©ë‹ˆë‹¤. (e.g. <code>admin</code>)
<ul>
<li>ë£¨íŠ¸ë¶€í„° ì‹œì‘: <code>./script.sh</code></li>
<li>íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¶€í„° ì‹œì‘: <code>./script.sh admin</code> ë˜ëŠ” <code>./script.sh admin/subns</code></li>
</ul>
</li>
<li>í•˜ìœ„ namespaceë¥¼ ì¡°íšŒí•˜ì—¬ ë°˜ë³µì ìœ¼ë¡œ Secret Engineì„ ì¡°íšŒí•©ë‹ˆë‹¤.</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ì‹œí¬ë¦¿ ì—”ì§„ì„ ì¬ê·€ì ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” í•¨ìˆ˜</span></span>
<span class="line"><span class="token function-name function">list_secrets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin class-name">local</span> <span class="token assign-left variable">full_namespace</span><span class="token operator">=</span><span class="token variable">$1</span></span>
<span class="line">    <span class="token builtin class-name">local</span> <span class="token assign-left variable">indent</span><span class="token operator">=</span><span class="token variable">$2</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># í˜„ì¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„¤ì •</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$full_namespace</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span>
<span class="line">        <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_NAMESPACE</span><span class="token operator">=</span><span class="token variable">$full_namespace</span></span>
<span class="line">    <span class="token keyword">else</span></span>
<span class="line">        <span class="token builtin class-name">unset</span> VAULT_NAMESPACE</span>
<span class="line">    <span class="token keyword">fi</span></span>
<span class="line"></span>
<span class="line">    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${indent}</span>Namespace: <span class="token variable">${VAULT_NAMESPACE<span class="token operator">:-</span>}</span>"</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># ì‹œí¬ë¦¿ ì—”ì§„ ëª©ë¡ ì¡°íšŒ</span></span>
<span class="line">    vault secrets list <span class="token parameter variable">-format</span><span class="token operator">=</span>json <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'to_entries[] | select(.value.type != "system") | "\(.key)|\(.value.type)"'</span> <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">'|'</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> engine <span class="token builtin class-name">type</span><span class="token punctuation">;</span> <span class="token keyword">do</span></span>
<span class="line">        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${indent}</span>  Secret Engine: <span class="token variable">$engine</span> (Type: <span class="token variable">$type</span>)"</span></span>
<span class="line">    <span class="token keyword">done</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># í•˜ìœ„ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì¡°íšŒ</span></span>
<span class="line">    vault namespace list <span class="token parameter variable">-format</span><span class="token operator">=</span>json <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.[]'</span> <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> subns<span class="token punctuation">;</span> <span class="token keyword">do</span></span>
<span class="line">        <span class="token builtin class-name">local</span> new_namespace</span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$full_namespace</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span>
<span class="line">            <span class="token assign-left variable">new_namespace</span><span class="token operator">=</span><span class="token string">"<span class="token variable">${full_namespace}</span>/<span class="token variable">${subns}</span>"</span></span>
<span class="line">        <span class="token keyword">else</span></span>
<span class="line">            <span class="token assign-left variable">new_namespace</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$subns</span>"</span></span>
<span class="line">        <span class="token keyword">fi</span></span>
<span class="line">        list_secrets <span class="token string">"<span class="token variable">$new_namespace</span>"</span> <span class="token string">"  <span class="token variable">${indent}</span>"</span></span>
<span class="line">    <span class="token keyword">done</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># VAULT_TOKEN í™˜ê²½ë³€ìˆ˜ í™•ì¸</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$VAULT_TOKEN</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span>
<span class="line">    <span class="token builtin class-name">echo</span> <span class="token string">"Error: VAULT_TOKEN environment variable is not set."</span></span>
<span class="line">    <span class="token builtin class-name">exit</span> <span class="token number">1</span></span>
<span class="line"><span class="token keyword">fi</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë©”ì¸ ì‹¤í–‰</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">"Listing all secret engines in all namespaces:"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ì²« ë²ˆì§¸ ì¸ìê°€ ìˆìœ¼ë©´ í•´ë‹¹ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¶€í„° ì‹œì‘, ì—†ìœ¼ë©´ ë£¨íŠ¸ë¶€í„° ì‹œì‘</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span>
<span class="line">    list_secrets <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token string">""</span></span>
<span class="line"><span class="token keyword">else</span></span>
<span class="line">    list_secrets <span class="token string">""</span> <span class="token string">""</span></span>
<span class="line"><span class="token keyword">fi</span></span>
<span class="line"></span></code></pre></div><h2>3. Token ìƒì„± ë° ì‹¤í–‰</h2>
<p>ì‹¤í–‰ ì˜ˆì‹œ</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token assign-left variable">VAULT_TOKEN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>vault token create <span class="token parameter variable">-field</span><span class="token operator">=</span>token <span class="token parameter variable">-policy</span><span class="token operator">=</span>secret-list-getter<span class="token variable">)</span></span> <span class="token punctuation">\</span></span>
<span class="line">  ./list_vault_secrets.sh <span class="token punctuation">\</span></span>
<span class="line">  admin</span>
<span class="line"></span></code></pre></div><p>ê²°ê³¼ 1 (HCP Vault - admin namespace ê¸°ì¤€)</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token assign-left variable">VAULT_TOKEN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>vault token create <span class="token parameter variable">-field</span><span class="token operator">=</span>token <span class="token parameter variable">-policy</span><span class="token operator">=</span>secret-list-getter<span class="token variable">)</span></span> <span class="token punctuation">\</span></span>
<span class="line">  ./list_vault_secrets.sh <span class="token punctuation">\</span></span>
<span class="line">  admin</span>
<span class="line"></span>
<span class="line">Listing all secret engines <span class="token keyword">in</span> all namespaces:</span>
<span class="line">Namespace: admin</span>
<span class="line">  Secret Engine: alicloud/ <span class="token punctuation">(</span>Type: alicloud<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: ansible-ssh/ <span class="token punctuation">(</span>Type: <span class="token function">ssh</span><span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: aws-doormat/ <span class="token punctuation">(</span>Type: aws<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: aws/ <span class="token punctuation">(</span>Type: aws<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: azure/ <span class="token punctuation">(</span>Type: azure<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: cubbyhole/ <span class="token punctuation">(</span>Type: ns_cubbyhole<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: gcp/ <span class="token punctuation">(</span>Type: gcp<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: identity/ <span class="token punctuation">(</span>Type: ns_identity<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: kv_v1/ <span class="token punctuation">(</span>Type: kv<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: my_kv/ <span class="token punctuation">(</span>Type: kv<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: pki/ <span class="token punctuation">(</span>Type: pki<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: pki_int/ <span class="token punctuation">(</span>Type: pki<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: pki_kv/ <span class="token punctuation">(</span>Type: kv<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: planetscale/ <span class="token punctuation">(</span>Type: database<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: secret/ <span class="token punctuation">(</span>Type: kv<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: ssh/ <span class="token punctuation">(</span>Type: <span class="token function">ssh</span><span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: sys/ <span class="token punctuation">(</span>Type: ns_system<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: totp/ <span class="token punctuation">(</span>Type: totp<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: transit/ <span class="token punctuation">(</span>Type: transit<span class="token punctuation">)</span></span>
<span class="line">  Namespace: admin/A-Com/</span>
<span class="line">    Secret Engine: cubbyhole/ <span class="token punctuation">(</span>Type: ns_cubbyhole<span class="token punctuation">)</span></span>
<span class="line">    Secret Engine: identity/ <span class="token punctuation">(</span>Type: ns_identity<span class="token punctuation">)</span></span>
<span class="line">    Secret Engine: sys/ <span class="token punctuation">(</span>Type: ns_system<span class="token punctuation">)</span></span>
<span class="line">  Namespace: admin/my-namespace/</span>
<span class="line">    Secret Engine: cubbyhole/ <span class="token punctuation">(</span>Type: ns_cubbyhole<span class="token punctuation">)</span></span>
<span class="line">    Secret Engine: identity/ <span class="token punctuation">(</span>Type: ns_identity<span class="token punctuation">)</span></span>
<span class="line">    Secret Engine: sys/ <span class="token punctuation">(</span>Type: ns_system<span class="token punctuation">)</span></span>
<span class="line">  Namespace: admin/with-okta/</span>
<span class="line">    Secret Engine: cubbyhole/ <span class="token punctuation">(</span>Type: ns_cubbyhole<span class="token punctuation">)</span></span>
<span class="line">    Secret Engine: identity/ <span class="token punctuation">(</span>Type: ns_identity<span class="token punctuation">)</span></span>
<span class="line">    Secret Engine: sample-secret/ <span class="token punctuation">(</span>Type: kv<span class="token punctuation">)</span></span>
<span class="line">    Secret Engine: sys/ <span class="token punctuation">(</span>Type: ns_system<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>ê²°ê³¼ 2 (Vault ì„¤ì¹˜í˜• - root(/) namespace ê¸°ì¤€)</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token assign-left variable">VAULT_TOKEN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>vault token create <span class="token parameter variable">-field</span><span class="token operator">=</span>token <span class="token parameter variable">-policy</span><span class="token operator">=</span>secret-list-getter<span class="token variable">)</span></span> <span class="token punctuation">\</span></span>
<span class="line">  ./list_vault_secrets.sh</span>
<span class="line"></span>
<span class="line">Listing all secret engines <span class="token keyword">in</span> all namespaces:</span>
<span class="line">Namespace:</span>
<span class="line">  Secret Engine: cubbyhole/ <span class="token punctuation">(</span>Type: cubbyhole<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: identity/ <span class="token punctuation">(</span>Type: identity<span class="token punctuation">)</span></span>
<span class="line">  Secret Engine: secret/ <span class="token punctuation">(</span>Type: kv<span class="token punctuation">)</span></span>
<span class="line">  Namespace: sub1/</span>
<span class="line">    Secret Engine: aws/ <span class="token punctuation">(</span>Type: aws<span class="token punctuation">)</span></span>
<span class="line">    Secret Engine: cubbyhole/ <span class="token punctuation">(</span>Type: ns_cubbyhole<span class="token punctuation">)</span></span>
<span class="line">    Secret Engine: identity/ <span class="token punctuation">(</span>Type: ns_identity<span class="token punctuation">)</span></span>
<span class="line">    Secret Engine: sys/ <span class="token punctuation">(</span>Type: ns_system<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Container component deploy</title>
      <link>https://docmoa.github.io/04-HashiCorp/03-Terraform/06-TerraformEnterprise/FDO-only-container.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/03-Terraform/06-TerraformEnterprise/FDO-only-container.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Container component deploy</source>
      <description>Terraform Enterprise FDO</description>
      <pubDate>Wed, 10 Jul 2024 04:16:31 GMT</pubDate>
      <content:encoded><![CDATA[<figure><figcaption></figcaption></figure>
<p>ë³¸ ë¬¸ì„œëŠ” EKS í™˜ê²½ì— Flexible Deployment Optionsë¥¼ ë°°í¬ í•˜ë©´ì„œ DBë¥¼ aws ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  containerë¡œ ë°°í¬í•˜ëŠ” í…ŒìŠ¤íŠ¸ ê¸°ë¡ì„ ë‚¨ê¸´ ë¬¸ì„œì…ë‹ˆë‹¤.</p>
<h1>Container component deploy</h1>
<p>ì‚¬ì „ ì¡°ê±´</p>
<ol>
<li>FDO ì‚¬ì„¤ ì¸ì¦ì„œ(ë³¸ í…ŒìŠ¤íŠ¸ëŠ” opensslë¡œ ì§„í–‰) ë° ë„ë©”ì¸ ì¤€ë¹„(tfe.crt,tfe.key)</li>
<li>FDO ìš© ë¼ì´ì„ ìŠ¤</li>
</ol>
<p>ì‹œë‚˜ë¦¬ì˜¤</p>
<ol>
<li>
<p>eks í™˜ê²½ì— terraform(FDO), redis, postgresql, minio helm ë°°í¬</p>
</li>
<li>
<p>vcs ì—°ë™ ë° plan, apply</p>
</li>
<li>
<p>FDO apië¥¼ ì‚¬ìš©í•œ backup &amp; restore</p>
</li>
<li>
<p>eks clusterë¥¼ veleroë¡œ ì‚¬ìš©í•˜ì—¬ backup &amp; restore</p>
</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>Element</strong></th>
<th style="text-align:center"><strong>ë²„ì „(docker image ê²½ìš° tag ëª…)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">EKS</td>
<td style="text-align:center">1.26</td>
</tr>
<tr>
<td style="text-align:center">kubectl</td>
<td style="text-align:center">1.23.7</td>
</tr>
<tr>
<td style="text-align:center">Helm</td>
<td style="text-align:center">3.8.2</td>
</tr>
<tr>
<td style="text-align:center">Flexible Deployment Options</td>
<td style="text-align:center">v202311-1</td>
</tr>
<tr>
<td style="text-align:center">Redis</td>
<td style="text-align:center">7.0.11-debian-11-r12</td>
</tr>
<tr>
<td style="text-align:center">Postgres</td>
<td style="text-align:center">14.5.0-debian-11-r35</td>
</tr>
<tr>
<td style="text-align:center">minio</td>
<td style="text-align:center">RELEASE.2023-05-18T00-05-36Z</td>
</tr>
<tr>
<td style="text-align:center">velero</td>
<td style="text-align:center">1.9.2</td>
</tr>
</tbody>
</table>
<p>[ì£¼ì˜]</p>
<div class="hint-container caution">
<p class="hint-container-title">ìœ„í—˜</p>
<p>FDO docker version image(v202311-1) ê¸°ì¤€ Postgres 15.x version ì‚¬ìš© ì‹œ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ë¡œ ì •ìƒì ìœ¼ë¡œ ë°±ì—…ì´ ì´ë£¨ì–´ ì§€ì§€ ì•Šì•„ 14.5 ë²„ì „ì„ ì‚¬ìš© í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">pg_dump: error: server version: 15.3; pg_dump version: 14.9 (Ubuntu 14.9-1.pgdg22.04+1)</span>
<span class="line">pg_dump: error: aborting because of server version mismatch</span>
<span class="line"></span></code></pre></div></div>
<h1>1. Redis Helm</h1>
<h2>Redis</h2>
<h3>1.1 helm values.yaml</h3>
<p>ì°¸ê³ : ì•„ë˜ yaml ë‚´ìš©ì€ ì²¨ë¶€ ëœ redis yaml íŒŒì¼ì—ì„œ ì„¤ì • í•œ ë¶€ë¶„ë§Œ ê¸°ì…</p>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">[ì¤‘ëµ]</span>
<span class="line"></span>
<span class="line">image:</span>
<span class="line">  registry: docker.io</span>
<span class="line">  repository: bitnami/redis</span>
<span class="line">  tag: 7.0.11-debian-11-r12</span>
<span class="line"></span>
<span class="line">[ì¤‘ëµ]</span>
<span class="line"></span>
<span class="line">tls:</span>
<span class="line">  enabled: false</span>
<span class="line"></span>
<span class="line">[ì¤‘ëµ]</span>
<span class="line"></span></code></pre></div><h3>1.2 Command</h3>
<h4>1.2.1 helm ë°°í¬</h4>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">helm repo add bitnami https://charts.bitnami.com/bitnami</span>
<span class="line"></span>
<span class="line">kubectl create ns redis</span>
<span class="line"></span>
<span class="line">helm install redis-dev  -n redis --version 17.11.3 . --values values.yaml --debug</span>
<span class="line"></span></code></pre></div><h1>2. Postgresql Helm ë°°í¬</h1>
<h2>Postgresql</h2>
<h3>2.1 helm values.yaml</h3>
<p>ì°¸ê³ : ì•„ë˜ yaml ë‚´ìš©ì€ ì²¨ë¶€ ëœ Postgresql yaml íŒŒì¼ì—ì„œ ì„¤ì • í•œ ë¶€ë¶„ë§Œ<br>
ê¸°ì…</p>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">[ì¤‘ëµ]</span>
<span class="line"></span>
<span class="line">image:</span>
<span class="line">  registry: docker.io</span>
<span class="line">  repository: bitnami/postgresql</span>
<span class="line">  tag: 14.5.0-debian-11-r35</span>
<span class="line">  </span>
<span class="line">[ì¤‘ëµ]</span>
<span class="line"></span>
<span class="line">auth:</span>
<span class="line">  enablePostgresUser: true</span>
<span class="line">  postgresPassword: "[postgresPassword]"</span>
<span class="line">  username: "[postgre username]"</span>
<span class="line">  password: "[password]"</span>
<span class="line">  database: "[database name]"</span>
<span class="line">  </span>
<span class="line">[ì¤‘ëµ]</span>
<span class="line"></span></code></pre></div><h3>2.2 Command</h3>
<h4>2.2.1 helm ë°°í¬</h4>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">helm repo add bitnami https://charts.bitnami.com/bitnami</span>
<span class="line">helm install postgresql-dev  -n default --version 11.9.13 . --values values.yaml --debug</span>
<span class="line"></span></code></pre></div><h4>2.2.2 posgresql DB í™•ì¸</h4>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line"># container ë‚´ë¶€ Command</span>
<span class="line">psql --host 127.0.0.1 -U [database ê³„ì •] -d tfe -p 5432</span>
<span class="line">select * from pg_tables;</span>
<span class="line"></span></code></pre></div><h1>3. Minio Helm ë°°í¬</h1>
<h2>Minio</h2>
<h3>3.1 helm values.yaml</h3>
<p>ì°¸ê³ : ì•„ë˜ yaml ë‚´ìš©ì€ ì²¨ë¶€ ëœ Minio yaml íŒŒì¼ì—ì„œ ì„¤ì • í•œ ë¶€ë¶„ë§Œ ê¸°ì…</p>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">[ì¤‘ëµ]</span>
<span class="line"></span>
<span class="line">image:</span>
<span class="line">  repository: quay.io/minio/minio</span>
<span class="line">  tag: RELEASE.2023-05-18T00-05-36Z</span>
<span class="line">  pullPolicy: IfNotPresent</span>
<span class="line">[ì¤‘ëµ]</span>
<span class="line"></span>
<span class="line">rootUser: "[rootUser]"</span>
<span class="line">rootPassword: "[rootPassword]"</span>
<span class="line"></span>
<span class="line">[ì¤‘ëµ]</span>
<span class="line"></span>
<span class="line">## FDO terraform plan, applyë¥¼ íŒŒì¼ ì ì¬ë˜ëŠ” ì§€ í™•ì¸ ìš©</span>
<span class="line">consoleService:</span>
<span class="line">  annotations:</span>
<span class="line">    'service.beta.kubernetes.io/aws-load-balancer-subnets': "subnet-03b41598fbe094c5e, subnet-0ec501ba454a8c95e, subnet-0aacc8ce08d63e061"</span>
<span class="line">    'service.beta.kubernetes.io/aws-load-balancer-scheme': "internet-facing"</span>
<span class="line">    'service.beta.kubernetes.io/aws-load-balancer-nlb-target-type': "instance"</span>
<span class="line">  type: LoadBalancer # ClusterIP</span>
<span class="line">  port: 9001</span>
<span class="line">  loadBalancerClass: service.k8s.aws/nlb</span>
<span class="line">  nodePort: 32001</span>
<span class="line">  </span>
<span class="line">[ì¤‘ëµ]</span>
<span class="line"></span></code></pre></div><h3>3.2 Command</h3>
<h4>3.2.1 helm ë°°í¬</h4>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">helm repo add bitnami https://charts.bitnami.com/bitnami</span>
<span class="line">kubectl create ns minio</span>
<span class="line">helm install minio-dev  -n minio --version 5.0.10 . --values values.yaml --debug</span>
<span class="line"></span></code></pre></div><h4>3.2.2 minio UI ì ‘ê·¼ ì‹œ ID, Password í™•ì¸</h4>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">kubectl get secret --namespace minio minio-dev -o jsonpath="{.data.root-user}" | base64 -d</span>
<span class="line"></span>
<span class="line">kubectl get secret --namespace minio minio-dev -o jsonpath="{.data.root-password}" | base64 -d</span>
<span class="line"></span></code></pre></div><h4>3.2.2 FDO ì—°ë™ í›„ plan,apply Minio bucket data í™•ì¸</h4>
<figure><figcaption></figcaption></figure>
<h1>4. FDO(Flexible Deployment Options) Helm ë°°í¬</h1>
<h2>FDO(Flexible Deployment Options)</h2>
<h3>4.1 helm values.yaml</h3>
<p>ì°¸ê³ : ì•„ë˜ yaml ë‚´ìš©ì€ ì²¨ë¶€ ëœ FDO yaml íŒŒì¼ì—ì„œ ì„¤ì • í•œ ë¶€ë¶„ë§Œ ê¸°ì…</p>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">[ì¤‘ëµ]</span>
<span class="line"></span>
<span class="line">image:</span>
<span class="line">  repository: images.releases.hashicorp.com</span>
<span class="line">  name: hashicorp/terraform-enterprise</span>
<span class="line">  tag: v202311-1</span>
<span class="line">  </span>
<span class="line">[ì¤‘ëµ]</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">service:</span>
<span class="line">  annotations:</span>
<span class="line">    'service.beta.kubernetes.io/aws-load-balancer-subnets': "[ì™¸ë¶€ í†µì‹  ì„œë¸Œë„·]"</span>
<span class="line">    ## nlb ì™¸ë¶€ í†µì‹ </span>
<span class="line">    'service.beta.kubernetes.io/aws-load-balancer-scheme': "internet-facing"</span>
<span class="line">    ## target group ì§€ì • type</span>
<span class="line">    'service.beta.kubernetes.io/aws-load-balancer-nlb-target-type': "instance"</span>
<span class="line">    ## ì¸ì¦ì„œ arn</span>
<span class="line">    'service.beta.kubernetes.io/aws-load-balancer-ssl-cert': "[ì¸ì¦ì„œ arn]"</span>
<span class="line">    ## nlb í”„ë¡œí† ì½œ annotation</span>
<span class="line">    'service.beta.kubernetes.io/aws-load-balancer-backend-protocol': 'ssl'</span>
<span class="line">  type: LoadBalancer # ClusterIP</span>
<span class="line">  port: 443</span>
<span class="line">  nodePort: 32443</span>
<span class="line">  loadBalancerClass: service.k8s.aws/nlb</span>
<span class="line"></span>
<span class="line">[ì¤‘ëµ]</span>
<span class="line"></span>
<span class="line">env:</span>
<span class="line">  variables:</span>
<span class="line">    ## terraform ì ‘ê·¼ URL </span>
<span class="line">    TFE_HOSTNAME: [terraform ì ‘ê·¼ URL] ## ex) xxx.xxx.xyz Protocol ì—†ì´ ì„¤ì •</span>
<span class="line"></span>
<span class="line">    ## containerë¡œ ì˜¬ë¦¬ëŠ” postgresql svc dns, headlessë¡œ ì„¤ì • ì‹œ ì ‘ê·¼ì´ ì•ˆë˜ëŠ” ë¬¸ì œë¡œ postgres ê¸°ë³¸ svcë¡œ ì„¤ì •</span>
<span class="line">    ## [helm ë°°í¬ ì‹œ ì„¤ì • ëœ ì´ë¦„].[namespace].svc.cluster.local ==&gt; í¬íŠ¸ ì§€ì • ì—†ì´ ì„¤ì •</span>
<span class="line">    TFE_DATABASE_HOST: "postgresql-dev.default.svc.cluster.local"</span>
<span class="line"></span>
<span class="line">    ## containerë¡œ ì˜¬ë¦¬ëŠ” postgresql database ì´ë¦„</span>
<span class="line">    ## postgre value.yaml 135 ë²ˆì§¸ ì¤„ ì„¤ì •</span>
<span class="line">    TFE_DATABASE_NAME: "[TFE_DATABASE_NAME]"</span>
<span class="line">    ## ssl mode</span>
<span class="line">    TFE_DATABASE_PARAMETERS: "sslmode=disable"</span>
<span class="line"></span>
<span class="line">    ## containerë¡œ ì˜¬ë¦¬ëŠ” postgresql ìœ ì € ê³„ì •</span>
<span class="line">    ## postgre value.yaml 129 ë²ˆì§¸ ì¤„ ì„¤ì •</span>
<span class="line">    TFE_DATABASE_USER: "[TFE_DATABASE_USER]"</span>
<span class="line"></span>
<span class="line">    ## containerë¡œ ì˜¬ë¦¬ëŠ” redis dns, headlessë¡œ ì„¤ì •í•˜ë©´ ì ‘ê·¼ì´ ì•ˆë˜ëŠ” ë¬¸ì œë¡œ masterë¡œ ì„¤ì •</span>
<span class="line">    ## [helm ë°°í¬ ì‹œ ì„¤ì • ëœ ì´ë¦„].[namespace].svc.cluster.local:6379</span>
<span class="line">    TFE_REDIS_HOST: "redis-dev-master.redis.svc.cluster.local:6379"</span>
<span class="line"></span>
<span class="line">    ## redis AUTH ì‚¬ìš©í•  ê²½ìš° ì—ëŸ¬ ë°œìƒìœ¼ë¡œ ì„ì‹œ false</span>
<span class="line">    ## auth ê¸°ëŠ¥ ë¹„í™œì„± ì‹œ redis value.yaml 123 ë²ˆì§¸ ì¤„ ê¸°ëŠ¥ false ì„¤ì •</span>
<span class="line">    TFE_REDIS_USE_AUTH: "false"</span>
<span class="line"></span>
<span class="line">    ## containerë¡œ ì˜¬ë¦¬ëŠ” minio typeì€ s3ë¡œ í•´ì•¼í•¨</span>
<span class="line">    TFE_OBJECT_STORAGE_TYPE: s3</span>
<span class="line"></span>
<span class="line">    ## containerë¡œ ì˜¬ë¦¬ëŠ” minio bucket ì´ë¦„</span>
<span class="line">    TFE_OBJECT_STORAGE_S3_BUCKET: "[minio bucket name]"</span>
<span class="line"></span>
<span class="line">    ## containerë¡œ ì˜¬ë¦¬ëŠ” minio svc dns</span>
<span class="line">    ## [helm ë°°í¬ ì‹œ ì„¤ì • ëœ ì´ë¦„].[namespace].svc.cluster.local:9000</span>
<span class="line">    TFE_OBJECT_STORAGE_S3_ENDPOINT: "http://minio-dev.minio.svc.cluster.local:9000"</span>
<span class="line"></span>
<span class="line">    ## containerë¡œ ì˜¬ë¦¬ëŠ” minioê°€ ì˜¬ë¼ê°€ëŠ” aws ì§€ì—­</span>
<span class="line">    TFE_OBJECT_STORAGE_S3_REGION: "ap-northeast-2"</span>
<span class="line"></span>
<span class="line">    TFE_IACT_SUBNETS: "0.0.0.0/0"</span>
<span class="line">    TFE_CAPACITY_CONCURRENCY: 10</span>
<span class="line"></span>
<span class="line">    ## containerë¡œ ì˜¬ë¦¬ëŠ” minio ì ‘ê·¼ ì‹œ admin ê³„ì • ID,Password</span>
<span class="line">    ## minio vaule.yaml 90 ë²ˆì§¸ ì¤„ ì„¤ì •</span>
<span class="line">    TFE_OBJECT_STORAGE_S3_ACCESS_KEY_ID: "[admin ê³„ì • ID]"</span>
<span class="line">    TFE_OBJECT_STORAGE_S3_SECRET_ACCESS_KEY: "[admin ê³„ì • Password]"</span>
<span class="line">  secrets:</span>
<span class="line">    ## postgre value.yaml íŒŒì¼ 132 ë²ˆì§¸ ì¤„ ì„¤ì •</span>
<span class="line">    ## containerë¡œ ì˜¬ë¦¬ëŠ” postgresql ì ‘ê·¼ ë¹„ë°€ë²ˆí˜¸</span>
<span class="line">    TFE_DATABASE_PASSWORD: "[postgresql ì ‘ê·¼ ë¹„ë°€ë²ˆí˜¸]"</span>
<span class="line"></span>
<span class="line">    ## Terraform FDO Licence</span>
<span class="line">    TFE_LICENSE: "[Terraform FDO Licence]"</span>
<span class="line"></span>
<span class="line">    ## terraform FDO vault ì•”í˜¸, backup &amp; restore ì‹œ í•„ìš”í•¨</span>
<span class="line">    ## https://developer.hashicorp.com/terraform/enterprise/flexible-deployments/admin/admin-cli/backup-restore</span>
<span class="line">    TFE_ENCRYPTION_PASSWORD: "[TFE_ENCRYPTION_PASSWORD]"</span>
<span class="line"></span></code></pre></div><h4>4.1.1 Command</h4>
<h4>4.1.2 FDO ë°°í¬ ì „ image registry ì •ì±… ì„¤ì •</h4>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">$ kubectl create secret docker-registry terraform-enterprise --docker-server=images.releases.hashicorp.com --docker-username=terraform --docker-password=$(cat { ë¼ì´ì„ ìŠ¤ íŒŒì¼ }) -n tfe</span>
<span class="line"></span>
<span class="line">## ë„ë©”ì¸ ì¸ì¦ì„œ ì„¤ì • í•œ íŒŒì¼ ì‹œí¬ë¦¿ìœ¼ë¡œ ë°°í¬</span>
<span class="line">$ kubectl create secret tls terraform-enterprise-certificates --cert=tfe.crt --key=tfe.key -n tfe</span>
<span class="line"></span></code></pre></div><h4>4.1.3 helm ë°°í¬</h4>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">helm repo add bitnami https://charts.bitnami.com/bitnami</span>
<span class="line"></span>
<span class="line">kubectl create ns tfe</span>
<span class="line"></span>
<span class="line">helm install terraform -n tfe --version 1.1.0 . --values values.yaml --debug</span>
<span class="line"></span></code></pre></div><h4>4.1.4 supervisorctl ëª…ë ¹ì–´ë¡œ í•˜ì—¬ FDO ë‚´ë¶€ ì—°ë™ ëœ ë¶€ë¶„ì„ í™•ì¸(redis, postgresql ê°™ì€ ê²½ìš° ì™¸ë¶€ ì—°ë™)</h4>
<figure><figcaption></figcaption></figure>
<h4>4.1.5 ì •ìƒ helm ë°°í¬ ì´í›„ FDO container ë‚´ë¶€ì—ì„œ ì•„ë˜ commandë¡œ FDO admin ê³„ì • ìƒì„±ì„ ìœ„í•œ Token ë°œí–‰</h4>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">tfectl admin token </span>
<span class="line"></span></code></pre></div><h4>4.1.6 admin ê³„ì • ìƒì„±</h4>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">https://{ ì‚¬ìš©í•˜ëŠ” ë„ë©”ì¸ }/admin/account/new?token={ ë°œê¸‰ ëœ í† í° } </span>
<span class="line"></span></code></pre></div><figure><figcaption></figcaption></figure>
<h1>5. FDO Backup &amp; Restore</h1>
<h3>5.1 ë°±ì—… ì‹œ ì¸ì¦ í† í° í•„ìš”</h3>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">/bin/bash -c 'cat /var/run/terraform-enterprise/backup-restore/config.hcl | grep backup_token'</span>
<span class="line"></span></code></pre></div><h3>5.2 FDO container ë‚´ë¶€ í† í° ë°œê¸‰ command</h3>
<h3>5.3 payload.json íŒŒì¼ ìƒì„±</h3>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">{</span>
<span class="line">  "password": "{ FDO helm ë°°í¬ ì‹œ ì„¤ì • í–ˆë˜ TFE_ENCRYPTION_PASSWORD ê°’ }"</span>
<span class="line">}</span>
<span class="line"></span></code></pre></div><h3>5.4 Backup api</h3>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">curl \</span>
<span class="line">  --header "Authorization: Bearer { ì¸ì¦í† í° }" \</span>
<span class="line">  --request POST \</span>
<span class="line">  --data @payload.json \</span>
<span class="line">  --output backup.blob \</span>
<span class="line">  https:// { ì„¤ì •í•œ ë„ë©”ì¸ } /_backup/api/v1/backup</span>
<span class="line"></span></code></pre></div><h3>5.5 ë°±ì—…ì´ ì •ìƒì ìœ¼ë¡œ ë˜ì—ˆëŠ”ì§€ í™•ì¸</h3>
<ul>
<li>FDO container ë‚´ë¶€ ê²½ë¡œ: /var/log/terraform-enterprise</li>
</ul>
<figure><figcaption></figcaption></figure>
<h3>5.6 ë°±ì—… ëœ ë°ì´í„°ëŠ” curl commandë¥¼ í•œ ê²½ë¡œì— ìƒì„±</h3>
<h3>5.7 Terraform oranization, plan, apply ì •ë³´ê°€ ì €ì¥ëœ FDOì™€ FDOì™€ ì—°ë™ ëœ containerë¥¼ ì‚­ì œ í•˜ì—¬ ì •ìƒì ìœ¼ë¡œ ë°±ì—…ì´ ë˜ëŠ” ì§€ í™•ì¸</h3>
<h3>5.8 ì‚­ì œ ì „</h3>
<figure><figcaption></figcaption></figure>
<h3>5.9 Restore</h3>
<h4>5.9.1 ì‚­ì œ ì´í›„ ì‹ ê·œ ì„¤ì¹˜</h4>
<figure><figcaption></figcaption></figure>
<h4>5.9.2 ì‹ ê·œ ì„¤ì¹˜ ëœ FDOì— ì´ˆê¸° ì„¤ì¹˜ ìƒì„± í–ˆë˜ ê³„ì •ìœ¼ë¡œ login</h4>
<figure><figcaption></figcaption></figure>
<h4>5.9.3 Restore api</h4>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">curl \</span>
<span class="line">  --header "Authorization: Bearer { ì¸ì¦ í† í° }" \</span>
<span class="line">  --request POST \</span>
<span class="line">  --form config=@payload.json \</span>
<span class="line">  --form snapshot=@backup.blob \</span>
<span class="line">  https:// { ì„¤ì •í•œ ë„ë©”ì¸ } /_backup/api/v1/restore</span>
<span class="line"></span></code></pre></div><figure><figcaption></figcaption></figure>
<h4>5.9.4 Restore ì´í›„ ì´ˆê¸° ìƒì„± í–ˆë˜ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸</h4>
<h4>5.9.5 ì •ìƒì ìœ¼ë¡œ ê³„ì • ë° organization, workspace ë° plan,apply ì •ë³´ ë³µêµ¬</h4>
<figure><figcaption></figcaption></figure>
<h1>6. Velero Cluster Backup &amp; Restore</h1>
<h2>6.1 ë°±ì—… í•  S3 ìƒì„±</h2>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">BUCKET=test-gbkim</span>
<span class="line">REGION=ap-northeast-2</span>
<span class="line"></span>
<span class="line">aws s3api create-bucket \</span>
<span class="line">    --bucket $BUCKET \</span>
<span class="line">    --region $REGION \</span>
<span class="line">    --create-bucket-configuration LocationConstraint=$REGION</span>
<span class="line"></span></code></pre></div><h2>6.2 velero ì„¤ì¹˜</h2>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">wget https://github.com/vmware-tanzu/velero/releases/download/v1.9.2/velero-v1.9.2-linux-amd64.tar.gz</span>
<span class="line">tar zxvf velero-v1.9.2-linux-amd64.tar.gz</span>
<span class="line">sudo mv velero-v1.9.2-linux-amd64/velero  /usr/local/sbin</span>
<span class="line"></span>
<span class="line">  velero install \</span>
<span class="line">   --provider aws \</span>
<span class="line">   --plugins velero/velero-plugin-for-aws:v1.4.1 \</span>
<span class="line">   --bucket $BUCKET \</span>
<span class="line">   --backup-location-config region=$REGION \</span>
<span class="line">   --snapshot-location-config region=$REGION \</span>
<span class="line">   --secret-file /home/ec2-user/.aws/credentials</span>
<span class="line"></span></code></pre></div><h2>6.3 ì„¤ì¹˜ ì™„ë£Œ ì‹œ velero container ìƒì„±</h2>
<figure><figcaption></figcaption></figure>
<h2>6.4 velero backup</h2>
<ul>
<li>ë°±ì—… ëŒ€ìƒ eks í´ëŸ¬ìŠ¤í„°</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">velero backup create gbkim</span>
<span class="line"></span></code></pre></div><ul>
<li>S3 ë°±ì—… í™•ì¸</li>
</ul>
<figure><figcaption></figcaption></figure>
<h2>6.5 Restore cluster</h2>
<figure><figcaption></figcaption></figure>
<h2>6.6 velero restore</h2>
<ul>
<li>restore ëŒ€ìƒ eks í´ëŸ¬ìŠ¤í„°ì— velero ì„¤ì¹˜ ëœ ìƒíƒœì—ì„œ restore ëŒ€ìƒ<br>
í´ëŸ¬ìŠ¤í„°ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¡œ restore</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">velero restore create --from-backup gbkim</span>
<span class="line"></span></code></pre></div><ul>
<li>restore</li>
</ul>
<figure><figcaption></figcaption></figure>
<h2>6.7 ìƒˆë¡œìš´ í´ëŸ¬ìŠ¤í„°ì— ì •ìƒì ìœ¼ë¡œ restoreê°€ ë˜ì—ˆëŠ”ì§€ í™•ì¸</h2>
<figure><figcaption></figcaption></figure>
]]></content:encoded>
    </item>
    <item>
      <title>Terraform Enterprise SAML (ADFS)</title>
      <link>https://docmoa.github.io/04-HashiCorp/03-Terraform/06-TerraformEnterprise/tfe_saml.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/03-Terraform/06-TerraformEnterprise/tfe_saml.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Terraform Enterprise SAML (ADFS)</source>
      <description>Terraform Enterprise SAML(ADFS)</description>
      <pubDate>Tue, 09 Jul 2024 05:22:34 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ADFSì˜ Groupê³¼ Userê°€ ìƒì„±ë˜ì–´ ìˆìœ¼ë©°  Terraform Enterpriseê°€ êµ¬ì¶•ë˜ì–´ SAMLì—°ë™ì´ í•„ìš”í•œ ìƒí™©ì¼ ë•Œ ë³¸ ê°€ì´ë“œë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.</p>
</blockquote>
<h2>ADFS Management Settings</h2>
<h3>1) Gather ADFS Information</h3>
<p>Terraform Enterpirse SAML Configure ì— í•„ìš”í•œ enpointsì™€ idpì¸ì¦ì„œ exportë¥¼ ìœ„í•´ ì§„í–‰.</p>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.17.54.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.17.54" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.17.54</figcaption></figure>
<ul>
<li>Server Manager &gt; ì˜¤ë¥¸ìª½ ìƒë‹¨ Tools &gt; Active Directory Users and Computers í´ë¦­</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/image-20240709102309773.png" alt="image-20240709102309773" tabindex="0" loading="lazy"><figcaption>image-20240709102309773</figcaption></figure>
<ul>
<li>Service &gt; Endpoints &gt; Typeì´ <code>SAML 2.0/WS-Federation</code>ì¸ URL Path ê°’ì€ Terraform Enterprise Single Sign-On URLì¸ <a href="https://ADFS-HOSTNAME/URL-PATH" target="_blank" rel="noopener noreferrer">https://ADFS-HOSTNAME/URL-PATH</a> ì— í•„ìš”í•˜ê¸°ì— ê¸°ì–µí•´ë‘¡ë‹ˆë‹¤.<br>
default URL Path : <code>/adfs/ls/</code></li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.26.48.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.26.48" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.26.48</figcaption></figure>
<ul>
<li>Service &gt; Certificates &gt; Token-signing &gt; ì˜¤ë¥¸ìª½ ë²„íŠ¼ í´ë¦­ &gt; View Certificate í´ë¦­</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.28.23.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.28.23" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.28.23</figcaption></figure>
<ul>
<li>Details &gt; Copy to File.. í´ë¦­</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.29.12.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.29.12" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.29.12</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.29.28.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.29.28" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.29.28</figcaption></figure>
<ul>
<li>Export File Format &gt;  "Base-64 encoded X.509 (.CER)" í´ë¦­ &gt; Next</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.30.27.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.30.27" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.30.27</figcaption></figure>
<ul>
<li>Terraform Enterprise Identity Provider Settingsì˜ IDP Certificate ê°’ì— ì“°ì´ëŠ” cert</li>
</ul>
<h3>2) Configure Terraform Enterprise</h3>
<ul>
<li>ì ‘ì† : <a href="https://TFE-HOSTNAME/app/admin/saml" target="_blank" rel="noopener noreferrer">https://TFE-HOSTNAME/app/admin/saml</a></li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/image-20240709103411478.png" alt="image-20240709103411478" tabindex="0" loading="lazy"><figcaption>image-20240709103411478</figcaption></figure>
<ul>
<li>SAML SEttingsì˜ Enable SAML single sign-on ì²´í¬<br>
SAML single sign-on í™•ì¸ë€ì„ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤.</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/image-20240709103737289.png" alt="image-20240709103737289" tabindex="0" loading="lazy"><figcaption>image-20240709103737289</figcaption></figure>
<h5>[Identity Provider Settings]</h5>
<ul>
<li>
<p>Single Sign-On URL : Single-Sign-On ìš”ì²­ì„ ìœ„í•œ Idpì˜ HTTP(S) ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.<br>
<a href="https://ADFS-HOSTNAME/URL-Path" target="_blank" rel="noopener noreferrer">https://ADFS-HOSTNAME/URL-Path</a></p>
</li>
<li>
<p>Single Log-Out URL : ë‹¨ì¼ ë¡œê·¸ì•„ì›ƒ ìš”ì²­ì— ëŒ€í•œ Idpì˜ HTTP(S) ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.</p>
<p>ë‹¨ì¼ ë¡œê·¸ì•„ì›ƒì€ ì•„ì§ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
<a href="https://ADFS-HOSTNAME/URL-Path?wa=wsignout1.0" target="_blank" rel="noopener noreferrer">https://ADFS-HOSTNAME/URL-Path?wa=wsignout1.0</a></p>
</li>
<li>
<p>IDP Certificate : IdP êµ¬ì„±ì—ì„œ ì œê³µë˜ëŠ” PEM ì¸ì½”ë”©ëœ X.509 ì¸ì¦ì„œì…ë‹ˆë‹¤.<br>
exportí•œ idpcert.txt ê°’ ì…ë ¥</p>
</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.47.44.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.47.44" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 10.47.44</figcaption></figure>
<h5>[Attributes]</h5>
<ul>
<li>Username Attribute Name : SSOë¥¼ í†µí•´ ë¡œê·¸ì¸í•˜ëŠ” ì‚¬ìš©ìì˜ Terraform Enterprise ì‚¬ìš©ì ì´ë¦„ì„ ê²°ì •í•˜ëŠ” SAML ì†ì„±ì˜ ì´ë¦„ì…ë‹ˆë‹¤.</li>
<li>Site Admin Attribute Name : ì‚¬ìš©ìì—ê²Œ ì‚¬ì´íŠ¸ ê´€ë¦¬ì ê¶Œí•œì´ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” SAML ì†ì„±ì˜ ì´ë¦„ì…ë‹ˆë‹¤.<br>
ì‚¬ì´íŠ¸ ê´€ë¦¬ìëŠ” ì „ì²´ Terraform Enterprise ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì„¤ì • ë° ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<h5>[Team Membership Management]</h5>
<ul>
<li>Use SAML to manage team memberships í™œì„±í™”</li>
<li>Team Attribute Name : íŒ€ ë©¤ë²„ì‹­ì„ ê²°ì •í•˜ëŠ” SAML ì†ì„±ì˜ ì´ë¦„ì…ë‹ˆë‹¤. ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.</li>
<li>Site Admin Role : (ê¸°ë³¸ê°’ : site-admins ë¹„í™œì„±í™”í•˜ë ¤ë©´ ë¹„ì›Œ ë‘¡ë‹ˆë‹¤.) ì‚¬ì´íŠ¸ ê´€ë¦¬ì ê¶Œí•œì„ ê´€ë¦¬í•˜ëŠ” ë˜ ë‹¤ë¥¸ ë°©ë²•ì…ë‹ˆë‹¤. ì´ ì´ë¦„ì„ ê°€ì§„ ì—­í• ì´ íŒ€ ì†ì„± ì´ë¦„ íŠ¹ì„± ê°’ì— ìˆìœ¼ë©´ ì‚¬ìš©ìëŠ” ê´€ë¦¬ìì…ë‹ˆë‹¤.<br>
'Site admin attribute name'  ì„¤ì •ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ë©° ì´ ì„¤ì •ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê°’ì„ ì‚­ì œí•˜ì—¬ 'Site Admin Role'ì„ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<h5>[User Session]</h5>
<ul>
<li>API í† í° ì„¸ì…˜ ì‹œê°„ ì´ˆê³¼ : Terraform Enterpriseê°€ ì‚¬ìš©ìì—ê²Œ ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ë„ë¡ ìš”êµ¬í•˜ê¸° ì „ì— ìˆ˜ë½í•˜ëŠ” ì‹œê°„(ì´ˆ) ì…ë‹ˆë‹¤.</li>
</ul>
<p>Save SAML settings í´ë¦­.</p>
<h3>3) Terraform Enterprise ì¸ì¦ì„œ &gt; Windowsì— ë“±ë¡</h3>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.07.23.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.07.23" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.07.23</figcaption></figure>
<ul>
<li>MMC &gt; Trusted Root Certification... &gt; Certificates &gt; All Tasks &gt; import</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.09.00.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.09.00" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.09.00</figcaption></figure>
<h3>4) Configure ADFS</h3>
<p>Configure the Relying Party(RP) Trust</p>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/image-20240709111515462.png" alt="image-20240709111515462" tabindex="0" loading="lazy"><figcaption>image-20240709111515462</figcaption></figure>
<ul>
<li>ADFS Management &gt; Relying Party Trusts í´ë¦­</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.15.56.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.15.56" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.15.56</figcaption></figure>
<ul>
<li>Start í´ë¦­ &gt; Import data about the relying party published online or on a local network<br>
Federation metadata address (host name or URL): <code>https://TFE-HOSTNAME/users/saml/metadata</code><br>
(Terraform Enterpriseì˜ Identity Provider Configurationì˜ Metadata(Audience)URL)</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.19.34.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.19.34" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.19.34</figcaption></figure>
<ul>
<li>RP ì‹ ë¢°ë¥¼ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì´ë¦„ì„ ì…ë ¥í•œ í›„ Next í´ë¦­</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.20.16.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.20.16" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.20.16</figcaption></figure>
<ul>
<li>ì—‘ì„¸ìŠ¤ ì œì–´ ì •ì±… ì„ íƒ í™”ë©´ì—ì„œ ë³´ì•ˆ ì •ì±…ê³¼ ì¼ì¹˜í•˜ëŠ” ì •ì±…ì„ ì„ íƒí•˜ê³  Next í´ë¦­</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.21.07.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.21.07" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.21.07</figcaption></figure>
<ul>
<li>Next í´ë¦­</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.21.30.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.21.30" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.21.30</figcaption></figure>
<h3>5) Configure Claim Issuance</h3>
<h5>5-1) Send LDAP Attributes as Claims</h5>
<p>TFE-HOSTNAME ì„ ìœ„í•œ Claim Issuance Policy ì¶”ê°€</p>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.24.39.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.24.39" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.24.39</figcaption></figure>
<ul>
<li>Add Rule í´ë¦­</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.25.43.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.25.43" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.25.43</figcaption></figure>
<ul>
<li>Claim rule template : Send LDAP Attributes as Claims</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.27.16.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.27.16" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.27.16</figcaption></figure>
<ul>
<li>Claim rule name : í´ë ˆì„ ê·œì¹™ì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì´ë¦„ìœ¼ë¡œ ì„¤ì •</li>
<li>Attribute store : Active Directory</li>
<li>LDAP Attribute : E-Mail-Addresses</li>
<li>Outgoing Claim Type : E-Mail Address</li>
</ul>
<h5>5-2) Transform an Incoming Claim</h5>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.29.07.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.29.07" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.29.07</figcaption></figure>
<ul>
<li>Add Rule í´ë¦­</li>
<li>Claim rule template : Transform an Incoming Claim</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.30.38.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.30.38" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„Œá…¥á†« 11.30.38</figcaption></figure>
<ul>
<li>Claim rule name : í´ë ˆì„ ê·œì¹™ì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì´ë¦„ìœ¼ë¡œ ì„¤ì •</li>
<li>Incoming Claim type  : E-Mail Address<br>
Imcoming Claim typeì€ ì‚¬ìš©ìê°€ ì¸ì¦ ì‹œ ADFSì— ì „ë‹¬ë˜ëŠ” í´ë ˆì„ ì¤‘ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.<br>
ì¼ë°˜ì ìœ¼ë¡œ ì´ëŠ” ì‚¬ìš©ìì˜ ì´ë©”ì¼ ì£¼ì†Œë¥¼ í¬í•¨í•˜ëŠ” í´ë ˆì„ ìœ í˜•ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</li>
<li>Outgoing Claim type  : Name ID<br>
Outgoing Claim typeì€ ADFSê°€ Relying Partyì— ì „ë‹¬í•  ë•Œ í´ë ˆì„ì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì†ì„±ìœ¼ë¡œ ê° ì‹œìŠ¤í…œ ê°„ì˜ í´ë ˆì„ ê³µìœ  ë° ìƒí˜¸ ìš´ìš©ì„±ì„ ìœ„í•œ ê²ƒì´ë©° NameIDëŠ” ì´ë¥¼ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì£¼ìš” ì†ì„± ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.</li>
<li>Outgoing name ID format : Email</li>
</ul>
<h5>5-3) Send Group Membership as a Calim</h5>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.28.31.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.28.31" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.28.31</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/image-20240709133746608.png" alt="image-20240709133746608" tabindex="0" loading="lazy"><figcaption>image-20240709133746608</figcaption></figure>
<ul>
<li>
<p>Claim rule name : í´ë ˆì„ ê·œì¹™ì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì´ë¦„ìœ¼ë¡œ ì„¤ì •</p>
</li>
<li>
<p>User's group :  Terraform Enterprise ê´€ë¦¬ìê°€ ëª¨ë‘ í¬í•¨ëœ AD ì‚¬ìš©ì ê·¸ë£¹</p>
</li>
<li>
<p>Outgoing claim type : Relying Partyì— ë³´ë‚¼ í´ë ˆì„ì˜ ìœ í˜• ì§€ì •</p>
<p>MemberOf</p>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.31.40.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.31.40" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.31.40</figcaption></figure>
</li>
<li>
<p>Outgoing Claim Value : í•´ë‹¹ ê·¸ë£¹ì— ëŒ€í•œ í´ë ˆì„ ê°’ì„ ì§€ì •<br>
Admin ë˜ëŠ” íŠ¹ì • ê·¸ë£¹ì˜ ì‹ë³„ì(GUID)ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
Outgoing Claim valueì™€ ê´€ë ¨í•˜ì—¬<br>
Terraform Enterprise Team ìƒì„±<br>
<img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/image-20240709133907002.png" alt="image-20240709133907002" loading="lazy"></p>
<ul>
<li>SSO team IDë€ IdPì—ì„œ ì •ì˜ëœ íŠ¹ì • ê·¸ë£¹ì˜ ë©¤ë²„ë“¤ì´ Terraform Enterpriseì— ë¡œê·¸ì¸í•  ë•Œ, í•´ë‹¹ ê·¸ë£¹ì˜ ì‹ë³„ìë¥¼ í†µí•´ ìë™ìœ¼ë¡œ íŒ€ì— í• ë‹¹ë˜ë„ë¡ í•©ë‹ˆë‹¤.</li>
<li>íŒ€ ê¶Œí•œ ë° ì—‘ì„¸ìŠ¤ë¥¼ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë©° ì‚¬ìš©ìë“¤ì´ IdP ê·¸ë£¹ì— ì†í•¨ìœ¼ë¡œì¨ ìë™ìœ¼ë¡œ ì ì ˆí•œ ê¶Œí•œì´ ë¶€ì—¬ë©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h1>Trouble Shooting</h1>
<h5><a class="header-anchor" href="#_1-adfs-á„€á…®á„á…®á†¨-á„’á…®-https-adfs-hostname-adfs-ls-idpinitiatedsignon-aspx-á„ƒá…³á†¯á„‹á…¥á„€á…¡á„Œá…µá„Œá…µ-á„‹á…¡á†­á„‚á…³á†«-á„€á…§á†¼á„‹á…®"><span>1) ADFS êµ¬ì¶• í›„ </span></a><a href="https://ADFS-HOSTNAME/adfs/ls/idpinitiatedsignon.aspx" target="_blank" rel="noopener noreferrer">https://ADFS-HOSTNAME/adfs/ls/idpinitiatedsignon.aspx</a> ë“¤ì–´ê°€ì§€ì§€ ì•ŠëŠ” ê²½ìš°</h5>
<p>Windows Powershell ì„ í†µí•´ ë‹¤ìŒ ëª…ë ¹ì–´ ì…ë ¥</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">Set-AdfsProperties <span class="token parameter variable">-EnableIdpInitiatedSignonPage</span> <span class="token variable">$true</span></span>
<span class="line"></span></code></pre></div><h5>2) Time Zone Error<img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.45.36.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.45.36" loading="lazy"></h5>
<p>Time Zoneì´ ë§ì§€ì•Šì•„ ë°œìƒí•˜ëŠ” ì—ëŸ¬ë¡œ Terraform Enterpriseì˜ Docker-compose.yamlì— TZ ì¶”ê°€</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">TZ: <span class="token string">"Asia/Seoul"</span></span>
<span class="line"></span></code></pre></div><p>Windows Date &amp; time ì—ì„œ Time zone ë™ì¼í•˜ê²Œ ì„¤ì •</p>
<h5>3) Relying Party Meatadata error</h5>
<figure><img src="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.50.06.png" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.50.06" tabindex="0" loading="lazy"><figcaption>á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-07-09 á„‹á…©á„’á…® 1.50.06</figcaption></figure>
<p>ADFS &gt; Service &gt; Device Registration Refresh</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/sibiniiii/my-images/main/img/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202024-07-09%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2010.17.54.png" type="image/png"/>
    </item>
    <item>
      <title>MongoDB ì†Œê°œ</title>
      <link>https://docmoa.github.io/05-Software/MongoDB/mongodb-introduction-by-cto.html</link>
      <guid>https://docmoa.github.io/05-Software/MongoDB/mongodb-introduction-by-cto.html</guid>
      <source url="https://docmoa.github.io/rss.xml">MongoDB ì†Œê°œ</source>
      <description>MongoDBì˜ CTOì´ì ê³µë™ ì°½ë¦½ì(2007~2010ë…„)ì¸ Eliot Horowitzê°€ MongoDBì— ëŒ€í•œ í¬ê´„ì ì¸ ì†Œê°œì™€ í•¨ê»˜ ë¬¸ì„œ ëª¨ë¸ì´ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì™€ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€ ì•ˆë‚´í•©ë‹ˆë‹¤.</description>
      <pubDate>Sat, 06 Jul 2024 08:39:50 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>MongoDB in 5 Minutes with Eliot Horowitz</p>
</blockquote>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/image-20240706154229548.png" type="image/png"/>
    </item>
    <item>
      <title>NoSQL ë°ì´í„°ë² ì´ìŠ¤ - MongoDB</title>
      <link>https://docmoa.github.io/05-Software/MongoDB/nosql-explained.html</link>
      <guid>https://docmoa.github.io/05-Software/MongoDB/nosql-explained.html</guid>
      <source url="https://docmoa.github.io/rss.xml">NoSQL ë°ì´í„°ë² ì´ìŠ¤ - MongoDB</source>
      <description>NoSQLì´ë€ ë¬´ì—‡ì¸ê°€ìš”? NoSQL ë°ì´í„°ë² ì´ìŠ¤ ì„¤ëª…</description>
      <pubDate>Sat, 06 Jul 2024 08:39:50 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ì›ë¬¸ : <a href="https://www.mongodb.com/resources/basics/databases/nosql-explained" target="_blank" rel="noopener noreferrer">https://www.mongodb.com/resources/basics/databases/nosql-explained</a><br>
NoSQL ë°ì´í„°ë² ì´ìŠ¤ì¸ MongoDBë¥¼ í†µí•´ NoSQLì˜ ë‹¤ì–‘í•œ ìœ í˜•ê³¼ í™œìš©ì— ëŒ€í•´ ì„¤ëª…í•˜ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤. ë¬¸ì„œ ì§€í–¥í˜•, í‚¤-ê°’, ì™€ì´ë“œ-ì¹¼ëŸ¼, ê·¸ë˜í”„ ë“± ë‹¤ì–‘í•œ NoSQL ë°ì´í„°ë² ì´ìŠ¤ì˜ íŠ¹ì§•ê³¼ ì—­ì‚¬ë¥¼ ë‹¤ë£¨ê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ MongoDBë¥¼ í™œìš©í•œ NoSQL ì¿¼ë¦¬ íŠœí† ë¦¬ì–¼ì„ ì œê³µí•˜ë©° Multi-record Transactionsì— ëŒ€í•œ ë‚´ìš©ë„ ë‹¤ë£¹ë‹ˆë‹¤.</p>
</blockquote>
<h2>1.ï¸ NoSQL ë°ì´í„°ë² ì´ìŠ¤</h2>
<ul>
<li>NoSQL ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë¹„ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</li>
<li>NoSQL ë°ì´í„°ë² ì´ìŠ¤ëŠ” ìë£Œë¥¼ <code>ìì—°ìŠ¤ëŸ½ê³  ìœ ì—°í•˜ê²Œ</code> ì €ì¥í•œë‹¤ëŠ” íŠ¹ì§•ì„ ê°–ìŠµë‹ˆë‹¤.</li>
<li>SQLì€ <code>ì¿¼ë¦¬ ì–¸ì–´</code>ì´ê³ , <code>NoSQL</code>ì€ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ ë°©ë²•ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</li>
</ul>
<h2>2. NoSQL ë°ì´í„°ë² ì´ìŠ¤ ìœ í˜•</h2>
<ul>
<li>ì‹œê°„ì´ íë¦„ì— ë”°ë¼ ë„¤ ê°€ì§€ ì£¼ìš” NoSQL ë°ì´í„°ë² ì´ìŠ¤ ìœ í˜•ì´ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.
<ul>
<li>Document databases : MongoDB, Couchbase</li>
<li>Key-Value stores : Redis, Amazon DynamoDB</li>
<li>Wide-Column stores : HBase, Cassandra, Scylla, Excel, Google Sheet</li>
<li>Graph databases : Neo4J, Amazon Neptune, AllegroGraph</li>
<li>Multi-model databases : CosmosDB, ArangoDB</li>
</ul>
</li>
</ul>
<h3>2.1 ë¬¸ì„œ(Document) ì§€í–¥í˜• ë°ì´í„°ë² ì´ìŠ¤</h3>
<ul>
<li>ë¬¸ì„œ ì§€í–¥í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” JSON (JavaScript Object Notation) ê°ì²´ì™€ ìœ ì‚¬í•œ í˜•íƒœì˜ ë¬¸ì„œì— ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
<ul>
<li>ê° ë¬¸ì„œëŠ” í•„ë“œì™€ ê°’ì˜ ìŒì„ í¬í•¨</li>
<li>ê°’ì€ ë¬¸ìì—´, ìˆ«ì, ë¶€ìš¸ë¦°, ë°°ì—´ ë˜ëŠ” ë‹¤ë¥¸ ê°ì²´ì™€ ê°™ì´ ë‹¤ì–‘í•œ ìœ í˜•</li>
<li>ë°ì´í„° ëª¨ë¸ì´ ë°˜êµ¬ì¡°í™”ë˜ê±°ë‚˜ ë¹„êµ¬ì¡°í™”ëœ ë°ì´í„° ì„¸íŠ¸ì— ì í•©</li>
<li>ì¤‘ì²© êµ¬ì¡°ë¥¼ ì§€ì›í•˜ì—¬ ë³µì¡í•œ ê´€ê³„ë‚˜ ê³„ì¸µì  ë°ì´í„°ë¥¼ í‘œí˜„ì— ìœ ë¦¬</li>
</ul>
</li>
</ul>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"_id"</span><span class="token operator">:</span> <span class="token string">"12345"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"foo bar"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"foo@bar.com"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"address"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"street"</span><span class="token operator">:</span> <span class="token string">"123 foo street"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"city"</span><span class="token operator">:</span> <span class="token string">"some city"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"state"</span><span class="token operator">:</span> <span class="token string">"some state"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"zip"</span><span class="token operator">:</span> <span class="token number">123456</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"hobbies"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"music"</span><span class="token punctuation">,</span> <span class="token string">"guitar"</span><span class="token punctuation">,</span> <span class="token string">"reading"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>2.2 Key-Value(K/V) ì €ì¥ì†Œ</h3>
<ul>
<li>K/V ì €ì¥ì†ŒëŠ” ë‹¨ìˆœí•˜ê²Œ ê° í•­ëª©ì„ <em>í‚¤</em>ì™€ <em>ê°’</em>ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.</li>
<li>ìºì‹± ë° ì„¸ì…˜ ê´€ë¦¬ì— ì‚¬ìš©ë˜ë©° ì¸ë©”ëª¨ë¦¬ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ì—¬ <em>ë†’ì€ ì„±ëŠ¥</em>ì˜ ì½ê¸°ì™€ ì“°ê¸°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</li>
</ul>
<div class="language-ini" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="line"><span class="token key attr-name">user-12345</span> <span class="token punctuation">=</span> <span class="token value attr-value">{"name": "foo bar", "email": "foo@bar.com", "designation": "software developer"}</span></span>
<span class="line"></span></code></pre></div><h3>2.3 wide-column ì €ì¥ì†Œ</h3>
<ul>
<li>wide-column ì €ì¥ì†ŒëŠ” í…Œì´ë¸”, í–‰, ì»¬ëŸ¼ì— ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</li>
<li>ì „í†µì ì¸ SQL ë°ì´í„°ë² ì´ìŠ¤ì™€ ë‹¬ë¦¬, wide-column ì €ì¥ì†ŒëŠ” ìœ ì—°í•˜ì—¬ ë‹¤ë¥¸ í–‰ì´ ë‹¤ë¥¸ ì»¬ëŸ¼ ì§‘í•©ì„ ê°–ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>ì»¬ëŸ¼ ì••ì¶• ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ì €ì¥ ê³µê°„ì„ ì¤„ì´ê³  ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>í¬ì†Œí•˜ê³  ë„“ì€ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<table>
<thead>
<tr>
<th>name</th>
<th>id</th>
<th>email</th>
<th>dob</th>
<th>city</th>
</tr>
</thead>
<tbody>
<tr>
<td>Foo bar</td>
<td>12345</td>
<td><a href="mailto:foo@bar.com" target="_blank" rel="noopener noreferrer">foo@bar.com</a></td>
<td></td>
<td>Some city</td>
</tr>
<tr>
<td>Carn Yale</td>
<td>34521</td>
<td><a href="mailto:bar@foo.com" target="_blank" rel="noopener noreferrer">bar@foo.com</a></td>
<td>12-05-1972</td>
<td></td>
</tr>
</tbody>
</table>
<h3>2.4 Graph ë°ì´í„°ë² ì´ìŠ¤</h3>
<ul>
<li>ë…¸ë“œì™€ ì—£ì§€ í˜•íƒœë¡œë¡œ ë°ì´í„° ì €ì¥í•©ë‹ˆë‹¤.</li>
<li>ë…¸ë“œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ëŒ, ì¥ì†Œ, ë¬¼ê±´(ëª…ì‚¬)ê³¼ ê°™ì€ ì •ë³´ë¥¼ ì €ì¥í•˜ë©°, ì—£ì§€ëŠ” ë…¸ë“œ ê°„ ê´€ê³„ì— ëŒ€í•œ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</li>
<li>ê´€ê³„ë‚˜ íŒ¨í„´ì´ ì²˜ìŒì—ëŠ” ëª…í™•í•˜ì§€ ì•Šì€ ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤. (Social networks, Network diagrams ë“±ì— ì‚¬ìš©)</li>
<li>MongoDBëŠ” ì§‘ê³„ íŒŒì´í”„ë¼ì¸ì˜ $graphLookup ë‹¨ê³„ë¥¼ ì‚¬ìš©í•˜ì—¬ ê·¸ë˜í”„ ë°ì´í„°ë¥¼ ë‹¤ë£¨ê¸°ë„ í•©ë‹ˆë‹¤.</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/image-20240706165500563.png" alt="Graph ë°ì´í„°ë² ì´ìŠ¤ ë…¸ë“œì™€ ì—£ì§€" tabindex="0" loading="lazy"><figcaption>Graph ë°ì´í„°ë² ì´ìŠ¤ ë…¸ë“œì™€ ì—£ì§€</figcaption></figure>
<h3>2.5 Multi-model(ë‹¤ì¤‘ ëª¨ë¸) ë°ì´í„°ë² ì´ìŠ¤</h3>
<ul>
<li>ë‘˜ ì´ìƒì˜ ìœ í˜•ì˜ NoSQL ë°ì´í„° ëª¨ë¸ì„ ì§€ì›í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì§€ì¹­í•©ë‹ˆë‹¤.</li>
</ul>
<h2>3. NoSQL ìœ í˜•ì˜ ë¹„êµ</h2>
<p>| Feature | Key-Value Store | Document Database | Wide-Column Store | Graph Database |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/image-20240706165500563.png" type="image/png"/>
    </item>
    <item>
      <title>í•„ë¦½ ì½”í‹€ëŸ¬ ë§ˆì¼“ 6.0</title>
      <link>https://docmoa.github.io/06-etc/book-memo/market-6.html</link>
      <guid>https://docmoa.github.io/06-etc/book-memo/market-6.html</guid>
      <source url="https://docmoa.github.io/rss.xml">í•„ë¦½ ì½”í‹€ëŸ¬ ë§ˆì¼“ 6.0</source>
      <description>ì„¸ê³„ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ êµ¬ë£¨ í•„ë¦½ ì½”í‹€ëŸ¬ê°€ í†µì°°í•œ AIì‹œëŒ€ ë§ˆì¼€íŒ…ì˜ ìƒˆë¡œìš´ ë²•ì¹™</description>
      <pubDate>Sat, 29 Jun 2024 05:46:34 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>ì±… ì •ë³´</h2>
<blockquote>
<ul>
<li>ì €ì : í•„ë¦½ ì½”í‹€ëŸ¬,í—ˆë§ˆì› ì¹´íƒ€ìì•¼,ì´ì™„ ì„¸í‹°ì•„ì™„</li>
<li>ì—­ì : ë°©ì˜í˜¸</li>
<li>ì¶œê°„ì¼ : 2024-5-16</li>
<li>í˜ì´ì§€ : 296ìª½</li>
<li>ì¶œíŒì‚¬ ë§í¬ : <a href="https://www.gilbut.co.kr/book/view?bookcode=BN004085" target="_blank" rel="noopener noreferrer">https://www.gilbut.co.kr/book/view?bookcode=BN004085</a></li>
<li>ì±…ì†Œê°œ : ë§ˆì¼€íŒ… íŒ¨ëŸ¬ë‹¤ì„ì„ ì œì‹œí•˜ëŠ” ë…ë³´ì ì¸ ë¯¸ë˜ ì „ëµì„œ â€˜ë§ˆì¼“ ì‹œë¦¬ì¦ˆâ€™ ì™„ì „íŒ<br>
<img src="https://gimg.gilbut.co.kr/book/BN004085/rn_view_BN004085.jpg" alt="í‘œì§€" loading="lazy"><br>
í•œì¸µ ë” ì§„í™”í•œ AIì™€ ê³µê°„ ì»´í“¨íŒ…, ARÂ·VRÂ·XR, ë©”íƒ€ë²„ìŠ¤ ë“± ìƒˆë¡œìš´ ê¸°ìˆ ì´ ì ì  ë” ì¼ìƒìœ¼ë¡œ ì¹¨íˆ¬í•˜ê³  ìˆë‹¤. í˜„ì‹¤ ì„¸ê³„ì™€ ê°€ìƒì„¸ê³„ë¥¼ ì˜¤ê°€ê³ , AIë¥¼ ë„êµ¬ë¡œ í™œìš©í•˜ë©´ì„œ ë” ë§ì€ ì¼ë“¤ì„ í•  ìˆ˜ ìˆê²Œ ëë‹¤. ì˜¤ëŠ˜ë‚ ì˜ ê³ ê°ì€ ë¸Œëœë“œì™€ ë”ìš± ëª°ì…ê° ìˆê²Œ ìƒí˜¸ì‘ìš©í•˜ë©°, ë§¤ë ¥ì ì¸ ê²½í—˜ì„ í•  ìˆ˜ ìˆë‹¤. ê³ ê° ì—¬ì • ì—­ì‹œ í•œì¸µ ë” ë‹¤ì–‘í•œ ê²½ë¡œë¡œ ì§„í™”í•˜ê³  ìˆë‹¤. ë¯¸ë˜ ì‹œì¥ì„ ì¥ì•…í•˜ê¸° ìœ„í•´ ê¸°ì—…ì€ ë¬´ì—‡ì„ í•´ì•¼ í• ê¹Œ? ë¹ ë¥´ê²Œ ë³€ëª¨í•˜ëŠ” ê³ ê°ë“¤ì—ê²Œ ëŒ€ì‘í•˜ê¸° ìœ„í•´ ë§ˆì¼€íŒ…ì€ ì–´ë–»ê²Œ ë‹¬ë¼ì ¸ì•¼ í• ê¹Œ?<br>
ë§ˆì¼€íŒ…ì˜ ì•„ë²„ì§€, ë¹„ì¦ˆë‹ˆìŠ¤ê³„ì˜ êµ¬ë£¨ë¡œ ë¶ˆë¦¬ëŠ” í•„ë¦½ ì½”í‹€ëŸ¬ ë°•ì‚¬ì™€ ë…ë³´ì ì¸ ë§ˆì¼€íŒ… ì¸ì‚¬ì´íŠ¸ë¥¼ ì „í•˜ê¸°ë¡œ ìœ ëª…í•œ í—ˆë§ˆì› ì¹´íƒ€ìì•¼, ì´ì™„ ì„¸í‹°ì•„ì™„ ì €ìê°€ ë‹¤ì‹œ ë­‰ì³ ã€Ší•„ë¦½ ì½”í‹€ëŸ¬ ë§ˆì¼“ 6.0ã€‹ì„ ì¶œê°„í–ˆë‹¤. ì €ìë“¤ì€ ë””ì§€í„¸ ê³µê°„ê³¼ ë¬¼ë¦¬ì  ê³µê°„ì˜ ê²½ê³„ë¥¼ ë›°ì–´ë„˜ì–´, ì™„ì „íˆ ëª°ì… ê°€ëŠ¥í•œ ê³ ê° ê²½í—˜ì„ ì°½ì¡°í•´ì•¼ í•œë‹¤ê³  ë§í•œë‹¤. ëŠì„ì—†ì´ ë³µì¡í•˜ê²Œ ì§„í™”í•˜ëŠ” ê¸°ìˆ ê³¼ ì‹œì¥, ë¹„ì¦ˆë‹ˆìŠ¤ í™˜ê²½ ì†ì—ì„œ ì•ì„œê°€ê³ ì í•˜ëŠ” ì‚¬ëŒì´ë¼ë©´ ì´ ì±…ì—ì„œ ìƒˆë¡­ê²Œ íƒœë™í•œ ë§ˆì¼€íŒ… íŒ¨ëŸ¬ë‹¤ì„ê³¼ ê·¸ ì „ëµì— ê´€í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ì–»ì„ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</li>
</ul>
</blockquote>
<h2>ë§ˆì¼€íŒ… íŠ¸ëœë“œ</h2>
<ul>
<li>ë§ˆì¼“ 1.0 : ì œí’ˆ ì¤‘ì‹¬ ë§ˆì¼€íŒ… - 1950ë…„ëŒ€ì—” ì œí’ˆë§Œ ì˜ ë§Œë“¤ë©´ ì˜ íŒ”ë ¸ê³ , ì œí’ˆ ê²½ìŸë ¥ì´ ê³§ ë§ˆì¼€íŒ…ì´ì—ˆë‹¤.</li>
<li>ë§ˆì¼“ 2.0 : ì‹œì¥ì˜ ì¤‘ì‹¬ì´ ì†Œë¹„ìì—ê²Œë¡œ ì˜®ê²¨ê°”ë‹¤. ë¸Œëœë“œì™€ ì œí’ˆì´ ëŠ˜ì–´ë‚¬ìœ¼ë‹ˆ, ì„ íƒë°›ê¸° ìœ„í•´ì„  ì†Œë¹„ìì˜ ëª©ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì—¬ì•¼ í–ˆë‹¤. ì†Œë¹„ìë¥¼ ì–´ë–»ê²Œ ë¶„ë¥˜í•˜ê³ , íƒ€ê¹ƒíŒ…í•˜ëŠëƒê°€ ê´€ê±´ì´ì—ˆë‹¤.</li>
<li>ë§ˆì¼“ 3.0 : ì¸ê°„ ì¤‘ì‹¬. ì†Œë¹„ì ì¤‘ì‹¬ê³¼ëŠ” ë‹¬ë¦¬ 2000ë…„ëŒ€ í›„ë°˜ì— ë“¤ì–´ì„œë©° ì‚¬ëŒë“¤ì´ ê¸°ì—…ì˜ ì‚¬íšŒì  ì±…ì„ì„ ì¤‘ìš”ì‹œí•˜ê¸° ì‹œì‘í–ˆë‹¤. ê¸€ë¡œë²Œ ê¸ˆìœµ ìœ„ê¸°ë¥¼ ê²ªìœ¼ë©° ê¸°ì—…ì— ëŒ€í•œ ì‹ ë¢°ë¥¼ ìƒì—ˆê¸° ë•Œë¬¸ì´ë‹¤. (í•„ë¦½ ì½”í‹€ëŸ¬ëŠ” 2010ë…„ ì‹œë¦¬ì¦ˆ ì²« ì±…ì¸ ã€ë§ˆì¼“ 3.0ã€ì„ ëƒˆë‹¤. ë§ˆì¼“ 1.0ê³¼ 2.0 ë‹¤ìŒì˜ ì‹œëŒ€ë¥¼ ì¸ê°„ ì¤‘ì‹¬ ì‹œëŒ€ì—” â€˜ê°€ì¹˜ì™€ ìŠ¤í† ë¦¬í…”ë§â€™ì´ íš¨ê³¼ì ì¸ ë§ˆì¼€íŒ… ì „ëµì´ ë  ê±°ë¼ ì˜ˆìƒí–ˆë‹¤.)</li>
<li>ë§ˆì¼“ 4.0 : ë””ì§€í„¸ ë§ˆì¼€íŒ…ìœ¼ë¡œì˜ ì „í™˜ì´ë‹¤. ìŠ¤ë§ˆíŠ¸í°, ì†Œì…œë¯¸ë””ì–´, e-ì»¤ë¨¸ìŠ¤ê°€ ë“±ì¥í–ˆê³ , ë§ˆì¼€íŒ… í™œë™ì´ ë””ì§€í„¸ë¡œ ë„˜ì–´ê°”ë‹¤.</li>
<li>ë§ˆì¼“ 5.0 : ì¸ê°„ íœ´ë¨¸ë‹ˆì¦˜ê³¼ ê¸°ìˆ ì˜ ìœµí•©ìœ¼ë¡œ ê¸°ìˆ ì„ ê³ ê°ê³¼ ì¸ê°„ì ìœ¼ë¡œ ì†Œí†µí•˜ëŠ” ë° í™œìš©í•œë‹¤.</li>
<li>ë§ˆì¼“ 6.0 : AIì™€ ëª°ì…í˜• ë§ˆì¼€íŒ…ì˜ ì‹œëŒ€ì´ë‹¤.</li>
</ul>
<p>![Monosnap á„†á…¡á„á…¦á†º 6.0 : á„‡á…³á„…á…¢á†«á„ƒá…³á„‹á…´ á„‰á…¢á†¼á„Œá…©á†«á„‹á…³á†« â€˜á„†á…©á†¯á„‹á…µá†¸ á„†á…¡á„á…¦á„á…µá†¼â€™á„‹á…¦ á„ƒá…¡á†¯á„…á…§á†»á„ƒá…¡ 2024-06-28 17-25-48](<a href="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/Monosnap" target="_blank" rel="noopener noreferrer">https://raw.githubusercontent.com/Great-Stone/images/master/picgo/Monosnap</a> á„†á…¡á„á…¦á†º 6.0 : á„‡á…³á„…á…¢á†«á„ƒá…³á„‹á…´ á„‰á…¢á†¼á„Œá…©á†«á„‹á…³á†« â€˜á„†á…©á†¯á„‹á…µá†¸ á„†á…¡á„á…¦á„á…µá†¼â€™á„‹á…¦ á„ƒá…¡á†¯á„…á…§á†»á„ƒá…¡ 2024-06-28 17-25-48.png)</p>
<h2>ë§ˆì¼“ 6.0</h2>
<ul>
<li>ê·¸ ë¬´ê¸°ëŠ” ë©”íƒ€ë²„ìŠ¤ë¼ê³  ë§í•œë‹¤. ë©”íƒ€ë²„ìŠ¤ê°€ ê¸°ì—…ì˜ ê´€ì‹¬ ë°–ìœ¼ë¡œ ë°€ë ¤ë‚œ ê±´, ì‚¬ëŒë“¤ì´ ë©”íƒ€ë²„ìŠ¤ë¥¼ ì˜ ëª¨ë¥´ê±°ë‚˜ ì˜¤í•´í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì£¼ë¡œ íˆ¬ê¸°ë‚˜ ì‚¬ê¸° ì†Œì‹ì„ ë” ë§ì´ ì ‘í–ˆë‹¤.</li>
<li>ì§€ê¸ˆ(2024ë…„)ì€ ë©”íƒ€ë²„ìŠ¤ ê¸°ë°˜ ê¸°ìˆ ì´ ì¤€ë¹„ë˜ì—ˆê³ , ì½˜í…ì¸ ë¥¼ ê³µê¸‰í•  AI ê¸°ìˆ ì´ ê¸‰ì†ë„ë¡œ ë°œë‹¬í–ˆê³ , ë¹„ì „í”„ë¡œ ê°™ì€ ì›¨ì–´ëŸ¬ë¸” ê¸°ê¸°ë„ ë‚˜ì™”ë‹¤.</li>
<li>2020ë…„ ë“±ì¥í•œ ì†Œì…œë¯¸ë””ì–´ê°€ ìƒˆë¡œìš´ ë¯¸ë””ì–´ ì˜€ë“¯ ë©”íƒ€ë²„ìŠ¤ëŠ” ìƒˆë¡œìš´ ë¯¸ë””ì–´ë‹¤. í¬íŠ¸ë‚˜ì´íŠ¸ì™€ ë¡œë¸”ë¡ìŠ¤ëŠ” ê²Œì„ì´ë¼ê¸° ë³´ë‹¤ëŠ” ì•ŒíŒŒ ì„¸ëŒ€ê°€ ì–´ë¦´ì ë¶€í„° ì‚¬ìš©í•œ SNS í”Œë«í¼ì´ë‹¤.</li>
<li>í”¼ì§€í„¸(Physital) ë„¤ì´í‹°ë¸ŒëŠ” ë©”íƒ€ë²„ìŠ¤ì— ì‚°ë‹¤. ì¸í„°ë„·ê³¼ í•¨ê»˜ íƒœì–´ë‚œ ì„¸ëŒ€ëŠ” ë¬¼ë¦¬ì  ì„¸ê³„ì™€ ë””ì§€í„¸ ì„¸ê³„ë¥¼ êµ¬ë¶„í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. (ê¸°ì„±ì„¸ëŒ€ëŠ” ì˜¨ë¼ì¸ê³¼ ì˜¤í”„ë¼ì¸ì„ ë¶„ë¦¬í•´ì„œ ìƒê°í•œë‹¤.)
<ul>
<li>ì˜ˆë¥¼ë“¤ì–´ ì˜¤í”„ë¼ì¸ë§¤ì¥ì— ê°€ë„ ì•±ì´ë‚˜ ì¸í„°ë„·ìœ¼ë¡œ ë¬¼ê±´ì„ ê²€ìƒ‰í•˜ê³  ë¦¬ë·°ì™€ ê°€ê²©ì„ ë¹„êµí•œë‹¤.</li>
<li>íŒì—…ìŠ¤í† ì–´ì— ëª°ë¦¬ëŠ” Zì„¸ëŒ€(1990~2010)ëŠ” ì˜¨ë¼ì¸ê³¼ ë™ì‹œì— ë¬¼ë¦¬ì  ê²½í—˜ì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ì˜ˆë‹¤.</li>
</ul>
</li>
<li>í„°ì¹˜í¬ì¸íŠ¸(Touch point)ì„¤ê³„ê°€ ì¤‘ìš”í•˜ë‹¤. - ë¬¼ë¦¬ì  ê²½í—˜ê³¼ ë””ì§€í„¸ ê²½í—˜ì„ ì–´ë–»ê²Œ í•˜ë‚˜ì˜ í„°ì¹˜ í¬ì¸íŠ¸(ì‚¬ìš© ê²½í—˜, ì…ì†Œë¬¸, ê´‘ê³ , ì œí’ˆ í¬ì¥, ì›¹ì‚¬ì´íŠ¸ ë“±)ì— ë‘ëŠëƒê°€ ê´€ê±´ì´ë‹¤.
<ul>
<li>ë©€í‹°ì±„ë„ ë§ˆì¼€íŒ… - TVì—ëŠ” ê¸°ì„±ì¸µì„ ëŒ€ìƒìœ¼ë¡œí•œ ê±´ê°•ì˜ ì´ì•¼ê¸°, ì¸ìŠ¤íƒ€ê·¸ë¨ìœ¼ë¡œëŠ” ì²­ë…„ì„ ëŒ€ìƒìœ¼ë¡œ ìœ í–‰í•˜ëŠ” ë§› ì•Œë¦¬ê¸°</li>
<li>ì˜´ë‹ˆì±„ë„ ë§ˆì¼€íŒ… - ì˜¨ë¼ì¸ì—ì„œ ë‘˜ëŸ¬ë³´ê³  ì˜¤í”„ë¼ì¸ ë§¤ì¥ìœ¼ë¡œ ì´ë™í•˜ë„ë¡ ìœ ë„</li>
<li>ë©”íƒ€ë§ˆì¼€íŒ… - ì˜´ë‹ˆì±„ë„ì˜ ì§„í™”ë¡œ, ì˜¨ì˜¤í”„ë¼ì¸ ê³ ê° ê²½í—˜ì„ í†µí•©í•˜ëŠ”ë°, í„°ì¹˜í¬ì¸íŠ¸ê°€ í•˜ë‚˜ì´ë‹¤. ë¬¼ë¦¬ì  ë§¤ì¥ì—ì„œ ë””ì§€í„¸ ê²½í—˜ì´ ì—°ê²°ë˜ì–´ ìˆë‹¤.</li>
</ul>
</li>
<li>ë¸Œëœë“œ ê²½í—˜ì„ ì½˜ì„œíŠ¸ì²˜ëŸ¼ ê¸°íší•´ì•¼ í•œë‹¤. (ì• í”Œì˜ ì˜ˆ)
<ul>
<li>ì˜¤ê°ì„ ìê·¹í•˜ë©° ìƒí˜¸ì‘ìš©í•˜ë¼ : ì• í”Œì€ íƒ íŠ¸ì¸ ê³µê°„ì— ì œí’ˆë“¤ì´ í•œëˆˆì— ë“¤ì–´ì˜¤ê³ , ì²´í—˜ì„ ê¶Œìœ í•˜ê³ , ë§¥ë¶ì˜ ìŠ¤í¬ë¦°ê³¼ ë°”ë‹¥ì„ 76ë„ ê¸°ìš¸ì´ëŠ” ì „ì‹œ ê°ë„ëŠ” ì¼ë¶€ëŸ¬ ì‚¬ëŒì˜ ê°ë„ë¥¼ ì¡°ì •í•˜ëŠ” ì´‰ê°ì„ ìœ ë„í•œë‹¤.</li>
<li>ê±°ìŠ¬ë¦¬ëŠ” ëª¨ë“  ê±¸ ì—†ì• ë¼ : ê²½í—˜ì„ ì¦ê¸°ëŠ” ë° ë°©í•´ê°€ ë˜ëŠ” ìš”ì†ŒëŠ” ìµœëŒ€í•œ ì—†ì• ì•¼ í•œë‹¤. ì• í”Œì€ ë§¤ì¥ ì–´ë””ì„œë‚˜ ê²°ì œí•  ìˆ˜ ìˆê³ , ì´ë©”ì¼ë¡œ ì˜ìˆ˜ì¦ì„ ë³´ë‚´ì¤€ë‹¤.</li>
<li>ê²½í—˜ì„ í•˜ë‚˜ë¡œ ë¬¶ëŠ” ìŠ¤í† ë¦¬ í…”ë§ : ë¸Œëœë“œì˜ ê²½í—˜ê³¼ ê°€ì¹˜ê°€ ì¼ì¹˜í•œë‹¤. í•˜ë‚˜ì˜ ì£¼ì œì¸ ì½˜ì„œíŠ¸ ì²˜ëŸ¼.</li>
</ul>
</li>
<li>ì˜¤í”„ë¼ì¸ì— ì˜¨ë¼ì¸ì„, ì˜¨ë¼ì¸ì— ì˜¤í”„ë¼ì¸ì„ : ëª°ì…í˜• ê²½í—˜ì„ êµ¬í˜„í•˜ëŠ”ë° ë‘ê°€ì§€ ì ‘ê·¼ë²•ì´ ìˆë‹¤. í•˜ë‚˜ëŠ” ë¬¼ë¦¬ì ì¸ ê³µê°„ì— ë””ì§€í„¸ ê²½í—˜ì„ ì‹¬ëŠ” ê²ƒ, ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ë””ì§€í„¸ ê³µê°„ì— ë¬¼ë¦¬ì ì¸ ê²½í—˜ì„ êµ¬í˜„í•˜ëŠ” ê²ƒ
<ul>
<li>ì˜¤í”„ë¼ì¸ì—ì„œë§Œ ê°€ëŠ¥í•œ ë””ì§€í„¸ ê²½í—˜ : ìŠ¤íƒ€ë²…ìŠ¤ ì‚¬ì´ë Œì˜¤ë”, ë²„ë²„ë¦¬ì˜ ëª°ì…í˜• ë§¤ì¥ì˜ ì˜·ì˜ QRë¡œ ì œí’ˆì •ë³´ì™€ ì†Œì…œ í™”í ì œê³µ, ë””ì¦ˆë‹ˆëœë“œì˜ VRì´ë‚˜ í™€ë¡œê·¸ë¨ìœ¼ë¡œ ìºë¦­í„°ì™€ ìƒí˜¸ì‘ìš©</li>
<li>ì˜¨ë¼ì¸ ê³µê°„ì—ì„œ ë¬¼ë¦¬ì  í™œë™ì„ í•˜ê²Œ í•˜ë¼  : ë¡œë¸”ë¡ìŠ¤ë‚˜ í¬íŠ¸ë‚˜ì´íŠ¸ì—ì„œ ì½˜ì„œíŠ¸ë¥¼, ì œí˜í† ì—ì„œ êµ¬ì°Œ ë§¤ì¥ì„ ë°©ë¬¸í•˜ì—¬ ë¬¼ê±´ì„ êµ¬ë§¤.</li>
</ul>
</li>
<li>ë¶„ì„ë³´ë‹¤ í†µì°°ì´ í•„ìš”í•œ ì‹œëŒ€ (ë§ˆì¼€í„°ëŠ” ê¸°ìˆ ê³¼ ì¹œí•´ì•¼ í•œë‹¤ê³  ë§í•©ë‹ˆë‹¤.)
<ul>
<li>"ê¸°ìˆ ì´ ì‚¬ìš©ë˜ëŠ” ì‚¬ë¡€ë¥¼ ì¶©ë¶„íˆ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. AIê°€ ë¬´ì—‡ì„ í•˜ëŠ”ì§€, ë¸”ë¡ì²´ì¸ì´ ë¬´ì—‡ì„ í•˜ëŠ”ì§€, í™•ì¥í˜„ì‹¤ì´ ì–´ë–»ê²Œ ì“°ì´ëŠ”ì§€ë¥¼ ë³´ì„¸ìš”. ê±°ê¸°ì„œ ë‚´ ë¸Œëœë“œ, ë‚´ ë¹„ì¦ˆë‹ˆìŠ¤ì™€ì˜ ì—°ê²°ì ì„ ì°¾ìœ¼ë©´ ë©ë‹ˆë‹¤."</li>
<li>"ìˆ«ì ì´ë©´ì„ ë“¤ì—¬ë‹¤ë³´ê³  ì¸ì‚¬ì´íŠ¸ë¥¼ ì°¾ëŠ” ì¼ì€ ì¸ê³µì§€ëŠ¥ì´ í•  ìˆ˜ ì—†ëŠ” ì¼ì…ë‹ˆë‹¤. ê¸°ìˆ ì˜ ì‹œëŒ€ì— ì„±ê³µí•˜ë ¤ë©´, ì¸ì‚¬ì´íŠ¸ë¥¼ ë„ì¶œí•  ì¤„ ì•Œì•„ì•¼ í•´ìš”. ë¶„ì„ì€ AIì—ê²Œ ë§¡ê¸°ì„¸ìš”."</li>
</ul>
</li>
</ul>
]]></content:encoded>
      <enclosure url="https://gimg.gilbut.co.kr/book/BN004085/rn_view_BN004085.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>Node.js package version update tool NCU</title>
      <link>https://docmoa.github.io/05-Software/NodeJS/package-update-tool.html</link>
      <guid>https://docmoa.github.io/05-Software/NodeJS/package-update-tool.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Node.js package version update tool NCU</source>
      <description>Node.jsì˜ í•„ìš” íŒ¨í‚¤ì§€ì˜ ìµœì‹  ë²„ì „ìœ¼ë¡œ package.jsonì„ ì—…ë°ì´íŠ¸í•˜ëŠ” íˆ´</description>
      <pubDate>Thu, 27 Jun 2024 02:09:20 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>npm-check-updates - <a href="https://www.npmjs.com/package/npm-check-updates" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/npm-check-updates</a></p>
</blockquote>
<h2>1. ë°°ê²½</h2>
<p><code>npm install</code>ì„ ì‚¬ìš©í•˜ì—¬ íŒ¨í‚¤ì§€ ì„¤ì¹˜ë¥¼ í•˜ëŠ” ê²½ìš° <code>package.json</code>ì—ëŠ” ë³´í†µ íŒ¨ì¹˜ë²„ì „ì„ í—ˆìš©í•˜ëŠ” í˜•íƒœë¡œ ì €ì¥ëœë‹¤.</p>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="package.json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"..."</span> <span class="token operator">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">"@vue/repl"</span><span class="token operator">:</span> <span class="token string">"^3.4.0"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">"..."</span><span class="token operator">:</span> <span class="token string">"..."</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><code>^3.4.0</code>ì˜ ê²½ìš° <code>3.4</code> ë²„ì „ ê¸°ì¤€ íŒ¨ì¹˜ë²„ì „ì¸ <code>3.4.x</code>ë¡œë§Œ ì—…ë°ì´íŠ¸ ë˜ê¸° ë•Œë¬¸ì— ë§¤ì´ì € ë˜ëŠ” ë§ˆì´ë„ˆê°€ ë³€ê²½ë˜ëŠ” ê²½ìš° ê°œë³„ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì¤˜ì•¼í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆì—ˆë‹¤.</p>
<div class="hint-container tip">
<p class="hint-container-title">íŒ</p>
<p>ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•œ íŒ¨í‚¤ì§€ëŠ” <code>npm outdated</code>ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
</div>
<h2>2. npm-check-updates</h2>
<p>ê²€ìƒ‰ì„ í•´ë³´ë‹ˆ ë§ì€ ì‚¬ëŒë“¤ì´ <code>npm-check-updates</code> íŒ¨í‚¤ì§€ë¡œ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. ì´ íˆ´ì€ ì „ì—­ìœ¼ë¡œ ì„¤ì¹˜í•˜ì—¬ ì‚¬ìš©í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> npm-check-updates</span>
<span class="line"></span></code></pre></div><p>ì´í›„ <code>ncu</code>ë¼ëŠ” ëª…ë ¹ì–´ë¡œ ì—…ë°ì´íŠ¸ ë  íŒ¨í‚¤ì§€ì™€ ë³€ê²½ë  ë²„ì „ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ ncu</span>
<span class="line"></span>
<span class="line">Checking /Users/gs/workspaces/docs/docmoa/package.json</span>
<span class="line"><span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token punctuation">]</span> <span class="token number">19</span>/19 <span class="token number">100</span>%</span>
<span class="line"></span>
<span class="line"> @vue/repl                         ^3.4.0  â†’        ^4.2.1</span>
<span class="line"> chart.js                          ^4.4.1  â†’        ^4.4.3</span>
<span class="line"> echarts                           ^5.4.3  â†’        ^5.5.0</span>
<span class="line"> katex                            ^0.16.9  â†’      ^0.16.10</span>
<span class="line"> mermaid                          ^10.8.0  â†’       ^10.9.1</span>
<span class="line"> vue                              ^3.4.19  â†’       ^3.4.30</span>
<span class="line"> vuepress-plugin-search-pro  ^2.0.0-rc.31  â†’  ^2.0.0-rc.50</span>
<span class="line"></span>
<span class="line">Run ncu <span class="token parameter variable">-u</span> to upgrade package.json</span>
<span class="line"></span></code></pre></div><p>ëª…ë ¹ì˜ ê²°ê³¼ë¡œ í‘œê¸°ë˜ëŠ”ê²ƒ ì²˜ëŸ¼ <code>package.json</code>ì˜ ë‚´ìš©ì„ ìë™ìœ¼ë¡œ ìˆ˜ì •í•˜ë ¤ë©´ <code>ncu -u</code>ë¡œ ì˜µì…˜ì„ ì¶”ê°€í•˜ì—¬ ì‹¤í–‰ì‹œì¼œì•¼ í•œë‹¤.</p>
<div class="hint-container caution">
<p class="hint-container-title">ìœ„í—˜</p>
<p>ìë™ì—…ë°ì´íŠ¸ëŠ” í¸í•˜ì§€ë§Œ ì˜í–¥ë„ë¥¼ ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš° ìµœì‹ ë²„ì „ì´ ë¬´ì—‡ì¸ì§€ í™•ì¸í•˜ëŠ” ìš©ë„ë¡œë§Œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
</div>
<p>ì´í›„, <code>ncu -u</code>ë¥¼ ìˆ˜í–‰í•˜ë©´ <code>package.json</code> ë‚´ìš©ì„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì¤€ë‹¤. ì—…ë°ì´íŠ¸ëœ <code>package.json</code>ì„ ê¸°ì¤€ìœ¼ë¡œ <code>npm install</code>ì„ ìˆ˜í–‰í•˜ì—¬ íŒ¨í‚¤ì§€ ì—…ê·¸ë ˆì´ë“œ ì‘ì—…ì„ ì™„ë£Œí•œë‹¤.</p>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">$ ncu -u</span>
<span class="line"></span>
<span class="line">Upgrading /Users/gs/workspaces/docs/docmoa/package.json</span>
<span class="line">[====================] 19/19 100%</span>
<span class="line"></span>
<span class="line"> @vue/repl                         ^3.4.0  â†’        ^4.2.1</span>
<span class="line"> chart.js                          ^4.4.1  â†’        ^4.4.3</span>
<span class="line"> echarts                           ^5.4.3  â†’        ^5.5.0</span>
<span class="line"> katex                            ^0.16.9  â†’      ^0.16.10</span>
<span class="line"> mermaid                          ^10.8.0  â†’       ^10.9.1</span>
<span class="line"> vue                              ^3.4.19  â†’       ^3.4.30</span>
<span class="line"> vuepress-plugin-search-pro  ^2.0.0-rc.31  â†’  ^2.0.0-rc.50</span>
<span class="line"></span>
<span class="line">Run npm install to install new versions.</span>
<span class="line"></span></code></pre></div><h2>3. ì„ íƒì  ì—…ë°ì´íŠ¸</h2>
<p>ì¼ê´„ ë²„ì „ ì—…ë°ì´íŠ¸ê°€ ì•„ë‹ˆë¼ ì„ íƒì ìœ¼ë¡œ í•˜ë ¤ëŠ” ê²½ìš° <code>ncu -i --format group</code> ëª…ë ¹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li>ìœ„ì•„ë˜ í‚¤ë³´ë“œë¥¼ ëˆŒëŸ¬ íŒ¨í‚¤ì§€ë¥¼ ì„ íƒí•œë‹¤.</li>
<li>ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ì„ íƒ/ë¯¸ì„ íƒ ì„ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.</li>
<li><code>a</code>ë¥¼ ëˆ„ë¥´ë©´ ëª¨ë“  ê²ƒì— ëŒ€í•´ ì„ íƒ/ë¯¸ì„ íƒì„ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.</li>
<li>ì›í•˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì„ íƒ í›„ <code>ì—”í„°</code>í‚¤ë¡œ ì„ íƒì„ ì €ì¥í•œë‹¤.</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ ncu <span class="token parameter variable">-i</span> <span class="token parameter variable">--format</span> group</span>
<span class="line">Upgrading /Users/gs/workspaces/docs/docmoa/package.json</span>
<span class="line"><span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token punctuation">]</span> <span class="token number">19</span>/19 <span class="token number">100</span>%</span>
<span class="line"></span>
<span class="line">? Choose <span class="token function">which</span> packages to update â€º </span>
<span class="line">  â†‘/â†“: Select a package</span>
<span class="line">  Space: Toggle selection</span>
<span class="line">  a: Toggle all</span>
<span class="line">  Enter: Upgrade </span>
<span class="line"></span>
<span class="line">Patch   Backwards-compatible bug fixes</span>
<span class="line">â¯ â—‰ chart.js                          ^4.4.1  â†’        ^4.4.3</span>
<span class="line">  â—‰ vue                              ^3.4.19  â†’       ^3.4.30</span>
<span class="line">  â—‰ vuepress-plugin-search-pro  ^2.0.0-rc.31  â†’  ^2.0.0-rc.50</span>
<span class="line">  â—‰ vuepress-theme-hope         ^2.0.0-rc.30  â†’  ^2.0.0-rc.50</span>
<span class="line"></span>
<span class="line">Minor   Backwards-compatible features</span>
<span class="line">  â—‰ echarts                           ^5.4.3  â†’        ^5.5.0</span>
<span class="line">  â—‰ mermaid                          ^10.8.0  â†’       ^10.9.1</span>
<span class="line"></span>
<span class="line">Major   Potentially breaking API changes</span>
<span class="line">  â—¯ @vue/repl                         ^3.4.0  â†’        ^4.2.1</span>
<span class="line"></span>
<span class="line">Major version zero   Anything may change</span>
<span class="line">  â—¯ katex                            ^0.16.9  â†’      ^0.16.10</span>
<span class="line"></span></code></pre></div><p><code>ì—”í„°</code>í‚¤ë¥¼ ëˆ„ë¥´ë©´ <code>npm install</code> ì—¬ë¶€ë¥¼ ë¬¼ì–´ë³¸ë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">âœ” Choose <span class="token function">which</span> packages to update â€º </span>
<span class="line"></span>
<span class="line"> chart.js                          ^4.4.1  â†’        ^4.4.3</span>
<span class="line"> echarts                           ^5.4.3  â†’        ^5.5.0</span>
<span class="line"> mermaid                          ^10.8.0  â†’       ^10.9.1</span>
<span class="line"> vue                              ^3.4.19  â†’       ^3.4.30</span>
<span class="line"> vuepress-plugin-search-pro  ^2.0.0-rc.31  â†’  ^2.0.0-rc.50</span>
<span class="line"> vuepress-theme-hope         ^2.0.0-rc.30  â†’  ^2.0.0-rc.50</span>
<span class="line"></span>
<span class="line">? Run <span class="token function">npm</span> <span class="token function">install</span> to <span class="token function">install</span> new versions? â€º <span class="token punctuation">(</span>Y/n<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Required Node.js engine version</title>
      <link>https://docmoa.github.io/05-Software/NodeJS/required-node-version.html</link>
      <guid>https://docmoa.github.io/05-Software/NodeJS/required-node-version.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Required Node.js engine version</source>
      <description>Node.jsì˜ ë²„ì „ ìš”êµ¬ì‚¬í•­ì„ package.jsì— ì¶”ê°€í•˜ê¸°</description>
      <pubDate>Thu, 27 Jun 2024 02:09:20 GMT</pubDate>
      <content:encoded><![CDATA[
<p><code>Docmoa</code>ì—ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì—…ë°ì´íŠ¸ í•˜ë˜ ì¤‘ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ë‹¤.</p>
<h2>1. ë°°ê²½</h2>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token operator">$</span> npm run dev</span>
<span class="line"></span>
<span class="line"><span class="token url">file:///Users/gs/workspaces/docs/docmoa/node_modules/execa/lib/utils/max-listeners.js:1</span></span>
<span class="line">import <span class="token operator">{</span>addAbortListener<span class="token operator">}</span> from <span class="token string">'node:events'</span><span class="token operator">;</span></span>
<span class="line">        <span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span></span>
<span class="line"><span class="token property">SyntaxError:</span> The requested module <span class="token string">'node:events'</span> does not provide an export named <span class="token string">'addAbortListener'</span></span>
<span class="line">    at ModuleJob<span class="token punctuation">.</span>_instantiate <span class="token operator">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>esm<span class="token operator">/</span>module_job<span class="token operator">:</span><span class="token number">123</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">)</span></span>
<span class="line">    at async ModuleJob<span class="token punctuation">.</span>run <span class="token operator">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>esm<span class="token operator">/</span>module_job<span class="token operator">:</span><span class="token number">189</span><span class="token operator">:</span><span class="token number">5</span><span class="token operator">)</span></span>
<span class="line">    at async Promise<span class="token punctuation">.</span>all <span class="token operator">(</span>index <span class="token number">0</span><span class="token operator">)</span></span>
<span class="line">    at async ESMLoader<span class="token punctuation">.</span>import <span class="token operator">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>esm<span class="token operator">/</span>loader<span class="token operator">:</span><span class="token number">530</span><span class="token operator">:</span><span class="token number">24</span><span class="token operator">)</span></span>
<span class="line">    at async loadUserConfig <span class="token operator">(</span><span class="token url">file:///Users/gs/workspaces/docs/docmoa/node_modules/@vuepress/cli/dist/index.js:77:18)</span></span>
<span class="line">    at async CAC<span class="token punctuation">.</span>dev <span class="token operator">(</span><span class="token url">file:///Users/gs/workspaces/docs/docmoa/node_modules/@vuepress/cli/dist/index.js:443:52)</span></span>
<span class="line"></span></code></pre></div><p>ì—…ë°ì´íŠ¸ ëœ íŒ¨í‚¤ì§€ì—ì„œ <code>addAbortListener</code>ë¼ëŠ”ê±¸ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ì€ë°, ì´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ë‹¤.</p>
<p>Node.jsì˜ <a href="https://nodejs.org/en/blog/release/v20.5.0" target="_blank" rel="noopener noreferrer">CHANGELOG</a>ë¥¼ ì°¾ì•„ë³´ë‹ˆ <code>addAbortListener</code>ëŠ” v20.5.0 ë¶€í„° ì–¸ê¸‰ë˜ëŠ”ê²ƒìœ¼ë¡œ ë³´ì•„ ì´ë•Œë¶€í„° ì¶”ê°€ëœ apiì¸ ê²ƒìœ¼ë¡œ ì¶”ì¸¡ëœë‹¤.</p>
<ul>
<li>Node.js events ì„¤ëª… - <a href="https://runebook.dev/ko/docs/node/events" target="_blank" rel="noopener noreferrer">https://runebook.dev/ko/docs/node/events</a></li>
</ul>
<p>í˜„ì¬ Docmoaë¥¼ ë¹Œë“œí•˜ëŠ” ë²„ì „ì€ <code>v18.x</code>ì˜€ìœ¼ë¯€ë¡œ ì•ìœ¼ë¡œëŠ” ë¹Œë“œí•˜ê¸° ìœ„í•´ <code>v20.5.x</code> ì´ìƒìœ¼ë¡œ í•„ìš” ë²„ì „ì— ëŒ€í•œ ëª…ì‹œê°€ í•„ìš”í•´ì¡Œë‹¤.</p>
<h2>2. í•„ìš” ë²„ì „ ëª…ì‹œí•˜ê¸°</h2>
<p><code>package.json</code>ì—ì„œ <code>engine</code> í•„ë“œë¥¼ ì„¤ì •í•˜ê³  <code>node</code>ì™€ <code>npm</code>ë²„ì „ì— ëŒ€í•œ ìš”êµ¬ ì‚¬í•­ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="package.json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"..."</span> <span class="token operator">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"engines"</span> <span class="token operator">:</span> <span class="token punctuation">{</span> </span>
<span class="line">    <span class="token property">"npm"</span> <span class="token operator">:</span> <span class="token string">"&gt;=10.0.0 &lt;20.0.0"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"node"</span> <span class="token operator">:</span> <span class="token string">"&gt;=20.5.0"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>ì¶”ê°€ë¡œ npmì„ í†µí•´ ì´ë¥¼ ì ìš©í•˜ë ¤ë©´ <code>.npmrc</code> íŒŒì¼ì„ ë§Œë“¤ê³  <code>engine-strict</code> ì˜µì…˜ì„ <code>true</code>ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.</p>
<div class="language-ini" data-highlighter="prismjs" data-ext="ini" data-title=".npmrc"><pre class="language-ini"><code><span class="line"><span class="token comment"># .npmrc</span></span>
<span class="line"><span class="token key attr-name">engine-strict</span><span class="token punctuation">=</span><span class="token value attr-value">true</span></span>
<span class="line"></span></code></pre></div><p>ì„¤ì •ì´ ì™„ë£Œë˜ë©´ í•„ìš”í•œ ì—”ì§„ ë²„ì „ì´ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° <code>npm install</code> ê°™ì€ npm ëª…ë ¹ì´ ì‹¤íŒ¨í•˜ê²Œ ëœë‹¤.</p>
<p><code>.npmrc</code> ì ìš© ì „ì—ëŠ” WARN ë©”ì‹œì§€ë§Œ ë‚˜ì˜¤ì§€ë§Œ</p>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token operator">$</span> node <span class="token operator">-</span><span class="token operator">-</span>version</span>
<span class="line"><span class="token number">v18.18.0</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">$</span> npm install</span>
<span class="line">npm <span class="token level warning important">WARN</span> EBADENGINE Unsupported engine <span class="token operator">{</span></span>
<span class="line">npm <span class="token level warning important">WARN</span> EBADENGINE   package<span class="token operator">:</span> <span class="token string">'docmoa@2.3.0'</span><span class="token punctuation">,</span></span>
<span class="line">npm <span class="token level warning important">WARN</span> EBADENGINE   required<span class="token operator">:</span> <span class="token operator">{</span> node<span class="token operator">:</span> <span class="token string">'&gt;=20.5.0'</span> <span class="token operator">}</span><span class="token punctuation">,</span></span>
<span class="line">npm <span class="token level warning important">WARN</span> EBADENGINE   current<span class="token operator">:</span> <span class="token operator">{</span> node<span class="token operator">:</span> <span class="token string">'v18.18.0'</span><span class="token punctuation">,</span> npm<span class="token operator">:</span> <span class="token string">'9.8.1'</span> <span class="token operator">}</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>ìƒëµ<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"></span></code></pre></div><p>ì ìš© í›„ì—ëŠ” <code>ERR!</code>ë¥¼ ì¶œë ¥í•˜ë©° ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token operator">$</span> node <span class="token operator">-</span><span class="token operator">-</span>version</span>
<span class="line"><span class="token number">v18.18.0</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">$</span> npm install</span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> code EBADENGINE</span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> engine Unsupported engine</span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> engine Not compatible with your version of node<span class="token operator">/</span>npm<span class="token operator">:</span> docmoa<span class="token operator">@</span><span class="token number">2.3.0</span></span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> notsup Not compatible with your version of node<span class="token operator">/</span>npm<span class="token operator">:</span> docmoa<span class="token operator">@</span><span class="token number">2.3.0</span></span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> notsup Required<span class="token operator">:</span> <span class="token operator">{</span><span class="token string">"node"</span><span class="token operator">:</span><span class="token string">"&gt;=20.5.0"</span><span class="token operator">}</span></span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> notsup Actual<span class="token operator">:</span>   <span class="token operator">{</span><span class="token string">"npm"</span><span class="token operator">:</span><span class="token string">"9.8.1"</span><span class="token punctuation">,</span><span class="token string">"node"</span><span class="token operator">:</span><span class="token string">"v18.18.0"</span><span class="token operator">}</span></span>
<span class="line"></span>
<span class="line">npm <span class="token level error important">ERR</span><span class="token operator">!</span> A complete log of this run can be found in<span class="token operator">:</span> <span class="token file-path string">/Users/gs/.npm/_logs/2024-06-27T00_34_26_004Z-debug-0.log</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Terraform Enterprise Requirements - Flexible Deployment</title>
      <link>https://docmoa.github.io/04-HashiCorp/03-Terraform/06-TerraformEnterprise/tfe-requirement-flex.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/03-Terraform/06-TerraformEnterprise/tfe-requirement-flex.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Terraform Enterprise Requirements - Flexible Deployment</source>
      <description>Terraform Enterprise ì„¤ì¹˜ ìš”êµ¬ì‚¬í•­ ì •ë¦¬</description>
      <pubDate>Wed, 26 Jun 2024 00:58:39 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><a href="https://developer.hashicorp.com/terraform/enterprise/flexible-deployments/install" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/terraform/enterprise/flexible-deployments/install</a></p>
</blockquote>
<blockquote>
<p>v202406-1 ê¸°ì¤€</p>
</blockquote>
<h2>1. License File</h2>
<ul>
<li>Terraform Enterprise Image ë‹¤ìš´ë°›ê¸°ìœ„í•œ ì¸ì¦ìš©ë„ë¡œ ì‚¬ìš©
<ul>
<li><a href="http://images.registry.hashicorp.com" target="_blank" rel="noopener noreferrer">images.registry.hashicorp.com</a></li>
</ul>
</li>
<li>Terraform Enterprise í”„ë¡œì„¸ìŠ¤(ì»¨í…Œì´ë„ˆ)ë¥¼ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©</li>
<li>í™˜ê²½ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ëŠ” ê²½ìš°
<ul>
<li>ì˜µì…˜1) <code>TFE_LICENSE</code>ì— ë¼ì´ì„ ìŠ¤ì˜ í‰ë¬¸ ë‚´ìš©ì„ ì„¤ì •</li>
<li>ì˜µì…˜2) <code>TFE_LICENSE_PATH</code>ì— ë¼ì´ì„ ìŠ¤ íŒŒì¼ ê²½ë¡œë¥¼ ì„¤ì •</li>
</ul>
</li>
</ul>
<h2>2. TLS Certification</h2>
<p>Terraform EnterpriseëŠ” TLS ì¸ì¦ì„œì™€ Private keyê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
<ul>
<li>ì¸ì¦ì„œëŠ” X.509 í˜•ì‹</li>
<li>ì¸ì¦ì„œì™€ í‚¤ëŠ” PEM(base64) ì¸ì½”ë”© í˜•íƒœ</li>
<li>Terraform Entepriseë¥¼ ìœ„í•œ FQDN (<a href="http://tfe.example.com" target="_blank" rel="noopener noreferrer">tfe.example.com</a>)ì— ëŒ€í•´ ë°œìƒë˜ê±°ë‚˜, ì™€ì¼ë“œì¹´ë“œ(*.example.com)ë¡œ ë°œê¸‰ë˜ì–´ì•¼ í•˜ë©°, Terraform Enterpriseê°€ ì„¤ì¹˜ë˜ëŠ” í˜¸ìŠ¤íŠ¸ ì´ë¦„ê³¼ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</li>
<li>ì¸ì¦ì„œëŠ” ê³µì¸, ì‚¬ì„¤ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ Terraform Enterpriseì™€ ì—°ê³„ë  ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ëŠ” ëª¨ë“  ì„œë¹„ìŠ¤ì—ì„œ ì‹ ë¢°ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê²Œ ë©ë‹ˆë‹¤.
<ul>
<li>VCS, CICD, API í˜¸ì¶œ ë„êµ¬, Slack ë“±</li>
</ul>
</li>
<li>CN(Common Name), DN(Domain Names) ëª¨ë‘ì—ì„œ SAN(Subject Alternative Name)ì„ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸</li>
</ul>
<h2>3. ì‹¤í–‰ í™˜ê²½</h2>
<ul>
<li>Docker
<ul>
<li>Any Linux</li>
<li>23.0.x ~ 26.1.x</li>
</ul>
</li>
<li>Podman
<ul>
<li>RHEL 8+</li>
<li>4.3.0 ~</li>
</ul>
</li>
<li>Kubernetes
<ul>
<li>EKS, AKS, GKE, OpenShift(beta)</li>
</ul>
</li>
<li>Nomad
<ul>
<li>Any OS + Docker/Podman</li>
<li>1.5.0 ~</li>
</ul>
</li>
</ul>
<h2>4. Data Store</h2>
<h3>4.1 Disk</h3>
<p>ì„¤ì¹˜ í™˜ê²½ì„ ìœ„í•œ ìµœì†Œ 40GBì´ìƒì˜ ë””ìŠ¤í¬ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤.</p>
<ul>
<li>ë¬¼ë¦¬ ë””ìŠ¤í¬</li>
<li>AWS EBS</li>
<li>GCP Zonal Persistent Disk</li>
<li>Azure Disk Storage</li>
<li>iSCSI</li>
<li>SAN</li>
</ul>
<h3>4.2 PostgreSQL</h3>
<p>Active/Active ë˜ëŠ” ì™¸ë¶€ ì €ì¥ì†Œë¡œì„œ ì—°ê²°ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p>Terraform Enterpriseì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°ì´í„°, ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì •, ì‚¬ìš©ì ë° ê·¸ë£¹ ì„¤ì •, Run ì‹¤í–‰ ì •ë³´ê°€ ì €ì¥ë©ë‹ˆë‹¤.</p>
<ul>
<li>ì„¤ì¹˜í˜• PostgreSQL ë° AWS RDS, Azure DB, GCP SQLì˜ ê´€ë¦¬í˜• PostgreSQLì„ ì§€ì›</li>
<li>12.x, 13.x, 14.4+, 15.x</li>
</ul>
<h3>4.3 Object Storage</h3>
<p>Active/Active ë˜ëŠ” ì™¸ë¶€ ì €ì¥ì†Œë¡œì„œ ì—°ê²°ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p>State íŒŒì¼, ì‹¤í–‰ ê³„íš íŒŒì¼, ì‹¤í–‰ ë¡œê·¸, êµ¬ì„± ë²„ì „ì˜ ë‚´ìš©ì´ ì €ì¥ë©ë‹ˆë‹¤.</p>
<ul>
<li>AWS S3, Azure Blob Storage, Google Cloud Storage, MinIO ë“±ê³¼ ê°™ì€ S3 í˜¸í™˜ Object Storageë¥¼ ì§€ì›</li>
</ul>
<h3>4.4 Redis</h3>
<p>Active/Active ë˜ëŠ” ì™¸ë¶€ ì €ì¥ì†Œë¡œì„œ ì—°ê²°ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p>ë°ì´í„° ìºì‹±ìš©ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<ul>
<li>ì„¤ì¹˜í˜• Redis, AWs ElastiCache, Azure Cache, Google cloud Memorystore ê°™ì€ ê´€ë¦¬í˜• Redisë¥¼ ì§€ì›</li>
<li>6.x, 7.x(ê¶Œì¥)</li>
<li>Redis í´ëŸ¬ìŠ¤í„° ëª¨ë“œëŠ” ë¯¸ì§€ì›</li>
</ul>
<h3>4.5 HashiCorp Vault (ì˜µì…˜)</h3>
<p><code>Object Storage</code>ë‚´ì˜ íŒŒì¼ ê°ì²´ë¥¼ ì•”í˜¸í™”í•˜ê³  í•´ë…í•˜ëŠ” ì•”í˜¸í™” í‚¤ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. Vaultê°€ ì—†ëŠ” ê²½ìš° í‚¤ëŠ” PostgreSQLì— ì €ì¥ë©ë‹ˆë‹¤.</p>
<h2>5. Network</h2>
<h3>5.1 Ingress</h3>
<p>| ì •ì˜                   | ê¸°ë³¸ í¬íŠ¸ | ìš©ë„                                            |<br>
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>Terraform Enterprise Backup &amp; Restore</title>
      <link>https://docmoa.github.io/04-HashiCorp/03-Terraform/06-TerraformEnterprise/tfe-backup-restore.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/03-Terraform/06-TerraformEnterprise/tfe-backup-restore.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Terraform Enterprise Backup &amp; Restore</source>
      <description>Terraform Enterprise Backup &amp; Restore</description>
      <pubDate>Tue, 25 Jun 2024 08:03:30 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>1. Backup &amp; Restore ê°œìš”</h2>
<p>Backupì€ Object Storageì™€ PostgreSQLì„ í¬í•¨í•œ ëª¨ë“  ë°ì´í„°ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤. ë‹¤ë§Œ, ì„¤ì¹˜ êµ¬ì„±ìš”ì†Œë“¤ì— ëŒ€í•œ Backupì´ ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— Restoreì‹œ ìƒˆë¡œìš´ Terraform Enterpriseì˜ ì„¤ì¹˜ê°€ í•„ìš”í•˜ë‹¤.</p>
<p>ì•„ë˜ì™€ ê°™ì€ ì£¼ì˜ ì‚¬í•­ì´ ì¡´ì¬</p>
<ul>
<li>Backupëœ Terraform Enterpriseì™€ Restoreëœ Terraform Enterprise ì‚¬ì´ì— ë²„ì „ ì°¨ì´ê°€ ìˆì–´ì„œëŠ” ì•ˆëœë‹¤. ì¦‰, Backupì„ ì§„í–‰í•œ ë²„ì „ ê·¸ëŒ€ë¡œ Restore ê³¼ì •ì„ ì§„í–‰í•´ì•¼ í•œë‹¤.</li>
<li>Backupëœ PostgreSQLê³¼ Restoreëœ PostgreSQL ì‚¬ì´ì— ë²„ì „ ì°¨ì´ê°€ ìˆì–´ì„œëŠ” ì•ˆëœë‹¤. ì¦‰, Backupì„ ì§„í–‰í•œ ë²„ì „ ê·¸ëŒ€ë¡œ Restore ê³¼ì •ì„ ì§„í–‰í•´ì•¼ í•œë‹¤.</li>
<li>Restore ê³¼ì • ì§„í–‰ ì‹œ Terraform EnterpriseëŠ” application dataê°€ ì—†ëŠ” ìƒíƒœë¡œ ìƒˆë¡œ ì„¤ì¹˜ë˜ì–´ì•¼ í•œë‹¤.</li>
<li>Restore ê³¼ì •ì´ ì™„ë£Œëœ í›„ Terraform EnterpriseëŠ” ì¬ì‹œì‘ì´ í•„ìš”í•˜ë‹¤.</li>
</ul>
<h2>2. ì¸ì¦ ë° ë³´ì•ˆ</h2>
<p>Terraform Enterpriseì˜ Backupê³¼ Restoreë¥¼ ìœ„í•œ ë³„ë„ì˜ ì¸ì¦ í† í°ì´ ì¡´ì¬í•˜ë©° ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ì—¬ í•´ë‹¹ Tokenì„ ì·¨ë“í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-t</span> terraform-enterprise-tfe-1 /bin/bash <span class="token parameter variable">-c</span> <span class="token string">'cat /var/run/terraform-enterprise/backup-restore/config.hcl | grep backup_token'</span></span>
<span class="line"></span></code></pre></div><p>Terraform EnterpriseëŠ” ë‚´ë¶€ì— ìì²´ ë‚´ì¥ëœ Vaultì˜ ì¼ë¶€ ê¸°ëŠ¥ì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ì•”/ë³µí˜¸í™”í•œë‹¤. ë‹¤ë§Œ, Backup ê³¼ì •ì—ì„œëŠ” í•´ë‹¹ ë°ì´í„°ë¥¼ ì•”/ë³µí˜¸í™”í•˜ê¸° ìœ„í•œ Vault ì•”í˜¸í‚¤ê°€ ì œê³µë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê¸°ì¡´ ì €ì¥ëœ ì•”í˜¸í™” ë°ì´í„°ë¥¼ ë¨¼ì € Vaultê°€ ë³µí˜¸í™”í•œ ë’¤ ì‚¬ìš©ìê°€ ì„ì˜ ì§€ì •í•œ Passwordë¥¼ í†µí•´ ì¬ì•”í˜¸í™”í•˜ì—¬ Backup ê³¼ì •ì„ ì§„í–‰í•œë‹¤. Restore ê³¼ì •ì—ì„œëŠ” Backup ê³¼ì •ì—ì„œ ì‚¬ìš©ëœ ê²ƒê³¼ ë™ì¼í•œ Passwordë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë³µí˜¸í™”í•œ ë’¤ ìƒˆë¡œìš´ Terraform Enterpriseê°€ ì„¤ì¹˜ë˜ê³  ë‚˜ë©´ ìì²´ ë‚´ì¥ëœ Vaultì˜ ì•”í˜¸í™”í‚¤ë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì¬ì•”í˜¸í™”í•œ ë’¤ Restore ê³¼ì •ì´ ë§ˆë¬´ë¦¬ëœë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">vi</span> payload.json</span>
<span class="line"></span></code></pre></div><div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"password"</span><span class="token operator">:</span> <span class="token string">"temporary-password"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul>
<li>Backupê³¼ Restore ì‹œ ë°˜ë“œì‹œ ê°™ì€ Passwordê°€ ì œê³µë˜ì–´ì•¼ í•œë‹¤.</li>
<li>Backup ê³¼ì • ì‹œ <code>"skip_object_storage": "true"</code> í•­ëª©ì„ ì¶”ê°€í•´ Object Storageì˜ ìš©ëŸ‰ì´ ë„ˆë¬´ í´ ê²½ìš° Object Storageë§Œ ìƒëµí•˜ì—¬ Backupì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. (Default: <code>false</code>)</li>
</ul>
<h2>3. Mounted Disk ë°°í¬ ì‹œ Backup &amp; Restore</h2>
<div class="hint-container warning">
<p class="hint-container-title">ì£¼ì˜</p>
<p>í•˜ê¸° aux í´ë” ëˆ„ë½ ì´ìŠˆë¡œ bind ê²½ë¡œë¥¼ ì¶”ê°€í•œ ë‚´ìš©ì€ 'Terraform Enterprise Releases v202402-2'ì—ì„œ ì§„í–‰ëœ ë‚´ìš©ì´ë©° 'ìµœì‹  Releases v202406-1'ì—ì„œëŠ” ë”°ë¡œ bind ê²½ë¡œë¥¼ ì¶”ê°€ ì„¤ì •í•˜ì§€ ì•Šì•„ë„ ì˜ ì‹¤í–‰ë¨ì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
</div>
<p>Mounted disk ë°°í¬ ëª¨ë¸ì€, Failover ë˜ëŠ” Active/Active ê¸°ëŠ¥ ì—†ì´ ë‹¨ì¼ ì»´í“¨íŒ… í™˜ê²½ì— Terraform Enterpriseë¥¼ ë°°í¬í•œë‹¤. ë³¸ ê°€ì´ë“œëŠ” Mounted disk ë°°í¬ ëª¨ë¸ì¸ <strong>TFE1</strong>ì„œë²„ì—ì„œ backup ì§„í–‰ ì´í›„, ë™ì¼í•œ Mounted disk ë°°í¬ ëª¨ë¸ <strong>TFE2</strong> ì„œë²„ë¡œ restore ê³¼ì •ì„ ì§„í–‰í•œë‹¤.</p>
<h3>3.1. docker-compose.yaml bind ê²½ë¡œ ì¶”ê°€</h3>
<p><strong>TFE1</strong> ì„œë²„ì—ì„œ Backup ì´í›„ <strong>TFE2</strong> ì„œë²„ì—ì„œ Restore ê³¼ì • ì§„í–‰ ì‹œ state íŒŒì¼ ê²½ë¡œì¸ <strong>/var/lib/terraform-enterprise/aux</strong> í´ë”ê°€ ëˆ„ë½ë˜ëŠ” ì´ìŠˆë¡œ aux ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•´ì¤€ í›„ volumesì— bindë¥¼ ì¶”ê°€í•œë‹¤.<br>
<code>docker-compose.yaml</code> íŒŒì¼ ë³€ê²½ì€ TFE1 ì„œë²„ì™€ TFE2 ì„œë²„ì—ì„œ ë™ì¼í•˜ê²Œ ì§„í–‰í•œë‹¤.<br>
ë‹¨ Restoreí•˜ê³ ì í•˜ëŠ” <strong>TFE2</strong> ì„œë²„ëŠ” Terraform EnterpriseëŠ” application dataê°€ ì—†ëŠ” ìƒíƒœì—ì„œ Restoreê°€ ì§„í–‰ë˜ì–´ì•¼ í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">mkdir</span> ~/aux</span>
<span class="line"></span></code></pre></div><p><code>TFE1 ì„œë²„, TFE2 ì„œë²„ - docker-compose.yaml</code>ì˜ volumes</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">    volumes:</span>
<span class="line">      - type: <span class="token builtin class-name">bind</span></span>
<span class="line">        source: /var/run/docker.sock</span>
<span class="line">        target: /run/docker.sock</span>
<span class="line">      - type: <span class="token builtin class-name">bind</span></span>
<span class="line">        source: ./cert</span>
<span class="line">        target: /etc/ssl/private/terraform-enterprise</span>
<span class="line">      - type: <span class="token builtin class-name">bind</span></span>
<span class="line">        source: ./aux</span>
<span class="line">        target: /var/lib/terraform-enterprise/aux</span>
<span class="line">      - type: volume</span>
<span class="line">        source: terraform-enterprise</span>
<span class="line">        target: /var/lib/terraform-enterprise</span>
<span class="line">      - type: volume</span>
<span class="line">        source: terraform-enterprise-cache</span>
<span class="line">        target: /var/cache/tfe-task-worker/terraform</span>
<span class="line">    extra_hosts:</span>
<span class="line">      - <span class="token string">"&lt;TFE1 HOSTNAME&gt;:&lt;TFE1 IP&gt;"</span></span>
<span class="line">volumes:</span>
<span class="line">  terraform-enterprise:</span>
<span class="line">  terraform-enterprise-cache:</span>
<span class="line"></span></code></pre></div><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker-compose</span> up <span class="token parameter variable">--detach</span></span>
<span class="line"></span></code></pre></div><h3>3.2. aux í´ë” ë‚´ìš© ì „ì†¡</h3>
<p><strong>TFE1</strong> ì„œë²„ì˜ <strong>/home/user/aux/archivist/terraform</strong> ê²½ë¡œë¥¼ í†µí•´ states íŒŒì¼ì´ ë“¤ì–´ê°€ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Restore í•˜ê³ ì í•˜ëŠ” <strong>TFE2</strong> ì„œë²„ì— <strong>TFE1</strong> ì„œë²„ì˜ aux í´ë”ì˜ ë‚´ìš©ì„ ë³µì‚¬í•´ì„œ ë„£ì–´ì¤€ë‹¤.</p>
<p><code>TFE1 ì„œë²„ì—ì„œ ì§„í–‰</code></p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">scp</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-i</span> <span class="token operator">&lt;</span>key.pem<span class="token operator">&gt;</span> ~/aux <span class="token operator">&lt;</span>TFE2 <span class="token environment constant">USER</span><span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>TFE2 IP<span class="token operator">&gt;</span>:/home/user/</span>
<span class="line"></span></code></pre></div><p><code>POST /_backup/api/v1/backup</code></p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">curl</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--header</span> <span class="token string">"Authorization: Bearer &lt;TOKEN&gt;"</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--request</span> POST <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--data</span> @payload.json <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--output</span> backup.blob <span class="token punctuation">\</span></span>
<span class="line">  https://<span class="token operator">&lt;</span>TFE1 <span class="token environment constant">HOSTNAME</span><span class="token operator">&gt;</span>/_backup/api/v1/backup</span>
<span class="line"></span></code></pre></div><ul>
<li><code>--header</code>: ì•ì„  ê³¼ì •ì—ì„œ ì·¨ë“í•œ Token ê°’ ì…ë ¥</li>
<li><code>--data</code>: ì•ì„  ê³¼ì •ì—ì„œ ìƒì„±í•œ <code>.json</code> íŒŒì¼ ì§€ì •</li>
<li><code>--output</code>: Backupëœ ë‚´ìš©ì„ ì¶”ì¶œí•  íŒŒì¼ëª… ì§€ì •</li>
</ul>
<p><strong>TFE1</strong> ì„œë²„ì— backup.blob íŒŒì¼ì´ ìƒì„±ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>
<h3>3.3. Restore</h3>
<p><code>POST /_backup/api/v1/restore</code></p>
<p>Restoreí•˜ê¸° ì „ ë°˜ë“œì‹œ Terraform Enterpriseë¥¼ ìƒˆë¡œ ì„¤ì¹˜í•´ì•¼ í•œë‹¤.(application dataê°€ ìŒ“ì´ì§€ ì•Šì€ ì´ˆê¸° ìƒíƒœì—¬ì•¼ í•œë‹¤.)<br>
Restore í•˜ê³ ì í•˜ëŠ” TFE2 ì„œë²„ì˜ Terraform Enterprise ì„œë¹„ìŠ¤ ì‹œì‘ í›„ TFE1ì—ì„œ Restore curl ì§„í–‰í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">curl</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--header</span> <span class="token string">"Authorization: Bearer &lt;TOKEN&gt;"</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--request</span> POST <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--form</span> <span class="token assign-left variable">config</span><span class="token operator">=</span>@payload.json <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--form</span> <span class="token assign-left variable">snapshot</span><span class="token operator">=</span>@backup.blob <span class="token punctuation">\</span></span>
<span class="line">  https://<span class="token operator">&lt;</span>TFE2 <span class="token environment constant">HOSTNAME</span><span class="token operator">&gt;</span>/_backup/api/v1/restore</span>
<span class="line"></span></code></pre></div><ul>
<li><code>--header</code>: ì•ì„  ê³¼ì •ì—ì„œ ì·¨ë“í•œ Token ê°’ ì…ë ¥</li>
<li><code>--form config</code>: ì•ì„  ê³¼ì •ì—ì„œ ìƒì„±í•œ <code>.json</code> íŒŒì¼ ì§€ì •</li>
<li><code>--form snapshot</code>: Backup ê³¼ì •ì—ì„œ ìƒì„±ëœ <code>.blob</code> íŒŒì¼ ì§€ì •</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>AWS Cognitoë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultì˜ OIDC ì¸ì¦ ì„¤ì •í•˜ê¸°</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/03-Auth_Method/oidc-aws-cognito.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/03-Auth_Method/oidc-aws-cognito.html</guid>
      <source url="https://docmoa.github.io/rss.xml">AWS Cognitoë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultì˜ OIDC ì¸ì¦ ì„¤ì •í•˜ê¸°</source>
      <description>AWS Cognitoë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultì˜ OIDC ì¸ì¦ ì„¤ì •í•˜ê¸°</description>
      <pubDate>Wed, 12 Jun 2024 02:17:33 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>ì†Œê°œ</h2>
<p>ì´ Terraform ì½”ë“œëŠ” AWS Cognitoë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultì˜ OIDC(Authentication Method)ë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤. AWSì˜ ì¸í”„ë¼ ë° ë³´ì•ˆ ì„œë¹„ìŠ¤ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒë“¤ì„ ìœ„í•´ ë§Œë“¤ì–´ì¡Œìœ¼ë©°, AWS Cognitoë¥¼ Identity Provider(IDP)ë¡œ ì‚¬ìš©í•˜ì—¬ Vaultì— ëŒ€í•œ ê°•ë ¥í•œ ì¸ì¦ì„ ì„¤ì •í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.</p>
<h2>AWS Cognito ë° Vault ì„¤ì •</h2>
<p>ì•„ë˜ì˜ Terraform ì½”ë“œëŠ” AWS Cognito ë° Vaultì—ì„œ í•„ìš”í•œ ì„¤ì •ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— ì•„ë˜ì˜ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<h3>ìš”êµ¬ì‚¬í•­</h3>
<ul>
<li>AWS ê³„ì • ë° ì•¡ì„¸ìŠ¤ ê¶Œí•œ</li>
<li>AWS CLI ë° Terraform ì„¤ì¹˜</li>
<li>Vault ì„œë²„ ì•¡ì„¸ìŠ¤ ë° ê´€ë¦¬ ê¶Œí•œ</li>
</ul>
<h3>ì„¤ì • ë°©ë²•</h3>
<ol>
<li><code>env.sh</code> íŒŒì¼ì„ ìƒì„±í•˜ì—¬ Vault ì„œë²„ì˜ ì£¼ì†Œ, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë° í† í°ì„ ì„¤ì •í•©ë‹ˆë‹¤.</li>
</ol>
<ul>
<li>VAULT_ADDR</li>
<li>VAULT_NAMESPACE (ì—”í„°í”„ë¼ì´ì¦ˆ/HCP ì¸ ê²½ìš°)</li>
<li>VAULT_TOKEN</li>
</ul>
<ol start="2">
<li>ì•„ë˜ì˜ Terraform ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ AWS Cognito ë° Vaultë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</li>
<li>Terraformì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ì ìš©í•˜ì—¬ ì„¤ì •ì„ ë°°í¬í•©ë‹ˆë‹¤.</li>
</ol>
<h3>Terraform ì½”ë“œ</h3>
<p><a href="https://github.com/Great-Stone/terraform-vault-oidc-aws-cognito" target="_blank" rel="noopener noreferrer">https://github.com/Great-Stone/terraform-vault-oidc-aws-cognito</a></p>
<h3>ì½”ë“œ ì„¤ëª…</h3>
<ul>
<li><code>aws_cognito_user_pool</code>: Vault ì¸ì¦ì— ì‚¬ìš©ë  AWS Cognito ì‚¬ìš©ì í’€ì„ ìƒì„±í•©ë‹ˆë‹¤.</li>
<li><code>aws_cognito_user_pool_client</code>: Vaultì— ëŒ€í•œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•˜ê³  í•„ìš”í•œ OAuth í”Œë¡œìš°, ìŠ¤ì½”í”„ ë° ì½œë°± URLì„ ì„¤ì •í•©ë‹ˆë‹¤.</li>
<li><code>aws_cognito_user_pool_domain</code>: ì‚¬ìš©ì í’€ì— ëŒ€í•œ ë„ë©”ì¸ì„ ìƒì„±í•©ë‹ˆë‹¤.</li>
<li><code>aws_cognito_user</code>: AWS Cognitoì— ì‚¬ìš©ìë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</li>
<li><code>vault_jwt_auth_backend</code>: Vaultì—ì„œ OIDC(Authentication Method) ë°±ì—”ë“œë¥¼ ì„¤ì •í•˜ì—¬ AWS Cognitoë¥¼ IDPë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.</li>
<li><code>vault_policy</code>: Vaultì—ì„œ ì‚¬ìš©ë  ì •ì±…ì„ ì„¤ì •í•©ë‹ˆë‹¤.</li>
<li><code>vault_jwt_auth_backend_role</code>: Vaultì—ì„œ OIDC(Authentication Method) ì—­í• ì„ ì„¤ì •í•˜ì—¬ AWS Cognitoë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.</li>
</ul>
<h3>ì°¸ê³ ì‚¬í•­</h3>
<ul>
<li>ì½”ë“œë¥¼ ì ìš©í•˜ê¸° ì „ì— Terraform ì´ˆê¸°í™” ë° ê³„íš ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.</li>
<li>ì½”ë“œë¥¼ ì ìš©í•˜ê¸° ì „ì— <code>env.sh</code> íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ Vault ì„œë²„ì˜ ì£¼ì†Œ, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë° í† í°ì„ ì„¤ì •í•©ë‹ˆë‹¤.</li>
<li>ì½”ë“œë¥¼ ì ìš©í•˜ê¸° ì „ì— AWS Cognito ì‚¬ìš©ì í’€ ë° í´ë¼ì´ì–¸íŠ¸ ì„¤ì •ì„ í™•ì¸í•©ë‹ˆë‹¤.</li>
<li>ì½”ë“œë¥¼ ì ìš©í•œ í›„ì—ëŠ” Vault ë° AWS Cognitoì—ì„œ ì„¤ì •ì„ í™•ì¸í•˜ê³  í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</li>
</ul>
<h2>AWS Cognitoë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì˜ ì¥ì </h2>
<ul>
<li><strong>í†µí•©ëœ ë³´ì•ˆ</strong>: AWS Cognitoë¥¼ ì‚¬ìš©í•˜ì—¬ Vaultì— ëŒ€í•œ ê°•ë ¥í•œ ì¸ì¦ì„ ì„¤ì •í•˜ë©´ AWS ê³„ì •ì˜ ì‚¬ìš©ì ë° ê·¸ë£¹ ê´€ë¦¬ ì‹œìŠ¤í…œê³¼ ì—°ë™ë˜ë¯€ë¡œ ë³´ì•ˆì„ ê°•í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li><strong>ì‚¬ìš©ì ê´€ë¦¬ ê°„ì†Œí™”</strong>: AWS Cognitoì˜ ì‚¬ìš©ì ê´€ë¦¬ ë° ì¸ì¦ ì‹œìŠ¤í…œì„ í†µí•´ ì‚¬ìš©ì ê´€ë¦¬ë¥¼ ê°„ì†Œí™”í•˜ê³  ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li><strong>ê´€ë¦¬ ìš©ì´ì„±</strong>: AWSì—ì„œ í˜¸ìŠ¤íŒ…ë˜ëŠ” Cognito ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ë¦¬ ë° ìš´ì˜ì„ ê°„ì†Œí™”í•˜ê³  AWSì˜ ë‹¤ì–‘í•œ ë³´ì•ˆ ê¸°ëŠ¥ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<h2>Vault ì¸ì¦ ìŠ¤í¬ë¦°ìƒ·</h2>
<figure><figcaption></figcaption></figure>
<ul>
<li>Type: OIDC</li>
<li>Path: cognito</li>
</ul>
<figure><figcaption></figcaption></figure>
<figure><figcaption></figcaption></figure>
<ul>
<li>Check the <code>sub</code> ID</li>
</ul>
<figure><figcaption></figcaption></figure>
<ul>
<li>Vault entity alias ID mapped to OIDC sub ID</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>ë°ì´í„° ìµëª…í™”ë¥¼ ìœ„í•œ íŒŒì´í”„ë¼ì¸</title>
      <link>https://docmoa.github.io/06-etc/book-memo/building-an-anonymization-pipeline.html</link>
      <guid>https://docmoa.github.io/06-etc/book-memo/building-an-anonymization-pipeline.html</guid>
      <source url="https://docmoa.github.io/rss.xml">ë°ì´í„° ìµëª…í™”ë¥¼ ìœ„í•œ íŒŒì´í”„ë¼ì¸</source>
      <description>ë°ì´í„° ìµëª…í™”ë¥¼ ìœ„í•œ íŒŒì´í”„ë¼ì¸ - ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê³  ì±…ì„ê° ìˆê²Œ ì‚¬ìš©í•˜ëŠ” ë¹„ì‹ë³„í™” ë°©ë²•</description>
      <pubDate>Thu, 09 May 2024 13:31:07 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>ì±… ì •ë³´</h2>
<blockquote>
<ul>
<li>ì €ì : ë£¨í¬ ì•„ë²„í´ , ì¹¼ë¦¬ë“œ ì—˜ ì—ë§˜</li>
<li>ì—­ì : ì´ì°½í˜„</li>
<li>ì¶œê°„ì¼ : 2022-04-11</li>
<li>í˜ì´ì§€ : 164ìª½</li>
<li>ì¶œíŒì‚¬ ë§í¬ : <a href="https://m.hanbit.co.kr/store/books/book_view.html?p_code=B7550382130" target="_blank" rel="noopener noreferrer">https://m.hanbit.co.kr/store/books/book_view.html?p_code=B7550382130</a></li>
<li>ì±…ì†Œê°œ : ê¼­ê¼­ ìˆ¨ê²¨ë¼ ê°œì¸ ì •ë³´ ë³´ì¼ë¼! ë°ì´í„° ì†ì—ëŠ” ìœ ìš©í•˜ë©´ì„œë„ ì˜ë¯¸ ìˆëŠ” ì •ë³´ê°€ ë„˜ì³ë‚˜ì§€ë§Œ, ì‚¬ìš©ì— ì•ì„œ ê°œì¸ ì •ë³´ ë³´í˜¸ê°€ ì„ í–‰ë˜ì–´ì•¼ í•œë‹¤. ì´ ì±…ì€ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ê³  ìµëª…í™” í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬ì¶•í•˜ëŠ” ê³¼ì •ì„ ì„¤ëª…í•œë‹¤. ì•ˆì „í•œ ìµëª…í™” í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ë°ì´í„°ì˜ íë¦„ì„ ì´í•´í•˜ê³  ê·¸ ê³¼ì •ì„ ë¶„ì„ íƒêµ¬í•œë‹¤. ë˜í•œ ë‹¤ë£¨ê¸° ê¹Œë‹¤ë¡œìš´ ì˜ë£Œ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì„ í•´ê²°í•˜ëŠ” ì‚¬ìš© ì‚¬ë¡€ë¥¼ í•™ìŠµí•˜ê³ , ê°ì¢… ì¥ì¹˜ì™€ IoTê°€ ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ìµëª…í™” ì†”ë£¨ì…˜ì„ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì‚´í´ë³¸ë‹¤.<br>
</li>
</ul>
</blockquote>
<h2>ì˜®ê¸´ì´ì˜ ë§</h2>
<p>ë„˜ì³ë‚˜ëŠ” ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ìš´ìš©í•˜ëŠ” ìµëª…í™” ì „ëµ</p>
<p>AI ë¶„ì•¼ë¥¼ ì—°êµ¬í•˜ëŠ” ê°€ìš´ë° ë‹¤ëŸ‰ì˜ ë°ì´í„°ë¥¼ ë‹¤ë£¨ê²Œ ë˜ë©´ ë°ì´í„° í™œìš©ê³¼ ê°œì¸ ì •ë³´ ë³´í˜¸ ê¸°ìˆ ì— ëŒ€í•œ ê´€ì‹¬ì´ ë†’ì•„ì§€ê²Œ ëœë‹¤. íŠ¹íˆ ì €ëŠ” ì˜ë£Œ AI í”Œë«í¼ì„ ê°œë°œí•˜ë©´ì„œ ê¸°ìˆ  ì—°êµ¬ì™€ ë”ë¶ˆì–´ ë°ì´í„° ì œê³µì„ í†µí•´ ê°œì¸ ì‹ë³„í™”ì— ëŒ€í•œ ìš°ë ¤ì™€ ë°ì´í„° ìµëª…í™” ë°©ë²•, ì‚¬íšŒì  ë²•ë¥ ê³¼ ê·œì • ë“±ì„ ê³ ë ¤í•˜ì§€ ì•Šì„ ìˆ˜ ì—†ë‹¤.</p>
<p>ì´ ì±…ì€ ì „ë°˜ì ìœ¼ë¡œ ê°œì¸ ì •ë³´ë¥¼ ë³´í˜¸í•˜ëŠ” ê´€ì ì—ì„œ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ í™œìš©í• ì§€ ì²´ê³„ì ì´ê³  ì‹¤ìš©ì ìœ¼ë¡œ ì„¤ëª…í•˜ê³  ìˆë‹¤. ë¨¼ì € ë°ì´í„°ì—ì„œ ê°œì¸ ì •ë³´ì˜ ë…¸ì¶œ ìœ„í—˜ì— ëŒ€í•œ ê°€ëŠ¥ì„±ì„ ì œê¸°í•˜ê³  ì´ì— ëŒ€í•œ ì‹¤ì œì ì¸ ìœ„í—˜ ê´€ë¦¬ í”„ë ˆì„ì›Œí¬ë¥¼ í™œìš©í•œë‹¤. ê·¸ë¦¬ê³  ì‹ë³„ëœ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ ë°ì´í„° ìµëª…í™” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•˜ê³  ìˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ë°ì´í„° ì‚¬ìš©ì— ìˆì–´ ì•ˆì •ì„± í™•ë³´ì— ëŒ€í•œ ì›ì¹™ê³¼ ê¸°ìˆ ì  ê³¼ì œë¥¼ ì œì‹œí•˜ê³  ìˆë‹¤.</p>
<h2>ì •ë¶€ ê°€ì´ë“œë¼ì¸</h2>
<p><a href="https://www.korea.kr/archive/expDocView.do?docId=37095" target="_blank" rel="noopener noreferrer">https://www.korea.kr/archive/expDocView.do?docId=37095</a></p>
<h3>ì·¨ì§€</h3>
<ul>
<li>ê°œì¸ì •ë³´ ìœ ì¶œ ì‚¬ê³ ë¡œ ì¸í•œ ê°œì¸ì •ë³´ ë³´í˜¸ ì •ì±… ê°•í™” ì·¨ì§€</li>
<li>ë°ì´í„° í™œìš©ì„ í•„ìš”ë¡œí•˜ëŠ” ìƒˆë¡œìš´ ì‚°ì—…ê³¼ ê¸°ìˆ ë°œì „ìœ¼ë¡œ ê°œì¸ì •ë³´ ì¹¨í•´ ìœ„í—˜ë„ ì¦ê°€ ì¶”ì„¸</li>
</ul>
<h3>ë‹¨ê³„</h3>
<ol>
<li>ì‚¬ì „ ê²€í†  : ê°œì¸ì •ë³´ ì—¬ë¶€ íŒë‹¨</li>
<li>ë¹„ì‹ë³„ ì¡°ì¹˜ : ê°œì¸ì„ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ìš”ì†Œë¥¼ ì „ë¶€ ë˜ëŠ” ì¼ë¶€ ì‚­ì œí•˜ê±°ë‚˜ ëŒ€ì²´</li>
<li>ì ì •ì„± í‰ê°€ : ë‹¤ë¥¸ ì •ë³´ì™€ ì‰½ê²Œ ê²°í•©í•˜ì—¬ ê°œì¸ì„ ì‹ë³„í•  ìˆ˜ ìˆëŠ”ì§€ í‰ê°€</li>
<li>ì‚¬í›„ ê´€ë¦¬ : ë¹„ì‹ë³„ ì •ë³´ ì•ˆì „ì¡°ì¹˜, ì¬ì‹ë³„ ê°€ëŠ¥ì„± ëª¨ë‹ˆí„°ë§ë“± ë¹„ì‹ë³„ ì •ë³´ í™œìš© ê³¼ì •ì—ì„œ ì¬ì‹ë³„ ë°©ì§€ë¥¼ ìœ„í•œ ì¡°ì¹˜ ìˆ˜í–‰</li>
</ol>
<h3>ë‹¨ê³„ë³„ ì¡°ì¹˜ ê¸°ì¤€</h3>
<h4>ì‚¬ì „ ê²€í†  ë‹¨ê³„</h4>
<ul>
<li>ê°œì¸ì •ë³´ë€ : ì‚´ì•„ìˆëŠ” ê°œì¸ì— ê´€í•œ ì •ë³´ë¡œ ê°œì¸ì„ ì•Œìˆ˜ ìˆëŠ” ì •ë³´ì´ë©°, í•´ë‹¹ ì •ë³´ë¡œ íŠ¹ì • ê°œì¸ì„ ì•Œì•„ë³¼ ìˆ˜ ì—†ë”ë¼ë„ ë‹¤ë¥¸ ì •ë³´ì™€ ì‰½ê²Œ ê²°í•©í•˜ì—¬ ì•Œì•„ë³¼ ìˆ˜ ìˆëŠ” ì •ë³´ë¥¼ í¬í•¨</li>
</ul>
<h4>ë¹„ì‹ë³„ ì¡°ì¹˜ ë‹¨ê³„</h4>
<ul>
<li>
<p>ì‹ë³„ì ì¡°ì¹˜ ê¸°ì¤€ : ì›ì¹™ì ìœ¼ë¡œ ì‚­ì œ ì¡°ì¹˜, ë°ì´í„° ì´ìš© ëª©ì ìƒ ë°˜ë“œì‹œ í•„ìš”í•œ ì‹ë³„ìëŠ” ë¹„ì‹ë³„ ì¡°ì¹˜ í›„ í™œìš©</p>
</li>
<li>
<p>ì‹ë³„ì ëŒ€ìƒ ì˜ˆì‹œ (ë¯¸êµ­ HIPAA í”„ë¼ì´ë²„ì‹œ ê·œì¹™ ì°¸ê³ )</p>
<ul>
<li>ê³ ìœ ì‹ë³„ì •ë³´(ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸, ì—¬ê¶Œë²ˆí˜¸, ì™¸êµ­ì¸ë“±ë¡ë²ˆí˜¸, ìš´ì „ë©´í—ˆë²ˆí˜¸)</li>
<li>ì„±ëª…(í•œì, ì˜ë¬¸, í•„ëª… í¬í•¨)</li>
<li>ìƒì„¸ ì£¼ì†Œ(êµ¬ ë‹¨ìœ„ ë¯¸ë§Œê¹Œì§€ í¬í•¨ëœ ì£¼ì†Œ)</li>
<li>ë‚ ì§œ ì •ë³´(ìƒì¼, ê¸°ë…ì¼, ìê²©ì¦ ì·¨ë“ì¼ ë“±)</li>
<li>ì „í™”ë²ˆí˜¸(íœ´ëŒ€ì „í™”ë²ˆí˜¸, ì§‘ì „í™”, íšŒì‚¬ì „í™”, íŒ©ìŠ¤ë²ˆí˜¸)</li>
<li>ì˜ë£Œê¸°ë¡ë²ˆí˜¸, ê±´ê°•ë³´í—˜ë²ˆí˜¸, ë³µì§€ ìˆ˜ê¸‰ì ë²ˆí˜¸</li>
<li>í†µì¥ ê³„ì¢Œë²ˆí˜¸, ì‹ ìš©ì¹´ë“œ ë²ˆí˜¸</li>
<li>ê°ì¢… ìê²©ì¦ ë° ë©´í—ˆ ë²ˆí˜¸</li>
<li>ìë™ì°¨ ë²ˆí˜¸, ê°ì¢… ê¸°ê¸°ì˜ ë“±ë¡ë²ˆí˜¸ &amp; ì¼ë ¨ë²ˆí˜¸</li>
<li>ì‚¬ì§„(ì •ì§€ì‚¬ì§„, ë™ì˜ìƒ, CCTV ì˜ìƒ ë“±)</li>
<li>ì‹ ì²´ ì‹ë³„ì •ë³´(ì§€ë¬¸, ìŒì„±, í™ì±„ ë“±)</li>
<li>ì´ë©”ì¼ ì£¼ì†Œ, IP ì£¼ì†Œ, Mac ì£¼ì†Œ, í™ˆí˜ì´ì§€ URL ë“±</li>
<li>ì‹ë³„ì½”ë“œ(ì•„ì´ë””, ì‚¬ì›ë²ˆí˜¸, ê³ ê°ë²ˆí˜¸ ë“±)</li>
<li>ê¸°ì¹´ ìœ ì¼ ì‹ë³„ë²ˆí˜¸ : êµ°ë²ˆ, ê°œì¸ì‚¬ì—…ì ì‚¬ì—…ì ë“±ë¡ë²ˆí˜¸ ë“±</li>
</ul>
</li>
<li>
<p>ì†ì„±ì ì¡°ì¹˜ ê¸°ì¤€ : ì •ë³´ì§‘í•©ë¬¼ì— í¬í•¨ëœ ì†ì„±ìë„ ë°ì´í„° ì´ìš© ëª©ì ê³¼ ê´€ë ¨ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” ì›ì¹™ì ìœ¼ë¡œ ì‚­ì œ ì¡°ì¹˜, ë°ì´í„° ì´ìš© ëª©ì ê³¼ ê´€ë ¨ì´ ì‡ëŠ” ì†ì„±ì ì¤‘ ì‹ë³„ìš”ì†Œê°€ ìˆëŠ” ê²½ìš°ì—ëŠ” ê°€ëª…/ì´ê³„ì²˜ë¦¬ ë“±ì˜ ê¸°ë²•ì„ í™œìš©í•˜ì—¬ ë¹„ì‹ë³„ ì¡°ì¹˜</p>
</li>
<li>
<p>ì†ì„±ì : ê°œì¸ê³¼ ê´€ë ¨ëœ ì •ë³´ë¡œì„œ ë‹¤ë¥¸ ì •ë³´ì™€ ê²°í•©ë˜ëŠ” ê²½ìš° ì‰½ê²Œ íŠ¹ì • ê°œì¸ì„ ì•Œì•„ë³¼ ìˆ˜ë„ ìˆëŠ” ì •ë³´, í¬ê·€ë³‘ëª…ê³¼ í¬ê·€ê²½ë ¥ ë“±ì˜ ì†ì„±ìëŠ” êµ¬ì²´ì ì¸ ìƒí™©ì— ë”°ë¼ ê°œì¸ì‹ë³„ ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ìœ¼ë¯€ë¡œ ì—„ê²©í•œ ë¹„ì‹ë³„ ì¡°ì¹˜ í•„ìš”</p>
</li>
<li>
<p>ì†ì„±ì ëŒ€ìƒ ì˜ˆì‹œ</p>
<ul>
<li>ê°œì¸ íŠ¹ì„±
<ul>
<li>ì„±ë³„, ì—°ë ¹, êµ­ì •, ê³ í–¥, ì‹œ/êµ°/êµ¬ëª…, ìš°í¸ë²ˆí˜¸, ë³‘ì—­ì—¬ë¶€, ê²°í˜¼ì—¬ë¶€, ì¢…êµ, ì·¨ë¯¸, ë™í˜¸íšŒ, í´ëŸ½ ë“±</li>
<li>í¡ì—°ì—¬ë¶€, ìŒì£¼ì—¬ë¶€, ì±„ì‹ì—¬ë¶€, ê´€ì‹¬ì‚¬í•­ ë“±</li>
</ul>
</li>
<li>ì‹ ì²´ íŠ¹ì„±
<ul>
<li>í˜ˆì•¡í˜•, ì‹ ì¥, ëª¸ë¬´ê²Œ, í—ˆë¦¬ë‘˜ë ˆ, í˜ˆì••, ëˆˆë™ì ìƒ‰ê¹” ë“±</li>
<li>ì‹ ì²´ê²€ì‚¬ ê²°ê³¼, ì¥ì• ìœ í˜•, ì¥ì• ë“±ê¸‰ ë“±</li>
<li>ë³‘ëª…, ìƒë³‘ì½”ë“œ, íˆ¬ì•½ì½”ë“œ, ì§„ë£Œë‚´ì—­ ë“±</li>
</ul>
</li>
<li>ì‹ ìš© íŠ¹ì„±
<ul>
<li>ì„¸ê¸ˆ ë‚©ë¶€ì•¡, ì‹ ìš©ë“±ê¸‰, ê¸°ë¶€ê¸ˆ ë“±</li>
<li>ê±´ê°•ë³´í—˜ë£Œ ë‚©ë¶€ì•¡, ì†Œë“ë¶„ìœ„, ì˜ë£Œ ê¸‰ì—¬ì ë“±</li>
</ul>
</li>
<li>ê²½ë ¥ íŠ¹ì„±
<ul>
<li>í•™êµëª…, í•™ê³¼ëª…, í•™ë…„, ì„±ì , í•™ë ¥ ë“±</li>
<li>ê²½ë ¥, ì§ì—…, ì§ì¢…, ì§ì¥ëª…, ë¶€ì„œëª…, ì§ê¸ˆ, ì „ì§ì¥ëª… ë“±</li>
</ul>
</li>
<li>ì „ìì  íŠ¹ì„±
<ul>
<li>ì¿ í‚¤ì •ë³´, ì ‘ì†ì¼ì‹œ, ë°©ë¬¸ì¼ì‹œ, ì„œë¹„ìŠ¤ ì´ìš© ê¸°ë¡, ì ‘ì†ë¡œê·¸ ë“±</li>
<li>ì¸í„°ë„· ì ‘ì†ê¸°ë¡, íœ´ëŒ€ì „í™” ì‚¬ìš©ê¸°ë¡, GPS ë°ì´í„° ë“±</li>
</ul>
</li>
<li>ê°€ì¡± íŠ¹ì„±
<ul>
<li>ë°°ìš°ì, ìë…€, ë¶€ëª¨, í˜•ì œ ë“± ê°€ì¡± ì •ë³´, ë²•ì •ëŒ€ë¦¬ì¸ ì •ë³´ ë“±</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>ë¹„ì‹ë³„ ì¡°ì¹˜ ë°©ë²•</h2>
<p>ê°€ëª…ì²˜ë¦¬, ì´ê³„ì²˜ë¦¬, ë°ì´í„° ì‚­ì œ, ë°ì´í„° ë²”ì£¼í™”, ë°ì´í„° ë§ˆìŠ¤í‚¹ ë“±ì˜ ê¸°ë²•ì„ ë‹¨ë… ë˜ëŠ” ë³µí•©ì ìœ¼ë¡œ í™œìš©</p>
<h3>ë¹„ì‹ë³„ ì²˜ë¦¬ ê¸°ë²• ì˜ˆì‹œ</h3>
<p>| ì²˜ë¦¬ê¸°ë²•      | ì˜ˆì‹œ                                                         | ì„¸ë¶€ê¸°ìˆ                                                   |<br>
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>Failed to start (failed to create nomad cgroup memory)</title>
      <link>https://docmoa.github.io/04-HashiCorp/07-Nomad/03-TroubleShooting/failed-to-create-nomad-cgroup-memory.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/07-Nomad/03-TroubleShooting/failed-to-create-nomad-cgroup-memory.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Failed to start (failed to create nomad cgroup memory)</source>
      <description>failed to create nomad cgroup memory</description>
      <pubDate>Thu, 25 Apr 2024 10:38:17 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ì˜¤ë¥˜ ë©”ì‹œì§€ëŠ” íŒŒì¼ ì‹œìŠ¤í…œì´ ì½ê¸° ì „ìš©ìœ¼ë¡œ ë§ˆìš´íŠ¸ëœ Linux ì‹œìŠ¤í…œì—ì„œ <code>cgroup</code>ì„ ìˆ˜ì •í•˜ë ¤ê³  í•  ë•Œ ë¬¸ì œê°€ ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ ë¬¸ì œëŠ” ì»¨í…Œì´ë„ˆ ë° ì»¨í…Œì´ë„ˆí™”ë˜ì§€ ì•Šì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜í•˜ëŠ” í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ì ë° ìŠ¤ì¼€ì¤„ëŸ¬ì¸ Nomadê°€ ê´€ë¦¬í•˜ëŠ” í™˜ê²½ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2>Error log</h2>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token date number">Apr 25</span> <span class="token time number">11:27:31</span> raspberrypi nomad<span class="token punctuation">[</span><span class="token number">20120</span><span class="token punctuation">]</span><span class="token operator">:</span>     <span class="token date number">2024-04-25T</span><span class="token time number">11:27:31.007+0100</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span>  <span class="token property">client.proclib.cg1:</span> <span class="token property">initializing nomad cgroups:</span> cores<span class="token operator">=</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">3</span></span>
<span class="line"><span class="token date number">Apr 25</span> <span class="token time number">11:27:31</span> raspberrypi nomad<span class="token punctuation">[</span><span class="token number">20120</span><span class="token punctuation">]</span><span class="token operator">:</span>     <span class="token date number">2024-04-25T</span><span class="token time number">11:27:31.008+0100</span> <span class="token punctuation">[</span><span class="token level error important">ERROR</span><span class="token punctuation">]</span> <span class="token property">agent:</span> <span class="token property">error starting agent:</span> error<span class="token operator">=</span><span class="token string">"client setup failed: failed to initialize process manager: failed to create nomad cgroup memory: mkdir /sys/fs/cgroup/memory: read-only file system"</span></span>
<span class="line"><span class="token date number">Apr 25</span> <span class="token time number">11:27:31</span> raspberrypi systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">:</span> nomad<span class="token punctuation">.</span>service<span class="token operator">:</span> Service RestartSec<span class="token operator">=</span><span class="token number">100ms</span> expired<span class="token punctuation">,</span> scheduling restart<span class="token punctuation">.</span></span>
<span class="line"></span></code></pre></div><h2>Check Filesystem Mount Options</h2>
<p>íŒŒì¼ ì‹œìŠ¤í…œì´ ì½ê¸° ì „ìš©ìœ¼ë¡œ ë§ˆìš´íŠ¸ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ë§ˆìš´íŠ¸ ë˜ëŠ” findmnt ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë§ˆìš´íŠ¸ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">mount</span> <span class="token operator">|</span> <span class="token function">grep</span> cgroup</span>
<span class="line"></span></code></pre></div><div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token operator">#</span>Current cgroup</span>
<span class="line">tmpfs on <span class="token file-path string">/sys/fs/cgroup</span> type tmpfs <span class="token operator">(</span>ro<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token number">755</span><span class="token operator">)</span></span>
<span class="line">cgroup2 on <span class="token file-path string">/sys/fs/cgroup/unified</span> type cgroup2 <span class="token operator">(</span>rw<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>relatime<span class="token punctuation">,</span>nsdelegate<span class="token operator">)</span></span>
<span class="line">cgroup on <span class="token file-path string">/sys/fs/cgroup/systemd</span> type cgroup <span class="token operator">(</span>rw<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>relatime<span class="token punctuation">,</span>xattr<span class="token punctuation">,</span>name<span class="token operator">=</span>systemd<span class="token operator">)</span></span>
<span class="line">cgroup on <span class="token file-path string">/sys/fs/cgroup/devices</span> type cgroup <span class="token operator">(</span>rw<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>relatime<span class="token punctuation">,</span>devices<span class="token operator">)</span></span>
<span class="line">cgroup on <span class="token file-path string">/sys/fs/cgroup/net_cls</span><span class="token punctuation">,</span>net_prio type cgroup <span class="token operator">(</span>rw<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>relatime<span class="token punctuation">,</span>net_cls<span class="token punctuation">,</span>net_prio<span class="token operator">)</span></span>
<span class="line">cgroup on <span class="token file-path string">/sys/fs/cgroup/cpu</span><span class="token punctuation">,</span>cpuacct type cgroup <span class="token operator">(</span>rw<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>relatime<span class="token punctuation">,</span>cpu<span class="token punctuation">,</span>cpuacct<span class="token operator">)</span></span>
<span class="line">cgroup on <span class="token file-path string">/sys/fs/cgroup/pids</span> type cgroup <span class="token operator">(</span>rw<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>relatime<span class="token punctuation">,</span>pids<span class="token operator">)</span></span>
<span class="line">cgroup on <span class="token file-path string">/sys/fs/cgroup/freezer</span> type cgroup <span class="token operator">(</span>rw<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>relatime<span class="token punctuation">,</span>freezer<span class="token operator">)</span></span>
<span class="line">cgroup on <span class="token file-path string">/sys/fs/cgroup/cpuset</span> type cgroup <span class="token operator">(</span>rw<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>relatime<span class="token punctuation">,</span>cpuset<span class="token operator">)</span></span>
<span class="line">cgroup on <span class="token file-path string">/sys/fs/cgroup/blkio</span> type cgroup <span class="token operator">(</span>rw<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>relatime<span class="token punctuation">,</span>blkio<span class="token operator">)</span></span>
<span class="line">cgroup on <span class="token file-path string">/sys/fs/cgroup/perf_event</span> type cgroup <span class="token operator">(</span>rw<span class="token punctuation">,</span>nosuid<span class="token punctuation">,</span>nodev<span class="token punctuation">,</span>noexec<span class="token punctuation">,</span>relatime<span class="token punctuation">,</span>perf_event<span class="token operator">)</span></span>
<span class="line"></span></code></pre></div><h2>Add read-write to cgroup</h2>
<p><code>ro</code>ì˜µì…˜ì„ ì°¾ìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ì½ê¸° ì „ìš©ì¸ <code>ro</code>(Read-Only)ìœ¼ë¡œ ë§ˆìš´íŠ¸ëœ ê²½ìš° ê°€ëŠ¥í•˜ë©´ <code>rw</code>(Read-Write : ì½ê¸°-ì“°ê¸°)ë¡œ ë§ˆìš´íŠ¸ í•´ì•¼ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">sudo</span> <span class="token function">mount</span> <span class="token parameter variable">-o</span> remount,rw /sys/fs/cgroup</span>
<span class="line"></span></code></pre></div><h2>Verify Kernel Support and Parameters</h2>
<p>ì»¤ë„ì´ cgroupsë¥¼ ì§€ì›í•˜ê³  í•„ìš”í•œ ëª¨ë“  cgroup í•˜ìœ„ ì‹œìŠ¤í…œì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. cgroupsì™€ ê´€ë ¨ëœ ì»¤ë„ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¡°ì •í•˜ê±°ë‚˜ í™œì„±í™”í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ ì„¤ì •ì„ í™•ì¸í•©ë‹ˆë‹¤:</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">cat</span> /proc/cgroups</span>
<span class="line"></span></code></pre></div><div class="language-ini" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="line"><span class="token comment">#subsys_name    hierarchy       num_cgroups     enabled</span></span>
<span class="line">cpuset  7       6       1</span>
<span class="line">cpu     4       77      1</span>
<span class="line">cpuacct 4       77      1</span>
<span class="line">blkio   8       76      1</span>
<span class="line">memory  0       85      0</span>
<span class="line">devices 2       76      1</span>
<span class="line">freezer 6       2       1</span>
<span class="line">net_cls 3       1       1</span>
<span class="line">perf_event      9       1       1</span>
<span class="line">net_prio        3       1       1</span>
<span class="line">pids    5       83      1</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>DevOps Korea ì¢Œë‹´íšŒ 2024.4.15.</title>
      <link>https://docmoa.github.io/06-etc/class/devops-discussion-20240415.html</link>
      <guid>https://docmoa.github.io/06-etc/class/devops-discussion-20240415.html</guid>
      <source url="https://docmoa.github.io/rss.xml">DevOps Korea ì¢Œë‹´íšŒ 2024.4.15.</source>
      <description>DevOps Korea ì¢Œë‹´íšŒ - DevXOpsë¡œì˜ í™•ì¥ì— ë”°ë¥¸ ì´í•´ì™€ í† ë¡ </description>
      <pubDate>Wed, 17 Apr 2024 06:28:05 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/Monosnap Image 2024-04-17 11-15-58.png" alt="ë‹¹ê·¼ë§ˆì¼“&amp;ë‹¹ê·¼ì´" tabindex="0" loading="lazy"><figcaption>ë‹¹ê·¼ë§ˆì¼“&amp;ë‹¹ê·¼ì´</figcaption></figure>
<h1>DevOps Korea ì¢Œë‹´íšŒ 2024.4.15.</h1>
<ul>
<li>
<p>ì¼ì‹œ : 2024ë…„ 4ì›” 15ì¼ (ì›”) 19:00</p>
</li>
<li>
<p>ì•ˆë‚´ :</p>
<ul>
<li>Facebook : <a href="https://www.facebook.com/groups/TeAnE/permalink/3019729564829401/" target="_blank" rel="noopener noreferrer">DevOps Korea</a> - DevXOpsë¡œì˜ í™•ì¥ì— ë”°ë¥¸ ì´í•´ì™€ í† ë¡ </li>
<li>GitHub : <a href="https://github.com/ralfyang/DevOps_Korea_sitting_talking/tree/main/20240415" target="_blank" rel="noopener noreferrer">https://github.com/ralfyang/DevOps_Korea_sitting_talking/tree/main/20240415</a></li>
</ul>
</li>
<li>
<p>ì¥ì†Œ : êµë³´íƒ€ì›Œ - ë‹¹ê·¼ë§ˆì¼“</p>
</li>
<li>
<p>ì£¼ìš” ì•„ì  ë‹¤</p>
<ul>
<li>DevXOpsë€?</li>
<li>DevOps engineering ì—­í• ì˜ í™•ì¥</li>
<li>ê°œë°œ/ê²€ì¦/ìš´ì˜ì— ê´€ë ¨í•œ ìë™í™” ì˜ì—­ì˜ í™•ì¥</li>
<li>ê¸°ìˆ  ë°©ë²•ë¡ ì„ ë„˜ì–´ ì‚°ì—…ì˜ Needsë¡œì˜ í™•ì¥ â†’ XXOps</li>
</ul>
</li>
</ul>
<h2>ğŸš€ DevOpsë¥¼ í•œë‹¤ëŠ” ê²ƒì€?</h2>
<h3>ğŸ¤ğŸ» ë‚´ë¶€ ê³ ê°ì˜ ë§Œì¡±</h3>
<blockquote>
<p>A: DevOpsëŠ” "ì¡ë¶€" ì£ .</p>
<p>B: ê·¸ë˜ì„œ ì €ëŠ” "ìŠ¤í‹°ë¸Œ ì¡ë¶€"ë¼ê³  ë§í•©ë‹ˆë‹¤.</p>
</blockquote>
<p>DevOpsê°€ ì§€í–¥í•˜ê±°ë‚˜, ê·¸ íš¨ê³¼ê°€ ë¬´ì—‡ì´ëƒê³  ë¬»ëŠ”ë‹¤ë©´ ìš”êµ¬í•˜ëŠ” 'ë‚´ë¶€ ê³ ê°'ì˜ ìš”êµ¬ì‚¬í•­ì„ ëŒ€ì‘í•˜ëŠ” í™œë™ì— ëŒ€í•œ ì „ë‹¬ì´ ë¹¨ë¼ì§€ëŠ” ê²ƒ ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ìµœì¢…ì ìœ¼ë¡œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ë§ë‹¿ì€ ìš”êµ¬ì‚¬í•­ì˜ ì „ë‹¬ì´ ë¹¨ë¼ì§€ëŠ” ê²ƒì„ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤.</p>
<h3>âš™ï¸ XXOps</h3>
<p>DevOps, BizOps, AIOps, DevSecOps ë“± ìˆ˜ë§ì€ XXOps ìš©ì–´ë“¤ì´ ìˆë‹¤. íŠ¹ì´í•œê±´ ëª¨ë‘ Opsë¡œ ëë‚œë‹¤ëŠ” ì ì´ë‹¤. <code>DevOps</code>ê°€ ê°œë°œ(Development)ê³¼ ìš´ì˜(Operations)ì˜ í•©ì„±ì–´ë¼ê³  í•˜ì§€ë§Œ <code>Ops</code>ê°€ ê¸°ì¡´ì— ìš°ë¦¬ê°€ ì•Œë˜ ê·¸ ìš´ì˜ì€ ì•„ë‹Œê²ƒ ê°™ë‹¤. ìš”êµ¬ì‚¬í•­ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ë¼ëŠ” í‘œí˜„ í•˜ì—, <code>XXOps</code>ëŠ” ê·¸ XXë¥¼ ìœ„í•œ ì—”ì§€ë‹ˆì–´ë§ì— ê°€ê¹ë‹¤ê³  ë³´ì—¬ì§„ë‹¤. XXì˜ ìš”êµ¬ì‚¬í•­ì„ ì‹¤í–‰í•˜ëŠ” í–‰ìœ„ ë˜ëŠ” ì¡°ì§ ê°™ì€ ì„¤ëª…ì— ë” ê°€ê¹ë‹¤.</p>
<ul>
<li>DevOps : ê°œë°œì„ ìœ„í•œ ë¬´ì—‡ì¸ê°€ì˜ ìš”êµ¬ì‚¬í•­ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒ</li>
<li>BizOps : ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ìœ„í•œ ë¬´ì—‡ì¸ê°€ì˜ ìš”êµ¬ì‚¬í•­ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒ</li>
<li>AIOps : AIë¥¼ ìœ„í•œ ë¬´ì—‡ì¸ê°€ì˜ ìš”êµ¬ì‚¬í•­ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒ</li>
</ul>
<p>XXOpsë¥¼ í•˜ê¸°ìœ„í•´ì„œëŠ” XXì— ëŒ€í•œ ì´í•´ë„ê°€ í•„ìš”í•˜ë‹¤. XXê°€ ìš”ì²­í•˜ëŠ” ë°”ë¥¼ ì´í•´í•  ìˆ˜ ìˆì–´ì•¼ í•˜ê³ , ê·¸ë“¤ì´ ì¶”ìƒì ìœ¼ë¡œ ìƒê°í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì„ êµ¬ì²´í™”í•  ìˆ˜ ìˆëŠ” ì§€ì‹ì´ í•„ìš”í•˜ë‹¤. ì´ê²ƒì€ XXOps ì´ì „ì—ë„ ì¤‘ìš”í•œ ì—­ëŸ‰ì´ë¼ê³  ì•Œë ¤ì§„ <a href="https://ko.wikipedia.org/wiki/%EB%8F%84%EB%A9%94%EC%9D%B8_%EC%A7%80%EC%8B%9D" target="_blank" rel="noopener noreferrer">ë„ë©”ì¸ ì§€ì‹</a>ê³¼ <a href="https://ko.wikipedia.org/wiki/%EB%A9%94%ED%83%80%EC%9D%B8%EC%A7%80" target="_blank" rel="noopener noreferrer">ë©”íƒ€ ì¸ì§€</a>ì— í•´ë‹¹ëœë‹¤ ë³´ì—¬ì§„ë‹¤.</p>
<h3>ğŸ¤– ìë™í™”ì™€ AIì˜ ì¼ìë¦¬ ìœ„í˜‘ì— ëŒ€í•´</h3>
<p>DevOpsí•˜ë©´ ìë™í™” ì´ì•¼ê¸°ê°€ ë¹ ì§ˆ ìˆ˜ ì—†ê³ , AIì— ëŒ€í•œ ì´ì•¼ê¸°ë„ ì§€ë‚œ ì¢Œë‹´íšŒì— ì´ì–´ ì–¸ê¸‰ë˜ì—ˆë‹¤. ì´ëŸ° ë°œì „ì´ ì¼ìë¦¬ì— ëŒ€í•´ ìœ„í˜‘ì´ ë˜ëŠ” ë¶„ì•¼ë„ ìˆê³ , ì´ë¯¸ ê·¸ ì˜í–¥ì„ ë°›ëŠ” ì˜ì—­ë„ ìƒê¸°ê³  ìˆë‹¤.</p>
<blockquote>
<p>Stable Diffusion ì„ í™œìš©í•˜ì—¬ ê¸°ì¡´ ì¼ëŸ¬ìŠ¤íŠ¸ë ˆì´í„°ì˜ ì—…ë¬´ê°€ ìƒì‚°ì—ì„œ í‰ê°€ë¡œ ë³€ê²½ëœ ì‚¬ë¡€ê°€ ì–¸ê¸‰ë¨</p>
<p>ë¹„ìŠ·í•œ ë‚´ìš©ì˜ ê¸°ì‚¬ : <a href="https://www.gameple.co.kr/news/articleView.html?idxno=205872" target="_blank" rel="noopener noreferrer">ë¸”ë¦¬ìë“œ, ì¸ê³µì§€ëŠ¥ í™œìš©í•´ ê²Œì„ ê°œë°œí•œë‹¤</a></p>
</blockquote>
<p>í•˜ì§€ë§Œ ë°˜ë©´ ìë™í™”ì™€ AIê°€ ì¼ì„ ì¤„ì¼ê²ƒì¸ê°€ì— ëŒ€í•œ ì´ì•¼ê¸°ì—ì„œëŠ” ì¼ì´ ì¤„ì–´ë“œëŠ”ê²Œ ì•„ë‹ˆë¼ ì¼ì„ í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ì™€ ì²˜ë¦¬ ëŠ¥ë ¥ì´ ì¦ê°€í•œë‹¤ëŠ” ê´€ì ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤ê³ ë„ í–ˆë‹¤.</p>
<div class="hint-container tip">
<p class="hint-container-title">íŒ</p>
<p>ìë™í™”ëŠ”, AIëŠ”, DevOpsëŠ” <s>ìš°ë¦¬ë¥¼ ë” ë§ì´</s> ìš°ë¦¬ê°€ ë” ë§ì€ ì¼í•˜ê²Œ í•©ë‹ˆë‹¤.</p>
</div>
<h2>ğŸ”® êµ¬ìŠ¬ì´ ì„œ ë§ì´ë¼ë„ ê¿°ì–´ì„œ íŒ”ì•„ì•¼ ë³´ë°°</h2>
<blockquote>
<p>êµ¬ìŠ¬ì´ ì„œ ë§ì´ë¼ë„ ê¿°ì–´ì•¼ ë³´ë°°</p>
</blockquote>
<p>êµ¬ìŠ¬ì´ ë§ì•„ ë´ì•¼ ì‹¤ì— ê¿°ì§€ ì•Šìœ¼ë©´ ì“¸ëª¨ì—†ë‹¤ëŠ” í‘œí˜„ì¸. ì•„ë¬´ë¦¬ ì¢‹ì€ ê²ƒì´ë¼ë„ ì“°ê¸° ì¢‹ê²Œ ë‹¤ë“¬ì–´ ë†“ì§€ ì•Šìœ¼ë©´ ì†Œìš©ì—†ë‹¤ëŠ” ì˜ë¯¸ì¸ ì†ë‹´ì´ ìˆì§€ë§Œ, ì¢Œë‹´íšŒì—ì„œ ì–¸ê¸‰ë˜ì—ˆë“¯, ì´ì œëŠ” ë³´ê¸°ì—ë§Œ ì¢‹ì€ê²Œ ì•„ë‹Œ íŒ”ë¦¬ëŠ” ê²ƒ ê¹Œì§€ì—ë„ ì‹ ê²½ì„ ì¨ì•¼ í•œë‹¤. ìš´ì˜, ë³´ì•ˆ ë“±ì„ ìœ„í•œ í™œë™ì€ ê¸°ì—… ë‚´ì—ì„œ ì˜í•´ì•¼ ë³¸ì „ ì •ë„ë¡œ ì·¨ê¸‰ë°›ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ì‹¤ì œ ìˆ˜ìµì„ ë°œìƒì‹œí‚¤ëŠ” í–‰ìœ„(ì˜ì—…, ê°œë°œ)ì— ë¹„í•´ ê·¸ íš¨ê³¼ë¥¼ ì¸¡ì •í•˜ê¸°ê°€ ì–´ë ¤ìš´ ë¶€ë¶„ì´ê¸°ë„ í•˜ë‹¤. êµ­ë‚´ì—ì„œëŠ” ì¸ê±´ë¹„ì™€ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ í™œë™ì— ëŒ€í•´ ì¸ìƒ‰í•œ í¸ì´ê¸°ë„ í•˜ë‹¤.</p>
<ul>
<li><a href="https://www.etnews.com/20240405000170" target="_blank" rel="noopener noreferrer">SWê°œë°œ ë‹¨ê°€ ì¸ìƒ ì†ë„ë‚´ì•¼ - ì „ìì‹ ë¬¸</a></li>
<li><a href="https://zdnet.co.kr/view/?no=20231214164555" target="_blank" rel="noopener noreferrer">ê³µê³µ ì „ì‚°ë§ ì˜¤ë¥˜, ê³µê³µSWì‚¬ì—… ë‚®ì€ ì˜ˆì‚° ì›ì¸ - ZDNet Korea</a></li>
</ul>
<p>XXOpsë¥¼ í•´ì„œ ì–¼ë§ˆê°€ ì¤„ì—ˆëŠ”ì§€, ì–´ëŠì •ë„ì˜ ë¹„ìš© íš¨ê³¼ê°€ ìˆëŠ”ì§€ ì¦ëª…í•˜ê¸°ë„ ì–´ë µê±°ë‹ˆì™€, ì¦ëª… í•˜ë”ë¼ë„ ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ë§ë‹¿ì•„ìˆëŠ” ì¡°ì§ì—ì„œ XXOpsì˜ ì„±ê³¼ë¥¼ í‰ê°€ì ˆí•˜ í•  ìˆ˜ë„ ìˆë‹¤. ğŸ˜¢</p>
<h3>ğŸ“Š DevOpsì˜ ìˆ˜ì¤€</h3>
<p>DevOpsë¥¼ ê¸°ì¤€ìœ¼ë¡œ, ìš°ë¦¬ ì¡°ì§ì´ ì–¼ë§ˆë‚˜ ì˜ DevOpsë¥¼ í•˜ê³  ìˆëŠ”ì§€ ì•ˆë‹¤ë©´ ê·¸ ê°€ì¹˜ë¥¼ ì…ì¦í•  ìˆ˜ ìˆì„ê¹Œ? ì¡°ì§ ë‚´ì—ì„œ DevOpsë¥¼ í•´ì•¼ í•˜ëŠ”ê²ƒì´ë¼ê³  ì„¤ë“í•  ìˆ˜ ìˆì„ê¹Œ?</p>
<p>DevOpsë¥¼ ì •ì˜í•˜ëŠ” ë°©ì‹ê³¼ í–‰ìœ„ëŠ” ë‹¤ì–‘í•˜ë‹¤. ì´ì „ <a href="https://docmoa.github.io/06-etc/class/devops-discussion-20240213.html#%F0%9F%91%B7%E2%80%8D%E2%99%80%EF%B8%8F-%E1%84%80%E1%85%A9%E1%84%86%E1%85%B5%E1%86%AB-1-%E1%84%82%E1%85%A1%E1%84%8B%E1%85%B4-%E1%84%8C%E1%85%A1%E1%84%85%E1%85%B5%E1%84%85%E1%85%B3%E1%86%AF-%E1%84%8B%E1%85%B1%E1%84%92%E1%85%A7%E1%86%B8%E1%84%92%E1%85%A1%E1%84%82%E1%85%B3%E1%86%AB%E1%84%80%E1%85%A1" target="_blank" rel="noopener noreferrer">ì¢Œë‹´íšŒ</a>ì—ì„œ ì–¸ê¸‰í–ˆë“¯, DevOpsë€ ëŒ€ìƒê°„ì˜ ê°„ê·¹ì„ ì¤„ì´ëŠ” í–‰ìœ„ë¼ê³ ë„ í•  ìˆ˜ ìˆê³ , CI/CT/CDì˜ ìˆ˜ì¤€, í˜¹ì€ ë¬¸í™”ë¼ê³ ë„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.</p>
<p>Google Cloudì—ì„œ ë°œí–‰í•œ <a href="https://services.google.com/fh/files/misc/whitepaper_roi_of_devops_transformation_2020_google_cloud.pdf" target="_blank" rel="noopener noreferrer">The ROI of DevOps Transformation</a>ì—ì„œë„ ì–¸ê¸‰ëœê²ƒ ì²˜ëŸ¼ ì „í†µì ìœ¼ë¡œ ITëŠ” ë¹„ìš©ì„ 'ì“°ëŠ”' ì¡°ì§ìœ¼ë¡œ ì—¬ê²¨ì ¸ ì™”ë‹¤. DevOpsì— íˆ¬ì ëŒ€ë¹„ ìˆ˜ìµì„ ê³„ì‚°í•˜ëŠ”ë° ê·¸ ì¡°ì§ì´ ìˆ˜ìµì— ëŒ€í•œ ì˜ì—­ì„ ì–´ë””ê¹Œì§€ í™•ì¥í•  ìˆ˜ ìˆëŠ”ê°€ê°€ DevOpsì˜ ê°€ì¹˜ì— í° ì˜í–¥ì„ ë¼ì¹  ê²ƒìœ¼ë¡œ ì˜ˆìƒëœë‹¤. (ê´€ë ¨ ë¦¬í¬íŠ¸ë¥¼ ì •ë¦¬í•œ ê¸€(í•œê¸€)ë„ ì¢‹ì€ ì°¸ê³ ê°€ ëœë‹¤. : <a href="https://medium.com/proofer-blog/%EB%B2%88%EC%97%AD-devops-%EB%A1%9C-%EC%A0%84%ED%99%98-%EC%8B%9C%EC%9D%98-roi-the-roi-of-devops-transformation-9105b240247b" target="_blank" rel="noopener noreferrer">DevOps ë¡œ ì „í™˜ ì‹œì˜ ROI (The ROI of DevOps Transformation)</a>)</p>
<ul>
<li>ROIëŠ” <code>íˆ¬ì</code>ì™€ <code>ìˆ˜ìµ</code>ì— ê¸°ë°˜í•œë‹¤.</li>
<li>íˆ¬ìì—ëŠ” êµìœ¡, í•™ìŠµ, í†µí•©, ê·¸ë¦¬ê³  ê³¼ì •ìƒ ë°œìƒí•˜ëŠ” ìƒì‚°ì„± ì €í•˜, ìœ ì§€ë³´ìˆ˜, êµì²´ì— ë”°ë¥¸ ì†Œìš” ì‹œê°„ ë“±ì´ í¬í•¨ëœë‹¤.</li>
<li>ìˆ˜ìµì€ ê°€ì¹˜ ì¤‘ì‹¬ ì ‘ê·¼(ì„œë¹„ìŠ¤ ì „ë‹¬ ì†ë„)ê³¼ ë¹„ìš© ì¤‘ì‹¬ ì ‘ê·¼(ë¹„ìš© ì ˆê°ê³¼ ì—…ë¬´ íš¨ìœ¨ì„±)ìœ¼ë¡œ ë‚˜ë‰œë‹¤.</li>
</ul>
<p>ì¢Œë‹´íšŒ ìë¦¬ì—ì„œ ì¸¡ì • ë°©ì‹ê³¼ ê´€ë ¨í•˜ì—¬ DevOps ìˆ˜ì¤€ì„ í‰ê°€í•˜ëŠ”ë° ìˆì–´ <code>Flow framework</code>ì— ëŒ€í•´ì„œë„ ì–¸ê¸‰í•´ì£¼ì…¨ë‹¤.</p>
<blockquote>
<p>Flow Framework Â®ì´ë€?</p>
<p>Flow FrameworkëŠ” ë³‘ëª© í˜„ìƒì„ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ ì œí’ˆ ê°€ì¹˜ ìŠ¤íŠ¸ë¦¼ ì „ì²´ì—ì„œ ì‘ì—…ì´ íë¥´ê³  ëŠë ¤ì§€ëŠ” ìœ„ì¹˜ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤. ì´ í”„ë ˆì„ ì›Œí¬ëŠ” ë˜í•œ ê¸°ìˆ  ë¦¬ë”ì—ê²Œ ë¹„ ê¸°ìˆ ì  (ë° ë¹„ ë¯¼ì²©í•œ) ì–¸ì–´ë¥¼ ì œê³µí•˜ì—¬ ìš°ì„  ìˆœìœ„ë¥¼ ì„¤ì •í•˜ê³  ê²°ê³¼ë¥¼ ì¸¡ì • í•  ë•Œ ë¹„ì¦ˆë‹ˆìŠ¤ ì´í•´ ê´€ê³„ìì™€ íš¨ê³¼ì ìœ¼ë¡œ ì˜ì‚¬ ì†Œí†µ í•  ìˆ˜ ìˆë„ë¡í•©ë‹ˆë‹¤.</p>
<p><a href="https://flowframework.org/" target="_blank" rel="noopener noreferrer">https://flowframework.org/</a></p>
</blockquote>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/Flow-Framework-poster-v.313.png" alt="Flow Framework" tabindex="0" loading="lazy"><figcaption>Flow Framework</figcaption></figure>
<h3>ğŸ’° DevOpsì˜ ê°€ì¹˜ëŠ” ì…ì¦ë˜ì—ˆëŠ”ê°€?</h3>
<p>DevOpsë¥¼ ì‹œì‘í•˜ëŠ” ì´ìœ ëŠ” ë‹¤ì–‘í•  ìˆ˜ ìˆê³ , í˜„ì‹¤ì ì¸ ë¬¸ì œë¡œ ì¸í•´ ì•„ì§ ë°©ë²•ë¡ ì„ ì ìš©í•˜ì§€ ëª»í•œ ì‚¬ë¡€ë„ ìˆë‹¤. ì¢Œë‹´íšŒ ì¤‘ì—ì„œëŠ” ê²Œì„ ìª½ì˜ íŠ¹ìˆ˜ì„±ì— ëŒ€í•œ ì´ì•¼ê¸°ë„ ìˆì—ˆë‹¤.</p>
<p><a href="https://www.facebook.com/groups/TeAnE/permalink/3020893821379642/" target="_blank" rel="noopener noreferrer">ê²Œì„ì—ì„œì˜ DevOpsì˜ í•œê³„ ë° ì–´ë ¤ì›€ - SanAh Kang</a></p>
<p>ë°˜ë©´ì— DevOpsë¡œ ë…¼ì˜ë˜ëŠ” ë²”ìœ„ì™€ ë°©ë²•ì´ ë„ˆë¬´ ë§ê³  ë‹¤ì–‘í•˜ë‹¤ë³´ë‹ˆ ì–´ë–¤ì‹ìœ¼ë¡œ ì‹œì‘í•´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•œ ì§ˆë¬¸ë„ ìˆì—ˆë‹¤. ì—¬ê¸°ì— ëŒ€í•´ì„œëŠ” "ë¶ˆí¸í•¨ì„ ì œê±°í•˜ê³  ìœ„í—˜ì„ ìµœì†Œí™”" í• ìˆ˜ìˆëŠ” ê²ƒë¶€í„° ì‹œì‘í•´ë³´ëŠ”ê²ƒì— ëŒ€í•´ ì¡°ì–¸ì„ ì£¼ì‹œê¸°ë„ í–ˆë‹¤.</p>
<p>DevOpsê°€ ì‹œì‘ë˜ê³  ì–¸ê¸‰ëœì§€ êµ­ë‚´ì—ì„œë„ ê½¤ ì˜¤ëœ ì‹œê°„ì´ í˜ë €ì§€ë§Œ ê·¸ ìˆ˜ì¤€ê³¼ ì •ë„ì— ëŒ€í•œ ì°¨ì´ëŠ” ì—¬ì „íˆ í¬ë‹¤ ë³´ì—¬ì§„ë‹¤. ë¬¸ë“, ìë™ì°¨ ì •ë¹„ì—…ì„ í•˜ëŠ” ì¹œêµ¬ ì´ì•¼ê¸°ê°€ ë– ì˜¬ëë‹¤.</p>
<blockquote>
<p>... ì•„ì§ê¹Œì§€ë„ ì¢…ì´ì—ë‹¤ê°€ ë¶€í’ˆ ì¬ê³ ë¥¼ ê´€ë¦¬í•˜ê³  ìˆë”ë¼ê³ , ë‚´ê°€ ì—‘ì…€ë¡œ ì •ë¦¬í•´ì„œ ë”± ë³´ì—¬ì¤¬ë”ë‹ˆ ì‚¬ì¥ì´ ê¹œì§ ë†€ë¼ëŠ”ê±°ì•¼. ë‚´ê°€ ê±°ê¸°ì„  ì»´í“¨í„° ì œì¼ ì˜í•˜ëŠ” ë…€ì„ì´ ëë”ë¼ê³ . - 2023ë…„ ê²¨ìš¸ ì–´ëŠë‚ </p>
</blockquote>
<p>ì•„ì§ì€ êµ­ë‚´ ë§ì€ ê¸°ì—…ì˜ ì •ì„œìƒ, ì•ì„  ROIì´ì•¼ê¸°ì—ì„œì²˜ëŸ¼ ITì— ëŒ€í•œ íˆ¬ìëŠ” ê³§ ë¹„ìš©ì¸ê²ƒ ì²˜ëŸ¼ ë³´ì¸ë‹¤. ê·¸ë‚˜ë§ˆ ê°•ë ¥í•œ ë¸Œëœë“œê°€ ìˆëŠ” ê¸°ìˆ  ê¸°ì—…ì—ì„œ ì§€ì†ì ìœ¼ë¡œ ê¸°ìˆ ì— ëŒ€í•œ ì¤‘ìš”ì„±ê³¼ ë‚˜ì•„ê°€ì•¼í•  ë°©í–¥ì— ëŒ€í•´ ì–¸ê¸‰í•´ì£¼ëŠ” ê²ƒì´ ì¸ì‹ì˜ ë³€í™”ì— ë„ì›€ì´ ëœë‹¤ ìƒê°ëœë‹¤.</p>
<blockquote>
<p>DevOpsê°€ ì¤‘ìš”í•œ ì´ìœ  - ì†Œí”„íŠ¸ì›¨ì–´ì™€ ì¸í„°ë„·ì€ ì‡¼í•‘ì—ì„œ ì—”í„°í…Œì¸ë¨¼íŠ¸ ê·¸ë¦¬ê³  ë±…í‚¹ì— ì´ë¥´ê¸°ê¹Œì§€ ì „ ì„¸ê³„ì™€ ì‚°ì—…ì„ ë³€í™”ì‹œì¼°ìŠµë‹ˆë‹¤. ì´ì œ ì†Œí”„íŠ¸ì›¨ì–´ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì§€ì›í•˜ëŠ” ê²ƒì— ê·¸ì¹˜ì§€ ì•Šê³ , ë¹„ì¦ˆë‹ˆìŠ¤ì˜ ëª¨ë“  ë¶€ë¶„ì—ì„œ í•µì‹¬ì ì¸ êµ¬ì„± ìš”ì†Œê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ê¸°ì—…ì€ ì˜¨ë¼ì¸ ì„œë¹„ìŠ¤ ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì œê³µë˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ í†µí•´ ì˜¨ê°– ì¢…ë¥˜ì˜ ë””ë°”ì´ìŠ¤ì—ì„œ ê³ ê°ê³¼ ìƒí˜¸ ì‘ìš©í•©ë‹ˆë‹¤. ë˜í•œ, ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¼ë¥˜, í†µì‹ , ìš´ì˜ ë“±ê³¼ ê°™ì€ ê°€ì¹˜ ì²´ì¸ì˜ ëª¨ë“  ë¶€ë¶„ì„ í˜ì‹ í•¨ìœ¼ë¡œì¨ ìš´ì˜ íš¨ìœ¨ì„±ì„ í–¥ìƒí•©ë‹ˆë‹¤. 20ì„¸ê¸°ì— ì‹¤ì œ ìƒí’ˆì„ ì œì¡°í•˜ëŠ” ê¸°ì—…ì´ ì‚°ì—… ìë™í™”ë¥¼ í†µí•´ ì œí’ˆì˜ ì„¤ê³„, ìƒì‚° ë° ì „ë‹¬ ë°©ë²•ì„ í˜ì‹ í•œ ê²ƒê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, ì˜¤ëŠ˜ë‚ ì˜ ê¸°ì—…ì€ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ êµ¬ì¶•í•˜ê³  ì œê³µí•˜ëŠ” ë°©ë²•ì„ í˜ì‹ í•´ì•¼ í•©ë‹ˆë‹¤. - <a href="https://aws.amazon.com/ko/devops/what-is-devops/" target="_blank" rel="noopener noreferrer">AWS - DevOpsë€ ë¬´ì—‡ì…ë‹ˆê¹Œ?</a></p>
</blockquote>
<p>ê¸°ìˆ  í˜ì‹ ì´ ê¸°ì—…ì˜ ì°¨ë³„í™”ë¥¼ ê°€ì ¸ì˜¤ê³ , ì†ë„ê°€ ë³´ì¥ë˜ì–´ì•¼ ë³€í™”í•˜ëŠ” ì‹œì¥ì—ì„œ ì•ì„œ ë‚˜ê°€ê³ , ê³§ ëˆì„ ë§Œë“¤ì–´ë‚¸ë‹¤ëŠ” ì—°ê²°ê³ ë¦¬ê°€ ë§Œë“¤ì§€ëŠ” ê²ƒë„ 'ë¬¸í™”'ì˜ ì¼ë¶€ì¼ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/DevOps_feedback-diagram.ff668bfc299abada00b2dcbdc9ce2389bd3dce3f.png" alt="AWS - DevOpsë€ ë¬´ì—‡ì…ë‹ˆê¹Œ?" tabindex="0" loading="lazy"><figcaption>AWS - DevOpsë€ ë¬´ì—‡ì…ë‹ˆê¹Œ?</figcaption></figure>
<h2>ğŸª‘ ì¢Œë‹´íšŒë¥¼ ë‹¤ë…€ì™€ì„œ</h2>
<p>ì›”ìš”ì¼ì´ë¼ ê·¸ëŸ°ì§€, ì¢Œë‹´íšŒê°€ ê¸¸ì–´ì ¸ì„œ ê·¸ëŸ°ì§€ ì•„ì‰½ê²Œë„ ê·¸ë‚ ì€ ë’·í’€ì´í•  ë¶„ìœ„ê¸°ëŠ” ì•„ë‹ˆì˜€ë˜ê²ƒ ê°™ì•„ ì•„ì‰¬ì› ì§€ë§Œ, ì´ëŸ°ì €ëŸ° í˜„ì‹¤ì ì¸ ì´ì•¼ê¸°ë“¤ì„ ë“¤ì„ ìˆ˜ ìˆì–´ ì¢‹ì•˜ë‹¤. ì•„ì‰¬ìš´ê±´ DevOps Korea ê³µê°„ì´ ë” ë„ë¦¬ í¼ì§€ì§€ ëª»í–ˆë‹¤ëŠ” ì•„ì‰¬ì›€ë„ ìˆë‹¤. ì£¼ë³€ì— ì Šì€(?) ì—”ì§€ë‹ˆì–´ ë¶„ë“¤ì€ ìš”ìƒŒ ì»¤ë®¤ë‹ˆí‹° í™œë™ë„ ê±°ì˜ ì•ˆí•˜ëŠ”ë“¯ í•œë°, ì–´ë–»ê²Œ í•˜ë©´ ì´ëŸ° ëª¨ì„ì—ì„œ ê°™ì´ ìƒê°ì„ ë‚˜ëˆŒ ìˆ˜ ìˆì„ì§€ ê³ ë¯¼ì´ë‹¤.</p>
<p>ì„œë²„ ì—†ì´, ê°œë°œ ì—†ì´ í•„ìš”í•œ ëŒ€ì‹œë³´ë“œì™€ ë°ì´í„° ìŠ¤í† ì–´ë¥¼ ë§Œë“¤ì–´ë‚˜ê°€ëŠ” ì´ì•¼ê¸°ì™€, Kubernetesë¥¼ ê²€í† í•˜ë‹¤ê°€ 'ì™œ'ì—ëŒ€í•œ ë¬¼ìŒì„ ë‹¤ì‹œê¸ˆ ë˜ì§€ë©´ì„œ ë³´ë¥˜í–ˆë‹¤ê³  í•˜ëŠ” ì´ì•¼ê¸°ë¥¼ ë“¤ìœ¼ë©´ì„œ, ì–´ëŠë•Œë³´ë‹¤ ë„êµ¬ê°€ ë„˜ì³ë‚˜ëŠ” ë•Œì— ì–´ë–¤ ê²ƒì´ ìš”êµ¬ì‚¬í•­ì˜ ë§Œì¡±ì— ì í•©í•œì§€ì— ëŒ€í•´ í•œë²ˆë” ìƒê°í•´ë´ì•¼í•  í•„ìš”ê°€ ìˆë‹¤ê³  ìƒê°ë˜ì—ˆë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/image-20240417150044868.png" alt="Google Lookerë¥¼ ì‚¬ìš©í•˜ë©´ êµ³ì´ ê°œë°œì•ˆí•´ë„ ì ì ˆí•œ ëŒ€ì‹œë³´ë“œë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤." tabindex="0" loading="lazy"><figcaption>Google Lookerë¥¼ ì‚¬ìš©í•˜ë©´ êµ³ì´ ê°œë°œì•ˆí•´ë„ ì ì ˆí•œ ëŒ€ì‹œë³´ë“œë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.</figcaption></figure>
<p>DevOpsëŠ” ì§„í–‰ì¤‘ì´ê³ , XXOpsë¥¼ ë’·ë°›ì¹¨í•˜ëŠ” Engineering ì˜ì—­ê³¼ ì´ë¥¼ ë’·ë°›ì¹¨í•˜ëŠ” ì—­ëŸ‰ë„ ëŠì„ ì—†ì´ ë°°ì›€ê³¼ í™•ì¥ì˜ ì—°ì† 'ê·¸ë§Œ ë°°ìš°ê³  ì‹¶ë‹¤...ë†€ê³  ì‹¶ë‹¤...ê·¸ëŸ¼ ë” ë°°ì›Œì•¼ í•˜ë‚˜?'</p>
<details class="hint-container details"><summary>ğŸ“‹ ë³„ì²¨ - Nomad Case Study (Game)</summary>
<p>ê²Œì„ ì‚°ì—…ìª½ ì´ì•¼ê¸°ê°€ ë§ì´ ë‚˜ì˜¨ê¹€ì—, ì´ì „ì— WEB/WAS, ê²Œì„ ì„œë²„ ê°œë°œ, OpenShift ë•Œë¬¸ì— Kubernetes(K8s)ë¥¼ ë°˜ê°•ì œì ìœ¼ë¡œ í•™ìŠµ í•´ë³´ë©´ì„œ ë²”ìš©ì ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ íˆ´ì€ ì—†ë‚˜ ì°¾ë‹¤ ì§€ê¸ˆì˜ ì¼ì„ í•˜ê²Œ ëœ ì¼ì´ ë‹¤ì‹œê¸ˆ ìƒê°ë‚¬ë‹¤. ëª¨ë“ ê±¸ ë§Œì¡±í•  ìˆ˜ëŠ” ì—†ê² ì§€ë§Œ, ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ ë‹¤ì–‘í•œ ì‚¬ëŒë“¤ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í• ë§Œí•œê²Œ ìˆìœ¼ë©´ ì¢‹ê² ë‹¤ê³  ìƒê°í–ˆë‹¤. ì—¬ì „íˆ Windowsë§Œì˜ ê°•ì ì´ ìˆê³ , ëˆ„êµ°ê°€ëŠ” ì›¹ì•±ì´ ì¤‘ìš”í•˜ê³ , Java ì•±ì´, Pythonì´, ë˜ ëˆ„êµ°ê°€ëŠ” ë¹Œë“œëœ ë°”ì´ë„ˆë¦¬ë¥¼ ì‹¤í–‰í•´ì•¼ í•˜ëŠ” ë“±, ê·¸ë˜ì„œ ë‚œ <code>Nomad</code>ì˜ ì¥ì ì„ ëŠê¼ˆë‹¤ê³  ìƒê°ëœë‹¤. <code>Terraform</code>ë„ ëª¨ë¥´ê³  <code>Vault</code>ë„ ëª°ëì§€ë§Œ ì–´ë””ì—ë‚˜ ì˜ ì‹¤í–‰ë˜ê³ , ì‰½ê³ , ì•„ë¬´ê±°ë‚˜ ì˜¬ë ¤ë„ ë˜ëŠ” ìœ ë“¤ìœ ë“¤í•œ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°. (K8sê°€ ì›Œë‚™ ìœ ëª…í•´ì„œ ì˜ ì•ˆì•Œë ¤ì¡Œë‹¤ëŠ”ê²Œ ë‹¨ì ì´ë„ê¹Œ.) Nomadë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ë¡€ë“¤ì„ ë³´ë©´ í˜„ì‹¤ì ì¸ ì´ì•¼ê¸°ë“¤ì´ë¼ ë” ê·¸ì •ë„ê¹Œì§€ì˜ í”Œë«í¼ì€ í•„ìš” ì—†ê±°ë‚˜ ì•„ì§ ì»¨í…Œì´ë„ˆê¹Œì§€ ì•ˆí•´ë„ ë˜ëŠ”, ê·¸ë¦¬ê³  Windows, ARM Cpuë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ë¡€ë“¤ì„ ë§Œë‚œë‹¤. íŠ¹íˆë‚˜ ê²Œì„ ì´ì•¼ê¸°ëŠ” ë” ì¬ë¯¸ìˆê³  ì¦ê²ë‹¤.</p>
</details>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/Monosnap%20Image%202024-04-17%2011-15-58.png" type="image/png"/>
    </item>
    <item>
      <title>Terraform Apply Aborted - Tainted</title>
      <link>https://docmoa.github.io/04-HashiCorp/03-Terraform/04-TroubleShooting/apply-aborted.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/03-Terraform/04-TroubleShooting/apply-aborted.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Terraform Apply Aborted - Tainted</source>
      <description>Terraform Apply ë„ì¤‘ ì¤‘ë‹¨ë˜ëŠ” ìƒí™©</description>
      <pubDate>Fri, 12 Apr 2024 05:22:33 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>ì •ìƒ ë™ì‘ì˜ ì˜ˆ</h2>
<h2>Terraform Apply ë„ì¤‘ ë„¤íŠ¸ì›Œí¬ê°€ ëŠê¸´ë‹¤ë©´?</h2>
<p>í´ë¼ìš°ë“œë“¤ì˜ APIì˜ ê²½ìš° ëŒ€ë¶€ë¶„ Syncë¡œ ë™ì‘í•˜ë¯€ë¡œ, Terraformì´ ìƒì„± ìš”ì²­ì„ í•˜ë©´ ê·¸ì— ëŒ€í•œ ì‘ë‹µì„ ë°›ìŠµë‹ˆë‹¤. AWSì˜ ê²½ìš° ë„¤íŠ¸ì›Œí¬ê°€ ë‹¨ì ˆ ë˜ë”ë¼ë„, ì´ë¯¸ ìš”ì²­í•œ API ëŒ€í•œ ì‘ë‹µì„ AWSì—ì„œ ë°˜í™˜í•˜ë¯€ë¡œ timeoutìœ¼ë¡œ ì¸í•œ ì—ëŸ¬ê°€ë°œìƒ í•œ ì´í›„ ì‘ë‹µì„ ê¸°ì¤€ìœ¼ë¡œ Stateê°€ ì‘ì„±ë©ë‹ˆë‹¤. ë‹¤ë§Œ ì •ìƒì ì¸ ì™„ë£Œ ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìœ¼ë¯€ë¡œ Terraform Stateì—ëŠ” í•´ë‹¹ ë¦¬ì†ŒìŠ¤ëŠ” <code>tainted</code>(ë¶ˆí™•ì‹¤í•œ) ìƒíƒœë¡œ ê¸°ë¡ë©ë‹ˆë‹¤.</p>
<p>Apply í›„ Creatingë˜ëŠ” ë„ì¤‘ ë„¤íŠ¸ì›Œí¬ ì ˆì²´í•˜ë©´ ë°œìƒí•˜ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">Plan: <span class="token number">1</span> to add, <span class="token number">0</span> to change, <span class="token number">0</span> to destroy.</span>
<span class="line">aws_instance.web: Creating<span class="token punctuation">..</span>.</span>
<span class="line">aws_instance.web: Still creating<span class="token punctuation">..</span>. <span class="token punctuation">[</span>10s elapsed<span class="token punctuation">]</span></span>
<span class="line">aws_instance.web: Still creating<span class="token punctuation">..</span>. <span class="token punctuation">[</span>20s elapsed<span class="token punctuation">]</span></span>
<span class="line">aws_instance.web: Still creating<span class="token punctuation">..</span>. <span class="token punctuation">[</span>30s elapsed<span class="token punctuation">]</span></span>
<span class="line">aws_instance.web: Still creating<span class="token punctuation">..</span>. <span class="token punctuation">[</span>40s elapsed<span class="token punctuation">]</span></span>
<span class="line">aws_instance.web: Still creating<span class="token punctuation">..</span>. <span class="token punctuation">[</span>50s elapsed<span class="token punctuation">]</span></span>
<span class="line">â•·</span>
<span class="line">â”‚ Error: getting attribute <span class="token punctuation">(</span>userData<span class="token punctuation">)</span>: RequestError: send request failed</span>
<span class="line">â”‚ caused by: Post <span class="token string">"https://ec2.ap-northeast-2.amazonaws.com/"</span><span class="token builtin class-name">:</span> dial tcp: lookup ec2.ap-northeast-2.amazonaws.com: no such <span class="token function">host</span></span>
<span class="line">â”‚ </span>
<span class="line">â”‚   with aws_instance.web,</span>
<span class="line">â”‚   on main.tf line <span class="token number">21</span>, <span class="token keyword">in</span> resource <span class="token string">"aws_instance"</span> <span class="token string">"web"</span><span class="token builtin class-name">:</span></span>
<span class="line">â”‚   <span class="token number">21</span>: resource <span class="token string">"aws_instance"</span> <span class="token string">"web"</span> <span class="token punctuation">{</span></span>
<span class="line"></span></code></pre></div><p>ì˜¤ë¥˜ ì´í›„ ì‘ì„±ë˜ëŠ” State ë° <code>tainted</code>ìƒíƒœì˜ ë¦¬ì†ŒìŠ¤(aws_instance) ì •ë³´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"terraform_version"</span><span class="token operator">:</span> <span class="token string">"1.8.0"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"serial"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"lineage"</span><span class="token operator">:</span> <span class="token string">"2c770c35-18c5-035d-b7f2-b569d6b326d6"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"outputs"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"resources"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"managed"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"aws_instance"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"web"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"provider"</span><span class="token operator">:</span> <span class="token string">"provider[\"registry.terraform.io/hashicorp/aws\"]"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"instances"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line highlighted">          <span class="token property">"status"</span><span class="token operator">:</span> <span class="token string">"tainted"</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">"schema_version"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">"attributes"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">"ami"</span><span class="token operator">:</span> <span class="token string">"ami-01ed8ade75d4eee2f"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"arn"</span><span class="token operator">:</span> <span class="token string">"arn:aws:ec2:ap-northeast-2:467567795630:instance/i-09e9cd90c86d46ecc"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"associate_public_ip_address"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"availability_zone"</span><span class="token operator">:</span> <span class="token string">"ap-northeast-2a"</span><span class="token punctuation">,</span></span>
<span class="line">       ...</span>
<span class="line">            <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"i-09e9cd90c86d46ecc"</span><span class="token punctuation">,</span></span>
<span class="line">       ...</span>
<span class="line">      <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"check_results"</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>ì´ë¯¸ AWSì— EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ ìš”ì²­í•œ ìƒíƒœì—ì„œ ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆì´ ë°œìƒí•˜ì˜€ê¸° ë•Œë¬¸ì— AWSìƒì—ëŠ” EC2ì˜ ìƒì„±ì´ ì§„í–‰ë©ë‹ˆë‹¤.</p>
<figure><figcaption>AWS Console</figcaption></figure>
<h2>ë³µêµ¬ ë°©ì•ˆ</h2>
<blockquote>
<p>untaint : <a href="https://developer.hashicorp.com/terraform/cli/commands/untaint" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/terraform/cli/commands/untaint</a><br>
import : <a href="https://developer.hashicorp.com/terraform/cli/commands/import" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/terraform/cli/commands/import</a></p>
</blockquote>
<p>ì •ìƒì ìœ¼ë¡œ ë™ê¸°í™”ë˜ì§€ ì•Šì€ ê²½ìš°(tainted)ë¼ <code>terraform plan</code> ì‹¤í–‰ ì‹œ replaceê°€ ë°œìƒí•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ terraform plan</span>
<span class="line">aws_instance.web: Refreshing state<span class="token punctuation">..</span>. <span class="token punctuation">[</span>id<span class="token operator">=</span>i-09e9cd90c86d46ecc<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">Terraform used the selected providers to generate the following execution plan.</span>
<span class="line">Resource actions are indicated with the following symbols:</span>
<span class="line">-/+ destroy and <span class="token keyword">then</span> create replacement</span>
<span class="line"></span>
<span class="line">Terraform will perform the following actions:</span>
<span class="line"></span>
<span class="line">  <span class="token comment"># aws_instance.web is tainted, so must be replaced</span></span>
<span class="line">-/+ resource <span class="token string">"aws_instance"</span> <span class="token string">"web"</span> <span class="token punctuation">{</span></span>
<span class="line">      ~ arn                                  <span class="token operator">=</span> <span class="token string">"arn:aws:ec2:ap-northeast-2:467567795630:instance/i-09e9cd90c86d46ecc"</span> -<span class="token operator">&gt;</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      ~ associate_public_ip_address          <span class="token operator">=</span> <span class="token boolean">true</span> -<span class="token operator">&gt;</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      ~ availability_zone                    <span class="token operator">=</span> <span class="token string">"ap-northeast-2a"</span> -<span class="token operator">&gt;</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      ~ cpu_core_count                       <span class="token operator">=</span> <span class="token number">1</span> -<span class="token operator">&gt;</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      ~ cpu_threads_per_core                 <span class="token operator">=</span> <span class="token number">2</span> -<span class="token operator">&gt;</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      ~ disable_api_stop                     <span class="token operator">=</span> <span class="token boolean">false</span> -<span class="token operator">&gt;</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      ~ disable_api_termination              <span class="token operator">=</span> <span class="token boolean">false</span> -<span class="token operator">&gt;</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      ~ ebs_optimized                        <span class="token operator">=</span> <span class="token boolean">false</span> -<span class="token operator">&gt;</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      - hibernation                          <span class="token operator">=</span> <span class="token boolean">false</span> -<span class="token operator">&gt;</span> null</span>
<span class="line">      <span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre></div><p>ë¦¬ì†ŒìŠ¤ê°€ ì˜ë„í•œ ê²½ìš°ë¡œ ìƒì„±ëœ ê²½ìš° taintedëœ ë¦¬ì†ŒìŠ¤ë¥¼ <code>untaint</code> í•˜ì—¬ State ê¸°ì¤€ìœ¼ë¡œ <code>tainted</code> ìƒíƒœë¥¼ ë³µêµ¬í•˜ê±°ë‚˜ <code>terraform import</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ Stateë¥¼ ìƒì„±ëœ í˜•ìƒ ê¸°ì¤€ìœ¼ë¡œ ë§ì¶°ì£¼ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
]]></content:encoded>
    </item>
    <item>
      <title>SSH returns - no matching host key type found</title>
      <link>https://docmoa.github.io/01-Infrastructure/Linux/TroubleShooting/ssh-no-matching-host-key-type-found.html</link>
      <guid>https://docmoa.github.io/01-Infrastructure/Linux/TroubleShooting/ssh-no-matching-host-key-type-found.html</guid>
      <source url="https://docmoa.github.io/rss.xml">SSH returns - no matching host key type found</source>
      <description>SSH returns - no matching host key type found.</description>
      <pubDate>Tue, 09 Apr 2024 01:23:44 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Issue</h2>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">ssh</span> root@192.168.1.1</span>
<span class="line"></span>
<span class="line">Unable to negotiate with <span class="token number">192.168</span>.1.1 port <span class="token number">22</span>: no matching <span class="token function">host</span> key <span class="token builtin class-name">type</span> found. Their offer: ssh-rsa</span>
<span class="line"></span></code></pre></div><p>ì¼ë¶€ í™˜ê²½ ì„¤ì • ë° SSH ë²„ì „ì— ë”°ë¼ SSHì— ì‚¬ìš©ë˜ëŠ” íŠ¹ì • í‚¤ê°€ ë¹„í™œì„±í™”ë˜ì–´ìˆëŠ” ê²½ìš° ì´ê°™ì€ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ê²ƒì€ <a href="https://www.openssh.com/legacy.html" target="_blank" rel="noopener noreferrer">OpenSSH Legacy Options</a>ì— ê°œì‹œëœ ê¸€ì˜ ë‚´ìš©ì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>OpenSSHëŠ” í‘œì¤€ì„ ì¤€ìˆ˜í•˜ëŠ” SSH êµ¬í˜„ê³¼ì˜ í˜¸í™˜ì„±ì— í•„ìš”í•œ ëª¨ë“  ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•˜ì§€ë§Œ, ì¼ë¶€ êµ¬í˜• ì•Œê³ ë¦¬ì¦˜ì´ ì·¨ì•½í•œ ê²ƒìœ¼ë¡œ ë°í˜€ì¡Œê¸° ë•Œë¬¸ì— ëª¨ë“  ì•Œê³ ë¦¬ì¦˜ì´ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ìœ„ ë©”ì‹œì§€ëŠ” <code>ssh-rsa</code> íƒ€ì…ì— ëŒ€í•´ ë¹„í™œì„±í™” ëœ ìƒíƒœ ì…ë‹ˆë‹¤.</p>
<h2>í•´ê²° ë°©ë²• 1</h2>
<p>ì ‘ì† ì‹œ ì˜µì…˜ì— ì¶”ê°€</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">ssh</span> <span class="token parameter variable">-oHostKeyAlgorithms</span><span class="token operator">=</span>+ssh-rsa root@192.168.1.1</span>
<span class="line"></span></code></pre></div><h2>í•´ê²° ë°©ë²• 2</h2>
<p>ë§¤ë²ˆ í‚¤ ì•Œê³ ë¦¬ì¦˜ì„ ì§€ì •í•  í•„ìš”ê°€ ì—†ë„ë¡ í˜¸ìŠ¤íŠ¸ íŒ¨í„´ì„ <code>~/.ssh/config</code>ì— ì¶”ê°€</p>
<div class="language-ini" data-highlighter="prismjs" data-ext="ini" data-title="~/.ssh/config"><pre class="language-ini"><code><span class="line">...</span>
<span class="line"></span>
<span class="line">Host 192.168.1.1</span>
<span class="line">  <span class="token key attr-name">HostKeyAlgorithms</span><span class="token punctuation">=</span><span class="token value attr-value">+ssh-rsa</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>API ë³´ì•ˆì„ ìœ„í•œ Vault í™œìš© (API Key)</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/API-security.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/API-security.html</guid>
      <source url="https://docmoa.github.io/rss.xml">API ë³´ì•ˆì„ ìœ„í•œ Vault í™œìš© (API Key)</source>
      <description>API ë³´ì•ˆì„ ìœ„í•œ Vault í™œìš©</description>
      <pubDate>Tue, 19 Mar 2024 14:41:45 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ì°¸ê³  1: <a href="https://owasp.org/API-Security/editions/2023/en/0x11-t10/" target="_blank" rel="noopener noreferrer">OWASP Top 10 API Securit Risks - 2023</a><br>
ì°¸ê³  2: <a href="https://cf-assets.www.cloudflare.com/slt3lc6tev37/5zfIEoxvRDHLRbkBaLJqsT/c712b0273971194774fc7326b3b1da34/Whitepaper_A-Guide-to-API-Security_Korean_20220622.pdf" target="_blank" rel="noopener noreferrer">Cloudflare API ë³´ì•ˆ ê°€ì´ë“œ</a></p>
</blockquote>
<p>APIëŠ” ì„œë¡œ ë‹¤ë¥¸ ì•± ê°„ í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ ì•±, ì„œë¡œ ë‹¤ë¥¸ ê¸°ì—… ë° ì¡°ì§ ê°„ ë°ì´í„° êµí™˜ìœ¼ë¡œ ë”í° ì„œë¹„ìŠ¤ì™€ ë‹¤ì–‘í•œ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ êµ¬ì„±í•˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ëŠ” ê°œë³„ ì•±ì´ ë³´ìœ í•œ ë‹¤ì–‘í•œ ê¸°ëŠ¥ê³¼ ë°ì´í„°ê°€ ê²°í•©ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. API ì „ëµì€ ì—”ë“œìœ ì €ì™€ ëŒ€ë©´í•˜ëŠ” ì„œë¹„ìŠ¤ì™€ ë³„ê°œë¡œ ì•±ê³¼ ì•± ê°„ì˜ ì†Œë¹„í•˜ëŠ” ëª¨ë¸ì„ ë§Œë“¤ê¸°ë„ í•©ë‹ˆë‹¤.</p>
<p>ë°ì´í„°ì™€ ê¸°ëŠ¥ì´ í˜¸ì¶œë˜ë©´ ì—¬ê¸°ì— ë¹„ìš©ì´ ë°œìƒí•¨ì€ ë¬¼ë¡  ë°ì´í„°ì˜ ë³´ì•ˆê³¼ ì ‘ê·¼ì— ëŒ€í•œ ë³´í˜¸ê°€ í•„ìš”í•´ì§‘ë‹ˆë‹¤. ë‚´ì™¸ë¶€ì˜ APIì— ëŒ€í•œ ê³µê²©ì€ ì§€ì†ì ìœ¼ë¡œ ì¦ê°€í•˜ê³  ìˆê³ , ê³µê²©ìëŠ” APIì˜ ì·¨ì•½ì ì„ ì§€ì†ì ìœ¼ë¡œ, ê·¸ë¦¬ê³  ì´ì „ë³´ë‹¤ ë” ë§ì´ ê³µê²©í•©ë‹ˆë‹¤. APIì˜ ë³´ì•ˆì´ ì„¤ê³„ë‹¨ê³„ì—ì„œ ì·¨ì•½í•˜ê±°ë‚˜ ë³´ì•ˆì„ ê³ ë ¤í•˜ì§€ ì•Šê³  ê°œë°œí•˜ëŠ” ê²½ìš°ì—ëŠ” ì´í›„ ìˆ˜ë§ì€ APIê°„ í†µì‹ ì´ ë°œìƒí•˜ëŠ” ì¤‘ì´ë¼ ìˆ˜ì •ì— ëŒ€í•œ ì˜í–¥ë„ê°€ ì»¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>API ë³´ì•ˆìœ¼ë¡œ ì¸í•´ ë°ì´í„°ê°€ ëˆ„ì¶œë˜ëŠ” ì‚¬ê±´ì€ êµ­ë‚´ì™¸ë¡œ ì§€ì†ì ìœ¼ë¡œ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<ul>
<li><a href="https://www.joongang.co.kr/article/25158501#home" target="_blank" rel="noopener noreferrer">(ê¸°ì‚¬)ì´ˆê¸° ë¹„ë²ˆ ê·¸ëŒ€ë¡œ ì“´ LGìœ í”Œ</a></li>
<li><a href="https://www.businesspost.co.kr/BP?command=article_view&amp;num=333412" target="_blank" rel="noopener noreferrer">(ê¸°ì‚¬)ì‚¼ì„±ì „ì ì˜êµ­ ì˜¨ë¼ì¸ ìŠ¤í† ì–´ ê³ ê° ì •ë³´ ìœ ì¶œ</a></li>
<li><a href="https://threatpost.com/facebook-accounts-leaked-check-exposed/165245/" target="_blank" rel="noopener noreferrer">(ê¸°ì‚¬)Facebook Accounts Leaked Online</a></li>
<li><a href="https://www.vice.com/en/article/wjx3e4/t-mobile-website-allowed-hackers-to-access-your-account-data-with-just-your-phone-number" target="_blank" rel="noopener noreferrer">(ê¸°ì‚¬)T-Mobile Website Allowed Hackers to Access Your Account Data</a></li>
</ul>
<p>OWASPì—ì„œëŠ” APIì˜ ë³´ì•ˆìœ„í—˜ ìƒìœ„ 10ê°€ì§€ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•©ë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th>ìœ„í˜‘</th>
<th>ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td>ì†ìƒëœ ê°ì²´ ìˆ˜ì¤€ì˜ ê¶Œí•œ ë¶€ì—¬</td>
<td>APIëŠ” ì¢…ì¢… ê°ì²´ ì‹ë³„ìë¥¼ ì²˜ë¦¬í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë…¸ì¶œì‹œí‚¤ë©°, ê°ì²´ ìˆ˜ì¤€ì˜ ì•¡ì„¸ìŠ¤ ì œì–´ ë¬¸ì œì˜ ë„“ì€ ê³µê²© í‘œë©´ì„ ë§Œë“­ë‹ˆë‹¤. ì‚¬ìš©ì IDë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ëª¨ë“  í•¨ìˆ˜ì— ê¶Œí•œ í™•ì¸ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</td>
</tr>
<tr>
<td>ì†ìƒëœ ì¸ì¦</td>
<td>ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ì„ ì˜ëª» êµ¬í˜„í•˜ë©´ ê³µê²©ìê°€ ì¸ì¦ í† í°ì„ ì¹¨í•´í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ì‹ ì›ì„ ì¼ì‹œì  ë˜ëŠ” ì˜êµ¬ì ìœ¼ë¡œ ê°€ë¡œì±Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” API ë³´ì•ˆì„ ì €í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</td>
</tr>
<tr>
<td>ì†ìƒëœ ê°ì²´ ì†ì„± ìˆ˜ì¤€ì˜ ê¶Œí•œ ë¶€ì—¬</td>
<td>ì´ëŠ” ê³¼ë„í•œ ë°ì´í„° ë…¸ì¶œê³¼ ëŒ€ëŸ‰ í• ë‹¹ê³¼ ê´€ë ¨ëœ ë¬¸ì œë¥¼ ê²°í•©í•˜ë©°, ê°ì²´ ì†ì„± ìˆ˜ì¤€ì—ì„œì˜ ê¶Œí•œ ê²€ì¦ ë¶€ì¬ë¡œ ì¸í•´ ê¶Œí•œì´ ì—†ëŠ” ë‹¹ì‚¬ìì— ì˜í•œ ì •ë³´ ë…¸ì¶œ ë˜ëŠ” ì¡°ì‘ì´ ë°œìƒí•©ë‹ˆë‹¤.</td>
</tr>
<tr>
<td>ì œí•œ ì—†ëŠ” ë¦¬ì†ŒìŠ¤ ì†Œë¹„</td>
<td>APIì— ëŒ€í•œ ì„±ê³µì ì¸ ê³µê²©ì€ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­, CPU, ë©”ëª¨ë¦¬ ë° ì €ì¥ì†Œì™€ ê°™ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì†Œë¹„í•˜ê±°ë‚˜, ì´ë©”ì¼ì´ë‚˜ ìƒì²´ ì¸ì¦ê³¼ ê°™ì€ ê¸°íƒ€ ë¦¬ì†ŒìŠ¤ë¥¼ ì†Œë¹„í•˜ì—¬ ì„œë¹„ìŠ¤ ê³µê¸‰ ì—…ì²´ë¥¼ í†µí•´ ì œê³µë©ë‹ˆë‹¤. ì´ëŠ” ì„œë¹„ìŠ¤ ê±°ë¶€ ë˜ëŠ” ìš´ì˜ ë¹„ìš© ì¦ê°€ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</td>
</tr>
<tr>
<td>ì†ìƒëœ í•¨ìˆ˜ ìˆ˜ì¤€ì˜ ê¶Œí•œ ë¶€ì—¬</td>
<td>ë³µì¡í•œ ì•¡ì„¸ìŠ¤ ì œì–´ ì •ì±…ê³¼ ê´€ë¦¬ ë° ì¼ë°˜ ê¸°ëŠ¥ ì‚¬ì´ì˜ ëª…í™•í•œ ë¶„ë¦¬ ë¶€ì¬ë¡œ ì¸í•´ ê¶Œí•œ ê²°í•¨ì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë©°, ê³µê²©ìê°€ ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ë¦¬ì†ŒìŠ¤ ë˜ëŠ” ê´€ë¦¬ ê¸°ëŠ¥ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</td>
</tr>
<tr>
<td>ë¯¼ê°í•œ ë¹„ì¦ˆë‹ˆìŠ¤ íë¦„ì— ëŒ€í•œ ì œí•œ ì—†ëŠ” ì•¡ì„¸ìŠ¤</td>
<td>ì´ ìœ„í—˜ì´ ìˆëŠ” APIëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ íë¦„ì„ ë…¸ì¶œì‹œí‚¤ë©°, ìë™í™”ëœ ë°©ì‹ìœ¼ë¡œ ê³¼ë„í•˜ê²Œ ì‚¬ìš©ë  ê²½ìš° ë¹„ì¦ˆë‹ˆìŠ¤ì— í•´ë¥¼ ë¼ì¹  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ë³´ì™„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</td>
</tr>
<tr>
<td>ì„œë²„ ì¸¡ ìš”ì²­ ìœ„ì¡°</td>
<td>SSRF ê²°í•¨ì€ ì‚¬ìš©ì ì œê³µ URIë¥¼ ìœ íš¨ì„± ê²€ì‚¬í•˜ì§€ ì•Šê³  ì›ê²© ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ë°œìƒí•˜ë©°, ì´ë¥¼ í†µí•´ ê³µê²©ìëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì´ ì˜ˆìƒì¹˜ ëª»í•œ ëŒ€ìƒìœ¼ë¡œ ì¡°ì‘ëœ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ ê°•ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</td>
</tr>
<tr>
<td>ë³´ì•ˆ êµ¬ì„± ì˜¤ë¥˜</td>
<td>API ë° ì´ë¥¼ ì§€ì›í•˜ëŠ” ì‹œìŠ¤í…œì˜ ë³µì¡í•œ êµ¬ì„±ì€ ì¢…ì¢… ë¬´ì‹œë˜ê±°ë‚˜ ì•ˆì „í•œ ë°©ì‹ìœ¼ë¡œ êµ¬ì„±ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ë‹¤ì–‘í•œ ìœ í˜•ì˜ ê³µê²©ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</td>
</tr>
<tr>
<td>ë¶€ì ì ˆí•œ ì¸ë²¤í† ë¦¬ ê´€ë¦¬</td>
<td>APIëŠ” ì¢…ì¢… ë” ë§ì€ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë…¸ì¶œì‹œí‚¤ë©°, ì ì ˆí•˜ê³  ìµœì‹ ì˜ ë¬¸ì„œ ë° í˜¸ìŠ¤íŠ¸ ë° ë°°í¬ëœ API ë²„ì „ì˜ ì¸ë²¤í† ë¦¬ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.</td>
</tr>
<tr>
<td>APIì˜ ì•ˆì „í•˜ì§€ ì•Šì€ ì‚¬ìš©</td>
<td>ê°œë°œìëŠ” ì‚¬ìš©ì ì…ë ¥ë³´ë‹¤ ì œ3ì APIì—ì„œ ë°›ì€ ë°ì´í„°ë¥¼ ë” ì‹ ë¢°í•˜ë©°, ë” ì•½í•œ ë³´ì•ˆ í‘œì¤€ì„ ì±„íƒí•©ë‹ˆë‹¤. ê³µê²©ìëŠ” ëª©í‘œ APIë¥¼ ì§ì ‘ ê³µê²©í•˜ëŠ” ëŒ€ì‹  í†µí•©ëœ ì œ3ì ì„œë¹„ìŠ¤ë¥¼ ëŒ€ìƒìœ¼ë¡œí•˜ê¸° ë•Œë¬¸ì— APIë¥¼ ì†ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</td>
</tr>
</tbody>
</table>
<p>ë³´ì•ˆ ìœ„í˜‘ì— ëŒ€í•´ HashiCorpì˜ ì†”ë£¨ì…˜ë“¤ì´ ì§€ì›í•˜ëŠ” ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th>ì†”ë£¨ì…˜</th>
<th>ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vault</td>
<td>1) APIì—ì„œ ì‚¬ìš©ë˜ëŠ” ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•˜ê³ , ì¸ê°€ì— ëŒ€í•œ ë°ì´í„°ë¥¼ í•¨ê»˜ ê´€ë¦¬í•˜ì—¬ í†µí•©ëœ ì¸ì¦/ì¸ê°€ë¥¼ ì„¤ê³„í•©ë‹ˆë‹¤. 2) ë°œí–‰ëœ ì¸ì¦ ì •ë³´ëŠ” ìˆ˜ëª…ì´ ì§§ê³  ìë™í™”ëœ ê°±ì‹  í”„ë¡œì„¸ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. 3) ì¸ì¦ëœ ì•±, ì¥ë¹„ê°„ í†µì‹ ì„ ìœ„í•œ ì¸ì¦ì„œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. 4) ë°ì´í„°ì˜ ì•”í˜¸í™” ë³µí˜¸í™” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</td>
</tr>
<tr>
<td>Consul</td>
<td>1) ë¹„ì¦ˆë‹ˆìŠ¤ íë¦„ ë° ì¸ë²¤í† ë¦¬ ê´€ë¦¬ë¥¼ ì •ì˜í•˜ì—¬ ì˜ë„ëœ API íë¦„ì„ ì •ì˜í•©ë‹ˆë‹¤. 2) ì„œë¹„ìŠ¤ ë©”ì‹œë¥¼ í†µí•´ ì‹ ë¢°ê´€ê³„ì¸ ì„œë¹„ìŠ¤ ê°„ì— í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ì •ì˜í•©ë‹ˆë‹¤. 3) ì„œë¹„ìŠ¤ ë§ˆë‹¤ ìš”ì²­ì— ëŒ€í•œ ì œí•œì„ ì ìš©í•©ë‹ˆë‹¤.</td>
</tr>
<tr>
<td>Terraform</td>
<td>ì¸í”„ë¼ ë³´ì•ˆ êµ¬ì„±ì„ í‘œì¤€í™” í•˜ê³ , ë³´ì•ˆ ì •ì±…ì„ ì¤€ìˆ˜í•˜ëŠ” ì¸í”„ë¼ êµ¬ì„±ì„ í•˜ë„ë¡ ë•ìŠµë‹ˆë‹¤.</td>
</tr>
<tr>
<td>Nomad</td>
<td>ì•± ë°°í¬ ìë™í™”ì™€ ë”ë¶ˆì–´ Consul ì—°ê³„í•œ ì„œë¹„ìŠ¤ ë©”ì‹œ, Vault ì—°ê³„ëœ ì‹œí¬ë¦¿ ìë™í™”ë¥¼ í”Œë«í¼ ìˆ˜ì¤€ì—ì„œ ì§€ì› í•©ë‹ˆë‹¤.</td>
</tr>
</tbody>
</table>
<p>ì—¬ê¸°ì„œëŠ” Vaultì˜ API ë³´ì•ˆì— ëŒ€í•œ ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ì„ ì„¤ëª… í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>ê¸°íƒ€ ì°¸ê³ </p>
<ul>
<li><a href="https://youtu.be/eFdwlCNLL8s?si=oocJgV8HTXai1gcX" target="_blank" rel="noopener noreferrer">(Consul) ì„œë¹„ìŠ¤ ë©”ì‹œë¡œ íŠ¸ë˜í”½ ì œì–´(ì˜ìƒ)</a></li>
<li><a href="https://youtu.be/_TbhKFp2sd4?si=PFh7_SekV40UL7Ax" target="_blank" rel="noopener noreferrer">(Terraform) ì„¼í‹°ë„, ì½”ë“œí™”ëœ ì •ì±… ì ìš© ìµíˆê¸°(ì˜ìƒ)</a></li>
<li><a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/mtls.html" target="_blank" rel="noopener noreferrer">(Vault) PKIë¥¼ ì‚¬ìš©í•˜ì—¬ mTLS êµ¬ì„±ì˜ ì¸ì¦ì„œ ìë™í™”</a></li>
<li><a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/nomad-integration.html" target="_blank" rel="noopener noreferrer">(Nomad) í”Œë«í¼ ìˆ˜ì¤€ì˜ ì‹œí¬ë¦¿ ìë™í™” ì§€ì›</a></li>
</ul>
</blockquote>
<h2>1. APIë¥¼ ìœ„í•œ ì¸ì¦ê³¼ ì¸ê°€, API Key</h2>
<p>APIë¡œ ì„œë¹„ìŠ¤ë¥¼ ê¸°íší•˜ëŠ” ê²½ìš° ìš”ì²­ì„ ì‹ë³„í•˜ê³  ì ì ˆí•œ ê¶Œí•œì„ ë¶€ì—¬í•˜ê¸° ìœ„í•´ API í‚¤ ë˜ëŠ” API í† í°ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(API Keyë¡œ ì„¤ëª…í•©ë‹ˆë‹¤). ìš°ë¦¬ê°€ ì´ì•¼ê¸°í•˜ëŠ” í´ë¼ìš°ë“œ ë˜í•œ APIë¡œ êµ¬ì„±ëœ ì¸í”„ë¼ì™€ ì„œë¹„ìŠ¤ ë©ì–´ë¦¬ ì…ë‹ˆë‹¤. ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ ì—°ê³„í•˜ê¸° ìœ„í•´ í´ë¼ìš°ë“œë¥¼ ë¹„ë¡¯ ìˆ˜ë§ì€ API ì„œë¹„ìŠ¤ëŠ” ì‹ë³„ê°€ëŠ¥í•œ ì¸ì¦ê³¼ ì‚¬ìš©ì— ëŒ€í•œ ê¶Œí•œ ìš©ë„ë¡œ <code>API Key</code>ì„ ì œê³µ í•©ë‹ˆë‹¤.</p>
<figure><figcaption>AWS API ì¸ì¦ì„ ìœ„í•œ Key ê´€ë¦¬ í™”ë©´</figcaption></figure>
<p><a href="https://aws.amazon.com/ko/what-is/api-key/" target="_blank" rel="noopener noreferrer">API í‚¤ë€ ë¬´ì—‡ì¸ê°€ìš”?</a> ë¼ëŠ” AWS ë¬¸ì„œì— ë³´ë©´ API í‚¤ ëª¨ë²” ì‚¬ë¡€ì—ì„œ ì¸ì¦ê³¼ ì¸ê°€ë¥¼ ìœ„í•œ <mark>ì¤‘ìš”í•œ</mark> API í‚¤/í† í°ì— ëŒ€í•´ ì–´ë–»ê²Œ ê´€ë¦¬í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤.</p>
<ul>
<li>ì‚¬ìš©ì ì¸ì¦ì— API í‚¤ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. API í‚¤ëŠ” ì‚¬ìš©ì ì•¡ì„¸ìŠ¤ë¥¼ ê·œì œí•˜ê¸° ìœ„í•œ ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ì „ì†¡ ì¤‘ì— í‘œì‹œë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê¸°ë°€ ì •ë³´ë¥¼ API í‚¤ì— í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.</li>
<li>API í‚¤ë¥¼ ì†ŒìŠ¤ ì½”ë“œë‚˜ ë¦¬í¬ì§€í† ë¦¬ì— ì§ì ‘ ì„ë² ë“œí•˜ì§€ ë§ˆì„¸ìš”. ì‚­ì œí•˜ì§€ ì•Šìœ¼ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê²Œì‹œí•  ë•Œ ì¼ë°˜ì— ë…¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>API í‚¤ë¥¼ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•Šì„ ë•ŒëŠ” ì‚­ì œí•˜ì„¸ìš”. ë³´ë‹¤ ê°•ë ¥í•œ API ë³´ì•ˆì„ ìœ„í•´ í‚¤ì— ë§Œë£Œ ì‹œê°„ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³´ì„¸ìš”.</li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">ëª¨ë²” ì‚¬ë¡€ë¥¼ ì •ë¦¬í•´ë³´ë©´</p>
<ol>
<li>ì‚¬ìš©ì(ì‚¬ëŒ)ë³´ë‹¤ëŠ” ì•± ì¸ì¦ì— ì‚¬ìš©í•˜ê³ </li>
<li>í‰ë¬¸ì˜ ê³ ì •ëœ ê°’ìœ¼ë¡œ ê¸°ë¡í•˜ì§€ ì•Šê¸°ë¥¼ ê¶Œì¥í•˜ê³ </li>
<li>ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì‚­ì œí•˜ê³  ë§Œë£Œ ì‹œê°„ì„ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤.</li>
</ol>
</div>
<p>API í‚¤/í† í°ì´ ì œê³µí•˜ëŠ” ì¸ì¦ ë° ì¸ê°€ì— ë”ë¶ˆì–´, ìœ„ì˜ ëª¨ë²” ì‚¬ë¡€ë¥¼ ì ìš©í•˜ë©´ OWASPì—ì„œ ì§€ì í•œ ìœ„í˜‘ì¤‘ ë‹¤ìŒì„ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<ul>
<li>ì†ìƒëœ ê°ì²´ ìˆ˜ì¤€ì˜ ê¶Œí•œ ë¶€ì—¬</li>
<li>ì†ìƒëœ ì¸ì¦</li>
<li>ì†ìƒëœ ê°ì²´ ì†ì„± ìˆ˜ì¤€ì˜ ê¶Œí•œ ë¶€ì—¬</li>
<li>ì†ìƒëœ í•¨ìˆ˜ ìˆ˜ì¤€ì˜ ê¶Œí•œ ë¶€ì—¬</li>
</ul>
<div class="hint-container caution">
<p class="hint-container-title">í•˜ì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ ì´ê°™ì€ ëª¨ë²”ì‚¬ë¡€ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ê¸°ë€ ì–´ë µìŠµë‹ˆë‹¤.</p>
<ul>
<li>ê¸°ë¡í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ëˆ„êµ°ê°€ ëŒ€ì‹  ë„£ì–´ì£¼ê±°ë‚˜(Injection) ë³„ë„ API í‚¤/í† í° ì €ì¥ì†Œë¥¼ ë‘ì–´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. (ì´ë•Œ ë˜ ì €ì¥ì†Œì— ëŒ€í•œ ì¸ì¦ì´ í•„ìš”í•˜ë‹¤.)</li>
<li>ì‚­ì œì— ëŒ€í•œ í›ˆë ¨ì´ ë¶€ì¡±í•˜ê³ , ì„œë¹„ìŠ¤ì˜ ëŠê¹€ ì—†ì´ êµì²´í•  ìˆ˜ ìˆëŠ” ìë™í™” ë°©ì•ˆì´ í•„ìš”í•˜ë‹¤.</li>
</ul>
</div>
<p>API ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ API í‚¤/í† í° ë°œê¸‰ ë° ê´€ë¦¬ ì‹œìŠ¤í…œì„ ì œê³µí•˜ê³ , ëª¨ë²”ì‚¬ë¡€ë¥¼ êµ¬í˜„í•˜ê¸°ìœ„í•´ Vaultë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2>2. API Keyë¥¼ ìœ„í•œ Vault ìš”ì†Œ</h2>
<p>Vaultì—ëŠ” í”Œë«í¼ ë° ì†Œí”„íŠ¸ì›¨ì–´ì™€ ì¸í„°í˜ì´ì‹±í•˜ê¸°ìœ„í•´ ìš”êµ¬ë˜ëŠ” ì¸ì¦ ì •ë³´ë¥¼ ëª¨ë²”ì‚¬ë¡€ì— ë”°ë¼ ê´€ë¦¬í•˜ê³  ìë™í™”í•  ìˆ˜ ìˆë„ë¡ ë‹¤ì–‘í•œ <a href="https://developer.hashicorp.com/vault/docs/secrets" target="_blank" rel="noopener noreferrer">Secret Engine</a>ì´ ì¤€ë¹„ë˜ì–´ìˆìŠµë‹ˆë‹¤. ì´ë“¤ ì‹œí¬ë¦¿ ìš”ì†ŒëŠ” í‰ë¬¸ìœ¼ë¡œ ì €ì¥í•˜ì§€ ì•Šê³  ì§§ì€ ìˆ˜ëª…ì£¼ê¸°ë¥¼ ê°–ìœ¼ë©° ê´€ë¦¬ë˜ë„ë¡ í•˜ëŠ”ë° ì¤‘ì ì„ ë‘ë©°, ê°ê°ì˜ í”Œë«í¼ê³¼ ì†Œí”„íŠ¸ì›¨ì–´ì˜ íŠ¹ì„±ì— ë§ì¶° ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì—¬ê¸°ì„œëŠ” ì¤€ë¹„ëœ <code>Secret Engine</code>ì™¸ì— ìì²´ ê°œë°œë˜ëŠ” API ê¸°ë°˜ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ Vaultê°€ ê°–ëŠ” íŠ¹ì„±ì„ í†µí•´ ëª¨ë²”ì‚¬ë¡€ë¥¼ ë‹¬ì„±í•˜ì—¬ API ë³´ì•ˆì„ ë‹¬ì„±í•˜ëŠ”ë° ë„ì›€ì´ ë ë§Œí•œ ìš”ì†Œë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
<h3>2.1 Vault Token</h3>
<blockquote>
<p><a href="https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-token.html" target="_blank" rel="noopener noreferrer">Vault Tokenì˜ ì´í•´</a></p>
</blockquote>
<p><code>Vault Token</code>ì€ Vault ë‚´ì—ì„œëŠ” ì¸ì¦ ì´í›„ì˜ API ì¸ì¦/ì¸ê°€ë¥¼ ë‹´ë‹¹í•˜ëŠ” ìš”ì†Œì…ë‹ˆë‹¤. API í‚¤/í† í° ìš”ì†Œ ë° ë°œê¸‰ ì„œë¹„ìŠ¤ë¡œì„œ ë‹¤ìŒì˜ íŠ¹ì§•ì„ ê°–ìŠµë‹ˆë‹¤.</p>
<ul>
<li>ì˜êµ¬ì ì´ì§€ ì•Šê³  ìƒìƒ ì‹œ ë§ˆë‹¤ ê³ ìœ í•œ ê°’ì„ ê°–ìŠµë‹ˆë‹¤</li>
<li>ë©”íƒ€ ë°ì´í„° ì •ì˜ë¥¼ í†µí•´ ì‚¬ìš©ìê°€ API ì•±ì„ ê°œë°œí•¨ì— ìˆì–´ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë‹´ì•„ ì‚¬ìš©ìì™€ ê¶Œí•œì„ êµ¬ë¶„í•˜ëŠ” ìš©ë„ë¡œë„ í™œìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
<li>Vault Audit Logë¥¼ í†µí•´ ìƒì„± ìš”ì²­ì„ ê°ì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>ì†ìƒëœ API í‚¤/í† í°ìœ¼ë¡œ í™•ì¸ ëœ ê²½ìš° ê°•ì œ ë§Œë£Œ(Revoke)</li>
<li><code>token_bound_cidrs</code> ì˜µì…˜ì„ í†µí•´ Vault Tokenì— ëŒ€í•´ ê²€ì¦ ìš”ì²­ì´ ê°€ëŠ¥í•˜(ì‚¬ìš©) ë„¤íŠ¸ì›Œí¬ CIDR ëŒ€ì—­ì„ ì§€ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>Vault Sentinel ê¸°ëŠ¥ì„ í†µí•´ ë°œê¸‰ ìš”ì²­ì— ëŒ€í•œ ì˜µì…˜ê°’ ì •ì±…ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>Vault Rate Limit ê¸°ëŠ¥ê³¼ Quotaë¥¼ ì‚¬ìš©í•˜ì—¬ Vault Token ë°œê¸‰ ë° ê²€ì¦ì— í˜¸ì¶œ ê±´ìˆ˜ë¥¼ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>Vault Performance Replication ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìˆ˜ì˜ í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œ ë™ì¼í•œ êµ¬ì„±ì„ ì¤‘ì•™ ê´€ë¦¬í•©ë‹ˆë‹¤.</li>
<li>Vault Disaster Recovery ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ Vault ì¥ì• ì‹œ ì „í™˜ì„ í†µí•´ ê¸°ì¡´ ë°œê¸‰ëœ Vault Token ë‚´ì—­ì„ ë³µêµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<p><code>API í‚¤ ê´€ë¦¬ ì„œë¹„ìŠ¤</code>ë¡œì„œì˜ VaultëŠ” ë¶„ì‚° ë° í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ê´€ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” ìš”ì†Œë¥¼ ê²©ë¦¬ ë° ê°€ìš©ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<figure><figcaption>Vault API Key as a Service</figcaption></figure>
<p>Tokenì„ ìƒì„±í•˜ëŠ” CLIë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•˜ì—¬ ì¶œë ¥ëœ ê²°ê³¼ë¥¼ í™•ì¸í•´ë´…ë‹ˆë‹¤.</p>
<details class="hint-container details"><summary>Vault Dev ëª¨ë“œë¡œ ì‹¤í–‰</summary>
<p><a href="https://developer.hashicorp.com/vault/install?product_intent=vault" target="_blank" rel="noopener noreferrer">Vault Download ì•ˆë‚´ ë§í¬</a></p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ì„œë²„ ì‹¤í–‰</span></span>
<span class="line">vault server <span class="token parameter variable">-dev</span> -dev-root-token-id<span class="token operator">=</span>root</span>
<span class="line"></span></code></pre></div><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># Devìš© ROOT Token</span></span>
<span class="line"><span class="token assign-left variable">VAULT_TOKEN</span><span class="token operator">=</span>root</span>
<span class="line"></span></code></pre></div></details>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line">$ vault token create -format=json \</span>
<span class="line">  -policy=default \</span>
<span class="line">  -ttl=<span class="token number">30</span> \</span>
<span class="line">  -metadata=type=api-admin \</span>
<span class="line">  -orphan=<span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"request_id"</span><span class="token operator">:</span> <span class="token string">"8e2a416d-5587-90d1-68bd-d930a2005442"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"lease_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"lease_duration"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"renewable"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"warnings"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"auth"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line highlighted">    <span class="token property">"client_token"</span><span class="token operator">:</span> <span class="token string">"hvs.CAESIJz-I42G1S4nWalCu3yrKwV63FW-3wKV4H****"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"accessor"</span><span class="token operator">:</span> <span class="token string">"JOmunQGBUBgC4gaYzOt3gL8k"</span><span class="token punctuation">,</span></span>
<span class="line highlighted">    <span class="token property">"policies"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"default"</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"token_policies"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"default"</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"identity_policies"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line highlighted">    <span class="token property">"metadata"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line highlighted">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"api-admin"</span></span>
<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"orphan"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"entity_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="line highlighted">    <span class="token property">"lease_duration"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"renewable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"mfa_requirement"</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>API í‚¤/í† í° ìš”ì†Œë¡œ í™œìš©ë˜ëŠ” Vault Tokenì˜ ìš”ì†Œì™€ íŠ¹ì„±ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th>ìš”ì†Œ</th>
<th>íŠ¹ì„±</th>
</tr>
</thead>
<tbody>
<tr>
<td>auth.client_token</td>
<td>ë°œìƒëœ ê³ ìœ  API í‚¤/í† í°ìœ¼ë¡œ í™œìš©í•©ë‹ˆë‹¤. ë°œê¸‰ ì‹œë§ˆë‹¤ ê³ ìœ í•œ ê°’ì„ ê°–ìŠµë‹ˆë‹¤.</td>
</tr>
<tr>
<td>auth.policies</td>
<td><code>default</code> ì •ì±…ì€ í•´ë‹¹ í† í°ìœ¼ë¡œ Vaultë‚´ì—ì„œ ìê¸° ìì‹ ì˜ ìƒíƒœ ë° ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬ í•©ë‹ˆë‹¤.</td>
</tr>
<tr>
<td>auth.metadata</td>
<td>API í‚¤/í† í°ì„ êµ¬ë¶„í•  ë©”íƒ€ë°ì´í„°ë¡œ í™œìš©ë©ë‹ˆë‹¤. ì‚¬ìš©ì ì‹ë³„ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ê¶Œí•œì— ëŒ€í•´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</td>
</tr>
<tr>
<td>auth.lease_duration</td>
<td>ë°œìƒëœ í† í°ì˜ ìœ íš¨ ê¸°ê°„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</td>
</tr>
</tbody>
</table>
<p>ê²€ì¦ì„ ìœ„í•œ ì ˆì°¨ë¡œ Token(auth.client_token ê°’)ì„ ì¡°íšŒí•œ ê²½ìš° ì •ìƒì¸ ê²½ìš° ë‹¤ìŒì˜ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line">$ vault token lookup -format=json hvs.CAESIFIvewF8ayV-6Qe_YYtrYjnFRUJaMXHOOHNuo23****</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"request_id"</span><span class="token operator">:</span> <span class="token string">"8d7af9d6-5af4-8f30-da8d-3bcfd3f10d44"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"lease_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"lease_duration"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"renewable"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"accessor"</span><span class="token operator">:</span> <span class="token string">"1tn5yr9Ybadum7I1EIirgaBN"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"creation_time"</span><span class="token operator">:</span> <span class="token number">1710836854</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"creation_ttl"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"display_name"</span><span class="token operator">:</span> <span class="token string">"token"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"entity_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"expire_time"</span><span class="token operator">:</span> <span class="token string">"2024-03-19T17:28:04.530353+09:00"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"explicit_max_ttl"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"hvs.CAESIFIvewF8ayV-6Qe_YYtrYjnFRUJaMXHOOHNuo23****"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"issue_time"</span><span class="token operator">:</span> <span class="token string">"2024-03-19T17:27:34.530355+09:00"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"meta"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"api-admin"</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"num_uses"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"orphan"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"auth/token/create"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"policies"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"default"</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"renewable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"ttl"</span><span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"service"</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"warnings"</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>Vault Tokenì˜ TTLì´ ë§Œë£Œëœ ê²½ìš° Vault ë‚´ì—ì„œ ì´ë¯¸ Tokenì´ ë§Œë£Œì²˜ë¦¬(Revoke) ë˜ë¯€ë¡œ ê¶Œí•œì—†ìŒì˜ ì—ëŸ¬ë¥¼ ë°˜í™˜ í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault token lookup <span class="token parameter variable">-format</span><span class="token operator">=</span>json hvs.CAESIFIvewF8ayV-6Qe_YYtrYjnFRUJaMXHOOHNuo23****</span>
<span class="line">Error looking up token: Error making API request.</span>
<span class="line"></span>
<span class="line">URL: POST http://127.0.0.1:8200/v1/auth/token/lookup</span>
<span class="line">Code: <span class="token number">403</span>. Errors:</span>
<span class="line"></span>
<span class="line">* bad token</span>
<span class="line"></span></code></pre></div><h3>2.2 Vault Token Role</h3>
<p>Cloud ì„œë¹„ìŠ¤, IAM, ì¸ì¦ ì„œë¹„ìŠ¤ ë“±ì„ ë‹¤ë¤„ë³¸ ì‚¬ìš©ìë¼ë©´ ì •ì±…(policy)ê³¼ ì—­í• (role)ì— ëŒ€í•œ ê°œë…ì„ ì§€ì†ì ìœ¼ë¡œ ì ‘í•˜ê²Œ ë©ë‹ˆë‹¤. ì—­í• ì€ ë‹¤ìˆ˜ì˜ ì •ì±…ì´ ë¶€ì—¬ëœ ê¶Œí•œ í…œí”Œë¦¿ì´ë¼ ë³¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th>ìš©ì–´</th>
<th>ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td>ì •ì±…(Policy)</td>
<td>ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì‚¬ìš© ê¶Œí•œì„ ì •ì˜í•©ë‹ˆë‹¤.</td>
</tr>
<tr>
<td>ì—­í• (Role)</td>
<td>Identity ìš”ì†Œë¡œ, ì •ì±…ì´ ë¶€ì—¬ëœ ëŒ€ìƒìœ¼ë¡œ, ë‹¤ìˆ˜ì˜ ì •ì±…ì„ ê°–ìŠµë‹ˆë‹¤.</td>
</tr>
</tbody>
</table>
<p>ì•ì„œ <a href="#21-vault-token">2.1 Vault Token</a>ì—ì„œ ì •ì˜ë˜ëŠ” Vault Tokenì€ ë°œê¸‰ í•  ë•Œë§ˆë‹¤ ìˆ˜ëª…(TTL)ê³¼ ë©”íƒ€ë°ì´í„° ë“±ì˜ ì˜µì…˜ì„ í•­ìƒ ì§€ì •í•´ì•¼ í•˜ëŠ” ë°˜ë©´, Vault Token Roleì„ ì •ì˜í•˜ë©´ ë¯¸ë¦¬ ì„¤ì •ëœ ê°’ìœ¼ë¡œ ë§¤ë²ˆ ê°™ì€ ì¡°ê±´ì˜ Vault Tokenì´ ìƒì„±ë˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ë‹¤ìŒê³¼ ê°™ì´ ì—­í• ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault <span class="token function">write</span> /auth/token/roles/api-admin <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">orphan</span><span class="token operator">=</span>true <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">token_explicit_max_ttl</span><span class="token operator">=</span><span class="token number">30</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">token_period</span><span class="token operator">=</span><span class="token number">30</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">token_type</span><span class="token operator">=</span>service <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">allowed_policies</span><span class="token operator">=</span>default <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">disallowed_policies</span><span class="token operator">=</span>root</span>
<span class="line"></span></code></pre></div><p>ì •ì˜ëœ <code>api-admin</code> ì—­í• ì„ ì§€ì •í•˜ì—¬ Vault Tokenì„ ìƒì„±í•©ë‹ˆë‹¤. (<code>metadata</code>ëŠ” ìƒì„±ì‹œ ë„£ì–´ì£¼ëŠ” ê°’ìœ¼ë¡œ ë¯¸ë¦¬ ì—­í• ì— ì§€ì •í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.)</p>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line">$ vault token create -format=json -role=api-admin -metadata=foo=bar</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"request_id"</span><span class="token operator">:</span> <span class="token string">"f09c2ed5-00d9-50d1-125d-c11422aa688f"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"lease_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"lease_duration"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"renewable"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"warnings"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"auth"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"client_token"</span><span class="token operator">:</span> <span class="token string">"hvs.CAESIKuBuHgqkFZ3IIuY80JzQq5kGci-9Jd2Xix****"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"accessor"</span><span class="token operator">:</span> <span class="token string">"asIKCp1Wtyb0VdzjPHEvN4EE"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"policies"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"default"</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"token_policies"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"default"</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"identity_policies"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"metadata"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"foo"</span><span class="token operator">:</span> <span class="token string">"bar"</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"orphan"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"entity_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"lease_duration"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"renewable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"mfa_requirement"</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>ì•ì„œ Vault Tokenì„ ì§ì ‘ ìƒì„±í•˜ëŠ” ê²ƒê³¼ì˜ ì°¨ì´ëŠ” ëŒ€ë¶€ë¶„ì˜ ì˜µì…˜(ìˆ˜ëª…ì£¼ê¸°, ë…ë¦½ëœ Token ì—¬ë¶€, ë¶ˆí•„ìš”í•œ Vaultì˜ ì •ì±… ë¶€ì—¬ ë§‰ê¸°)ì´ ë¯¸ë¦¬ ì„ ì–¸ ë˜ì—ˆë‹¤ëŠ” ì ê³¼, ì—­í•  ê³ ìœ ì˜ ê°’ì´ ì¡°íšŒì‹œ í™•ì¸ë©ë‹ˆë‹¤.</p>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line">$ vault token lookup -format=json hvs.CAESIKuBuHgqkFZ3IIuY80JzQq5kGci-9Jd2X****</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"request_id"</span><span class="token operator">:</span> <span class="token string">"809a0395-b33c-ebf1-9ff4-f98a984d2ba8"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"lease_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"lease_duration"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"renewable"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"accessor"</span><span class="token operator">:</span> <span class="token string">"asIKCp1Wtyb0VdzjPHEvN4EE"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"creation_time"</span><span class="token operator">:</span> <span class="token number">1710837749</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"creation_ttl"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"display_name"</span><span class="token operator">:</span> <span class="token string">"token"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"entity_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"expire_time"</span><span class="token operator">:</span> <span class="token string">"2024-03-19T17:42:59.684424+09:00"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"explicit_max_ttl"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"hvs.CAESIKuBuHgqkFZ3IIuY80JzQq5kGci-9Jd2Xix2****"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"issue_time"</span><span class="token operator">:</span> <span class="token string">"2024-03-19T17:42:29.684426+09:00"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"meta"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"foo"</span><span class="token operator">:</span> <span class="token string">"bar"</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"num_uses"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"orphan"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line highlighted">    <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"auth/token/create/api-admin"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"policies"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"default"</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"renewable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line highlighted">    <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"api-admin"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"ttl"</span><span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"service"</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"warnings"</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><code>role</code> í•­ëª©ì´ ì¶”ê°€ë˜ì–´ í•´ë‹¹ í† í°ì´ ì–´ë–¤ ì—­í• ë¡œ ë¶€í„° ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì•±ì—ì„œëŠ” ì´ëŸ° ì—­í•  ê°’ì„ ì¡°íšŒí•˜ì—¬ ë‚´ë¶€ì ìœ¼ë¡œ ê¶Œí•œ ë¶€ì—¬ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3>2.3 ìë™í™”</h3>
<p>Vault Tokenì´ ì œê³µí•˜ëŠ” API Keyì— ìˆ˜ëª…ì£¼ê¸° ê¸°ëŠ¥ì€ ëª¨ë²”ì‚¬ë¡€ì¸ ë¹„ì˜êµ¬ì„±ì„ ë§Œì¡±í•˜ë‚˜, ì´ê²½ìš° ìë™í™”ê°€ ë’·ë°›ì¹¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì•± ë° APIë¥¼ í˜¸ì¶œí•˜ëŠ” ì™¸ë¶€ ì„œë¹„ìŠ¤ëŠ” API Keyë¥¼ ìˆ˜ëª…ì£¼ê¸° ë§Œë£Œ ì „ì— ê°±ì‹ í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì•±ìœ¼ë¡œ ê°œë°œë˜ëŠ” ê²½ìš° ê°œë°œ ë¡œì§ì— ìë™í™” í–‰ìœ„ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆì§€ë§Œ, ì •ì ì¸ íŒŒì¼ì´ë‚˜ êµ¬ì„±ì— ì¡´ì¬í•´ì•¼ í•˜ëŠ” ê²½ìš° ë¶„ì‚°ëœ ì„œë¹„ìŠ¤ ìˆ˜ë§Œí¼ì˜ ìˆ˜ì‘ì—…ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="hint-container tip">
<p class="hint-container-title">ìë™í™”ì˜ í•µì‹¬ì€ ì¸ì¦!</p>
<p>API Keyë¥¼ ìš”ì²­í•˜ëŠ” ëŒ€ìƒ ë˜í•œ ë¯¿ì„ ìˆ˜ ìˆëŠ” ëŒ€ìƒì´ì—¬ì•¼ í•©ë‹ˆë‹¤. ê¸°ì¡´ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ë˜ëŠ” SaaS ì„œë¹„ìŠ¤ì—ì„œ API Keyë¥¼ ìƒì„±í•˜ëŠ” ê²½ìš°, ê´€ë¦¬ìì¸ ì‚¬ëŒì´ ì–´ë–¤ ë°©ì‹(ID/PW, OIDC ë“±)ì„ í†µí•´ ë¯¿ì„ ìˆ˜ ìˆëŠ” ì‚¬ìš©ìì¸ì§€ ì¸ì¦ í•œë’¤ API Keyë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ê°™ì€ ìˆ˜ë™ ì‘ì—…ì„ ìë™í™”í•˜ë ¤ë©´ API Keyë¥¼ ì‚¬ìš©í•˜ë ¤ëŠ” ëŒ€ìƒì´ ì§ì ‘ ì¸ì¦ ë°©ì‹ì„ í†µí•´ API Keyë¥¼ ë°œê¸‰ ë° ê°±ì‹ í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</p>
</div>
<p>VaultëŠ” ë‹¤ìŒì˜ ê¸°ì „ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë²”ì‚¬ë¡€ë¥¼ ì¤€ìˆ˜í•˜ë©´ì„œ ìë™í™”ê°€ëŠ¥í•œ ë°©ì•ˆì„ ì œê³µí•©ë‹ˆë‹¤. ê¸°ë³¸ êµ¬ì¡°ì™€ í–‰ìœ„ì˜ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<figure><figcaption>API Token Service Default Architecture</figcaption></figure>
<ol>
<li>API Tokenì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ëŠ” Tokenì„ ìš”ì²­í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆìŒì„ ì¸ì¦ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.</li>
<li>Token ë°œê¸‰ì„ ë‹´ë‹¹í•˜ëŠ” Vaultë¡œ ì§ì ‘ ì ‘ì†í•˜ê¸° ë³´ë‹¤ ì œí•œëœ ê¸°ëŠ¥ë§Œ ìˆ˜í–‰í•˜ëŠ” <code>Vault Proxy</code>ë¥¼ í†µí•´ ìš”ì²­í•©ë‹ˆë‹¤.</li>
<li>ì¸ì¦ì´ í†µê³¼í•˜ë©´ <code>Vault Proxy</code>ëŠ” Vault ì„œë²„ë¡œë¶€í„° Tokenì„ ìƒì„±í•˜ê³ , ìš”ì²­í•œ ì„œë¹„ìŠ¤ë¡œ ë°˜í™˜ í•©ë‹ˆë‹¤.</li>
<li>ì„œë¹„ìŠ¤ëŠ” Tokenì„ API ìš”ì²­ì— ë‹´ì•„ API ì„œë¹„ìŠ¤ë¡œ ìš”ì²­í•©ë‹ˆë‹¤.</li>
<li>API ì„œë¹„ìŠ¤ëŠ” ì „ë‹¬ë°›ì€ API Tokenì„ Vault ì„œë²„ì— ê²€ì¦í•˜ê³  ë¶€ì—¬ëœ ê¶Œí•œì„ í™•ì¸í•˜ì—¬ ì‘ë‹µí•©ë‹ˆë‹¤.</li>
</ol>
<h4>ğŸš€ [ìë™í™” ë°©ì•ˆ 1] ì•±ì—ì„œ ì¸ì¦ê³¼ Token ë°œê¸‰ ì²˜ë¦¬</h4>
<p>ê°œë°œë˜ëŠ” ì•±ì€ Vaultì˜ ë‹¤ì–‘í•œ ì¸ì¦ ë°©ì‹ë“¤ì„ ì‚¬ìš©í•˜ì—¬ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì•±ì„ì„ ì¦ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•±ì´ ë…ìì ìœ¼ë¡œ Vaultì— ì¸ì¦ ë°›ëŠ”ë° ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ìˆ˜ë‹¨ì€ AppRole ë°©ì‹ ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>ì°¸ê³  : <a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/spring-boot.html" target="_blank" rel="noopener noreferrer">Vaultë¡œ Spring Boot êµ¬ì„±ê´€ë¦¬</a></p>
</blockquote>
<ul>
<li>CICD ë„êµ¬ëŠ” Vaultì™€ ìƒí˜¸ ì¸ì¦ë©ë‹ˆë‹¤.</li>
<li>ë°°í¬ íŒŒì´í”„ë¼ì¸ìƒì—ì„œ Vault AppRoleì˜ ì¸ì¦ ì •ë³´(App ID, Secret ID)ë¥¼ íšë“í•©ë‹ˆë‹¤.</li>
<li>ì•±ì´ ë°°í¬ë  ë•Œ AppRole ì¸ì¦ì •ë³´ë¡œ Vault Proxyì— ì¸ì¦ ë°›ìŠµë‹ˆë‹¤.</li>
<li>ì•±ì€ Vault Proxyë¡œ API ìš”ì²­ì— í•„ìš”í•œ API Key(Token)ë¥¼ Vault Token Role ê¸°ë°˜ìœ¼ë¡œ ë°œê¸‰ ë°›ìŠµë‹ˆë‹¤.</li>
</ul>
<figure><figcaption>API Key ìë™í™” - ì•± ìì²´ ì¸ì¦ ë° ì¸ê°€</figcaption></figure>
<h4>ğŸš€ [ìë™í™” ë°©ì•ˆ 2] mTLSë¥¼ ì´ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì¸ì¦ ì²˜ë¦¬</h4>
<p>mTLS(Mutual TLS)ëŠ” ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹œ ìƒí˜¸ê°„ ì¸ì¦ì„œë¥¼ ê²€ì¦í•˜ì—¬ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí‚¹ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. Vault Proxyë¡œì˜ ì ‘ì†ì´ ê°€ëŠ¥í•˜ë ¤ë©´ ì•±ì€ ì¸ì¦ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•´ë‹¹ ì•±/ì¥ì¹˜ê°€ ì‹ ë¢°í•  ìˆ˜ ìˆìŒì„ ì¦ëª… í•©ë‹ˆë‹¤. ì´ê²½ìš° Vault Proxyê°€ Vault ì„œë²„ë¡œ ë¯¸ë¦¬ ì¸ì¦ì„ ë°›ê¸° ë•Œë¬¸ì— API Keyë¥¼ ìš”ì²­í•˜ëŠ” ì„œë¹„ìŠ¤ëŠ” ìš”ì²­í•˜ëŠ” Vault Token Role ì´ë¦„ë§Œ ì•Œë©´ ë©ë‹ˆë‹¤. ì£¼ë¡œ Public ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ATMê¸°, POSê¸°, IoT ë“± ì¥ì¹˜ì— ëŒ€í•œ ì¸ì¦ì— í™œìš©ë©ë‹ˆë‹¤.</p>
<p>ì¸ì¦ì„œ ë˜í•œ ìœ íš¨ê¸°ê°„ì´ ìˆìœ¼ë¯€ë¡œ, ì¸ì¦ì„œ êµì²´ë¥¼ ìë™í™” í•˜ê¸° ìœ„í•´ì„œëŠ” <a href="#%EC%9E%90%EB%8F%99%ED%99%94-%EB%B0%A9%EC%95%88-3-vault-agent%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9E%90%EB%8F%99%ED%99%94-%EC%9C%84%EC%9E%84">ë°©ì•ˆ 3</a>ì—ì„œ í™œìš©í•˜ëŠ” <code>Vault Agent</code>ë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ì°¸ê³  : <a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/mtls.html" target="_blank" rel="noopener noreferrer">mTLS ë¥¼ ì‚¬ìš©í•œ ìƒí˜¸ê°„ ì¸ì¦</a><br>
ì‚¬ë¡€ : <a href="https://www.hashicorp.com/resources/starbucks-secrets-at-the-retail-edge-with-hashicorp-vault" target="_blank" rel="noopener noreferrer">Starbucks</a></p>
</blockquote>
<figure><figcaption>API Key ìë™í™” - mTLSë¥¼ í†µí•œ ì¸ì¦</figcaption></figure>
<ul>
<li>ìµœì´ˆ ë°°í¬ ì‹œ ìœ íš¨í•œ ì¸ì¦ì„œë¥¼ í•¨ê»˜ ë°°í¬ í•©ë‹ˆë‹¤.</li>
<li>API Keyë¥¼ ìš”ì²­í•˜ëŠ” ì„œë¹„ìŠ¤ëŠ” Vault Proxyë¡œì˜ mTLSë¡œ ìƒí˜¸í•œ ë³´ì•ˆë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.</li>
<li>API Keyë¥¼ ìš”ì²­í•˜ëŠ” ì„œë¹„ìŠ¤ëŠ” Vault Token Role ê¸°ë°˜ìœ¼ë¡œ API Key(Token)ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.</li>
</ul>
<h4>ğŸš€ [ìë™í™” ë°©ì•ˆ 3] Vault Agentë¥¼ ì´ìš©í•œ ìë™í™” ìœ„ì„</h4>
<p>API Keyë¥¼ ìš”êµ¬í•˜ëŠ” ëŒ€ìƒ ì„œë¹„ìŠ¤ê°€ ì™¸ë¶€ì— ë³„ë„ êµ¬ì„±ë˜ê±°ë‚˜, ë…ë¦½ëœ ì‹œìŠ¤í…œ, ë˜ëŠ” [ë°©ì•ˆ 1](#ìë™í™”-ë°©ì•ˆ-1-ì•±ì—ì„œ-ì¸ì¦ê³¼-token-ë°œê¸‰-ì²˜ë¦¬)ê³¼ <a href="#%EC%9E%90%EB%8F%99%ED%99%94-%EB%B0%A9%EC%95%88-2-mtls%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EC%97%AC-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%9D%B8%EC%A6%9D-%EC%B2%98%EB%A6%AC">ë°©ì•ˆ 2</a>ë¡œ í•´ê²°ì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš° ëŒ€ìƒ ì‹œìŠ¤í…œì— ì¸ì¦ ë° ë°œê¸‰ í›„ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” <code>Vault Agent</code>ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <code>Vault Agent</code>ëŠ” ì•±/ì‚¬ëŒ ëŒ€ì‹  1) Vaultì— ì¸ì¦í•˜ê³  2) Tokenì„ ë°œê¸‰ ë° ê°±ì‹ í•˜ê³  3) í•„ìš”ì‹œ íŒŒì¼ë¡œ ì €ì¥íˆê³  4) ì¶”ê°€ì ì¸ ì‘ì—…ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë„êµ¬ ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>ì°¸ê³  : <a href="https://docmoa.github.io/04-HashiCorp/06-Vault/02-Secret_Engine/pki-nginx.html" target="_blank" rel="noopener noreferrer">Vault Agentë¥¼ ì‚¬ìš©í•œ ì¸ì¦ì„œ êµì²´</a></p>
</blockquote>
<figure><figcaption>API Key ìë™í™” - Vault Agent í™œìš©</figcaption></figure>
<ul>
<li>APIë¥¼ ìš”ì²­í•˜ëŠ” ì•±ì´ êµ¬ì„±ë˜ì–´ìˆëŠ” ì¸í”„ë¼ì— Vault Agentë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.</li>
<li>Vault Agentê°€ Vault Proxy(ë˜ëŠ” Server) ì¸ì¦ ë° ì¸ê°€ í•©ë‹ˆë‹¤.</li>
<li>API Keyë¥¼ íšë“í•˜ë ¤ëŠ” ì•±ì€ Vault Agentë¥¼ í†µí•´ API Keyë¥¼ ìš”ì²­í•˜ê±°ë‚˜, Vault Agentê°€ ìƒì„±í•´ì£¼ëŠ” íŒŒì¼ì„ ì½ì–´ API Keyë¥¼ íšë“ í•©ë‹ˆë‹¤.</li>
</ul>
<details class="hint-container details"><summary>Vault Agentë¡œ Token ë°œê¸‰/ê°±ì‹  í…ŒìŠ¤íŠ¸</summary>
<p>Vault Agentì˜ Tokenìƒì„± ê¶Œí•œì„ ì •ì˜í•˜ëŠ” <code>admin-role-token-create.hcl</code> ì •ì±… ì •ì˜ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="admin-role-token-create.hcl"><pre class="language-hcl"><code><span class="line">path <span class="token string">"auth/token/create/api-admin"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"create"</span>, <span class="token string">"update"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">path <span class="token string">"auth/token/lookup-self"</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"read"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>ì •ì±…ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault policy <span class="token function">write</span> admin-role-token-create admin-role-token-create.hcl</span>
<span class="line"></span></code></pre></div><p>Vault AgentëŠ” <code>admin-role-token-create</code> ì •ì±…ì˜ ê¶Œí•œì´ ìˆëŠ” ì¸ì¦ ìˆ˜ë‹¨ì´ë©´ ë©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ë°©ì‹ì„ ì§€ì›í•˜ê³ , ì—¬ê¸°ì„œëŠ” ë‹¨ìˆœí•˜ê²Œ Tokenì„ ìƒì„±í•˜ì—¬ ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault token create <span class="token parameter variable">-field</span><span class="token operator">=</span>token <span class="token parameter variable">-policy</span><span class="token operator">=</span>admin-role-token-create -no-default-policy <span class="token operator">&gt;</span> vault-token</span>
<span class="line"></span></code></pre></div><p>API Keyë¥¼ íŒŒì¼ë¡œ ëœë”ë§í•˜ê¸°ìœ„í•œ <code>token.tpl</code> í…œí”Œë¦¿ íŒŒì¼ì˜ ì˜ˆëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="token.tpl"><pre class="language-hcl"><code><span class="line"><span class="token punctuation">{</span><span class="token punctuation">{</span>- with secret <span class="token string">"auth/token/create/api-admin"</span> <span class="token string">"meta=foo=bar"</span> -<span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token punctuation">{</span> .Auth.ClientToken <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token punctuation">{</span>- end <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>ë‹¤ìŒìœ¼ë¡œ Vault Agentì˜ ë™ì‘ì„ í™•ì¸í•˜ê¸° ìœ„í•œ <code>config.hcl</code>ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="config.hcl"><pre class="language-hcl"><code><span class="line"><span class="token property">pid_file</span> <span class="token punctuation">=</span> <span class="token string">"./pidfile"</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">vault</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">address</span> <span class="token punctuation">=</span> <span class="token string">"http://127.0.0.1:8200"</span></span>
<span class="line">  <span class="token keyword">retry</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">num_retries</span> <span class="token punctuation">=</span> <span class="token number">3</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">auto_auth</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">method</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">"token_file"</span></span>
<span class="line"></span>
<span class="line">    <span class="token property">config</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line highlighted">      <span class="token property">token_file_path</span> <span class="token punctuation">=</span> <span class="token string">"vault-token"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line highlighted"><span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line highlighted">  <span class="token property">source</span> <span class="token punctuation">=</span> <span class="token string">"./token.tpl"</span></span>
<span class="line highlighted">  <span class="token property">destination</span> <span class="token punctuation">=</span> <span class="token string">"./template.txt"</span></span>
<span class="line highlighted">  <span class="token property">command</span> <span class="token punctuation">=</span> <span class="token string">"VAULT_TOKEN=$(cat template.txt) vault token lookup"</span></span>
<span class="line highlighted"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul>
<li><code>token_file_path</code>ëŠ” ì•ì„œ ìƒì„±í•œ Vault Agent ì¸ì¦/ì¸ê°€ë¥¼ ìœ„í•´ ìƒì„±í•œ Tokenì´ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</li>
<li><code>template</code>ì— ë™ì ìœ¼ë¡œ ìƒì„±í•  ì •ì˜ê°€ ë˜ì–´ìˆìŠµë‹ˆë‹¤.
<ul>
<li><code>token.tpl</code>ì— ì •ì˜ëœ Vaultì—ì„œ Token ìƒì„± í›„ ì €ì¥ë˜ëŠ” ì •ë³´ëŠ” <code>template.txt</code>ì— ì €ì¥ë©ë‹ˆë‹¤.</li>
<li>í›„ì† ì‘ì—…ì— ëŒ€í•œ ì •ì˜ë¡œ Tokenì„ ê²€ì¦í•˜ëŠ” ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<p>ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¡œ Vault Agentë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault agent <span class="token parameter variable">-config</span><span class="token operator">=</span>./config.hcl</span>
<span class="line"></span></code></pre></div><p>ì‹¤í–‰ í›„ Tokenì„ ìƒˆë¡œ ìƒì„±í•œ ê²°ê³¼ì™€, ì ì‹œ í›„ Tokenì˜ TTLì´ ë§Œë£Œë˜ë©´, ë‹¤ì‹œ ê°±ì‹ í•˜ëŠ” ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Vault Agent started<span class="token operator">!</span> Log data will stream in below<span class="token operator">:</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Vault Agent configuration<span class="token operator">:</span></span>
<span class="line"></span>
<span class="line">           <span class="token property">Api Address 1:</span> <span class="token url">http://bufconn</span></span>
<span class="line">                     <span class="token property">Cgo:</span> disabled</span>
<span class="line">               <span class="token property">Log Level:</span> </span>
<span class="line">                 <span class="token property">Version:</span> Vault <span class="token number">v1.15.6</span><span class="token punctuation">,</span> built <span class="token date number">2024-02-28T</span><span class="token time number">17:07:34Z</span></span>
<span class="line">             <span class="token property">Version Sha:</span> <span class="token number">615cf6f1dce9aa91bc2035ce33b9f689952218f0</span></span>
<span class="line"></span>
<span class="line"><span class="token date number">2024-03-19T</span><span class="token time number">21:47:39.977+0900</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span>  <span class="token property">agent.exec.server:</span> starting exec server</span>
<span class="line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token date number">2024-03-19T</span><span class="token time number">21:47:39.979+0900</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span>  <span class="token property">agent:</span> <span class="token operator">(</span>runner<span class="token operator">)</span> starting</span>
<span class="line"><span class="token date number">2024-03-19T</span><span class="token time number">21:47:39.986+0900</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span>  <span class="token property">agent:</span> <span class="token operator">(</span>runner<span class="token operator">)</span> rendered <span class="token string">"./token.tpl"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"./template.txt"</span></span>
<span class="line"><span class="token date number">2024-03-19T</span><span class="token time number">21:47:39.986+0900</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span>  <span class="token property">agent:</span> <span class="token operator">(</span>runner<span class="token operator">)</span> executing command <span class="token string">"[\"VAULT_TOKEN=$(cat template.txt) vault token lookup\"]"</span> from <span class="token string">"./token.tpl"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"./template.txt"</span></span>
<span class="line"><span class="token date number">2024-03-19T</span><span class="token time number">21:47:39.986+0900</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span>  <span class="token property">agent:</span> <span class="token operator">(</span>child<span class="token operator">)</span> spawning<span class="token operator">:</span> sh <span class="token operator">-</span>c VAULT_TOKEN<span class="token operator">=</span><span class="token operator">$</span><span class="token operator">(</span>cat template<span class="token punctuation">.</span>txt<span class="token operator">)</span> vault token lookup</span>
<span class="line">Key                  Value</span>
<span class="line"></span></code></pre></div></details>
]]></content:encoded>
    </item>
    <item>
      <title>ê¸°ê³„ì˜ ë°˜ì¹™</title>
      <link>https://docmoa.github.io/06-etc/book-memo/theshortcut.html</link>
      <guid>https://docmoa.github.io/06-etc/book-memo/theshortcut.html</guid>
      <source url="https://docmoa.github.io/rss.xml">ê¸°ê³„ì˜ ë°˜ì¹™</source>
      <description>ê¸°ê³„ì˜ ë°˜ì¹™ - ìœ„ëŒ€í•œ AI ì„í•™ì´ í•´ì„¤í•˜ëŠ” ì¸ê³µì§€ëŠ¥ì— ëŒ€í•œ ì˜¤í•´ì™€ ì§„ì‹¤</description>
      <pubDate>Sat, 16 Mar 2024 02:06:49 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>ì±… ì •ë³´</h2>
<blockquote>
<ul>
<li>ì €ì : ë„¬ë¡œ í¬ë¦¬ìŠ¤í‹°ì•„ë‹ˆë‹ˆ</li>
<li>ì—­ì : ê¹€ì •ë¯¼</li>
<li>ì¶œê°„ì¼ : 2023-11-30</li>
<li>í˜ì´ì§€ : 256ìª½</li>
<li>ì¶œíŒì‚¬ ë§í¬ : <a href="https://m.hanbit.co.kr/store/books/book_view.html?p_code=B5439705429" target="_blank" rel="noopener noreferrer">https://m.hanbit.co.kr/store/books/book_view.html?p_code=B5439705429</a></li>
<li>ì±…ì†Œê°œ : ê²©ë™ì˜ ì¸ê³µì§€ëŠ¥ ì‹œëŒ€, ì§€ëŠ¥í˜• ê¸°ê³„ì™€ ê³µì¡´í•˜ê¸° ìœ„í•œ ì‹¤ìš©ì  ì¡°ì–¸<br>
<br>
25ë…„ ì´ìƒ ì¸ê³µì§€ëŠ¥ ì—°êµ¬ì— ê¸°ì—¬í•œ ìµœê³ ì˜ ì„í•™ì´ ì§‘í•„í•œ IT ê³¼í•™êµì–‘ì„œë‹¤. í˜„ëŒ€ ì¸ê³µì§€ëŠ¥(AI)ì˜ ë°œì „ì‚¬ë¶€í„° ì‹œì‘í•´, ì£¼ìš” ì‚¬ê±´ ì‚¬ë¡€ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ì¸ê³µì§€ëŠ¥ì˜ ì„±ì¥ ê³¼ì •ì„ ì‚´í´ë³´ê³ , ì¸ê°„ì˜ ë¬¸í™”ì™€ ì‚¬íšŒì— ë¯¸ì¹˜ëŠ” ì˜í–¥ê¹Œì§€ ì¡°ë§í•œë‹¤. íŠ¹íˆ í˜„ì¬ ì¸ê°„ì˜ ì‚¶ê³¼ ì¸í”„ë¼ì— (ì¹˜íŠ¸í‚¤ë¥¼ ì¨ì„œ) ë¹ ë¥´ê³  ê¹Šê²Œ ì¹¨íˆ¬ ì¤‘ì¸ ì§€ëŠ¥í˜• ê¸°ê³„ì˜ ë¬´ë¶„ë³„í•œ í™œìš©ì´ ì´ˆë˜í•˜ëŠ” ì˜ë„ì¹˜ ì•Šì€ ê²°ê³¼ë“¤ì„ ê°ê´€ì  ì‹œì„ ìœ¼ë¡œ ë°”ë¼ë³´ë©° ê°•ë ¥í•˜ê²Œ ê²½ê³ í•œë‹¤. ë‚˜ì•„ê°€ ì¸ê°„ì€ ì–´ë–¤ ë¶€ë¶„ì„ ì–´ë–¤ ì´ìœ ë¡œ ê²½ê³„í•´ì•¼ í•˜ëŠ”ì§€, ì¸ê³µì§€ëŠ¥ê³¼ ì•ˆì „í•˜ê²Œ ê³µì¡´í•˜ë ¤ë©´ ì§€ê¸ˆë¶€í„° ë¬´ì—‡ì„ í•´ì•¼ í• ì§€ì— ê´€í•œ ë‹¤ì–‘í•œ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•œë‹¤.</li>
</ul>
</blockquote>
<h2>ì˜®ê¸´ì´ì˜ ë§</h2>
<p>'ê¸°ê³„'ë¥¼ ë„ˆë¬´ ì¸ê°„ì¤‘ì‹¬ì ìœ¼ë¡œ ìƒê°í•˜ì§€ ì•Šì•˜ë‚˜.</p>
<ul>
<li>'Machine'ì˜ ì–´ì›ì€ ì¤‘ì— ì¤‘ì„¸ í”„ë‘ìŠ¤ì–´, ë˜ëŠ” ë¼í‹´ì–´ì—ì„œ ìœ ë˜í•œ 'ì •ë°€í•œ ê³ ì•ˆí’ˆê³¼ ë°œëª…í’ˆ' ì´ë¼ëŠ” ëœ»ì´ ìˆë‹¤.</li>
<li>í•œìì–´ 'ê¸°ê³„(æ©Ÿæ¢°)'ëŠ” ê° í•œìì— ëª¨ë‘ ë‚˜ë¬´ëª©(æœ¨)ë³€ì´ ë“¤ì–´ê°€ ìˆëŠ” ê²ƒ ê°™ì´ 'í‹€, 'ê¸°êµ¬', 'ì¥ì¹˜'ë¼ëŠ” ëœ»ì„ ê°€ì§„ë‹¤.</li>
<li>'ë¨¸ì‹ 'ì´ë‚˜ 'ê¸°ê³„'ë¼ê³  í•˜ë©´ ê¸ˆì†ê³¼ ì˜¤ì¼ ëƒ„ìƒˆ ë“±ì„ ì—°ìƒí•˜ì§€ë§Œ, ì–´ì›ì´ë‚˜ ë‹¨ì–´ì˜ ì˜ë¯¸ìƒ 'ê¸°ê³„'ê°€ ê¸ˆì†ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆì„ í•„ìš”ëŠ” ì—†ë‹¤. (ì •êµí•˜ê²Œ êµ¬ì„±ëœ ìƒëª…ì²´, ì†Œí”„íŠ¸ì›¨ì–´, ì†Œì…œ í”Œë«í¼)</li>
<li>'ê¸°ê³„'ê°€ ì¸ê°„ì˜ ì°½ì¡°ë¬¼ì´ë¼ í•´ë„ ì¸ê°„ê³¼ ë‹®ì•„ ì‡ì–´ì•¼ í•  ì´ìœ ëŠ” ì—†ë‹¤.
<ul>
<li>'ì¸ê°„ì´ ì´í•´í•  ìˆ˜ ì—†ëŠ”' ë°©ì‹ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ê²ƒì€ ì¼ì¢…ì˜ ì¹˜íŠ¸í‚¤ê°€ ë  ë§Œí¼ ê°•ë ¥í•œ ê¸°ìˆ ì  ëŒíŒŒêµ¬ê°€ ëœ ì•„ì´ë””ì–´ì˜€ìœ¼ë©° í˜„ëŒ€ ì¸ê³µì§€ëŠ¥ ê¸°ê³„ì˜ í•µì‹¬ì  íŠ¹ì§•ì´ ë˜ì—ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>1ì¥. ì§€ëŠ¥ì˜ íƒêµ¬</h2>
<p>ì§€ëŠ¥(Intelligence)ì´ë€ 'ì¸ê°„ì ì¸ ê²ƒ'ì— ê´€í•œ ë¬¸ì œê°€ ì•„ë‹ˆë¼, ìƒˆë¡œìš´ ìƒí™©ì—ì„œ íš¨ê³¼ì ìœ¼ë¡œ í–‰ë™í•  ìˆ˜ ìˆëŠ” 'ëŠ¥ë ¥'ì— ê´€í•œ ë¬¸ì œë‹¤.</p>
<ul>
<li>ì´ ëŠ¥ë ¥ì—ëŠ” ë‘ë‡Œê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤.</li>
<li>ì‹ë¬¼, ê°œë¯¸ êµ°ì²´, ì†Œí”„íŠ¸ì›¨ì–´ì—ì„œë„ ì§€ëŠ¥ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.</li>
<li>ì„œë¡œ ë‹¤ë¥¸ ì—ì´ì „íŠ¸(agent:í–‰ìœ„ì)ë“¤ì€ ì´ëŸ° ëŠ¥ë ¥ì„ ê°ê¸° ë‹¤ë¥¸ ì‘ì—…ì—ì„œ ë‹¤ì–‘í•œ ìˆ˜ì¤€ìœ¼ë¡œ ë°œíœ˜í•œë‹¤.</li>
<li>ì§€ëŠ¥ì„ íŒë‹¨í•˜ëŠ” ë‹¨ í•˜ë‚˜ì˜ ì¼ë°˜ì  ìˆ˜ë‹¨ì´ë‚˜ ë¹„ë°€ ê³µì‹, í…ŒìŠ¤íŠ¸ ë°©ë²•ì€ ì¡´ì¬í•˜ì§€ ã…‡ë‚³ëŠ”ë‹¤.</li>
<li>ëª¨ë“  ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸ì—ì„œ ì¸ê°„ì ì¸ íŠ¹ì„±ì„ ì°¾ì•„ë³¼ ìˆ˜ëŠ” ì—†ë‹¤.</li>
</ul>
<h3>ê¸°ëŒ€ì¹˜ ê´€ë¦¬</h3>
<p>ë¬´ì—‡ì´ ì§€ëŠ¥ì ì¸ì§€ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œ? ì§€ëŠ¥ì„ ë³´ì—¬ì£¼ëŠ” ìš”ì†ŒëŠ” ë¬´ì—‡ì¸ê°€?</p>
<ul>
<li>ë‹¤ë¥¸ í˜•íƒœì˜ ì§€ëŠ¥ì„ ì—°êµ¬í•  ë•Œ ì¤‘ìš”í•œ ë¬¸ì œ ì¤‘ í•˜ë‚˜ëŠ” 'ì¸ê°„ê³¼ ê·¼ë³µì ìœ¼ë¡œ ë‹¤ë¥¸ ê²ƒì„ ì •í™•íˆ ìƒìƒí•˜ëŠ”' ê²ƒì´ë‹¤.</li>
<li>ì§€ëŠ¥ì„ ìƒìƒí•˜ëŠ” ë°©ì‹ì— ì¸ê°„ ì¤‘ì‹¬ì  ì„ ì…ê²¬ì€ 'ì™¸ê³„(ì¸ê°„ì´ ì•„ë‹Œ ë‹¤ë¥¸ê²ƒ)' ì§€ëŠ¥ì„ ìƒìƒí•˜ê³  ì¡°ì‚¬í•˜ëŠ” ì¼ì„ ë” ì–´ë µê²Œ ë§Œë“ ë‹¤.</li>
<li>í•„ìëŠ” ë¯¸ë˜ ì¸ê³µì§€ëŠ¥ ë¶„ì•¼ì—ì„œ ê°€ì¥ ì–´ë ¤ìš´ ì§ˆë¬¸ ì¤‘ í•˜ë‚˜ëŠ” 'ìš°ë¦¬ê°€ ì´í•´í•  ìˆ˜ ì—†ëŠ” ê²ƒì„, ìš°ë¦¬ê°€ ë§Œë“  ê¸°ê³„ëŠ” ì´í•´í•  ê°€ëŠ¥ì„±'ì— ê´€í•œ ê²ƒì´ ë˜ë¦¬ë¼ ìƒê°í•œë‹¤.</li>
</ul>
<h3>ì§€ëŠ¥ ì •ì˜</h3>
<p>ì‚¬ëŒë“¤ì€ ììœ¨ ì—ì´ì „íŠ¸, ì¦‰ ìŠ¤ìŠ¤ë¡œ ê²°ì •ì„ ë‚´ë¦¬ëŠ” ì—ì´ì „íŠ¸ì™€, ì—ì´ì „íŠ¸ì˜ í–‰ë™ì— ì˜í•´ ë¶€ë¶„ì ìœ¼ë¡œ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ìˆëŠ” í™˜ê²½ì— ê´€ì‹¬ì´ ë§ë‹¤.</p>
<ul>
<li>ê²½í—˜ì— ë”°ë¥¸ í–‰ë™ì˜ ëª¨ë“  ë³€í™”ê°€ 'í•™ìŠµ(learning)'ì´ë‹¤.</li>
<li>ì±…ì—ì„œëŠ” ì´ëŸ° ì—ì´ì „íŠ¸ì˜ ì§€ëŠ¥ì„ 'ìƒˆë¡œìš´ ìƒí™©ì„ í¬í•¨í•œ ë‹¤ì–‘í•œ êµ­ë©´ì—ì„œ íš¨ê³¼ì ìœ¼ë¡œ í–‰ë™í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥'ìœ¼ë¡œ ì •ì˜í•œë‹¤.</li>
<li>1991ë…„ ë¯¸êµ­ ì—”ì§€ë‹ˆì–´ì¸ ì œì„ìŠ¤ ì•¨ë²„ìŠ¤ëŠ” ì§€ëŠ¥ì„ 'ë¶ˆí™•ì‹¤í•œ í™˜ê²½ì—ì„œ ì ì ˆí•œ í–‰ë™ì´ ì„±ê³µ í™•ë¥ ì„ ë†’ì¼ ê²½ìš° ì ì ˆí•˜ê²Œ í–‰ë™í•  ìˆ˜ ìˆëŠ” ì²´ê³„ì˜ ëŠ¥ë ¥'ì´ë¼ê³  ì •ì˜í–ˆë‹¤.</li>
<li>ì¤‘ìš”í•œ ê²ƒì€ ì—ì´ì „íŠ¸ë¥¼ ì§€ëŠ¥ì ìœ¼ë¡œ ë§Œë“œëŠ” ë‹¨ í•˜ë‚˜ì˜ 'íŠ¹ì„±(quality)'ì´ ìˆë‹¤ê³  ê°€ì •í•˜ì§€ ì•ŠëŠ” ê²ƒì´ë‹¤.</li>
</ul>
<p>ì—ì´ì „íŠ¸ì˜ íš¨ê³¼ì ì¸ í–‰ë™ì€ ëª©í‘œë¥¼ ë‹¬ì„±í•  ê°€ëŠ¥ì„±ì„ ë†’ì¸í•˜ê³  ê°€ì •í•œë‹¤.</p>
<ul>
<li>ëª©ì  ì¤‘ì‹¬(purpose-driven) ë˜ëŠ” ëª©ì  ì§€í–¥ì (purposeful) í–‰ë™ì´ë¼ëŠ” ê°œë… = ê³¼í•™ ì² í•™ì˜ 'í…”ë ˆì˜¬ë¡œì§€ì»¬(teleologcal)'</li>
<li>ì—ì´ì „íŠ¸ì˜ ëª©í‘œì™€ í™˜ê²½ ê°„ ìƒí˜¸ì‘ìš©ì´ ë§¤ìš° ê°•í•˜ê²Œ ë°€ì°©ë˜ì–´ ìˆê³  ê·¸ ê²½ê³„ë„ ëª¨í˜¸í•˜ê¸° ë•Œë¬¸ì—, ì´ ì±…ì—ì„œëŠ” ì´ ë‘ê°€ì§€ë¥¼ ê²°í•©í•œ 'ì‘ì—… í™˜ê²½'ì— ê´€í•´ ì´ì•¼ê¸°í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.</li>
<li>ì—ì´ì „íŠ¸ê°€ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì„±ê³µí•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ ìˆë‹¤ë©´ ê·¸ ì—ì´ì „íŠ¸ê°€ ê°•ê±´(robust)í•˜ê±°ë‚˜, ë²”ìš©(general)ì´ê±°ë‚˜, ë¬¸ì ê·¸ëŒ€ë¡œ ì§€ëŠ¥í˜•ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.</li>
</ul>
<h3>ê·œì¹™ì— ë”°ë¥´ëŠ” ì„¸ê³„</h3>
<p>ëª©í‘œ ì§€í–¥ì  í–‰ë™ì€ ì ì–´ë„ ë¶€ë¶„ì ìœ¼ë¡œë‚˜ë§ˆ í†µì œí•˜ê³  ê´€ì°°í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì—ì„œë§Œ ì˜ë¯¸ê°€ ìˆë‹¤.</p>
<ul>
<li>ì—ì´ì „íŠ¸ëŠ” ì˜¤ì§ 'ê·œì¹™ì²™ì¸' í™˜ê²½ì—ì„œë§Œ ë¯¸ë˜ë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆìœ¼ë©°, ê·¸ëŸ° í™˜ê²½ì—ì„œë§Œ íŠ¹ì • ìƒí™©ì— ëŒ€í•œ ì ì ˆí•œ ë°˜ì‘ì˜ ì¡°í•¨ì„ ê¸°ì–µí•˜ëŠ” ê²Œ ì˜ë¯¸ê°€ ìˆë‹¤. ì´ê²ƒì€ ì´ìƒì ì¸ ì¡°ê±´ í‘œ í˜•íƒœë¡œ ìƒìƒí•  ìˆ˜ ìˆë‹¤.</li>
<li>í•™ìŠµê³¼ ì¼ë°˜í™”ì˜ ë°°ê²½ì´ ë˜ëŠ” ê°€ì •ì€ 'ë¹„ìŠ·í•œ í–‰ë™ì„ í•˜ë©´ ë¹„ìŠ·í•œ ê²°ê³¼ë¥¼ ì´ˆë˜í•  ê²ƒ'ì´ë¼ëŠ” ê°€ì •ì´ë‹¤.</li>
<li>ì–´ë–¤ ì§ˆì„œë¥¼ ë°œê²¬í•˜ëŠ” ê²ƒì€ ëª©ì  ì§€í–¥ì  í–‰ë™ì˜ í•„ìˆ˜ ì¡°ê±´ì´ë‹¤.</li>
</ul>
<h3>ìƒì¡´ ê¸°ë²•ì˜ ê¹œì§ ì£¼ë¨¸ë‹ˆ</h3>
<p>ì§„í™”ëŠ” ì‹¤ìš©ì£¼ì˜ìë¼ê³  í•  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li>ê·œì¹™ì ì¸ í™˜ê²½ì—ì„œ í™˜ê²½ ë‹¨ì„œë¥¼ í™œìš©í•˜ëŠ” ë°©ì‹ì— ì•„ì£¼ ì‘ì€ ì°¨ì´ë§Œ ìˆì–´ë„ ìƒì¡´ë ¥ì˜ ì°¨ì´ê°€ ë°œìƒí•œë‹¤.</li>
<li>'ì§€ëŠ¥'ì´ë¼ëŠ” ë‹¨ì¼ íŠ¹ì„±ë³´ë‹¤ëŠ” ì§€ëŠ¥í˜• í–‰ë™ ë’¤ì— ì—¬ëŸ¬ ìƒì¡´ ê¸°ë²•ì´ ìˆ¨ì–´ ìˆìœ¼ë¦¬ë¼ ì˜ˆìƒí•´ì•¼ í•œë‹¤. (ë°˜ì‚¬/ê³„íš/ì¶”ë¡ /í•™ìŠµ ë“±)</li>
</ul>
<p>ì˜ˆì¸¡ì´ ë•Œë¡œëŠ” ê³¼ê±° ê²½í—˜ ë°ì´í„°ì—ì„œ ë°œê²¬í•œ íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì´ë‹¤.</p>
<ul>
<li>'ìœ í˜•'ìœ¼ë¡œ êµ¬ë¶„í•˜ê±°ë‚˜, ê²½í—˜ì„ ì¼ë°˜í™”í•˜ê³  ì••ì¶•í•˜ê²Œ ë§Œë“œëŠ” ì¶”ìƒí™” ë“±ì´ í¬í•¨ëœë‹¤.</li>
<li>í†µê³„ì  íŒ¨í„´, ì‹ ê²½ ê²½ë¡œ, í™”í•™ ë°˜ì‘ ë“±ê³¼ ë¬´ê´€í•˜ê²Œ, ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸ê°€ ë‚´ë¦¬ëŠ” ê²°ì •ì€ ì§€ê°(sentience)ì´ë‚˜ ì–¸ì–´ì™€ ê´€ë ¨ë  í•„ìš”ë„ ì—†ë‹¤.</li>
<li>ì¸ê°„ì€ 'í‘œì¤€'ì´ë¼ê¸°ë³´ë‹¤ëŠ” 'ì˜ˆì™¸'ì ì¸ ì¡´ì¬ì¸ ë“¯í•˜ë‹¤.</li>
</ul>
<h3>ì™¸ê³„ ì§€ëŠ¥</h3>
<p>ì•¨ëŸ° íŠœë§ì€ 'ì§€ëŠ¥ì„ ê°€ì§„ ê¸°ê³„'ë¼ëŠ” ë…¼ë¬¸ì—ì„œ "ê¸°ê³„ê°€ ì§€ëŠ¥í˜• í–‰ë™ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆëŠ”ì§€ íƒêµ¬ í•  ê²ƒì„ ì œì•ˆ" í–ˆë‹¤.</p>
<ul>
<li>ì§€ëŠ¥ì˜ ë¶€ì—¬ëŠ” ì£¼ê´€ì  íŒë‹¨ì¼ ìˆ˜ ìˆë‹¤.</li>
<li>ì¸ê°„ì€ ë™ì¼í•œ í–‰ë™ì„ ê¸°ê³„ê°€ ì•„ë‹Œ ì¸ê°„ì´ ìˆ˜í–‰í•  ë•Œ 'ì§€ëŠ¥'ì— ì˜í•œ ê²°ê³¼ë¼ê³  íŒë‹¨í•˜ê³  ì‹¶ì€ ìœ í˜¹ì— ë¹ ì§ˆ ìˆ˜ ìˆë‹¤.</li>
<li>ì¸ê°„ì„ ì§€ëŠ¥ì˜ ì „í˜•ì  ëª¨ë¸ë¡œ ë‚´ì„¸ì›€ìœ¼ë¡œì¨ ë‹¤ì–‘í•œ í˜•íƒœì˜ ì§€ëŠ¥ì„ ê³ ë ¤í•˜ì§€ ì•Šì€ ë“¯ í–ˆê³ , ì´í›„ í›„ë°° ì—°êµ¬ìë¥¼ ì˜ëª»ëœ ê¸¸ë¡œ ì¸ë„í–ˆì„ ìˆ˜ ìˆë‹¤.</li>
<li>ì´í›„, ì¡´ ë§¤ì¹´ì‹œëŠ” 1956ë…„ ì—´ë¦° ì—°êµ¬íšŒ íˆ¬ì ì œì•ˆì„œì—ì„œ 'ì¸ê³µì§€ëŠ¥(AI)'ë¼ëŠ” ìš©ì–´ë¥¼ ì œì°½í–ˆê³ , "ì¸ê°„ì´ ê·¸ë ‡ê²Œ í–‰ë™í•œë‹¤ë©´ ì§€ëŠ¥ì ì´ë¼ê³  ë¶ˆë¦´ ë§Œí•œ í–‰ë™ì„ ê¸°ê³„ê°€ í•˜ë„ë¡ ë§Œë“œëŠ” ê²ƒ"ì´ë¼ê³  ì •ì˜í–ˆë‹¤.</li>
<li>ê¸°ê³„ ì§€ëŠ¥ì— ê´€í•œ ë…¼ì˜ì—ì„œ í˜¼ë€ì„ ì´ˆë˜í–ˆë˜ ì—¬ëŸ¬ ê·¼ê±° ì—†ëŠ” ë¯¿ìŒë“¤ì´ ìˆë‹¤.
<ul>
<li>ì¸ê°„ì´ ì¼ì¢…ì˜ ë§ŒëŠ¥í˜• ì§€ëŠ¥ì„ 'ë¶€ì—¬ë°›ì•˜ê¸°' ë•Œë¬¸ì— ì¸ê°„ì˜ ëŠ¥ë ¥ì„ ë„˜ì–´ì„œëŠ” ì •ì‹ ì  ëŠ¥ë ¥ì€ ìì—°ì , ì´ë¡ ì ìœ¼ë¡œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤.</li>
<li>ë‹¤ë¥¸ ëª¨ë“  ì§„í™”ì˜ ì‚°ë¬¼ë³´ë‹¤ ì¸ê°„ì˜ ë‘ë‡Œê°€ ë” ìš°ì›”í•˜ë‹¤ê³  ê°€ì •í•˜ëŠ” ê·¼ê±° ì—†ëŠ” ë¯¿ìŒê³¼ ë§ë¬¼ë ¤ ìˆë‹¤.</li>
</ul>
</li>
</ul>
<p>ì¸ê°„ì´ ëª¨ë“  ì§€ëŠ¥ì˜ ëª¨ë¸ì´ ë‚˜ë‹ˆê³ , ì‹¬ì§€ì–´ ëª¨ë“  ì§€ëŠ¥ì˜ ì •ì ë„ ì•„ë‹ˆë¼ë©´, ì¸ê°„ë³´ë‹¤ 'ìš°ì›”í•œ' ë‹¤ë¥¸ í˜•íƒœì˜ ì§€ëŠ¥ì´ ìˆì„ ìˆ˜ ìˆì„ê¹Œ?</p>
<ul>
<li>ìœ„ ì§ˆë¬¸ì˜ ë¬¸ì œì ì€ ë‘ ì—ì´ì „íŠ¸ ê°„ì— ì‚¬ì‹¤ìƒ ë¹„êµí•  ìˆ˜ ìˆëŠ” ì¼ì°¨ì›ì  íŠ¹ì„±ê³¼ ê´€ë ¨í•´ ì–´ëŠìª½ì´ ë†’ì€ ì ìˆ˜ë¥¼ ë°›ì„ì§€ ë¬»ëŠ” ì§ˆë¬¸ì´ë¼ëŠ” ì ì´ë‹¤.</li>
<li>ì„œë¡œ ë‹¤ë¥¸ ì—ì´ì „íŠ¸í‹€ì´ ì–´ë–¤ ì‘ì—…ì—ì„œëŠ” ë” ë‚«ì§€ë§Œ ë˜ ì–´ë–¤ ì‘ì—…ì—ì„œëŠ” ë” ì„œíˆ´ ê²ƒìœ¼ë¡œ ë³´ëŠ”ê²Œ í•©ë¦¬ì ì´ë‹¤.</li>
<li>ì´ëŸ° ì˜¤ë¥˜ ë•Œë¬¸ì— ì–´ë–¤ ì´ë“¤ì€ 'ë²”ìš© ì§€ëŠ¥', 'ë³´í¸ì ' ëŠ¥ë ¥ìœ¼ë¡œ í’€ì´ë˜ëŠ” ì§€ëŠ¥ì˜ ì¡´ì¬ë¥¼ ìƒìƒí•˜ê²Œ ëœë‹¤. í•˜ì§€ë§Œ ë‘ ê°€ì§€ ë¬¸ì œì ì´ ìˆë‹¤.
<ul>
<li>ì§€ëŠ¥ì€ ë‹¤ì°¨ì›ì ì´ë¼ëŠ” ì ì´ë‹¤.</li>
<li>ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸ì˜ í–‰ë™ì€ ë‹¤ì–‘í•œ ë²”ì£¼ì˜ ìƒí™©ì—ì„œ íš¨ê³¼ì ì¼ ê²ƒì´ ê°€ëŒ€ë˜ëŠ” ë§Œí¼, ë²”ìš©ì ì´ê±°ë‚˜ ê°•ê±´í•˜ë‹¤ëŠ” íŠ¹ì„±ì´ ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸ì˜ ì •ì˜ ê·¸ ìì²´ì— í¬í•¨ëœë‹¤ëŠ” ì ì´ë‹¤.</li>
</ul>
</li>
<li>ë™ë¬¼ì´ë‚˜ ê¸°ê³„ ëª¨ë“œë¥¼ í†µí‹€ì–´ íŠ¹ì • ì‘ì—…ì—ì„œ ì¸ê°„ì„ ëŠ¥ê°›ëŠ” ì´ˆì¸ê°„ì  ì§€ëŠ¥ì€ ë§ì´ ë°œê²¬í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ëª¨ë“  ì‘ì—…ì—ì„œ ì´ˆì¸ê°„ì ì¸ ì§€ëŠ¥ì€ ì°¾ì•„ë³¼ ìˆ˜ ì—†ì„ ìˆ˜ë„ ìˆë‹¤.</li>
<li>ì¸ê°„ì´ ë§Œë“¤ì–´ë‚¸ ì§€ëŠ¥ì  ë¬¼ì²´ì— ê¸°ëŒ€í•´ì•¼ í•  ê²ƒì€ ì¸ê°„ì— ëŒ€í•œ ì˜í–¥ê³¼ëŠ” ë¬´ê´€í•˜ê²Œ, ë‹¨ìˆœí•œ ëª©í‘œë¥¼ ëˆê¸° ìˆê²Œ ì¶”êµ¬í•˜ê³ , ì¸ê°„ì´ ë°©í•´í•˜ë”ë¼ë„ ê·¸ì— ì ì‘í•˜ë©´ì„œ, ê²½í—˜ì„ í†µí•´ í•™ìŠµí•˜ê³  ìˆ˜í–‰ëŠ¥ë ¥ì„ í–¥ìƒí•˜ëŠ” ëŠ¥ë ¥ì´ë‹¤.</li>
</ul>
<h3>ì½”í˜ë¥´ë‹ˆì¿ ìŠ¤ì  ì „í™˜</h3>
<p>ëŒ€ë¶€ë¶„ì˜ ìƒëª…ì²´ëŠ” ì–´ë–¤ í˜•íƒœë¡œë“  ììœ¨ì ì´ë©´ì„œ ëª©ì  ì§€í–¥ì ì¸ í–‰ë™ì„ ë³´ì—¬ì£¼ë©°, ìƒë“ì ì´ ã„´ëª©í‘œì™€ ê°ê° ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •ë³´ì— ì…ê°í•œ ê²°ì •ì„ ê³„ì†í•´ ë‚´ë¦°ë‹¤.</p>
<ul>
<li>í•„ìëŠ” ì´ ìš°ì£¼ê°€ ì§€ëŠ¥ì  ì£¼ì²´ë¡œ ê°€ë“ ì°¨ ìˆë‹¤ê³  í•©ë¦¬ì ìœ¼ë¡œ í™•ì‹ í•œë‹¤.</li>
<li>ì¸ê°„ì´ ëª¨ë“  ì§€ëŠ¥ì  ì£¼ì²´ì˜ ëª¨ë¸ ì´ë¼ëŠ” ìƒê°ì—ì„œ ë²—ì–´ë‚˜ì•¼ í•œë‹¤.</li>
<li>ì´ëŸ° ì „í™˜ì„ í†µí•´ ììœ ë¡­ê²Œ ì‚¬ê³ í•  ìˆ˜ ìˆê³ , ì¸ê°„ì´ ë§Œë“  í”¼ì¡°ë¬¼ì— ê¸°ëŒ€í•˜ëŠ” ë°”ë¥¼ ì™„ì „íˆ ìƒˆë¡­ê²Œ ì¬ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</li>
<li>ê·¸ ë¬´ì—‡ë³´ë‹¤ë„, ì´ëŸ¬í•œ ìƒê°ì˜ ì „í™˜ì´ì•¼ë§ë¡œ ìš°ë¦¬ê°€ ê·¸ë“¤ê³¼ ê³µì¡´í•˜ë ¤ë©´ í•„ìˆ˜ì ì´ë‹¤.</li>
</ul>
<h2>2ì¥. ì¹˜íŠ¸í‚¤</h2>
<p>ì‚¬ë¬¼ì„ ì§€ëŠ¥ì ìœ¼ë¡œ ë§Œë“œëŠ” íŒŒì•…í•˜ê¸° ì–´ë ¤ìš´ íŠ¹ì„±ì„ ì •ì˜í•˜ê³  êµ¬í˜„í•˜ê³ ì, ì—°êµ¬ìë“¤ì€ ë‹¤ì–‘í•œ ìˆ˜ë‹¨ìœ¼ë¡œ 'ëª©ì  ì§€í–¥ì  í–‰ë™'ì„ ì—°êµ¬í•˜ê³  ìƒì„±í•˜ëŠ” ë°©ë²•ì— ì •ì°©í•´ë‹¤.</p>
<ul>
<li>íŠ¹ì • í™˜ê²½ì—ì„œ í†µê³„ì  íŒ¨í„´ì„ í™œìš©í•˜ì—¬ ìƒˆë¡­ê³  ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ íš¨ê³¼ì ìœ¼ë¡œ í•™ìŠµí•˜ê³  í–‰ë™í•˜ëŠ” ìˆ˜ë§ì€ 'ììœ¨ ì—ì´ì „íŠ¸'ê°€ ê°œë°œë˜ì—ˆë‹¤.</li>
<li>ëª…ì‹œì  í–‰ë™ ê·œì¹™ ëŒ€ì‹  ëŒ€ëŸ‰ì˜ í›ˆë ¨ ë°ì´í„°ê°€ í•„ìš”í•´ì¡Œë‹¤.</li>
<li>ì¼ì¢…ì˜ 'ì¹˜íŠ¸í‚¤'ëŠ” ë¨¸ì‹ ëŸ¬ë‹ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒˆë¡œìš´ ê¸°ëŒ€ì¹˜, ìƒˆë¡œìš´ ë„êµ¬, ìƒˆë¡œìš´ ì„±ê³µ ì‚¬ë¡€ë“¤ì„ í†µí•©í•˜ëŠ” ì¸ê³µì§€ëŠ” ë¶„ì•¼ì˜ ìƒˆë¡œìš´ íŒ¨ëŸ¬ë‹¤ì„ì„ ë§Œë“¤ì–´ëƒˆë‹¤.</li>
<li>ì¸ê³µì§€ëŠ¥ì˜ ìƒˆë¡œìš´ ì–¸ì–´ëŠ” ë…¼ë¦¬ì™€ í˜•ì‹ì  ì¶”ë¡ ì˜ ì–¸ì–´ê°€ ì•„ë‹Œ, í™•ë¥ ê³¼ ìˆ˜í•™ì  ìµœì í™”ì˜ ì–¸ì–´ì´ë‹¤.</li>
</ul>
<h3>ì–¸ì–´ì „ë¬¸ê°€ë¥¼ í•´ê³ í•˜ë¼</h3>
<p>ëŒ€ë¶€ë¶„ì˜ ì—°êµ¬ìëŠ” ë¬¸ë²•ì  ê·œì¹™ì„ í™œìš©í•˜ì—¬ ì–´ë–¤ ë¬¸ì¥ì´ë‚˜ ìë§‰ì´ë‚˜ ë²ˆì—­ìœ¼ë¡œ 'ì“¸ ë§Œí•œì§€'ë¥¼ ì •ì˜í•˜ëŠ” ë°©ì‹ì´ì˜€ë‹¤.</p>
<ul>
<li>ë¬¸ì œëŠ” ê° ê·œì¹™ë§ˆë‹¤ ë˜ ë‹¤ë¥¸ ê·œì¹™ì´ ë”°ë¼ì˜¤ê³ , ì˜ˆì™¸ë„ ë§ì•˜ë‹¤.</li>
<li>ê·œì¹™ì„ ì•„ë¬´ë¦¬ ì ìš©í•´ë„ ì¶©ë¶„í•œ ìˆ˜ì¤€ì—ëŠ” ì ˆëŒ€ ë„ë‹¬í•  ìˆ˜ ì—†ì„ ë“¯ ë³´ì˜€ê³ , ë¬¸ë²•ì€ ì ì  ê±°ëŒ€í•´ì¡Œì§€ë§Œ ê·¸ ê²°ê³¼ë¬¼ì€ ì—‰ë§ì´ì˜€ë‹¤.</li>
</ul>
<p>í”„ë ˆë”ë¦­ ì˜ë¦¬ë„¤í¬ëŠ” IBM ì—°ì† ìŒì„± ì¸ì‹ (Continuous speech recognition)íŒ€ì— í•©ë¥˜í–ˆë‹¤.</p>
<ul>
<li>ê·¸ì˜ ì ‘ê·¼ ë°©ì‹ì€ ì´ë¯¸ ì‘ì—…í•œ ê²°ê³¼ë¬¼ì„ ê°œì„ í•˜ì—¬ ì ì§„ì ìœ¼ë¡œ ë°œì „ì‹œí‚¤ëŠ” ì‹ì´ ì•„ë‹ˆì—ˆë‹¤.</li>
<li>ì •ë³´ ì´ë¡  ë¶„ì•¼ì—ì„œ ìŒ“ì€ ê²½í—˜ ë•ë¬¸ì— ê·¸ëŠ” 'ë…¸ì´ì¦ˆ(noise)'ë¡œ ì˜¤ì—¼ëœ ë©”ì‹œì§€ ì¬êµ¬ì¶•ì˜ ì „ë¬¸ê°€ì˜€ë‹¤.</li>
<li>ëª¯ëŠ ìì—°ì–´ì—ëŠ” ë§¤ìš° ì•ˆì •ì ì¸ í†µê³„ì  íŒ¨í„´ì´ ìˆë‹¤.</li>
<li>ì˜ë¦¬ë„¤í¬ëŠ” í†µê³„ì  ê·œì¹™ì„±ì„ ì‚¬ìš©í•´ ì£¼ì–´ì§„ ë¬¸ì¥ì´ 'ìì—°ìŠ¤ëŸ¬ìš´' ì„¤ì •ê°’ ìƒíƒœì—ì„œ ë°œìƒí•  í™•ë¥ ì„ ê·¼ì‚¬ì¹˜ë¡œ ì¸¡ì •í•˜ëŠ” ë°©ë²•ì„ ê°œë°œí–ˆë‹¤.</li>
<li>ë¬¸ë²•ì„ ë°°ì œí•˜ëŠ” ëŒ€ì‹  ë°ì´í„°ì—ì„œ ì¶”ì •í•œ ìˆ˜ë°±ë§Œ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì´ìš©í•œë‹¤ëŠ” ì•„ì´ë””ì–´ëŠ” ë‹¹ì‹œì˜ ìƒì‹ì„ ê±°ìŠ¤ë¥´ëŠ” ê²ƒì´ì˜€ë‹¤.</li>
</ul>
<p>ì–¸ì–´ì˜ í†µê³„ì  íŒ¨í„´ì„ ì´ìš©í•˜ëŠ” ë°©ì‹ì€ ì¶©ë¶„íˆ ë²”ìš©ì ì´ì˜€ë‹¤.</p>
<ul>
<li>ë¬¸ì œëŠ” ì´ëŸ¬í•œ 'íŒ¨í„´'ì„ í•™ìŠµí•˜ë ¤ë©´ ìˆ˜ë°°ë§Œ ê°œì˜ ê°€ëŠ¥í•œ ë‹¨ì–´ ì¡°í•© í™•ë¥ ì„ ë‚˜ì—´í•œ ê±°ëŒ€í•œ í‘œë¡œ ë‚˜íƒ€ë‚´ì•¼ í•˜ëŠ”ë°, ì´ê²ƒì´ ì»´í“¨í„°ê°€ ì˜í•˜ëŠ” ì¼ì´ì ëª©ì ì´ì—ˆë‹¤.</li>
<li>ì–¸ì–´ ì´ì™¸ì˜ ì˜ì—­ì—ì„œë„ í†µê³„ì  íŒ¨í„´ìœ¼ë¡œ ë°œì „í•  ìˆ˜ ìˆê³ , ì´ íŒ¨í„´ì€ ëŒ€ëŸ‰ì˜ ë°ì´í„°ì—ì„œ í™•ë³´í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<h3>ê³ ì „ì  ì¸ê³µì§€ëŠ¥</h3>
<p>ì¸ê³µì§€ëŠ¥(AI)ë¼ëŠ” ìš©ì–´ëŠ” ì¡´ë§¤ì¹´ì‹œê°€ ì œì•ˆí–ˆë‹¤.</p>
<ul>
<li>ì´ ë¬¸êµ¬ê°€ ì²˜ìŒ ë“±ì¥í•œ ë¬¸ì„œëŠ” 1956ë…„ 'ë‹¤íŠ¸ë¨¸ìŠ¤ íšŒì˜'ë¡œ, ê¸°ê³„ ì§€ëŠ¥ì´ë¼ëŠ” ìƒˆë¡œìš´ ë¶„ì•¼ë¥¼ ì—°êµ¬í•˜ëŠ” ì—°êµ¬ìê°€ ëª¨ì¸ í–‰ì‚¬ì˜€ë‹¤.</li>
<li>ì œì•ˆì—ëŠ” ì§€ëŠ¥ì˜ ëª¨ë“  íŠ¹ì§•ì€ ê¸°ê³„ì—ì„œ êµ¬í˜„ë  ìˆ˜ ìˆì„ ë§Œí° ì •í™•í•˜ê²Œ í‘œí˜„í•˜ê¸° ì‰½ë‹¤ëŠ” ê°€ì„¤ì´ ë‹´ê²¨ ìˆë‹¤.
<ul>
<li>ê¸°ì¡´ì—ëŠ” ë°œì‚¬ì²´ íƒ„ë„ë¥¼ ê³„ì‚°í•˜ë ¤ë©´ ì—­í•™ì„ ì•Œì•„ì•¼ í•˜ê³ ,</li>
<li>ë¹„í–‰ê¸° ë‚ ê°œë¥¼ ì„¤ê³„í•˜ë ¤ë©´ ê³µê¸°ì—­í•™ì„ ì´í•´í•´ì•¼ í•œë‹¤.</li>
<li>ì „í†µì ìœ¼ë¡œ ê³µí•™ì€ ì´ëŸ° ì‹ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆê³ , ì´ˆê¸° ì–¸ì–´ ì²˜ë¦¬ ì»´í“¨í„°ë¥¼ ì„¤ê³„í•  ë•Œ ì–¸ì–´ì „ë¬¸ê°€ë“¤ì´ ì±„ìš©ëœ ì´ìœ ì´ê¸°ë„ í•˜ë‹¤.</li>
</ul>
</li>
<li>ì§ê´€ì  ì ‘ê·¼ ë°©ì‹ì€ ê·¸ëŸ´ë“¯ í–‡ì§€ë§Œ, ì‹œê°ì´ë‚˜ ì–¸ì–´ ê°™ì€ ë‹¨ìˆœí•œ í˜„ìƒì— ëŒ€í•´ ì¸ê°„ì´ ì‹¤ì œë¡œ ì•„ëŠ”ê²Œ ì–¼ë§ˆë‚˜ ì—†ëŠ”ì§€ ì˜ ë³´ì—¬ì¤€ë‹¤.</li>
</ul>
<p>1980ë…„ëŒ€ '5ì„¸ëŒ€ ì»´í“¨í„° ì‹œìŠ¤í…œ'ì˜ íˆ¬ìì—ì„œ, 'ì§€ì‹ ê¸°ë°˜' ë°©ì‹ê³¼ 'ë…¼ë¦¬ì  ì¶”ë¡ ' ê·œì¹™ì„ í†µí•´ 'ì „ë¬¸ê°€ ì‹œìŠ¤í…œ'ì´ë¼ëŠ” ì œí’ˆì´ ê°œë°œë˜ì—ˆë‹¤.</p>
<ul>
<li>ê° ì „ë¬¸ ë¶„ì•¼ì— ê´€í•œ ì§€ì‹ì€ ì¸ê°„ì´ ì½ì„ ìˆ˜ ìˆê²Œ í‘œì‹œë˜ì—ˆê³  ë…¼ë¦¬ë¥¼ ì‚¬ìš©í•´ ì²˜ë¦¬ë˜ì—ˆë‹¤.</li>
<li>ì „ë¬¸ê°€ ì‹œìŠ¤í…œì„ ë¯¸êµ­ì—ì„œ ë„ë¦¬ ì•Œë¦° ì‚¬ëŒì€ ì—ë“œ íŒŒì´ê²ë°”ì›€ ì´ì˜€ë‹¤.
<ul>
<li>ì§€ëŠ¥í˜• ê¸°ê³„ëŠ” í˜„ì‹¤ì—ì„œì˜ ì„ ì–¸ì  ì§€ì‹ì´ ì—†ë‹¤ë©´ ì‘ë™í•  ìˆ˜ ì—†ë‹¤ëŠ” ë¯¿ìŒì„ ê°–ì€ ì»´í“¨í„° ê³¼í•™ìë‹¤.</li>
<li>ì¸ê°„ì´ ì½ì„ ìˆ˜ ìˆëŠ” ì‚¬ì‹¤ê³¼ ê·œì¹™ì— ì˜ì¡´í•˜ëŠ” ì´ ë°©ë²•ì„ ì¸ê³µì§€ëŠ¥ì˜ 'ì§€ì‹ ê¸°ë°˜ íŒ¨ëŸ¬ë‹¤ì„' ì´ë¼ê³  ë¶ˆë €ê³ , ë˜ëŠ” 'ê¸°í˜¸ì‹ ì¸ê³µì§€ëŠ¥'ì´ë¼ê³  ë¶€ë¥´ê¸°ë„ í–ˆë‹¤.</li>
<li>1985ë…„ ì² í•™ì ì¡´ í•˜ìš°ê²”ë€ì€ 'ê³ ì „ì  ì¸ê³µì§€ëŠ¥(Good Old-Fashioned AI:GOFAI)'ë¼ í–ˆë‹¤.</li>
<li>ì „ë¬¸ê°€ ì‹œìŠ¤í…œì— ëŒ€í•œ ê³¼ì‰ ê¸°ëŒ€ì™€ íˆ¬ìëŠ” ê¸°ìˆ ì  í•œê³„ë¡œ ëŒ€ë¶€ë¶„ì˜ ê¸°ëŒ€ì— ë¯¸ì¹˜ì§€ ëª»í–ˆë‹¤.</li>
</ul>
</li>
<li>ê·œì¹™ì„ ìƒì„±í•  'ì§€ì‹ ì—”ì§€ë‹ˆì–´(knowledge engineer)'ë¼ëŠ” ì§ë¬´ë„ ë“±ì‘í–ˆë‹¤.</li>
<li>ë³µì¡í•œ ê·œì¹™ê³¼ ì˜ˆì™¸ë“¤ì„ ìƒì„±í–ˆê³ , ê²°êµ­ ì „ë¬¸ê°€ ì‹œìŠ¤í…œì€ í˜„ì‹¤ ì„¸ê³„ì˜ ë¶ˆí™•ì‹¤ì„±ì„ ë‹¤ë£¨ê¸°ì—ëŠ” ì·¨ì•½í•˜ê³  ìœ ì§€ ê´€ë¦¬ì— ë§ì€ ë¹„ìš©ì´ ë“ ë‹¤ëŠ” ì‚¬ì‹¤ì´ ë°í˜€ì¡Œë‹¤.</li>
<li>1988ë…„ 3ì›” 'ë‰´ìš• íƒ€ì„ìŠ¤'ì— 'ì¸ê³µì§€ëŠ¥ì˜ ì‹¤íŒ¨'ë¼ëŠ” ê¸°ì‚¬ì—ì„œ ì¸ê³µì§€ëŠ¥ì— ëŒ€í•œ íˆ¬ìì— ë¶€ì •ì ì¸ ì˜ê²¬ì„ ë¬˜ì‚¬í–ˆë‹¤.</li>
</ul>
<h3>ì£¼ê¸° ìˆœí™˜: í˜¸í™©, ê±°í’ˆë¶•ê´´, ê²¨ìš¸</h3>
<p>ì¸ê³µì§€ëŠ¥ ë¶„ì•¼ì—ì„œì˜ ê²¨ìš¸ì€ ëƒ‰ì „ì‹œëŒ€ì˜ 'í•µ ê²¨ìš¸'ì—ì„œ ìœ ë˜í–ˆë‹¤. ë¦¬ìŠ¤í”„ ë¨¸ì‹  ì‹œì¥ ë¶•ê´´ì´í›„ê°€ 'ì œ2ì°¨ ì¸ê³µì§€ëŠ¥ ê²¨ìš¸'ë¡œ ì•Œë ¤ì ¸ ìˆë‹¤.</p>
<ul>
<li>ì €ì˜ˆì‚° í™˜ê²½ì—ì„œë„ ì„±ê³µí•  ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ ì´ë¡ ì  ì•„ì´ë””ì–´ë¥¼ ìœ„í•œ ì‹œì¥ì´ ì°½ì¶œë˜ëŠ” ì‹œê¸°ë‹¤.</li>
<li>ì´ ì‹œê¸°ì— 'ë¨¸ì‹ ëŸ¬ë‹' ì´ë¼ëŠ” ê°œë…ì˜ ê´€ì‹¬ì´ ë†’ì•„ì¡Œë‹¤. ì´í›„ ì‹ ê²½ë§ í›ˆë ¨,  ë°ì´í„° ë¶„ì„ìš© ì˜ì‚¬ ê²°ì • íŠ¸ë¦¬ ë„ì¶œ, ì‚¬ë¡€ë¥¼ í†µí•œ ë…¼ë¦¬ ê·œì¹™ì„ í•™ìŠµí•˜ëŠ” ìƒˆë¡œìš´ ë°©ë²•ë“¤ì´ ê°œë°œë˜ì—ˆê³ , ì´ëŠ” ì „ë¬¸ê°€ ì‹œìŠ¤í…œì˜ ë‹¨ì ì„ ë³´ì™„í•˜ë ¤ëŠ” ì‹œë„ì˜€ë‹¤.</li>
</ul>
<h3>ì‹œì• í‹€ì—ì„œì˜ ê°ˆë“±</h3>
<blockquote>
<p>ì¹œì• í•˜ëŠ” ì•„ë§ˆë´‡. ì„¤ë ¹ ë‹¹ì‹ ì—ê²Œ ìš°ë¦¬ì˜ ì¦ì˜¤ë¥¼ ë°›ì•„ë‚¼ ë§ˆìŒì´ ì¡´ì¬í•œë‹¤ í•œë“¤, ê³ ë§ˆìš¸ ì¼ì€ ì „í˜€ ì—†ë„¤ìš”. ì´ì¡°ì¡í•˜ê²Œ ë•œì§ˆí•œ ê¹¡í†µ ê°™ìœ¼ë‹ˆ. ê²°êµ­ì—ëŠ” ì‚´ê³¼ í”¼ë¡œ ì´ë£¨ì–´ì§„ ë©‹ì§„ ì—‰í„°ë¦¬ê°€ ìŠ¹ë¦¬í•  ê²ë‹ˆë‹¤.</p>
</blockquote>
<p>ìµëª…ì˜ ê´‘ê³ ê°€ 'ì‹œì• í‹€ ìœ„í´ë¦¬' ì£¼ê°„ì§€ì— ê²Œì¬ë˜ì—ˆë˜ 1999ë…„ ë‹¹ì‹œ ì•„ë§ˆì¡´ì˜ ì¸ê°„ ì—ì´í„° ì—…ë¬´ë¥¼ ëŒ€ì²´í•˜ëŠ” ì•„ë§ˆë´‡ì„ ì €ê²©í–ˆë‹¤.</p>
<ul>
<li>ì•„ë§ˆì¡´ì€ ê³ í’ˆì§ˆ ë¦¬ë·°ë¥¼ ì‘ì„±í–ˆì§€ë§Œ ê¸‰ê²©í•œ ì„±ì¥ ì†ë„ë¥¼ ë”°ë¼ì¡ê¸° ì–´ë ¤ì› ë‹¤.</li>
<li>'ê³ ê° í•œ ëª…ë‹¹ í•˜ë‚˜ì˜ ì‡¼í•‘ëª°'ì´ë¼ëŠ” ì°½ì—…ì ì œí”„ ë² ì´ì¡°ìŠ¤ì˜ ì•„ì´ë””ì–´ë¥¼ ë”°ë¥´ë©´ì„œ ê°œì¸í™”ì— ì§‘ì¤‘í•˜ì˜€ë‹¤.</li>
<li>ì¶”ì²œ ì—ì´ì „íŠ¸ëŠ” ë³´í†µ íŠ¹ì • ì‚¬ìš©ìê°€ ì„¤ë¬¸ì„ ì‘ì„±í•˜ê³  'ìœ ì‚¬í•œ ê³ ê°'ì´ êµ¬ë§¤í–ˆë˜ ì±…ì„ ì¶”ì²œí•´ì£¼ëŠ” 'ë¶ë§¤ì²˜(bookmatcher)' ê¸°ìˆ ì— ê¸°ë°˜ì„ ë‘ì—ˆë‹¤.</li>
<li>1998ë…„ ê°œì¸í™” íŒ€ì˜ ì—°êµ¬ì› ê²Œë¦¬ë¦°ë“ ê³¼ ë™ë£ŒëŠ” ìƒˆë¡œìš´ ì•Œê³ ë¦¬ì¦˜ì„ ê°œë°œí–ˆë‹¤.
<ul>
<li>ìœ ì‚¬í•œ ì‚¬ìš©ìë¥¼ í”„ë¡œíŒŒì¼ë§í•˜ì—¬ ì°¾ëŠ” ëŒ€ì‹  ì‚¬ìš©ìë“¤ì˜ ê³¼ê±° ê±°ë˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë¶„ì„í•¨ìœ¼ë¡œì¨ ìœ ì‚¬í•œ ì œí’ˆì„ ì°¾ì„ ìˆ˜ ìˆë‹¤ê³  ìƒê°í–ˆë‹¤.</li>
<li>'ìƒí’ˆ ê¸°ë°˜ í˜‘ì—… í•„í„°ë§'ì´ë¼ê³  ë¶€ë¥¸ë‹¤. ì›¹ ì‹œëŒ€ ì´ì „ì— ë°ì´ë¸Œ ê³¨ë“œë²„ê·¸ê°€ ì›ì¹˜ ì•ŠëŠ” ì´ë©”ì¼ì„ í•„í„°ë§í•˜ëŠ” ë°©ë²•ì„ ì–´ë–¤ ì‚¬ìš©ìë“¤ì´ ê·¸ëŸ° ì´ë©”ì¼ì— ë°˜ì‘í•˜ëŠ”ì§€ì— ê³ ì•ˆí•´ë‚¸ ê²ƒìœ¼ë¡œ, ì‚¬ìš©ìê°€ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ í˜‘ë ¥í•˜ê²Œ ë˜ëŠ” ë°©ì‹ì„ ê³ ì•ˆí•œ ê²ƒì— ëŒ€í•œ ì°¬ì‚¬ì˜ ì˜ë¯¸ ì´ë‹¤.</li>
<li>ì´ ì‹œìŠ¤í…œì€ ì‚¬ëŒë“¤ì—ê²Œ ë¬´ì—‡ì„ ì›í•˜ëŠ”ì§€ ë¬»ëŠ” ëŒ€ì‹ , ê·¸ë“¤ì„ ë¹„ë¡¯í•œ ìˆ˜ë°±ë§Œ ëª…ì˜ ë‹¤ë¥¸ ì‚¬ëŒì´ ì‹¤ì œë¡œ í•œ í–‰ë™ì— ê·¼ê±°í•˜ì—¬ ì‘ë™í–ˆë‹¤.</li>
<li>ê²°ê³¼ì ìœ¼ë¡œ ì¸ê°„ì´ ì‘ì„±í•œ ë¦¬ë·°ë¥¼ ë”°ë¥´ê¸°ë³´ë‹¤ëŠ” ê°œì¸í™”ëœ ì¶”ì²œì— ë”°ë¼ ë” ë§ì€ ì±…ì„ êµ¬ì…í–ˆê³ , ì´ 'ë¡œë´‡'ì˜ í›Œë¥­í•œ ì‹¤ì ì€ ê·¸ë™ì•ˆì˜ ì¸ê°„ ì—ë””í„°íŒ€ì˜ ìš´ëª…ì„ ê²°ì •ì§€ì—ˆë‹¤.</li>
<li>ì´ëŸ¬í•œ ì—ì´ì „íŠ¸ì˜ í–‰ë™ì€ ê³ ê° ë˜ëŠ” ì±…ì˜ ë‚´ìš©ì— ëŒ€í•´ ëª…ì‹œì  ê·œì¹™ì´ë‚˜ ì´í•´ì— ê¸°ë°˜í•˜ì§€ ì•Šê³ , ê³¼ê±°ì˜ ê±°ë˜ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°œê²¬ëœ í†µê³„ì  íŒ¨í„´ì„  ì´ìš©í–ˆë‹¤.</li>
</ul>
</li>
<li>ì•„ë§ˆë´‡ì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ” 'ì¸ê°„ í–‰ë™ì—ëŠ” í•™ìŠµí•˜ê³  ì´ìš©í•  ìˆ˜ ìˆëŠ” ì‹ ë¢°í•  ë§Œí•œ íŒ¨í„´ì´ ì¡´ì¬í•œë‹¤'ëŠ” ê²ƒì´ë‹¤.</li>
<li>ì‚¬ìš©ìë“¤ì—ê²Œ ì§ˆë¬¸í•  í•„ìš”ê°€ ì—†ì–´ì§€ì§€ë§Œ, í•œí¸ìœ¼ë¡œ ì‚¬ìš©ìë¥¼ ê´€ì°°í•´ì•¼ í•  í•„ìš”ì„±ì´ ìƒê¸´ë‹¤.</li>
</ul>
<h3>íŒ¨ëŸ¬ë‹¤ì„ ì „í™˜</h3>
<p>1990ë…„ëŒ€ í›„ë°˜ ì•„ë§ˆì¡´ì—ì„œ ì¼ì–´ë‚œ ì‚¬ê±´ì€ ì›¹ì´ ì§€ëŠ¥ì  ì†Œí”„íŠ¸ì›¨ì–´ ì—ì´ì „íŠ¸ê°€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆëŠ” ìœ ìš©í•œ í™˜ê²½ì´ ë  ìˆ˜ ìˆìŒì„ ë³´ì—¬ì£¼ì—ˆë‹¤.</p>
<ul>
<li>ì‚¬ìš©ì í–‰ë™ì— ëŒ€í•œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³ , ì •ë³´ì˜ í†µê³„ì  íŒ¨í„´ì„ í™œìš©í•˜ì—¬, ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì˜ì‚¬ ê²°ì •ì„ ë‚´ë¦¬ê¸°ë§Œ í•˜ë©´ ë˜ì—ˆë‹¤.</li>
<li>ìƒˆë¡œìš´ ìƒí™©ì—ì„œ íš¨ê³¼ì ì¸ í–‰ë™ì„ ì·¨í•  ìˆ˜ ìˆëŠ” ëª©í‘œ ì§€í–¥ì  í–‰ë™, ì¦‰ 'ì§€ëŠ¥í˜•' ì´ë¼ê³  ë¶€ë¥¼ ë§Œí•œ í–‰ë™ì´ë‹¤.</li>
</ul>
<p>ê³¼í•™ê³¼ ê¸°ìˆ ì˜ ì—­ì‚¬ëŠ” ì² í•™ì í† ë¨¸ìŠ¤ ì¿¤ì´ 'íŒ¨ëŸ¬ë‹¤ì„'ì´ë¼ê³  ë¶ˆë €ë˜ ì„±ê³µ ì‚¬ë¡€ë“¤ë¡œ í˜•ì„±ëœë‹¤.</p>
<ul>
<li>ê³¼í•™ ë¶„ì—¬ëŠ” ì™„ë§Œí•˜ê³  ì§€ì†ì ì¸ ì„±ì¥ì´ ì•„ë‹Œ, ê¸‰ê²©í•œ ê°€ì†ê³¼ ì „í™˜ì— ì˜í•´ ì´ë£¨ì–´ì§„ë‹¤ëŠ” ì‚¬ì‹¤ì„ ë°œê²¬í–ˆë‹¤.</li>
<li>ì„œë¡œ ë‹¤ë¥¸ ë‘ ê°€ì§€ 'ìƒíƒœ'ë¥¼ ë°œê²¬í–ˆëŠ”ë°, 'ì •ìƒê³¼í•™'ê³¼ 'íŒ¨ëŸ¬ë‹¤ì„ ì „í™˜' ìƒíƒœì´ë‹¤.
<ul>
<li>ë‰´í„´ ì—­í•™ì—ì„œ ì–‘ìì—­í•™ìœ¼ë¡œì˜ ì „í™˜ê³¼ ê°™ì€ íŒ¨ëŸ¬ë‹¤ì„ì˜ ì˜ˆê°€ ìˆë‹¤.</li>
</ul>
</li>
<li>'ì •ìƒê³¼í•™'ì˜ ì‹œê¸°ì— ì—°êµ¬ìë“¤ì€ ë‹¹ì‹œì˜ íŒ¨ëŸ¬ë‹¤ì„ ë‚´ì—ì„œ ì„±ê³¼ë¥¼ ë„ì¶œí•˜ê³  ë‹¤ë“¬ì§€ë§Œ, ì•„ì£¼ ê°€ë” ì–´ë–¤ ì¼ì´ ë°œìƒí•´ íŒ¨ëŸ¬ë‹¤ì„ ìì²´ê°€ ë°”ë€Œë©´, ì „ì²´ ê³¼í•™ê³„ì˜ ì–¸ì–´ì™€ ëª©í‘œê¹Œì§€ ë°”ë€Œê²Œ ëœë‹¤.</li>
</ul>
<h3>ì¸ê³µì§€ëŠ¥ ì—­ì‚¬ì— ë“±ì‘í•œ ì„¸ ê°€ì§€ ì¹˜íŠ¸í‚¤</h3>
<p>ë‹·ì»´ ë²„ë¸”ì´ êº¼ì§„ ì‹œê¸°ì˜ ê°•ë ¥í•œ ìƒì¡´ ê¸°ì—… ì¤‘ í•˜ë‚˜ëŠ” êµ¬ê¸€ì´ì—ˆë‹¤.</p>
<ul>
<li>êµ¬ê¸€ì€ ì´í›„ 'ë°ì´í„° ê¸°ë°˜ ì¸ê³µì§€ëŠ¥'ìœ¼ë¡œ ì•Œë ¤ì§„ ìƒˆë¡œìš´ íŒ¨ëŸ¬ë‹¤ì„ì„ ì´ë¯¸ í†µí•©í–ˆë‹¤.
<ul>
<li>ìˆ˜ì‹­ ì¢…ì˜ ì–¸ì–´ ê°„ ê¸°ê³„ ë²ˆì—­, ê²€ìƒ‰ì–´ ìë™ ì™„ì„± ë° ìë™ ìˆ˜ì •, ìœ¼ì„± ê²€ìƒ‰, ì½˜í…ì¸  ê¸°ë°˜ ì´ë¯¸ì§€ ê²€ìƒ‰, ìœ„ì¹˜ ì¸ì‹ ê²€ìƒ‰, ê³ ë„í™”ëœ ê°œì¸í™” ê´‘ê³ </li>
</ul>
</li>
</ul>
<p>2009ë…„ êµ¬ê¸€ì˜ í•œ ì„ ì„ ì—°êµ¬ì› ê·¸ë£¹ì€ êµ¬ê¸€ì˜ ì‚¬ê³ ë°©ì‹ì˜ ì„ ì–¸ë¬¸ì´ ëœ ë…¼ë¬¸ì„ ê³µê°œí–ˆë‹¤. ì´ë¡ ì  ëª¨ë¸ì„ ë°ì´í„°ì—ì„œ ë°œê²¬í•œ íŒ¨í„´ìœ¼ë¡œ ëŒ€ì²´í•˜ëŠ” ê²ƒì€ ì§€ëŠ¥í˜• ê¸°ê³„ì— ë„ë‹¬í•˜ëŠ” ì²« ë²ˆì§¸ ì¹˜íŠ¸í‚¤ì˜€ë‹¤.</p>
<ul>
<li>1960ë…„ ìœ ì§„ ìœ„ê·¸ë„ˆê°€ ìˆ˜í•™ì˜ í˜ì— ê´€í•´ ì‘ì„±í•œ ê³ ì „ì ì¸ ë…¼ë¬¸ì˜ ì œëª©ì—ì„œ ì´ë¦„ì„ ë”°ì˜¨ ì´ ë…¼ë¬¸ì˜ ì œëª©ì€ 'ë°ì´í„°ì˜ ë¹„í•©ë¦¬ì  íš¨ìœ¨ì„±' ì´ì—ˆë‹¤.</li>
<li>ì§€ëŠ¥í˜• í–‰ë™ì— í•„ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ë°ì´í„°ì˜ ìœ„ë ¥ì„ ì¹­ì†¡í•˜ê³ , ì‹¤ë¬´ì—ì„œ ì´ë¯¸ ìƒì‹ìœ¼ë¡œ ë°›ì•„ë“¤ì—¬ì§„ ë‚´ìš©ë“¤ì„ ìƒˆë¡œìš´ ì¸ê³µì§€ëŠ¥ì˜ ê¸°ë³¸ ì„¤ê³„ë„ë¼ ë³¼ ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ êµ¬í˜„í–ˆë‹¤.</li>
<li>ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸ì˜ í–‰ë™ì— í•„ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì€ ëª¨ë¸ì´ë‚˜ ê·œì¹™ì´ ì•„ë‹ˆë¼ ë°ì´í„°ì—¬ì•¼ í•œë‹¤ëŠ” ì ì„ ê°•ì¡°í•˜ê¸° ìœ„í•´ ë‹¤ìŒì˜ êµ¬ì ˆì„ í¬í•¨í•œë‹¤.
<ul>
<li>ë‹¨ìˆœí•œ ëª¨ë¸ê³¼ ëŒ€ê·œëª¨ ë°ì´í„°ê°€, ì†Œê·œëª¨ ë°ì´í„° ê¸°ë°˜ì˜ ë” ì •êµí•œ ëª¨ë¸ë³´ë‹¤ ìš°ì„ í•œë‹¤.</li>
<li>ìš°ë¦¬ëŠ” ë§¤ìš° ê³ ìƒí•œ ì´ë¡ ì„ ë§Œë“¤ì–´ë‚´ëŠ” ê²ƒì´ ëª©í‘œì¸ ì–‘ í–‰ë™í•˜ëŠ” ê±¸ ë©ˆì¶”ê³ , ëŒ€ì‹  ë³µì¡ì„±ì„ ë°›ì•„ë“¤ì´ê³  ìš°ë¦¬ê°€ ê°€ì§„ ìµœê³ ì˜ ì•„êµ°ì¸ 'ë°ì´í„°ì˜ ë¹„í•˜ë¦¬ì  íš¨ìœ¨ì„±'ì„ í™œìš©í•´ì•¼ í•œë‹¤.</li>
</ul>
</li>
</ul>
<p>ë‘ ë²ˆì§¸ ì¹˜íŠ¸í‚¤ëŠ” ì•„ë§ˆì¡´ì—ì„œ ì–´ë–¤ ì±…ë“¤ì´ ì„œë¡œ ìœ ì‚¬í•œì§€ ë°œê²¬í•˜ê¸° ìœ„í•´ íŒë§¤ ë°ì´í„° ì„¸íŠ¸ì˜ ìš©ë„ë¥¼ ì¬ì •ì˜í•  ë•Œ ì‚¬ìš©í–ˆë˜ ë°©ë²•ìœ¼ë¡œ, ì¸ê³µì§€ëŠ¥ì— ì´ë¡ ì  ëª¨ë¸ê³¼ ê³ ë¹„ìš© ë°ì´í„°ë¥¼ í•œêº¼ë²ˆì— ëŒ€ì²´í–ˆë‹¤.</p>
<ul>
<li>ì´ë¡ ì„ ë°ì´í„°ë¡œ ëŒ€ì²´í•˜ëŠ” ì´ ê°™ì€ ë°©ë²•ì˜ í•œê°€ì§€ ë¶„ëª…í•œ ë¬¸ì œëŠ” í•„ìš”í•œ ë°ì´í„°ë¥¼ ì°¾ì•„ë‚´ëŠ” ê²ƒì¸ë°, ì´ë¡ ì„ ìˆ˜ë¦½í•˜ëŠ” ê²ƒë§Œí‹ˆì´ë‚˜ ì–´ë µê³  ë¹„ìš©ì´ ë§ì´ë“œëŠ” ê³¼ì œê°€ ë  ìˆ˜ ìˆë‹¤.</li>
<li>ë…¼ë¬¸ì˜ ì €ìëŠ” í•´ë‹µìœ¼ë¡œ, ì´ë¯¸ 'ì•¼ìƒ'ì— ì¡´ì¬í•˜ëŠ” ë°ì´í„°, ì¦‰ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì˜ ë¶€ì‚°ë¬¼ë¡œ ìƒì„±ëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ì˜€ë‹¤.</li>
<li>"ìš°ë¦¬ê°€ ìë™í™”í•˜ê³ ì í•˜ëŠ” ì…ì¶œë ¥ ì¡°ì‘ì˜ ëŒ€ê·œëª¨ í›ˆë ¨ ì„¸íŠ¸ëŠ” ì•¼ìƒì—ì„œ êµ¬í•  ìˆ˜ ìˆë‹¤. ... ì›¹ ê·œëª¨ì˜ í•™ìŠµì—ì„œ ì–»ì„ ìˆ˜ ìˆì—ˆë˜ ì²« ë²ˆì§¸ êµí›ˆì€, ì‹¤ì œë¡œ êµ¬í•  ìˆ˜ ì—†ëŠ” ì£¼ì„ì´ ë‹¬ë¦° ë°ì´í„°ë¥¼ ì°¾ìœ¼ë ¤ í•˜ê¸°ë³´ë‹¤ëŠ” ì°¨ë¼ë¦¬ êµ¬í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ë‚«ë‹¤ëŠ” ê²ƒì´ë‹¤."</li>
</ul>
<p>ì„¸ ë²ˆì§¸ ì¹˜íŠ¸í‚¤ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li>" ìš°ë¦¬ëŠ” ì‚¬ìš©ìê°€ ì–´ë–¤ ê²€ìƒ‰ ê²°ê³¼ê°€ ì¢‹ì•˜ê³  ì–´ë–¤ ê²€ìƒ‰ ê²°ê³¼ê°€ ë³„ë¡œì˜€ëŠ”ì§€ì— ê´€í•œ ëª…ì‹œì  í”¼ë“œë°±ì„ ìš°ë¦¬ì—ê²Œ ì œê³µí•  í•„ìš”ê°€ ì—†ë„ë¡ ì„¤ê³„ ê²°ì •ì„ ë‚´ë ¸ë‹¤. ëŒ€ì‹  ê·¸ëƒ¥ ì‚¬ëŒë“¤ì´ ì–´ë–¤ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë”°ë¥´ëŠ”ì§€ë¥¼ ê¸°ë¡í•œë‹¤. ì‚¬ìš©ìëŠ” ê° ê²€ìƒ‰ ê²°ê³¼ì˜ ìì„¸í•œ ì´ˆë¡ì„ ë³¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ê° ì‚¬ìš©ìê°€ í´ë¦­í•œ ê²€ìƒ‰ ê²°ê³¼ëŠ” ì˜ë¯¸ ìˆì„ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤ê³  ë¯¿ëŠ”ë‹¤."</li>
<li>"ì‚¬ìš©ìê°€ ì–´ë˜ ë¬¸ì„œì— ëŒ€í•´ ë‹µì—ã…‡ì„ ë³´ëƒˆë‹¤ëŠ” ì‚¬ì‹¤ê³¼ ê°™ì€, ì‚¬ìš©ìë“¤ì˜ ì•”ë¬µì  í”¼ë“œë°± ì—­ì‹œ í™œìš©í•  ìˆ˜ ìˆë‹¤."</li>
</ul>
<h3>ìƒˆë¡œìš´ ì¸ê³µì§€ëŠ¥ìœ¼ë¡œ</h3>
<p>ìƒˆë¡œìš´ ì„¸ëŒ€ì˜ ì—°êµ¬ìë“¤ì€ ë°ì´í„°ë¥¼ ì‰½ê²Œ êµ¬í•  ìˆ˜ ìˆëŠ” ì„¸ìƒ, 'í†µê³„ì  ë¨¸ì‹ ëŸ¬ë‹'ì´ ì§€ëŠ¥í˜• í–‰ë™ ë˜ëŠ” ìµœì†Œí•œ í•œ ê°€ì§€ íŠ¹ì • ìœ í˜•ì˜ í–‰ë™ì„ ë§Œë“¤ì–´ë‚´ëŠ” ì„ íƒì§€ ì¤‘ í•˜ë‚˜ê°€ ëœ ì„¸ìƒì—ì„œ ì„±ì¥í–ˆë‹¤.</p>
<h3>ë°”í”„ë‹‰ì˜ ë²•ì¹™ê³¼ ìƒˆë¡œìš´ ì‚¬ê³ ë°©ì‹</h3>
<p>1990ë…„ í†µê³„í•™ìì¸ ë¸”ë¼ë””ë¯¸ë¥´ ë°”í”„ë‹‰ì˜ ì ‘ê·¼ ë°©ì‹ì€ ì´ì „ì˜ ë°©ì‹(ì•Œê³ ë¦¬ì¦˜ì´ ë°ì´í„°ì™€ ê·¸ ê·œì¹™ì„±ì„ ìƒì„±í•˜ëŠ” ìˆ¨ê²¨ì§„ ë©”ì»¤ë‹ˆì¦˜ì„ ì–¼ë§ˆë‚˜ ì˜ ì‹ë³„í•  ìˆ˜ ìˆëŠ”ì§€)ì— ê´€í•´ì„œëŠ” ë¬»ì§€ ì•Šê³  í›ˆë ¨ëœ ë°ì´í„° ì„¸íŠ¸ì—ì„œ ì–´ë–¤ ì˜ˆì¸¡ ì„±ëŠ¥ì„ ê¸°ëŒ€í•  ìˆ˜ ìˆëŠ”ì§€ ë¬»ëŠ”ë‹¤. ì£¼ì–´ì§„ ë°ì´í„° ì„¸íŠ¸ì—ì„œ ì–´ë–¤ ê·œì¹™ì„±ì´ ë°œê²¬ëœë‹¤ê³  ê°€ì •í•  ë•Œ, ê·¸ëŸ¬í•œ ê·œì¹™ì„±ì´ ë¯¸ë˜ì˜ ë°ì´í„° ì„¸íŠ¸ì—ë„ ì¡´ì¬í•  ê²ƒì´ë¼ê³  ì–¸ì œ ì‹ ë¢°í•  ìˆ˜ ìˆì„ê¹Œ?<br>
ê·¸ì˜ ì ‘ê·¼ ë°©ì‹ì€ ë¯¸ë˜ì˜ ê³ ë‚˜ì¸¡ ìƒíƒœë¥¼ ì˜ˆì¸¡í•˜ëŠ” ìƒëŒ€ì ìœ¼ë¡œ ë” ë‹¨ìˆœí•œ ì‘ì—…ì— ë„ì›€ì´ ë˜ëŠ”, 'ë°ì´í„° ë’¤ì— ìˆ¨ê²¨ì§„ ë©”ì»¤ë‹ˆì¦˜ì„ ì‹ë³„'í•œë‹¤ëŠ” ì „í†µì ì¸ ê³¼ì œë¥¼ í¬ê¸°í•œ ê²ƒì´ì˜€ë‹¤.</p>
<blockquote>
<p>ë¬¸ì œë¥¼ í’€ê³ ì í•  ë•Œ ì¤€ê°„ ë‹¨ê³„ë¡œ ë” ì¼ë°˜ì ì¸ ë¬¸ì œë¥¼ í’€ë ¤ê³  í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤. ë” ì¼ë°˜ì ì¸ ë¬¸ì œê°€ ì•„ë‹ˆë¼, ì •ë§ í•„ìš”í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ì„¸ìš”.</p>
</blockquote>
<h3>ìƒˆë¡œìš´ ë ˆì‹œí”¼</h3>
<p>ì¸ê³µì§€ëŠ¥ì˜ ì–¸ì–´ëŠ” ë” ì´ìƒ ë…¼ë¦¬ì  ì¶”ë¡ ì´ ì•„ë‹ˆë¼ í†µê³„ ë° ìµœì í™” ì´ë¡ ì˜ ì–¸ì–´ê°€ ë˜ì—ˆìœ¼ë©°, ì£¼ìš” ê´€ì‹¬ì‚¬ëŠ” í•„ìš”í•œ ë°ì´í„°ë¥¼ ì¡°ë‹¬í•˜ëŠ” ê²ƒì´ ë˜ì—ˆë‹¤.</p>
<ul>
<li>
<p>ë¨¸ì‹ ëŸ¬ë‹ì€ ì´ ë¶„ì•¼ ì „ì²´ì˜ í•µì‹¬ í•™ë¬¸ì´ ë˜ì—ˆê³ , í›ˆë ¨ ë°ì´í„°ëŠ” ê°€ì¥ ê·€ì¤‘í•œ ìì›ì´ ë˜ì—ˆìœ¼ë©°, ì„±ëŠ¥ ì¸¡ì •ì€ ê°•ë°•ì  ì§‘ì°©ì˜ ëŒ€ìƒì´ ë˜ì—ˆë‹¤.</p>
</li>
<li>
<p>ëª©í‘œëŠ” ì–´ë–¤ ì§„ë¦¬ë¥¼ ë°œê²¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ 'ì•„ë§ˆë„ ëŒ€ëµì ìœ¼ë¡œ ì •í™•í• ' í–‰ë™ì„ ìƒì„±í•´ë‚´ëŠ” ê²ƒì´ì˜€ë‹¤.</p>
</li>
<li>
<p>ë¬¸ì œë¥¼ í•´ê²°í•  ë•Œ ì¤‘ê°„ ë‹¨ê³„ë¡œ ë” ì¼ë°˜ì ì¸ ë¬¸ì œë¥¼ í’€ë ¤ê³  í•´ì„œëŠ” ì•ˆëœë‹¤.(ë°”í”„ë‹‰)</p>
</li>
<li>
<p>ì–¸ì–´ ì „ë¬¸ê°€ë¥¼ í•´ê³ í•˜ë¼(ì˜ë¦¬ë„¤í¬)</p>
</li>
<li>
<p>ë°ì´í„°ë¥¼ ë”°ë¼ê°€ë¼ (í• ë ˆë¹„ ì™¸ ë‹¤ìˆ˜)</p>
</li>
<li>
<p>ë” ë‚˜ì€ ì•Œê³ ë¦¬ì¦˜ë³´ë‹¤ ë” ë§ì€ ë°ì´í„°ê°€ ì¤‘ìš”í•˜ë‹¤. (ì—ë¦­ ë¸Œë¦´, ì˜ë¦¬ë„¤í¬ ì¸ìš©)</p>
</li>
<li>
<p>ë‹¨ìˆœí•œ ëª¨ë¸ê³¼ ëŒ€ê·œëª¨ ë°ì´í„°ê°€, ì†Œê·œëª¨ ë°ì´í„° ê¸°ë°˜ì˜ ë” ì •êµí•œ ëª¨ë¸ì„ ì´ê¸´ë‹¤. (í• ë ˆë¹„ ì™¸)</p>
</li>
<li>
<p>í›ˆë ¨ ë°ì´í„°ë¥¼ ë§ì´ í™•ë³´í–ˆë‹¤ë©´ ì•”ê¸°ê°€ ì¢‹ì€ ì •ì±…ì´ë‹¤. (í• ë ˆë¹„ ì™¸)</p>
</li>
<li>
<p>ì‹¤ì œë¡œ êµ¬í•  ìˆ˜ ì—†ëŠ” ì£¼ì„ì´ ë‹¬ë¦° ë°ì´í„°ë¥¼ ê¸°ëŒ€í•˜ê¸°ë³´ë‹¤ëŠ” ì°¨ë¼ë¦¬ êµ¬í•  ìˆ˜ ì‡ëŠ” ì•¼ìƒì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ë‚«ë‹¤. (í• ë ˆë¯¸ ì™¸)</p>
</li>
<li>
<p>ì‚¬ìš©ìê°€ ëª…ì‹œì  í”¼ë“œë°±ì„ ì œê³µí•˜ë„ë¡ ìš”êµ¬í•˜ê¸°ë³´ë‹¤ëŠ”, ê·¸ì € ì‚¬ëŒë“¤ì´ ì–´ë–¤ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë”°ë¥´ëŠ”ì§€ë¥¼ ê¸°ë¡í•˜ë¼ (ë³´ì–€ ì™¸ ë‹¤ìˆ˜)</p>
</li>
<li>
<p>ì–´ë–¤ ì‚¬ìš©ìê°€ ë¬¸ì„œì— ë‹µì¥ì„ ë³´ëƒˆë‹¤ëŠ” ì‚¬ì‹¤ê³¼ ê°™ì€ ì‚¬ìš©ìë“¤ì˜ ì•”ë¬µì  í”¼ë“œë°±ë„ í™œìš©í•  ìˆ˜ ìˆë‹¤. (ê³¨ë“œë²„ê·¸)</p>
</li>
</ul>
<p>ë°”í”„ë‹‰ê³¼ ì˜ë¦¬ë„¤í¬ëŠ” ë™ì¼í•œ ì›ì¹™ì„ ìš°ì—°íˆ ë°œê²¬í–ˆëŠ”ë°, ê·¸ í•µì‹¬ì€ 'ì¡°ì‚¬ ëŒ€ìƒì´ ë˜ëŠ” ì‹œìŠ¤í…œ ìì²´ë¥¼ ì´í•´í•˜ê¸° ë³´ë‹¤ëŠ”, ê·¸ ì‹œìŠ¤í…œì´ ì•ìœ¼ë¡œ ë¬´ìŠ¨ ì¼ì„ í• ì§€ ì˜ˆì¸¡í•˜ê¸°ë§Œ í•´ë„ ì¶©ë¶„í•  ìˆ˜ ìˆë‹¤'ë¡œ ìš”ì•½í•  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li>í…ìŠ¤íŠ¸ì—ì„œ ë‹¤ìŒ ë‹¨ì–´ë¥¼ ì˜ˆì¸¡í•˜ëŠ” ì¼ì€ ë¬¸ì¥ í•˜ë‚˜ë¥¼ ì´í•´í•˜ëŠ” ì¼ë³´ë‹¤ í›¨ì”¬ ì‰¬ìš¸ ë¿ ì•„ë‹ˆë¼, ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì´ê²ƒë§Œìœ¼ë¡œ ì¶©ë¶„í•˜ë‹¤.</li>
</ul>
<p>ìƒë¬¼í•™ì  ì§„í™”ì—ì„œëŠ” í‘œí˜„í˜• í–‰ë™ë§Œì„ ë³´ê³  ì„ íƒí•˜ê¸° ë•Œë¬¸ì—, ìƒë¬¼í•™ì  ì§€ëŠ¥ì´ë€ 'ì‹ ì˜ ìƒê°ì„ ì´í•´' í•˜ê¸° ìœ„í•œ ëŠ¥ë ¥ ë³´ë‹¤ëŠ” 'ì˜ í–‰ë™'í•˜ë„ë¡ ë•ëŠ” ëŠ¥ë ¥ì— ì˜í•´ í˜•ì„±ë˜ì—ˆë‹¤ê³  ìƒê°í•´ì•¼ í•˜ì§€ ì•Šì„ê¹Œ?</p>
<h2>3ì¥. ì„¸ê³„ì˜ ì§ˆì„œë¥¼ ì°¾ì•„ì„œ</h2>
<p>í™˜ê²½ì—ì„œ ê·œì¹™ì„±ì„ ê°ì§€í•˜ëŠ” ê²ƒì€ ì—ì´ì „íŠ¸ê°€ ìê¸° í–‰ë™ ê²°ê³¼ë¥¼ ì˜ˆì¸¡(pradict)í•˜ëŠ”ë° í•„ìš”í•œ ë‹¨ê³„ì´ë¯€ë¡œ, ê·œì¹™ì ì¸ í™˜ê²½ì€ ì§€ëŠ¥í˜• í–‰ë™ì˜ ì „ì œ ì¡°ê±´ì´ë‹¤. í•˜ì§€ë§Œ íŒ¨í„´ ì¸ì‹ì„ ìœ„í•œ ëª¨ë“  ë°©ë²•ì—ëŠ” ì¤‘ìš”í•œ í•œê³„ ì‚¬í•­ë“¤ì´ ìˆê¸° ë•Œë¬¸ì—, ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸ì—ì„œ ê¸°ëŒ€í•  ìˆ˜ ìˆëŠ” ë°”ì—ë„ í•œê³„ê°€ ìˆë‹¤.</p>
<h3>ì§€ëŠ¥, íŒ¨í„´ ê·¸ë¦¬ê³  ì§ˆì„œ ìˆëŠ” ì„¸ê³„</h3>
<p>ë°”ë‹¤ ë¯¼ë‹¬íŒ½ì´ êµ°ì†ŒëŠ” ì•„ê°€ë¯¸ ì ‘ì´‰ ì‹œ ì›€ì¸ ë¦¬ëŠ” ë°˜ì‚¬í–‰ë™ì„ ë³´ì´ëŠ”ë°, ì´ê²ƒì€ í¬ì‹ìì— ëŒ€í•œ ë°˜ì‚¬ ì‘ìš©ì´ë‹¤. í•˜ì§€ë§Œ ë°˜ë³µ ì ‘ì´‰ ì‹œ, ë°˜ì‚¬ì‘ìš©ì´ ì„œì„œíˆ ë©ˆì¶”ëŠ” í–‰ë™ì„ ë³´ì¸ë‹¤. í•˜ì§€ë§Œ ì´ëŸ° ê²½í—˜ì— ê·¼ê±°í•˜ëŠ” 'ë¯¿ìŒ'ì´ ì •ë‹¹í™” ë  ìˆ˜ ìˆì„ê¹Œ?<br>
ë¹„ë‘˜ê¸°ëŠ” í›¨ì”¬ ë” ì¶”ìƒì ì¸ ì—°ê´€ì„±ì„ í•™ìŠµí•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ë“¤ë©´ íŠ¹ì • í–‰ë™ì„ ì·¨í•˜ë©´ ë¨¹ì´ë¥¼ ì£¼ëŠ” ë°©ì‹ì´ë‹¤. íŠ¹ì • í–‰ë™ì„ ì·¨í•œ í›„ ë³´ìƒì„ ê¸°ëŒ€í•˜ëŠ” ê²ƒì„ ì •ë‹¹í™” í•˜ëŠ” ìƒê°ì€ êµ°ì†Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ê³¼ë„í•œ ë¹„ì•½ì  ë¯¿ìŒì— ê¸°ë°˜í•œ ê²ƒì´ì—ˆë‹¤.<br>
ìŠ¤ì½”í‹€ëœë“œì˜ ì‚¬ìƒê°€ ë°ì´ë¹„ë“œ í„ì€ 1739ë…„ì— ì´ê²ƒì„ ë¯¸í•´ê²° ê³¼ì œë¡œ ë¶„ë¥˜í•˜ê³  'ê·€ë‚©ì˜ ë¬¸ì œ(the problem of induction)'ë¼ëŠ” ëª…ì¹™ì„ ë¶™ì˜€ë‹¤. ê·¸ì˜ ê²°ë¡ ì€ ë‹¤ë¥¸ ê°€ì •ì„ ì¶”ê°€í•˜ì§€ ì•ŠëŠ” í•œ, êµ°ì†Œì˜ ê²½í—˜ì— ê·¼ê±°í•˜ëŠ” ê¸°ëŒ€ì— ëŒ€í•œ ë…¼ë¦¬ì  ì •ë‹¹í™” ë°©ë²•ì€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©°, ë”°ë¼ì„œ ê²°êµ­ ë¶€ë‹¹í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.<br>
ì´í›„ë¡œ ì² í•™ìë“¤ì€ í•´ë‹¹ ê³¼ì œì— ëŒ€í•´ ëŠì„ì—†ì´ ë…¼ìŸì„ ë²Œì—¬ì™”ìœ¼ë©°, 1912ë…„ ë²„íŠ¸ëŸ°ë“œ ëŸ¬ì…€ì€ ë‹¤ì€ê³¼ ê°™ì´ ì„¤ëª…í•œë‹¤.</p>
<blockquote>
<p>ì‚¬ìœ¡ë˜ëŠ” ê°€ì¶•ë“¤ì€ ë°¥ì„ ì£¼ëŠ” ì‚¬ëŒì„ ë³´ë©´ ë¨¹ì´ë¥¼ ê¸°ëŒ€í•œë‹¤. ìš°ë¦¬ëŠ” ì´ëŸ¬í•œ íšì¼ì„±ì— ëŒ€í•œ ì–´ì„¤í”ˆ ê¸°ëŒ€ê°€ ì˜¤í•´ë¡œ ì´ì–´ì§€ê¸° ì‰½ë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê³  ìˆë‹¤. ë§¤ì¼ ë‹­ì—ê²Œ ë¨¹ì´ë¥¼ ì£¼ë˜ ì‚¬ëŒì´ ë§ˆì¹¨ë‚´ ë‹­ì˜ ëª©ì„ ë¹„íŠ¸ëŠ” í–‰ë™ì€ ìì—°ì˜ íšì¼ì„±ì— ëŒ€í•œ ë” ì„¸ì‹¬í•œ ê´€ì ì´ ê·¸ ë‹­ì—ê²Œ ë„ì›€ì´ ë˜ì—ˆì„ ê²ƒì„ì„ ë³´ì—¬ì¤€ë‹¤.</p>
</blockquote>
<p>ì§€ëŠ¥í˜• ê¸°ê³„ë¥¼ ë§Œë“¤ ë•Œ ì§ë©´í•˜ëŠ” ë‘ê°€ì§€ ì§ˆë¬¸ì€</p>
<ol>
<li>ì§€ëŠ¥í˜• ê¸°ê³„ëŠ” ë‹¨ìˆœ ì•”ê¸°ë¥¼ ë„˜ì–´ì„œ ìƒˆë¡œìš´ ìƒí™©ì—ì„œì˜ ì¼ë°˜í™”ë¥¼ í•  ìˆ˜ ìˆì„ ê²ƒìœ¼ë¡œ ê¸°ëŒ€ë˜ëŠ”ë°, ê³¼ê±°ì˜ ê´€ì°°ì—ì„œ ë°œê²¬í•œ íŒ¨í„´ì„ ì–¸ì œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œ?</li>
<li>ê·¸ë¦¬ê³  ì§€ëŠ¥í˜• ê¸°ê³„ëŠ” ìœ ìš©í•œ íŒ¨í„´ì„ ë†“ì¹œ ìƒíƒœëŠ” ì•„ë‹Œì§€ë¥¼ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œ?</li>
</ol>
<p>ì² í•™ìëŠ” ì´ì§ˆë¬¸ì„ ë‹¤ìŒê³¼ ê°™ì´ ë°”ê¿€ ìˆ˜ ìˆë‹¤. â†’ ì–´ì§¸ì„œ í™˜ê²½ì€ ë°˜ë“œì‹œ ê·¸ ê·œì¹™ì„±ì„ íŒŒì•…í•  ìˆ˜ ìˆê³ , ë‚´ì¼ë„ ê·¸ ê·œì¹™ì„±ì´ ì¡´ì¬í•  ê²ƒì´ë¼ê³  ë¯¿ì„ ìˆ˜ ìˆì„ ë§Œí¼ ë‹¤ìˆœí•˜ê³  ì•ˆì •ì ì´ì—¬ì•¼ë§Œ í• ê¹Œ? ì´ëŸ¬í•œ í™˜ê²½ì—ì„œë§Œ ì—ì´ì „íŠ¸ê°€ ë¯¸ë˜ë¥¼ ì˜ˆìƒí•  ìˆ˜ ìˆê³  ë”°ë¼ì„œ í•©ë¦¬ì ìœ¼ë¡œ í–‰ë™í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>
<p>ê³¼ê±°ì˜ ê´€ì°°ì„ ì§€ì‹ê³¼ ì˜ˆì¸¡ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆëŠ” ê¸°ê³„ë¥¼ êµ¬ì¶•í•˜ëŠ” ê³¼í•™ì¸ ë¨¸ì‹ ëŸ¬ë‹ì€ ìˆ˜ ì„¸ê¸° ì „ ê³¼í•™ì² í•™ìë“¤ì´ ì œê¸°í–ˆë˜ ê²ƒê³¼ ë™ì¼í•œ ì§ˆë¬¸ì— ë§ë‹¥ëœ¨ë¦°ë‹¤.</p>
<ol>
<li>ì¸ê°„ì´ ë§Œë“  ê¸°ê³„ê°€ ìƒì„±í•´ë‚´ëŠ” ì§€ì‹ì„ ì¸ê°„ì´ ì–´ë–»ê²Œ ì‹ ë¢°í•  ìˆ˜ ìˆì„ê¹Œ?</li>
<li>ì¸ê°„ìœ¼ë¡œì„œ ìš°ë¦¬ëŠ” ê·¸ ê¸°ê³„ë¥¼ ì´í•´í•  ìˆ˜ ìˆìœ¼ë¦¬ë¼ ì˜ˆìƒí•´ì•¼ í• ê¹Œ?</li>
<li>ì–¸ì  ê°€ëŠ” ì¸ê°„ì´ êµ°ì†Œì˜ ì…ì¥ì´ ë˜ì–´, ë¹„ë‘˜ê¸°ì—ê²ŒëŠ” ì™„ë²½í•˜ê²Œ ëª…ë°±í•œ ê²ƒë“¤ì„ ì´í•´í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì— ë¶€ë‹¥ì¹  ìˆ˜ë„ ìˆì„ê¹Œ?</li>
</ol>
<p>ë¨¸ì‹ ëŸ¬ë‹ì€ ë°ì´í„°ì—ì„œ íŒ¨í„´ì„ í™•ì¸í•˜ëŠ” ê¸°ìˆ˜ë¦¬ë©°, ë¯¿ì„ë§Œí•œ ì˜ˆì¸¡ì„ í•˜ê¸° ìœ„í•´ ìš°ì—°ì— ì†ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ë©´ì„œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê´€ê³„ì„±ì„ ì¶”ì¶œí•œë‹¤. ë˜í•œ ë‹¤ë¥¸ í•œê³„ëŠ” ê¸°ê³„ê°€ ì°¾ì•„ë‚¸ íŒ¨í„´ì„ ì¸ê°„ì´ í•´ì„í•˜ì§€ ëª»í•  ìˆ˜ ë„ ìˆë‹¤ëŠ” ì ì´ë‹¤.</p>
<h3>ì§€ì‹ì˜ í•œê³„</h3>
<p>ì‚¬ëŒì´ë‚˜ ê¸°ê³„ê°€ ì¼ë ¨ì˜ ê´€ì°°ì—ì„œ ì§ˆì„œë¥¼ ì°¾ê³ ì í•  ë•ŒëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì§ˆë¬¸ì„ ë˜ì§ˆ ìˆ˜ ìˆë‹¤.</p>
<ol>
<li>ëª¨ë“  ë°ì´í„° ì„¸íŠ¸ì—ì„œ ì–´ë–¤ íŒ¨í„´ì„ í™•ì¸í•˜ëŠ” ì¼ë°˜ì ì´ ë°©ë²•ì´ ìˆëŠ”ê°€?</li>
<li>ë°ì´í„°ì—ì„œ ë°œê²¬í•œ ê´€ê³„ì„±ì´ ìš°ì—°ì˜ ê²°ê³¼ê°€ ì•„ë‹ˆë¼ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”ê°€?</li>
<li>ê¸°ê³„ê°€ ë°œê²¬í•œ ê´€ê³„ì„±ì„ ë“¤ì—¬ë‹¤ë´„ìœ¼ë¡œì¨ ë¬´ì—‡ì„ ì•Œì•„ë‚¼ ìˆ˜ ìˆëŠ”ê°€?</li>
</ol>
<h4>ê³µì§œ ì ì‹¬ì€ ì—†ë‹¤.</h4>
<p>ë§ì€ ì•Œê³ ë¦¬ì¦˜ì€ ì…ë ¥ê°’ì´ ë¬´ì—‡ì´ë“ ê°„ì— ì˜ë„í•œ í•´ë‹µì„ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ë˜ì–´ìˆë‹¤. í•˜ë‚˜ì˜ ë²”ìš© ì•Œê³ ë¦¬ì¦˜ì´ ë°ì´í„°ì˜ ëª¨ë“  íŒ¨í„´ì„ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ëŠ” ê¸°ëŒ€ë¥¼ í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, ì¼ë°˜ì ì¸ ìƒì‹ìœ¼ë¡œ ì´ëŸ° ê²ƒì€ ì¡´ì¬í•  ìˆ˜ ì—†ë‹¤. ë°ì´í„° íŒ¨í„´ì„ í•™ìŠµí•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë¼ë©´ í•­ìƒ ê·¸ íŒ¨í„´ì—ì„œ ë²—ì–´ë‚˜ëŠ” ë“¯í•œ ë¬´ì‘ìœ„ ë°ì´í„°ë¥¼ ë§Œë‚˜ê¸° ë§ˆë ¨ì¸ë°, ê·¸ ë°ì´í„°ëŠ” ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ í•™ìŠµí•  ìˆ˜ ìˆë‹¤.'</p>
<h4>ìš°ì—°ì˜ ì¼ì¹˜</h4>
<p>ë°ì´í„° ì„¸íŠ¸ì—ì„œ ê´€ê³„ì„±ì„ ë°œê²¬í–ˆë‹¤ë©´ ë™ì¼í•œ ì¶œì²˜ì˜ ë‹¤ë¥¸ ë°ì´í„° ì„¸íŠ¸ì—ë„ ê·¸ëŸ¬í•œ ê´€ê³„ì„±ì´ ìˆìŒì„ ì‹ ë¢°í•  ìˆ˜ ì‡ëŠ”ì§€ í™•ì¸í•  í•„ìš”ê°€ ìˆë‹¤. ìš°ì—°ì  ê²°ê³¼ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” íŒ¨í„´ì€ 'ìœ ì˜ë¯¸í•˜ì§€ ì•Šì€' ê²ƒìœ¼ë¡œ ê°„ì£¼ì™¸ì–´ì•¼ í•˜ëŠ”ë°, í†µê³„í•™, ë¨¸ì‹ ëŸ¬ë‹, ê³¼í•™ì  ë°©ë²• ëª¨ë‘ ì´ëŸ¬í•œ ìœ„í—˜ì„ ì—°êµ¬í•˜ê³  ë°©ì§€í•  ì—„ê²©í•œ ë°©ì‹ì„ ê³ ì•ˆí•´ëƒˆë‹¤. ìµœê·¼ì˜ ì§€ëŠ¥í˜• ê¸°ê³„ë¥¼ í›ˆë ¨í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ì—ëŠ” ë‚´ì¥ë˜ì–´ìˆëŠ” ì´ëŸ° ì ì€, ì¸ê°„ ì‘ì—…ìê°€ ì›ì¹™ì„ ì´í•´í•˜ì§€ ëª»í•œ ê²½ìš° ë°ì´í„°ì—ì„œ ì˜ë¯¸ ì—†ëŠ” ê´€ê³„ í˜•ì„±ì˜ í™˜ìƒì„ ë‚´í¬í•œ ê¸°ê³„ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆê³ , ì´ê²ƒì€ ìš°ë¦¬ê°€ íŒë…í•  ìˆ˜ ì—†ëŠ” ê±°ëŒ€í•œ ëª¨ë¸ì´ ìƒì„±ë˜ëŠ” ê²½ìš° í° ìœ„í˜‘ì´ ë  ìˆ˜ ìˆë‹¤.</p>
<h4>ì™¸ê³„ êµ¬ì¡°</h4>
<p>ì„¸ìƒì„ ë‚˜ëˆ„ê³  ê¸°ìˆ í•˜ëŠ” 'ê°ê´€ì ì¸' ë°©ë²•ì€ ì—†ë‹¤. ë³´ë¥´í—¤ìŠ¤ëŠ” ì—ì„¸ì´ì—ì„œ 'ì„ì˜ì ì´ì§€ ì•Šì€ ìš°ì£¼ì˜ ë¶„ë¥˜ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤'ë¼ê³  ê°•ì¡°í•œë‹¤. ë˜í•œ ë‘ ì¸ê³µì§€ëŠ¥ ì—ì´ì „íŠ¸ê°€ ë™ì¼í•œ ì´ë¡ ì  ì¶”ìƒí™”ì— ë„ë‹¬í•˜ë¦¬ë¼ ê¸°ëŒ€í•  ê·¼ê±°ë„ ì—†ê³ , ì¸ê°„ì˜ ì–¸ì–´ë¡œ ê·¸ ì´ìœ ë¥¼ ì´í•´í•˜ê¸°ë€ ë¶ˆê°€ëŠ¥í•  ìˆ˜ë„ ìˆë‹¤.</p>
<h3>íŒ¨í„´ê³¼ ì¸ì§€ í¸í–¥</h3>
<p>í—ˆìœ„ íŒ¨í„´ì´ ë°œê²¬ë˜ëŠ” ì‚¬ë¡€ë¥¼ ì²˜ë¦¬í•˜ê¸° ì–´ë ¤ìš´ ë˜ ë‹¤ë¥¸ ì´ìœ ëŠ” ì¸ê°„ì´ ë³¸ëŠ¥ì ìœ¼ë¡œ íŒ¨í„´ì„ ì°¾ìœ¼ë ¤ëŠ” ê²½í–¥ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ë¬´ì‘ìœ„ ì…ë ¥ì— ëŒ€í•´ì„œë„ í•´ì„í•˜ë ¤ê³  í•˜ëŠ” ì¸ê°„ì˜ ê²½í–¥ì„ ê°€ë¦¬ì¼œ íŒŒë ˆì´ëŒë¦¬ì•„(pareidolia)ë¼ê³  í•˜ëŠ”ë°, ë°”ìœ„, ë‹¬, í† ìŠ¤íŠ¸ ë“±ì—ì„œ ì‚¬ëŒì˜ ì–¼êµ´ì„ ë³´ê¸°ë„ í•˜ëŠ” í˜„ìƒì´ë‹¤. ê´€ë ¨ì„±ì´ ì—†ëŠ” ëŒ€ìƒë“¤ ì‚¬ì´ì—ì„œ ì˜ë¯¸ ìˆëŠ” ì—°ê²°ì„±ì„ ì¸ì‹í•˜ëŠ” ì´ëŸ¬í•œ ê²½í–¥ì„ ë” ì¶”ìƒì ìœ¼ë¡œ ë¶€ë¥´ëŠ” ìƒíƒœë¥¼ ì•„í¬í˜ë‹ˆì•„(apophenia)ë¼ê³  í•œë‹¤. ì•„í¬í˜ë‹ˆì•„ëŠ” ì™„ì „íˆ ë…ë¦½ì ì´ ã„´ì‚¬ê±´ ì‚¬ì´ì—ì„œë„ ì¸ê³¼ ê´€ê³„ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ë‹¤.</p>
<h3>ê¸°ê³„ê°€ í• ìˆ˜ ìˆëŠ” ê²ƒ</h3>
<p>ë¨¸ì‹ ëŸ¬ë‹ ì—°êµ¬ìë“¤ì€ ë°ì´í„° ë’¤ì— ìˆ¨ê²¨ì§„ ë©”ì»¤ë‹ˆì¦˜ì„ 'ì‹ë³„'í•˜ê² ë‹¤ëŠ” ì•¼ì‹¬ì„ ìƒë‹¹ ë¶€ë¶„ í¬ê¸°í•˜ëŠ” ëŒ€ì‹ , ìœ ìš©í•œ ì˜ˆì¸¡ì´ë¼ëŠ” ë” ì‰¬ìš´ ëª©í‘œë¡œ ëŒì•„ì„°ë‹¤. ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ê·¸ë“¤ì€ í˜„ëŒ€ ì² í•™ì— í•œ ê±¸ìŒ ë” ê°€ê¹Œì´ ë‹¤ê°€ê°”ì§€ë§Œ, ë™ì‹œì— ì¸ê°„ì€ ì¸ê°„ì´ ë§Œë“  ê¸°ê³„ì™€ ì—°ê´€ì„±ì„ ë§ºì„ ê°€ëŠ¥ì„±ì—ì„œ í•œ ê±¸ìŒ ë” ë©€ì–´ì¡Œë‹¤. ì¸ê°„ì€ ì´ë¯¸ ìì‹ ë“¤ì´ ì´í•´í•  ìˆ˜ ì—†ëŠ” íŒ¨í„´ì„ ê¸°ê³„ê°€ ë°œê²¬í•´ë‚´ê¸°ë¥¼ ê¸°ëŒ€í•˜ê³  ìˆìœ¼ë©°, íŠ¹ì • ì˜ì—­ì—ì„œëŠ” ìš°ë¦¬ë³´ë‹¤ ë” ë‚˜ì€ ì˜ˆì¸¡ì„ í•  ê²ƒì´ë¼ ê¸°ëŒ€í•´ì•¼ í•œë‹¤. ì´ê²ƒì´ ì˜¤ëŠ˜ë‚ ì˜ í˜„ì‹¤ì´ë‹¤.</p>
<p>ì˜¤í”ˆAIì™€ ê·¸ ì´ì „ì˜ êµ¬ê¸€ì˜ ëŒë‹¤ê°™ì€ ê²½ìš° ìˆ˜ë§ì€ í…ìŠ¤íŠ¸ë¡œ í›ˆë ¨ë˜ì—ˆê³  ìƒë‹¹ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ í¬í•¨í•œë‹¤. ì´ëŸ° ëª¨ë¸ì˜ ê·œëª¨ê°€ ìœ ì˜ë¯¸í•œ ê²€í† ê°€ ê°€ëŠ¥í•  ë§Œí¼ ì‘ë‹¤ê³  ê°€ì •í•´ë„, ê·¸ ëª¨ë¸ì˜ ë‚´ë¶€ ì¶”ìƒí™” ë°©ì‹ì´ ì¸ê°„ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ì¼ì¹˜í•˜ë¦¬ë¼ ê¸°ëŒ€í•  ê·¼ê±°ëŠ” ì—†ë‹¤.</p>
<h3>ì¸ê°„ì˜ í”¼ì¡°ë¬¼ ì´í•´í•˜ê¸°</h3>
<p>ëª©í‘œ ì§€í–¥ì ì¸ í–‰ë™ì—ëŠ” ìê¸° í–‰ë™ì˜ ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•˜ëŠ” ëŠ¥ë ¥ì´ í•„ìš”í•˜ë©°, ì ì‘ ë˜ëŠ” í•™ìŠµì€ ì´ë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆëŠ” ì‹ ë¢°ë„ ë†’ì€ ë°©ë²•ì´ë‹¤. ì´ëŠ” ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸ë¥¼ ë§Œë“œëŠ” í†µìƒì ì¸ ë°©ë²•ì´ê¸°ë„ í•˜ë‹¤. ì—ì´ì „íŠ¸ë¥¼ ë°©ëŒ€í•œ ì–‘ì˜ ë°ì´í„°ë¡œ í›ˆë ¨í•˜ê³  ìœ ìš©í•œ íŒ¨í„´ì„ ê°ì§€í•˜ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤. ì´ëŸ° ì—ì´ì „íŠ¸ê°€ í•­ìƒ ì œëŒ€ë¡œ ì‘ë™í•˜ ê²ƒì´ë¼ê³  ë¯¿ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë§Œë“¤ ë•Œ ì•”ë¬µì ìœ¼ë¡œ ë‚´ë¦¬ëŠ” ê°€ì •ì˜ ë³¸ì§ˆì— ë”°ë¼ ì¢Œìš°í•˜ê²Œ ëœë‹¤.</p>
<p>ì¸ê³µì§€ëŠ¥ ì‚°ì—…ì—ëŠ” ë‹¤í–‰ìŠ¤ëŸ¬ìš´ ì¼ì´ì§€ë§Œ, ì¸ê°„ì˜ í–‰ë™ì—ëŠ” ë†€ë¼ìš¸ ë§Œí¼ ì§ˆì„œê°€ ìˆëŠ” ê²ƒì²˜ëŸ¼ ë³´ì¸ë‹¤.</p>
<p>ìµœê·¼ì˜ ì¸ê³µì§€ëŠ¥ ëª¨ë¸ì€ ìœ ìš©í•œ í–‰ë™ì„ ë§Œë“¤ì–´ ë‚¼ ìˆ˜ ìˆì§€ë§Œ, ì‚¬ëŒì€ ì´ ëª¨ë¸ì—ì„œ ì‹¤ì œë¡œ ì–´ë– í•œ í˜„ìƒì´ ë°œìƒí•˜ê³  ìˆëŠ”ì§€ì— ê´€í•´ì„œëŠ” ì „í˜€ ì•Œì§€ ëª»í•œë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ì—ê²ŒëŠ” ìš°ë¦¬ì˜ í”¼ì¡°ë¬¼ì¸ ê¸°ê³„ì˜ ê²°ì •ì„ í•´ì„í•  ë°©ë²•ì´ ì—†ì„ ìˆ˜ë„ ìˆëŠ”ë°, ë§Œì•½ ìˆì—ˆë‹¤ë©´ ê¸°ê³„ê°€ ê¸¸ì„ ìƒì§€ëŠ” ì•Šì•˜ëŠ”ì§€ í™•ì¸í•  ë•Œ í¸ë¦¬í–ˆì„ ê²ƒì´ë‹¤.</p>
<p>ì¸ê°„ì˜ ê°€ì¹˜ì™€ ê·œë²”ì„ ê¸°ê³„ì— ê°€ë¥´ì¹  ë°©ë²•ì„ ìƒê°í•  ë•ŒëŠ” ì´ ì ì„ ìŠì§€ ë§ì•„ì•¼ í•œë‹¤. ìš°ë¦¬ê°€ í•˜ë ¤ëŠ” ì¼ì€ ë¯¼ë‹¬íŒ½ì´ë‚˜ ì˜ë¦¬í•œ ë¹„ë‘˜ê¸°ì—ê²Œ ì„¤ëª…í•˜ë ¤ëŠ” ì‹œë„ë‚˜ ë§ˆì°¬ê°€ì§€ì¼ ìˆ˜ ìˆë‹¤. ì² í•™ìì¸ ë£¨íŠ¸ë¹„íˆ ë¹„íŠ¸ê²ìŠˆíƒ€ì¸ì€ ë‹¤ìŒê³¼ ê°™ì´ ë§í•œ ë°” ìˆë‹¤.</p>
<blockquote>
<p>ì‚¬ìê°€ ë§ì„ í•  ìˆ˜ ìˆë‹¤ê³  í•´ë„, ìš°ë¦¬ëŠ” ê·¸ ë§ì„ ì´í•´í•˜ì§€ ëª»í•  ê²ƒì´ë‹¤.</p>
</blockquote>
<h2>4ì¥. ëŸ¬ë¸Œë ˆì´ìŠ¤ëŠ” í‹€ë ¸ë‹¤.</h2>
<blockquote>
<p>í˜„ ê¸°ê³„ëŠ” ê²½í—˜ì„ í†µí•´ ììœ¨ì ìœ¼ë¡œ í•™ìŠµí•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ê°–ì¶˜ ë•ë¶„ì—, ì¸ê°„ì´ í•  ìˆ˜ ì—†ê±°ë‚˜ ì‹¬ì§€ì–´ ì´í•´í•  ìˆ˜ì¡°ì°¨ ì—†ëŠ” ì¼ë“¤ì„ í•´ë‚¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ê¸°ê³„ëŠ” ì´ë¡ ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì˜ì—­ì—ì„œ ì‘ë™í•˜ê¸°ì— ì í•©í•˜ë©°, ë°”ë¡œ ì´ëŸ¬í•œ ì ì´ ì „í†µì ì¸ ê¸°ì¡´ ë°©ì‹ì— ë¹„í•´ ê°•ì ì„ ê°€ì§€ëŠ” ë¶€ë¶„ì´ë‹¤.</p>
</blockquote>
<h3>ë°±ì‘ë¶€ì¸ì™€ ê¸°ê³„ ì´ì•¼ê¸°: ì£¼ì„ Gì—ì„œ 37ë²ˆì§¸ ìˆ˜ê¹Œì§€</h3>
<p>1843ë…„ ëŸ°ë˜, ì—ì´ë‹¤ ëŸ¬ë¸Œë ˆì´ìŠ¤ ì­ì‘ë¶€ì¸ì€ ë£¨ì´ì§€ ë©”ë‚˜ë¸Œë ˆì•„ê°€ ì‘ì„±í•œ ê¸°ìˆ  ë…¼ë¬¸(ì°°ìŠ¤ ë°°ë¹„ì§€ì˜ ì œì•ˆì— ê¸°ì´ˆí•œ)ì„ í”„ë‘ìŠ¤ì–´ì—ì„œ ì˜ì–´ë¡œ ë²ˆì—­í•˜ì˜€ê³ , ìì‹ ì˜ ì•„ì´ë””ì–´ë„ ë§ë¶™ì´ê¸°ë¡œ í–ˆë‹¤.</p>
<ul>
<li>ì°°ìŠ¤ ë°°ë¹„ì§€ëŠ” ë¹…í† ë¦¬ì•„ ì‹œëŒ€ì˜ ì „í˜•ì ì¸ ë°œëª…ê°€ì´ì ë‹¤ì¬ë‹¤ëŠ¥í•œ ì‚¬ëŒì´ì˜€ë‹¤. ìš°ë¦¬ì—ê²ŒëŠ” ê¸°ê³„ì‹ ê³„ì‚°ê¸°ë¥¼ ë°œëª…í•œ ì¸ë¬¼ë¡œ ì•Œë ¤ì ¸ ìˆê³ , ë²”ìš© ì»´í“¨í„°ì¸ 'í•´ì„ ê¸°ê´€(analytical engine)ì„ ë°œëª…í•œ ì‚¬ëŒì´ê¸°ë„ í–ˆë‹¤.</li>
<li>"í•´ì„ ê¸°ê´€"ì´ ëŸ¬ë¸Œë ˆì´ìŠ¤ì˜ ë…¼ë¬¸ ì£¼ì œì˜€ë‹¤. ëŸ¬ë¸Œë ˆì´ìŠ¤ëŠ” ì—°ì‚° ê¸°ê³„ì˜ ë³¸ì§ˆê³¼ ì ì¬ë ¥ì— ëŒ€í•´ ì±…ì— ë§ë¶™ì¸ ì£¼ì„ìœ¼ë¡œ ì¸í•´, ì´ ê¸°ê³„ê°€ ì˜¨ì „íˆ êµ¬í˜„ë˜ì§€ ì•Šì•˜ì§€ë§Œ ê·¸ë…€ëŠ” ì˜¤ëŠ˜ë‚  ìµœì´ˆì˜ ì»´í“¨í„° í”„ë¡œê·¸ë˜ë¨¸ë¡œ ê¸°ì–µëœë‹¤.</li>
<li>ì£¼ì„ Gì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì–¸ê¸‰í•œë‹¤.
<ul>
<li>"í•´ì„ ê¸°ê´€ì€ ì–´ë–¤ ê²ƒì„ ë…ì°½ì ìœ¼ë¡œ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆë‹¤ê³  ìì²˜í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¤ë§Œ ìš°ë¦¬ê°€ ê·¸ë ‡ê²Œ í•˜ë„ë¡ ëª…ë ¹í•  ë°©ë²•ì„ ì•„ëŠ” ê·¸ ì–´ë–¤ ì¼ì´ë“  ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤."</li>
<li>ì´ ì£¼ì„ìœ¼ë¡œ ì¸í•´ ì»´í“¨í„°ê°€ ë°œëª…ëœ ì´í›„ ìˆ˜ì‹­ë…„ë™ì•ˆ, ì»´í“¨í„°ëŠ” ì¸ê°„ì´ í”„ë¡œê·¸ë˜ë°í•œ ì‘ì—…ë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤ëŠ” ì£¼ì¥ì´ ë°˜ë³µë˜ë©´ì„œ ì ì¬ì ì¸ ìœ„í—˜ì— ëŒ€í•´ íšŒí”¼í–ˆë‹¤.</li>
<li>í•˜ì§€ë§Œ ì´ ì£¼ì¥ì´ í‹€ë ¸ë‹¤(ì±…ì—ì„œ ì£¼ì¥í•œë‹¤.)</li>
</ul>
</li>
</ul>
<p>2016ë…„ ì„œìš¸, êµ¬ê¸€ì˜ ìíšŒì‚¬ì¸ ë”¥ë§ˆì¸ë“œëŠ” ì•ŒíŒŒê³ ë¼ëŠ” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë°”ë‘‘ì— ë„ì „í•˜ì˜€ë‹¤.</p>
<ul>
<li>ë°”ë‘‘ì€ ì²´ìŠ¤ê²Œì„ì²˜ëŸ¼ ë¬´í•œ ëŒ€ì…ë²•ì„ ì“°ê¸°ì—ëŠ” 'ê²½ìš°ì˜ ìˆ˜'ê°€ ë„ˆë¬´ ë§ì•˜ë‹¤. ë”°ë¼ì„œ 'í‰ê°€ ê¸°ëŠ¥'ìœ¼ë¡œ ì²˜ë¦¬í•˜ì˜€ë‹¤.</li>
<li>ìˆ˜ë°±ë§Œ ê±´ì˜ ëŒ€êµ­ì„ ìŠ¤ìŠ¤ë¡œ ì¹˜ë¥´ë©´ì„œ ê·¸ë•Œë§ˆë‹¤ í‰ê°€ ê¸°ëŠ¥ì„ ì¡°ì •í•˜ì—¬ ê²½í—˜ì„ í†µí•´ í•™ìŠµí–ˆë‹¤.</li>
<li>2ë²ˆì§¸ ëŒ€êµ­ì˜ 37ìˆ˜ëŠ” ì•ŒíŒŒê³ ì˜ ê²°ì •ì´ì˜€ì§€ë§Œ, ì•„ë¬´ë„ ê·¸ ëª©ì ì´ ë¬´ì—‡ì¸ì§€ ì•Œ ìˆ˜ ì—†ì—ˆê³ , ê²°êµ­ ëª©ì ì´ ìˆì—ˆë˜ ìˆ˜ë¡œ ë°í˜€ì¡Œë‹¤.(ì•„ë¬´ë„ í•´ì„í•˜ì§€ ëª»í•˜ëŠ” ìˆ˜ë¥¼ ë‘ì—ˆë‹¤)</li>
<li>ì•ŒíŒŒê³ ì˜ ì§€ì‹ì€ ì œì‘ìì—ì„œ ì˜¨ê²ƒì´ ì•„ë‹ˆë¼ 3ì²œë§Œë²ˆì˜ ê¸°ë¡ëœ ëŒ€êµ­ì„ ê´€ì°°í•˜ê³  5ì²œë§Œ ë²ˆ ì´ìƒì˜ ìì²´ ëŒ€êµ­ì„ ë‘ ìœ¼ë¡œì¨ ì–»ì€ ê²°ê³¼ë‹¤.</li>
<li>ëŸ¬ë¸Œë ˆì´ìŠ¤ì˜ 'ìš°ë¦¬ê°€ ê·¸ë ‡ê²Œ í•˜ë„ë¡ ëª…ë ¹í•  ë°©ë²•ì„ ì•„ëŠ”' ê²ƒì´ ì•„ë‹Œ ì¼ë„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.</li>
</ul>
<h3>í•™ìŠµí•˜ëŠ” ê¸°ê³„</h3>
<p>'í•™ìŠµ'ì€ ìƒˆë¡œìš´ ìƒí™©ì—ì„œë„ ì¼ë°˜í™”í•  ìˆ˜ ìˆë„ë¡ ì‚¬ë¡€ì—ì„œ ì¶”ë¡ í•˜ëŠ” ëŠ¥ë ¥ì´ë‹¤. 'ë¨¸ì‹ ëŸ¬ë‹'ì´ë¼ê³  ì´ì•¼ê¸°í•˜ëŠ” ê²ƒì€ ì´ë¯¸ ê¸°ê³„ê°€ ì¸ê°„ë³´ë‹¤ ë›°ì–´ë‚œ ì˜ì—­ì¸ ë‹¨ìˆœ ë°ì´í„° ì•”ê¸° ê°™ì€ ì‘ì—…ì„ ê³ ë ¤í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤. ëª…ì‹œì ì¸ í”„ë¡œê·¸ë˜ë° ì—†ì´ë„ ìƒˆë¡œìš´ ê¸°ìˆ ì„ ìŠµë“í•˜ê±°ë‚˜, ê¸°ì¡´ ê¸°ìˆ ì„ ê°œì„ í•  ìˆ˜ ìˆëŠ” ìƒí™©ì— ëŒ€í•œ ê²ƒì´ë‹¤.</p>
<ul>
<li>í˜„ì¬ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸ëŠ” ì–´ë–¤ í˜•íƒœë¡œë“  ë¨¸ì‹ ëŸ¬ë‹ì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤.
<ul>
<li>ì²´ìŠ¤ ê²Œì„ì—ì„œ ìŠ¹ë¦¬í•˜ê³ , ìì „ê±°ë¥¼ íƒ€ê³ , ë™ì˜ìƒì„ ì¶”ì²œí•˜ëŠ” ë°©ì‹ì´ë‹¤.</li>
</ul>
</li>
<li>ìš”ë¦¬ì™€ ë¹„ìŠ·í•˜ë‹¤
<ul>
<li>ë ˆì‹œí”¼ëŠ” ì¬ë£Œ ëª©ë¡ê³¼ ì¼ë ¨ì˜ ì¡°ë¦¬ë²•ì„ í¬í•¨í•˜ê³ , ì„¸ë¶€ ì •ë³´(ë¶„ëŸ‰, ì˜¨ë„, ì‹œê°„)ì´ í•„ìš”í•˜ë‹¤.</li>
<li>ì¡°ì •í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ë¥¼ 'ë§¤ê°œë³€ìˆ˜'ë¡œ í•œë‹¤. ì¡°ìœ¨í•˜ëŠ” ì‘ì—…ì„ 'ë§¤ê°œë³€ìˆ˜ íŠœë‹(ì¡°ì •)'ì´ë¼ê³  í‘œí˜„í•œë‹¤.</li>
<li>'ì¡°ì •'ì€ ê¸°ê³„ê°€ í•™ìŠµí•˜ëŠ” í‘œì¤€ì ì¸ ë°©ë²•ì´ê³  í”¼ë“œë°±ì€ ìµœì ì˜ ê°’ì„ ë°œìƒì‹œí‚¤ê¸° ìœ„í•œ ê¸°ì¤€ìœ¼ë¡œ í™œìš©ëœë‹¤.</li>
</ul>
</li>
<li>ì—ì´ì „íŠ¸ì˜ í–‰ë™ì„ ìê·¹-ë°˜ì‘ ìŒìœ¼ë¡œ ì „ë¶€ ì—´ê±°í•˜ê¸° ë³´ë‹¤ëŠ”, ì¡°ì • ê°€ëŠ¥í•œ ë§¤ê°œë³€ìˆ˜ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” ê³„ì‚°ì˜ í˜•íƒœë¡œ ì´ëŸ° ëŒ€ì‘ ìŒì„ ì•”ë¬µì ìœ¼ë¡œ ì¶œë ¥í•˜ë©´, ê·¸ ê²°ê³¼ëŠ” ê¸°ê³„ ìŠ¤ìŠ¤ë¡œì˜ í–‰ë™ì´ ë˜ë©°, ì œì‘ìë„ ìƒìƒí•˜ì§€ ëª»í–ˆë˜ ë…ì°½ì ì¸ í–‰ë™ì„ êµ¬í˜„í•  ê°€ëŠ¥ì„±ë„ ìˆë‹¤.</li>
</ul>
<p>ëŸ¬ë¸Œë ˆì´ìŠ¤ì˜ ì£¼ì„ GëŠ” í‹€ë ¸ëŠ”ê°€? ì•„ë‹ˆë©´ ê·¸ì € 'ìš°ë¦¬ê°€ ê·¸ë ‡ê²Œ í•˜ë„ë¡ ëª…ë ¹í•  ë°©ë²•ì„ ì•„ëŠ”ì¼'ì„ í•˜ëŠ” ê²ƒì— ë¶ˆê³¼í• ê¹Œ? ì² í•™ìë“¤ì´ ê³ ë¯¼í•´ë³¼ ë§Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ìˆ˜ë°°ë§Œ ê°œì˜ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ìˆê³ , ê·¸ ê²°ê³¼ í–‰ë™ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ì¸ê°„ì´ ì˜ˆì¸¡í•  ìˆ˜ ì—†ë‹¤ë©´, ê¸°ê³„ëŠ” ì¸ê°„ì—ê²Œ ìƒì†Œí•œ ë¬´ì–¸ê°€ë¥¼ í•™ìŠµí•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤.</p>
<h3>í•™ìŠµí•˜ëŠ” ê¸°ê³„ì— ê´€í•œ ì•„ì´ë””ì–´</h3>
<p>ì•ŒíŒŒê³ ê°€ ë“±ì¥í•˜ê¸° ì´ì „ì—, ì•„ì„œ ìƒˆë®¤ì–¼ì€ ì²´ì»¤ ì¸ê³µì§€ëŠ¥ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì—ˆë‹¤. ì´ ì•Œê³ ë¦¬ì¦˜ì˜ ê¸°ìˆ ì  ì„¸ë¶€ ì‚¬í•­ì€ "ì²´ì»¤ ê²Œì„ì„ ì´ìš©í•œ ë¨¸ì‹ ëŸ¬ë‹ì— ëŒ€í•œ ì—°êµ¬"ë¼ëŠ” ë…¼ë¬¸ìœ¼ë¡œ ê³µê°œë˜ì—ˆë‹¤.</p>
<ul>
<li>ë…¼ë¬¸ì—ì„œ ìƒˆë®¤ì–¼ì€ ìš°ë¦¬ê°€ ë¬´ì—‡ì„ ì›í•˜ëŠ”ì§€ ì •í™•íˆ ì•Œê³  ìˆì§€ë§Œ ì´ë¥¼ êµ¬í•˜ëŠ” ìˆ˜í•™ì  ê·œì¹™ì´ ì—†ìœ¼ë¯€ë¡œ, ê¸°ê³„ë¡œ êµ¬í˜„í•˜ë ¤ë©´ ëŒ€ëŒ€ì ì¸ ìˆ˜ë™ ì¡°ì •ì´ í•„ìš”í•œ ì¢…ë¥˜ì˜ ì»´í“¨í„° í”„ë¡œê·¸ë¨ë“¤ì´ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ê´€ì°°í–ˆë‹¤.</li>
<li>í•´ê²°ì±…ì„ ìë™í™”í•˜ëŠ” ë¬¸ì œì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì´ ê¸°ìˆ í–ˆë‹¤.
<ul>
<li>"ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì„ ì§€ì •í•  ë•ŒëŠ” ì„¸ë°€í•˜ê³  ì •í™•í•œ ì„¸ë¶€ ì‚¬í•­ê¹Œì§€ ëª…ì‹œí•´ì•¼ í•˜ëŠ”ë°, ì´ëŠ” ì‹œê°„ê³¼ ë¹„ìš©ì´ ë§ì´ ë˜ëŠ” ì ˆì°¨ë‹¤ ì»´í“¨í„°ê°€ ê²½í—˜ì„ í†µí•´ í•™ìŠµí•˜ë„ë¡ í”„ë¡œê·¸ë˜ë° í•˜ë©´ ê²°êµ­ì—ëŠ” ì´ëŸ¬í•œ ì„¸ë¶€ì‚¬í•­ì„ í”„ë¡œê·¸ë˜ë° í•˜ëŠ” ë…¸ë ¥ì— ëŒ€ë¶€ë¶„ì„ ì ˆì•½í•  ìˆ˜ ìˆë‹¤"</li>
</ul>
</li>
<li>ê¸°ê³„ëŠ” ì£¼ì–´ì§„ ê²Œì„ ì„¤ì •ì—ì„œ ì–´ë–¤ ìˆ˜ì˜ ì‹¤í˜„ ê°€ëŠ¥í•œ ê²°ê³¼ê°€ ë¬´ì—‡ì¸ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì•ì„ ë‚´ë‹¤ ë´ì•¼ í•˜ì§€ë§Œ ê²°êµ­ ì–´ë–¤ "ë¯¸ë˜"ë¥¼ ì„ í˜¸ í•´ì•¼ í• ì§€ ê²°ì •í•  ë°©ë²•ì´ í•„ìš”í•˜ë‹¤.ï¿¼</li>
<li>ìƒˆë®¤ì–¼ì˜ ì£¼ìš” ê³µí—Œì€ ë§¤ê°œ ë³€ìˆ˜ë“¤ì„ ì¡°ì •í•˜ì—¬ ìŠ¹ë¦¬ í™•ë¥ ì„ ë†’ì´ëŠ” ë°©ì‹ì„ ë³´ì—¬ì£¼ì—ˆë‹¤.</li>
</ul>
<h3>ì´ˆì¸ê°„: ì•ŒíŒŒê³ ì™€ ê·¸ ì œêµ­</h3>
<p>ìƒˆë®¤ì–¼ì˜ ì‹¤í—˜ ì´í›„, í•˜ë“œì›¨ì–´ì˜ ê¸°í•˜ê¸‰ìˆ˜ì  ë°œì „ì™€ ê³¼ëŒ€ ê´‘ê³  ì£¼ê¸°ì™€ ê·¹ì ì¸ ë°©í–¥ ì „í™˜ì„ ê±°ì¹˜ë©´ì„œ ìƒˆë¡œìš´ ì¸ê³µì§€ëŠ¥ ë°©ë²•ë¡ ì´ ë°œê²¬ë˜ê³ , ê°œë°œë˜ê³ , íê¸°ë˜ì—ˆìœ¼ë©°, ì¬ë°œê²¬ë˜ì—ˆë‹¤.</p>
<h3>ì°½ì¡°ìë¥¼ ëŠ¥ê°€í•˜ëŠ” í”¼ì¡°ë¬¼</h3>
<p>í”„ë‘ìŠ¤ ì² í•™ì í´ë¡œë“œ ë ˆë¹„ìŠ¤íŠ¸ë¡œìŠ¤ëŠ” "ê³¼í•™ì—ì„œ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ì˜¬ë°”ë¥¸ ì§ˆë¬¸ì„ ë˜ì§€ëŠ” ê²ƒì´ì§€ ì •ë‹µì„ ì œì‹œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤."ë¼ê³  í–ˆë‹¤.</p>
<h2>5. ì˜ë„ë¥¼ ë²—ì–´ë‚œ í–‰ë™</h2>
<blockquote>
<p>ì•¼ìƒì˜ ë°ì´í„°ë¡œ í›ˆë ¨í•œ ì¸ê³µì§€ëŠ¥ ì—ì´ì „íŠ¸ê°€ ë¬¸ì œ ì—†ì´ ê¸°ëŒ€í•œ ë°” ëŒ€ë¡œ ë™ì‘í•œë‹¤ê³  ë¯¿ì„ ìˆ˜ ìˆì„ê¹Œ? ìš°ë¦¬ê°€ ë§Œë“  ê¸°ê³„ê°€ ìˆ˜í–‰í•˜ë„ë¡ ì§€ì‹œë°›ì€ ì¼ì„ ê·¼ë³¸ì ì¸ ì‚¬íšŒ ê·œë²”ì„ ìœ„ë°˜í•˜ì§€ ì•Šê²Œ í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?</p>
</blockquote>
<h3>ì›ìˆ­ì´ ë°œ</h3>
<blockquote>
<p>'ì›ìˆ­ì´ ë°œ' ì´ì•¼ê¸°ëŠ” ì›ìˆ­ì´ ë°œì— ì†Œì›ì„ ë¹Œë©´ ì´ë£¨ì–´ì§„ë‹¤ëŠ” ë¯¸ì‹ ì—, ëˆ„êµ°ê°€ 2ë°± íŒŒìš´ë“œë¥¼ ì–»ê¸°ë¥¼ ì›í–ˆê³ , ì´í›„ ì•„ë“¤ì˜ ì£½ìŒìœ¼ë¡œ ì¸í•œ ë³´ìƒìœ¼ë¡œ 2ë°± íŒŒìš´ë“œê°€ ìƒê¸´ë‹¤ëŠ” ì´ì•¼ê¸°</p>
</blockquote>
<p>ì‚¬ì´ë²„ë„¤í‹±ìŠ¤ì˜ ì°½ì‹œìì¸ ë…¸ë²„íŠ¸ ìœ„ë„ˆëŠ” 1902ë…„ ìœŒë¦¬ì—„ ìœ„ë§ˆí¬ ì œì´ì½¥ìŠ¤ê°€ ì“´ 'ì›ìˆ­ì´ ë°œ' ì´ì•¼ê¸°ë¥¼ ì¢‹ì•„í–ˆë‹¤. ê·¸ë¦¬ê³  1950ë…„ ì§‘í•„í•œ ì˜ˆì–¸ì  ì €ì„œ 'ì¸ê°„ì˜ ì¸ê°„ì  í™œìš©'ì—ì„œ ì§€ëŠ¥í˜• ê¸°ê³„ê°€ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ìœ„í—˜ì„ ì„¤ëª…í•˜ë ¤ëŠ” ëª©ì ìœ¼ë¡œ ì´ ì´ì•¼ê¸°ë¥¼ ì†Œê°œí•œë‹¤. ì´ ì±…ì—ì„œ 'ì›ìˆ­ì´ ë°œ'ì´ë€ ìê¸° í–‰ë™ìœ¼ë¡œ ì¸í•´ ë°œìƒí•  ìˆ˜ ìˆëŠ” í”¼í•´ì— ë¬´ê´€ì‹¬í•˜ë©°, 'ë¬¸ì ê·¸ëŒ€ë¡œ'ì˜ ë°©ì‹ìœ¼ë¡œ ì£¼ì–´ì§„ ëª©í‘œë‹¬ì„±ì„ ì¶”êµ¬í•˜ëŠ” ì¥ì¹˜ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.</p>
<h3>ê°œë³„ ìœ„í—˜ í‰ê°€ì˜ ì˜ˆ</h3>
<p>ì§€ë‚œ 2000ë…„ë¶€í„° ì¸ê³µì§€ëŠ¥ì´ ë°œì „í•  ìˆ˜ ìˆì—ˆë˜ ì´ìœ ëŠ” ë¨¸ì‹ ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ê³¼ ì¸ê°„ í–‰ë™ì˜ í‘œë³¸ì´ ìˆì—ˆê¸°ì— ê°€ëŠ¥í–ˆë‹¤. ê°œë³„ ìœ„í—˜ í‰ê°€ ì‚°ì—…(ë³´í—˜, ëŒ€ì¶œ, ì±„ìš©, ë“±)ì—ì„œëŠ” ì˜ˆì¸¡í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ì¤‘ìš”í•˜ê²Œ ì—¬ê¸´ë‹¤. í•˜ì§€ë§Œ ê°œë³„ ìœ„í—˜ í‰ê°€ëŠ” 'ì›ìˆ­ì´ ë°œ' ê°™ì€ ìƒí™©ì´ ë²Œì–´ì§ˆ ê°€ëŠ¥ì„±ì´ ê°€ì¥ ë†’ê¸°ë„ í•˜ë‹¤. ì˜ˆì¸¡ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ í•„ìš”í•œ ì‘ì—…ì˜ ì¼ë¶€ì¼ ë¿ì´ë©°, í‘œì¤€í™”í•˜ê¸°ëŠ” ì–´ë µì§€ë§Œ ë²•ê³¼ ì–‘ì‹¬ì— ì˜í•´ ì§€í‚¬ ê²ƒì´ ìš”êµ¬ë˜ëŠ” ìƒë‹¹í•œ ìˆ˜ì¤€ì˜ ì‚¬íšŒì  ê·œë²”ì„ ì¡´ì¤‘í•˜ë©´ì„œ ì‘ì—…í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>
<h3>ê·œì œ ì˜ì—­ê³¼ ë³´í˜¸ë°›ëŠ” íŠ¹ì„±</h3>
<p>ê°œë³„ ìœ„í—˜ í‰ê°€ê°€ ë¯¼ê°í•œ ì˜ì—­ì¸ ì´ìœ ëŠ” ê¸°íšŒì˜ ì ‘ê·¼ì— ëŒ€í•œ ê²°ì •ì„ ë‚´ë¦¬ê³  ëŒ€ìš°ì˜ ê´€ì ì—ì„œ ê·œì œë¥¼ ë°›ê¸° ë•Œë¬¸ì´ë‹¤. ì°¨ë³„ì„ ë§‰ìœ¼ë ¤ëŠ” ëŒ€ë¶€ë¶„ì˜ êµ­ê°€ì˜ ë²•ì— ê¸°ë°˜í–ˆì„ ë•Œ, ë°ì´í„° ê¸°ë°˜ ì¹˜íŠ¸í‚¤ê°€ ë‚´ì„¸ìš°ëŠ” 'ë¬´ì—‡ì„ ì•„ëŠ”ì§€ê°€ ì¤‘ìš”í•˜ì§€, ê·¸ ì´ìœ ë¥¼ ì•„ëŠ” ê±´ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤'ëŠ” ì ìš©ë˜ê¸° ì–´ë µë‹¤. ë¶„ì„ë˜ëŠ” ë°ì´í„°ì˜ ìƒê´€ê´€ê³„ë¥¼ ëª¨ë‘ í•™ìŠµì‹œí‚¤ì§€ ì•ŠëŠ”ê²ƒì€ ê·¸ ì–‘ì„ ê³ ë ¤í•œë‹¤ë©´ ë§¤ìš° ì–´ë ¤ìš´ ì¼ì´ë‹¤.</p>
<h3>ë¯¼ê°í•œ ì •ë³´ ìœ ì¶œ</h3>
<p>SNSì˜ í†µê³„ì ì¸ ë°ì´í„°(ì¢‹ì•„ìš”)ë§Œì„ ê°€ì§€ê³ ë„ ì„±ë³„, ì¸ì¢…, ì¢…êµ, ì •ì¹˜ê´€ ë“±ì„ ë¶„ë¥˜í•  ìˆ˜ ìˆê³ , ì´ëŸ° ë””ì§€í„¸ ì§€ë¬¸ì€ ë¯¼ê°í•œ ì •ë³´ê°€ ì˜ë„ì¹˜ ì•Šê²Œ ìœ ì¶œ ë  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•œë‹¤.</p>
<h3>ì•„ìŠ¬ì•„ìŠ¬í•œ ìˆœê°„, ì˜¤ë°œë ¹ ê²½ë³´, ì‹¤ì œ í”¼í•´</h3>
<p>ì§€ëŠ¥í˜• ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ íƒ€ì¸ì˜ ê³¼ê±° í–‰ë™ì— ê¸°ë°˜í•˜ì—¬, ëŒ€ìƒ ê°œì¸ì˜ ë¯¸ë˜ í–‰ë™ì„ í†µê³„ì ìœ¼ë¡œ ì˜ˆì¸¡í•  ìˆ˜ ìˆëŠ” ê°€ëŠ¥ì„±ì´ ì—´ë ¸ìœ¼ë©°, ì´ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ì˜ì‚¬ ê²°ì •ì— ê´€í•œ ìœ„í—˜ì„±ì„ ì¶”ì •í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.</p>
<ul>
<li>ì•„ë§ˆì¡´ì˜ ì´ë ¥ì„œ ê²€í† ìš© ì†Œí”„íŠ¸ì›¨ì–´ : ì„±ë³„ í¸í–¥</li>
<li>ì¼ë¶€ ë¯¸êµ­ ë²•ì›ì—ì„œ í”¼ê³ ì¸ì´ ìƒìŠµë²”ì´ ë  ê°€ëŠ¥ì„±ì„ í‰ê°€í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ : ì¸ì¢… í¸í–¥</li>
<li>ì•Œê³ ë¦¬ì¦˜ ë²ˆì—­ : íŠ¹ì • ì§ì—…ì˜ ì„±ë³„ í¸í–¥</li>
<li>ë„¤ë¸ë€ë“œ ì„¸ë¬´ì„œ : íŠ¹ì • ì¸ì¢…ì„ ì‚¬ê¸°ê¾¼ìœ¼ë¡œ ë¶„ë¥˜í•˜ì—¬ ìˆ˜ë‹¹ ì‹ ì²­ ê±°ë¶€</li>
</ul>
<h3>í˜„ì‹¤ì—ì„œ ì˜¨ í¸í–¥</h3>
<p>2017ë…„ ìˆ˜í–‰ëœ ë‹¨ì–´ì˜ í‘œí˜„ê³¼ í¸í–¥ì— ëŒ€í•œ ì—°êµ¬ì—ì„œë„, ì‚¬ìš©ë˜ê³  ìˆëŠ” ë‹¨ì–´(ì§ì—… ë“±)ì—ì„œ ì„±ë³„ì— ëŒ€í•œ í¸í–¥ì´ ìˆë‹¤ëŠ” ê²°ê³¼ê°€ ë‚˜ì™”ê³ , ì´ê²ƒì€ í˜„ì‹¤ì—ì„œì˜ ì¼ë°˜ ì¸êµ¬ ë¶„í¬ì˜ ê³ ìš© í†µê³„ì™€ ëŒ€ëµ ìœ ì‚¬í–ˆë‹¤.</p>
<h3>ë‹¤ì‹œ, ì›ìˆ­ì´ ë°œ</h3>
<p>ì—ì´ì „íŠ¸ë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°©ë²•(í¸í–¥ë˜ì§€ ì•Šì„)ì„ ê°œë°œí•´ì•¼ í•œë‹¤. ì‚¬ì´ë²„ë„¤í‹±ìŠ¤ì˜ ì°½ì‹œìì¸ ë…¸ë²„íŠ¸ ìœ„ë„ˆëŠ” 1950ë…„ ì¶œê°„í•œ ì˜ˆì–¸ì  ì €ì„œ "ì¸ê°„ì˜ ì¸ê°„ì  í™œìš©"ì—ì„œ 'ì›ìˆ­ì´ ë°œ'ì´ë¼ëŠ” ê°œë…ì„ í™œìš©í•´, ì£¼ì–´ì§„ ê³¼ì œë¥¼ 'ë¬¸ì ê·¸ëŒ€ë¡œ'ì˜ ë°©ì‹ìœ¼ë¡œ ë‹¬ì„±í•˜ë ¤ í•˜ê³  ì¸ê°„ì´ ìƒê°ì§€ë„ ëª»í•œ(ì˜ë„í•˜ì§€ ì•Šì€) ê¸¸ì„ íƒí•˜ì—¬ ëª…ë ¹ì„ ë”°ë¥´ëŠ” ì°½ì¹˜ë¥¼ í‘œí˜„í–ˆë‹¤.</p>
<blockquote>
<p>í˜„ëŒ€ì¸ì€ ê¸°ê³„ê°€ ë‚´ë¦° ê²°ì •ì˜ ë°°ê²½ì— ìˆ¨ê²¨ì§„ ë™ê¸°ë‚˜ ì›ì¹™ì— ëŒ€í•´ ë³„ë‹¤ë¥¸ ì§ˆë¬¸ì„ ë˜ì§€ì§€ ì•Šê³ ë„ ê·¸ ê²°ì •ì´ ë›°ì–´ë‚˜ë‹¤ëŠ” ì‚¬ì‹¤ì„ ë°›ì•„ë“¤ì¼ ê²ƒì´ë‹¤. ê·¸ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ì¸ê°„ì€ ì¡°ë§Œê°„ ìœŒë¦¬ì—„ ìœ„ë§ˆí¬ ì œì´ì½¥ìŠ¤ê°€ ì“´ "ì›ìˆ­ì´ ë°œ"ì— ë‚˜ì˜¨ ì•„ë²„ì§€ì˜ ì…ì¥ì— ë†“ì—ê²Œ ë  ê²ƒì´ë‹¤. ì´ ì•„ë²„ì§€ëŠ” 2ë°± íŒŒìš´ë“œë¥¼ ì†Œì›ìœ¼ë¡œ ë¹Œì—ˆì§€ë§Œ, ê·¸ ê²°ê³¼ëŠ” ê³µì¥ì—ì„œ ì‚¬ë§í•œ ì•„ë“¤ì— ëŒ€í•œ ìœ„ë¡œê¸ˆìœ¼ë¡œ ì œì‹œë°›ì€ 2ë°± íŒŒìš´ë“œì˜€ë‹¤."</p>
</blockquote>
<h2>6ì¥, ë§ˆì´í¬ë¡œíƒ€ê¸°íŒ…ê³¼ ëŒ€ì¤‘ ì„¤ë“</h2>
<h3>í•¨ë¶€ë¥´í¬ì—ì„œì˜ í•˜ë£¨</h3>
<p>2017ë…„ 3ì›” 5ì¼ í•¨ë¶€ë¥´í¬ì—ì„œ 'ì˜¨ë¼ì¸ ë§ˆì¼€íŒ… ë¡ìŠ¤íƒ€' ì„¸ë¯¸ë‚˜ê°€ ìˆì—ˆê³ , ì•Œë ‰ì‚°ë” ë‹‰ìŠ¤ëŠ” 'ë§¤ë“œë§¨ì—ì„œ ìˆ˜í•™ë§¨ìœ¼ë¡œ'ì˜ ê°•ì—°ì„ ì§„í–‰í–ˆë‹¤. ë‚´ìš©ì€ ë°ì´í„° ê³¼í•™ê³¼ í–‰ë™ ê²½ì œí•™ì´ ì˜¨ë¼ì¸ ê´‘ê³  ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì–´ë–»ê²Œ ë³€í˜í–ˆëŠ”ì§€ì— ê´€í•œ ë‚´ìš©ì´ì—ˆë‹¤. (í•˜ì§€ë§Œ ì„¸ë¯¸ë‚˜ ë¦¬í”Œë ›ì—ëŠ” ë‹‰ìŠ¤ì˜ íšŒì‚¬ì¸ ì¼€ì„ë¸Œë¦¬ì§€ ì• ë„ë¦¬í‹°ì¹´ê°€ 'ì˜ë¦¬í•œ ë§ˆì´í¬ë¡œíƒ€ê¸°íŒ… ìº í˜ì¸'ê³¼ 'ì‹¤í–‰ ê°€ëŠ¥í•œ ì„¤ë“ ëª¨ë¸'ì„ í†µí•´ ë„ë„ë“œ íŠ¸ëŸ¼í”„ì˜ ëŒ€ì„  ìŠ¹ë¦¬ë¥¼ ì–´ë–»ê²Œ ë„ì™”ëŠ”ì§€ì— ê´€í•œ ì´ì•¼ê¸°ë¥¼ í• ê²ƒì´ë¼ ì í˜€ìˆì—ˆë‹¤.)<br>
ë‹‰ìŠ¤ëŠ” ì„¸ë¯¸ë‚˜ì—ì„œ í–‰ë™ ì‹¬ë¦¬í•™, ë°ì´í„° ê³¼í•™, ë§ì¶¤í˜• ê´‘ê³  ê°„ì˜ êµì°¨ì ì„ ì„¤ëª…í–ˆê³ , ë°œí‘œ 3ë¶„ë§Œì— "ìš°ë¦¬ëŠ” ëŒ€ìƒì˜ ì„±ê²©ì„ êµ¬ì„±í•˜ëŠ” íŠ¹ì„±ì„ íƒì§€í•˜ëŠ” ë„êµ¬ë¥¼ ì¶œì‹œí–ˆìŠµë‹ˆë‹¤."ë¼ê³  ë°í˜”ë‹¤.</p>
<ul>
<li>ì‹¤í—˜ ì‹¬ë¦¬í•™ ë¶„ì•¼ì˜ ìµœì²¨ë‹¨ ë°©ì‹ì¸ OCEAN 5ìš”ì¸ ì„±ê²© ëª¨ë¸ì„ ì‚¬ìš©í•œë‹¤ê³  í–ˆë‹¤.
<ul>
<li>Openness (ê°œë°©ì„±)</li>
<li>Conscientiousness (ì„±ì‹¤ì„±)</li>
<li>Extraversion (ì™¸í–¥ì„±)</li>
<li>Agreeableness (ìš°í˜¸ì„±)</li>
<li>Neuroticism (ì‹ ê²½ì§ˆì  ì„±í–¥)</li>
</ul>
</li>
<li>ë‹¤ì–‘í•œ ì„±ê²© ìœ í˜•ì— ë”°ë¼ ë©”ì‹œì§€ë¥¼ íƒ€ê¸°íŒ… í•˜ì§€ ì•Šìœ¼ë©´, ë§¤ìš° ë‹¤ë¥¸ ì„¸ê³„ê´€ì„ ê°€ì§„ ì‚¬ëŒë“¤ì—ê²Œ ë™ì¼í•œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ê²°ê³¼ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤ê³  í–ˆë‹¤.
<ul>
<li>ì˜ˆ1. ì„±ì‹¤í•œ ì‚¬ëŒì€ í•©ë¦¬ì ì¸ ì‚¬ì‹¤ ê¸°ë°˜ì˜ ì£¼ì¥ì— ì„¤ë“ë  ìˆ˜ ìˆë‹¤.</li>
<li>ì˜ˆ2. ì™¸í–¥ì ì¸ ì‚¬ëŒì—ê²ŒëŠ” ìë™ì°¨ë¥¼ êµ¬ë§¤í•¨ìœ¼ë¡œì¨ ì–»ê²Œ ë  ê°ì •ì„ ë¶ˆëŸ¬ì¼ìœ¼í‚¤ëŠ” ì–¸ì–´ì™€ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</li>
</ul>
</li>
<li>2016ë…„ íŠ¸ëŸ¼í”„ í›„ë³´ì˜ ì„ ê±° ìº í˜ì¸ì—ì„œëŠ” ìœ ê¶Œìì˜ íˆ¬í‘œ ì˜ë„ë¥¼ ì¶”ë¡ í•˜ê³ , ë¯¸êµ­ ì „ì²´ ì„±ì¸ì—ê²Œ ë‹¤ë¥¸ ì´ìŠˆë¥¼ í• ë‹¹í–ˆë‹¤ê³  ì£¼ì¥í–ˆë‹¤.
<ul>
<li>ë°ì¼ë¦¬ í…”ë ˆê·¸ë˜í”„ : íŠ¸ëŸ¼í”„ê°€ ë°±ì•…ê´€ì— ì…ì„±í•  ìˆ˜ ìˆì—ˆë˜ ë¹„ê²°ì„ ì œê³µí•˜ëŠ” ë§ˆìŒ ì½ê¸° ì†Œí”„íŠ¸ì›¨ì–´</li>
<li>ì›”ìŠ¤íŠ¸ë¦¬íŠ¸ ì €ë„ : ì´ ì˜ˆìƒ ë°–ì„ ìŠ¹ë¦¬ëŠ” ì‹¬ë¦¬í•™ì  ì ‘ê·¼ë°©ì‹ì— ê¸°ë°˜í•˜ì—¬ ìº í˜ì¸ íƒ€ê¸°íŒ… ê´€ê³ ë¥¼ ë³´ì¡°í•œ ì‘ì€ ë°ì´í„° íšŒì‚¬ì˜ ì¿ ë°íƒ€</li>
</ul>
</li>
</ul>
<p>ë‹‰ìŠ¤ëŠ” íƒ€ê¸°íŒ… ê´‘ê³ ì— ì‚¬ìš©ëœ ì‹¬ë¦¬ì¸¡ì • í”„ë¡œí•„ì„ ìˆ˜ì‹­ë§Œ ëª…ì— ë‹¬í•˜ëŠ” ëŒ€ê·œëª¨ì˜ ìì›ì ê·¸ë£¹ì„ ëŒ€ìƒìœ¼ë¡œ ì˜¨ë¼ì¸ ì„±ê²© í…ŒìŠ¤íŠ¸ë¥¼ ë³´ê²Œ í–ˆê³ , ì•Œê³ ë¦¬ì¦˜ì´ ê·¸ë“¤ì˜ ì„±ê²¨ì  íŠ¹ì„±ê³¼ í•´ë‹¹ ì‚¬ìš©ìë“¤ì—ê²Œ ì–»ì„ ìˆ˜ ìˆì—ˆë˜ ë‹¤ë¥¸ ë°ì´í„° ê°„ì˜ ê´€ê³„ì„±ì„ ë°œê²¬í–ˆë‹¤ê³  ì„¤ëª…í–ˆë‹¤.<br>
í•˜ì§€ë§Œ, 1ë…„ë’¤ ê·¸ëŠ” ì˜êµ­ ì˜íšŒì—ì„œ ì´ ëª¨ë“  ë‚´ìš©ê³¼ ê·¸ ì´ìƒì˜ ê²ƒë“¤ì„ ì„¤ëª…í•´ì•¼ í–ˆê³ , ê·¸ì˜ íšŒì‚¬ëŠ” íŒŒì‚°í–ˆë‹¤.</p>
<p>ìš°ë¦­ì—ê²Œ ì¤‘ìš”í•œ ë¬¸ì œëŠ”</p>
<ul>
<li>ê°œì¸ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸ê°€ ìˆ˜í–‰í•˜ëŠ” ê°œì¸í™”ëœ ëŒ€ê·œëª¨ ë§ˆì´í¬ë¡œíƒ€ê¸°íŒ…ì´ ì‹¤ì œë¡œ ê°€ëŠ¥í• ê¹Œ?</li>
<li>ì•Œê³ ë¦¬ì¦˜ì´ ì‹¤ì œ ì„œë¡œ ë‹¤ë¥¸ ìœ ê¶Œìë“¤ì—ê²Œ ë™ì¼í•œ ì„ íƒì„ í•˜ë„ë¡ ìœ ë„í•˜ëŠ” ìµœì ì˜ ë°©ë²•ì„ ì°¾ì„ ìˆ˜ ìˆì„ê¹Œ?</li>
<li>ì„ ê±° ê²°ê³¼ì— ì˜í–¥ì„ ì¤„ ë§Œí¼ ìœ ê¶Œìë‚˜ ì†Œë¹„ìì˜ í–‰ë™ì„ í¬ê²Œ ì›€ì§ì¼ ìˆ˜ ìˆì„ê¹Œ?</li>
<li>ì´ëŸ¬í•œ ë°©ë²•ì€ ì–´ë–»ê²Œ ì‘ë™í•˜ë©° ëˆ„ê°€ ë°œëª…í–ˆì„ê¹Œ?</li>
</ul>
<h3>í•¨ë¶€ë¥´í¬ë¡œ ê°€ëŠ” ê¸¸</h3>
<p>ì•Œë ‰ì‚°ë” ë‹‰ìŠ¤ê°€ ì„¤ëª…í•œ ì•„ì´ë””ì–´ ì¤‘ ì™„ì „íˆ ë…ì°½ì ì¸ ì•„ì´ë””ì–´ëŠ” ì—†ì—ˆë‹¤. ì´ì „ì˜ ì„ ê±° ìº í˜ì¸ì—ì„œë„ ê°œì¸í™”ëœ íƒ€ê¸°íŒ…ì„ í™œìš©í•˜ì—¬ ì†Œë¹„ì í–‰ë™ì— ê´€í•œ ìƒì—…ì  ë°ì´í„° ì„¸íŠ¸ì™€ ì—°ê²°í–ˆê³ , ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ ê¶Œìë“¤ì„ ë™ì§ˆì ì¸ ì†Œê·¸ë£¹ìœ¼ë¡œ ì„¸ë¶„í™”í•˜ëŠ” ë§ˆì´í¬ë¡œíƒ€ê¸°íŒ… ë°©ì‹ì„ ì‚¬ìš©í–ˆë‹¤. ì‹¬ë¦¬ í†µê³„í•™ì  ì„¸ë¶„í™”ëŠ” ê³¼í•™ìë“¤ì—ê²Œë„ ì˜ ì•Œë ¤ì ¸ ìˆì—ˆë‹¤.</p>
<h3>ì˜¨ë¼ì¸ í–‰ë™ì—ì„œ ì‹¬ë¦¬ì¸¡ì • ì •ë³´ ì–»ê¸°</h3>
<p>2013ë…„ ë¯¸êµ­êµ­ë¦½ê³¼í•™ì›íšŒë³´ëŠ” í˜ì´ìŠ¤ë¶ì˜ 'ì¢‹ì•„ìš”' í‘œí˜„ì— ê¸°ë°˜í•˜ì—¬ ì‚¬ìš©ìì˜ ê°œì¸ ì†ì„±ì„ ì¶”ë¡ í•  ìˆ˜ ìˆìŒì„ ë³´ì—¬ì£¼ëŠ” ë…¼ë¬¸ì„ ë°œí‘œí–ˆë‹¤. ì´ ì—°êµ¬ì—ì„œ ì œê¸°í•œ ì§ˆë¬¸ì€, ì‚¬ìš©ìì˜ ì˜¨ë¼ì¸ í–‰ë™ì„ ê¸°ë°˜ìœ¼ë¡œ í‘œì¤€ ì„±ê²© í…ŒìŠ¤íŠ¸ì˜ ê²°ê³¼ë¥¼ ì˜ˆì¸¡(í†µê³„ì ìœ¼ë¡œ ì¶”ì¸¡)í•  ìˆ˜ ìˆì„ì§€ ì—¬ë¶€ì˜€ë‹¤. ê·¸ë¦¬ê³  ë†€ëê²Œë„, ì•Œë ‰ì‚°ë” ë‹‰ìŠ¤ê°€ ì–¸ê¸‰í•œ í•µì‹¬ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì¸ ì´ ì„±ê²© ì •ë³´ëŠ” ì‹¤ì œ ê³µê°œëœ ì˜¨ë¼ì¸ í–‰ë™ì—ì„œ ìœ ì¶”í•  ìˆ˜ ìˆë‹¤ëŠ” ê²°ë¡ ì´ ë‚˜ì™”ë‹¤.</p>
<h4>ì‹¬ë¦¬ì¸¡ì •í•™</h4>
<p>ê°ì •, ê¸°ìˆ , ì ì„±, íƒœë„, ì„±í–¥, ì‹ ë…, í¸í–¥ ì²˜ëŸ¼ ì§ì ‘ ê´€ì°°í•  ìˆ˜ ì—†ëŠ” íŠ¹ì„±ì„ ì¸¡ì •í•˜ëŠ” í•™ë¬¸ì´ë‹¤.</p>
<p>í–‰ë™ ì°¨ì´ëŠ” OCEANìœ¼ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤. ì´ ë‹¤ì„¯ê°€ì§€ ìš”ì¸ì˜ ì ìˆ˜ëŠ” 'ì‹¤ì œ ê·¸ëŸ° ì„±í–¥ì´ ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€'ì™€ ê´€ê³„ ì—†ì´ ê³¼ê±°ì˜ í–‰ë™ìœ¼ë¡œë¶€í„° ì¶”ë¡ í•  ìˆ˜ ìˆìœ¼ë©°, ê·¸ ê²°ê³¼ ë¯¸ë˜ì˜ í–‰ë™ì„ ì˜ˆì¸¡í•  ìˆ˜ ìˆë‹¤.</p>
<p>| í‘œí˜„                        | ì„±í–¥                                                     |<br>
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>Vault KMIP FAQ</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/kmip-faq.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/kmip-faq.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault KMIP FAQ</source>
      <description>Vault KMIP ì£¼ìš” ì§ˆë¬¸</description>
      <pubDate>Thu, 15 Feb 2024 06:44:32 GMT</pubDate>
      <content:encoded><![CDATA[
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/20240215150300.png" alt="KMIP ì ìš© íë¦„ë„" tabindex="0" loading="lazy"><figcaption>KMIP ì ìš© íë¦„ë„</figcaption></figure>
<h2>Client ì¸ì¦ì„œì˜ ìœ íš¨ ê¸°ê°„</h2>
<p>ê¸°ë³¸ ì„¤ì •ì‹œ 1,209,600ì´ˆ(2ì£¼)ì˜ ìœ íš¨ ê¸°ê°„ì„ ê°–ê²Œ ë˜ë©°, ì„¤ì •ì— ë”°ë¼ ê¸´ ìœ íš¨ì‹œê°„ì˜ ì ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ì˜µì…˜ : <code>deault_tls_client_ttl</code>)<br>
ì„¤ì •ì€ ìƒê¸° ë„ì‹í™”í•œ ì ˆì°¨ ì¤‘ "2. kmip ê¸°ë³¸ config" ë‹¨ê³„ì— ì ìš© ê°€ëŠ¥í•˜ë©°. ì´ëŠ” <code>KMIP ì ìš© íë¦„ë„</code>ì˜ "4. kmip scope, role ì •ì˜" ë‹¨ê³„ì—ì„œ override í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ì˜ˆì‹œ - 1ë…„ì˜ ìœ íš¨ê¸°ê°„ì„ ì„¤ì •</span></span>
<span class="line">vault <span class="token function">write</span> kmip/config <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">listen_addrs</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0:5696 <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">tls_ca_key_type</span><span class="token operator">=</span><span class="token string">"rsa"</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">tls_ca_key_bits</span><span class="token operator">=</span><span class="token number">2048</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">server_ips</span><span class="token operator">=</span><span class="token number">192.168</span>.1.101,192.168.1.102 <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">default_tls_client_ttl</span><span class="token operator">=</span><span class="token number">31536000</span></span>
<span class="line"></span></code></pre></div><ul>
<li>ì˜µì…˜ ì°¸ì¡°(official) : <a href="https://developer.hashicorp.com/vault/api-docs/secret/kmip#parameters" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/api-docs/secret/kmip#parameters</a></li>
</ul>
<h2>KMIP ì‹œí¬ë¦¿ ì—”ì§„ì˜ config ë³€ê²½ì‹œ CAì˜ ë³€ê²½ ì—¬ë¶€</h2>
<p>ì¼ë°˜ì ì¸ ì„¤ì •ì€ CAê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë‚˜, CAì— ì§ì ‘ì ì¸ ì˜µì…˜ ì¦‰, í‚¤ ê°•ë„, í‚¤ ê¸¸ì´, ì•Œê³ ë¦¬ì¦˜ ë“±ì„ ë³€ê²½í•˜ì‹œë©´ CAê°€ ì¬ë°œê¸‰ë˜ë¯€ë¡œ ì´ ê²½ìš° ì˜í–¥ì´ ìˆìŠµë‹ˆë‹¤.<br>
<code>server_ip</code>, <code>server_hostnames</code>ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒìœ¼ë¡œëŠ” CAëŠ” ë³€ê²½ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŠ” SAN ì¸ì¦ì„œ ë°œê¸‰ì— ì˜í–¥ì´ì§€ë§Œ, vaultì—ì„œ serverì¸ì¦ì„œë¥¼ ì™¸ë¶€ë¡œ export í•˜ëŠ” ê³¼ì •ì´ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#í‚¤ê°•ë„ ë³€ê²½</span></span>
<span class="line">vault <span class="token function">write</span> kmip/config <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">listen_addrs</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0:5696 <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">tls_ca_key_type</span><span class="token operator">=</span><span class="token string">"rsa"</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">tls_ca_key_bits</span><span class="token operator">=</span><span class="token number">4096</span> </span>
<span class="line"></span></code></pre></div><h2>SAN ë°œê¸‰ì‹œ <code>server_hostnames</code> ê¸°ì… ì •ë³´</h2>
<p>https ë¡œ í˜¸ì¶œì´ ê°€ëŠ¥í•œ ëª…ì¹­ì´ë©´ ìƒê´€ì—†ìŠµë‹ˆë‹¤. dnsë¡œ í˜¸ì¶œì‹œì—ëŠ” ë„¤ì„ì„œë²„ì˜ zoneì˜ ì„¤ì •ì— ë”°ë¼ ë‹¤ë¥¼í„° ì´ë‚˜ fqdnìœ¼ë¡œ ê¸°ì…, í˜¹ì€ https í”„ë¡œí† ì½œë¡œ í˜¸ì¶œë§Œ ê°€ëŠ¥í•˜ë‹¤ë©´ í˜¸ìŠ¤íŠ¸ë„¤ì„ì´ì–´ë„ ë©ë‹ˆë‹¤.</p>
<p>ì£¼ì˜í•  ì ì€ http(s) í”„ë¡œí† ì½œë¡œ í˜¸ì¶œì‹œì— request/response í—¤ë”ì— ìš”ì²­ë  host ëª…ê³¼ ì´ê²ƒì´ ì¸ì¦ì„œì˜ CN(í˜¹ì€ SAN í™•ì¥ í•„ë“œ)ì™€ ë§¤ì¹­ë˜ëŠ”ì§€ì˜ ì—¬ë¶€ ì…ë‹ˆë‹¤.</p>
<h2>CA ë°œê¸‰ì‹œ <code>servername_hostnames</code>ì— ê¸°ì…ë˜ì–´ì•¼í•˜ëŠ” ì„œë²„ì˜ ë¦¬ìŠ¤íŠ¸ ì •ë³´</h2>
<p>Vault ì„œë²„ ì •ë³´ë¥¼ ê¸°ì…í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. (e.g. <code>vault.mysite.com</code>)</p>
<div class="hint-container warning">
<p class="hint-container-title">ì£¼ì˜</p>
<p>vaultì˜ KMIP í†µì‹ ì— ì•ì„œ <code>server-client</code>ì˜ ìƒí˜¸ ì¸ì¦ì¸ <code>two way ssl</code> ê³¼ì •ì„ ê±°ì¹˜ë¯€ë¡œ ê°ìì˜ cnì„ íŒë‹¨í•˜ê¸° ìœ„í•´ ê°œë³„ ëŒ€ìƒì˜ ê¸°ì…ì´ í•„ìš”í•  ê²ƒìœ¼ë¡œ ë³´ì—¬ì§€ë‚˜, operation role ë¶€ì—¬ì‹œì— í•´ë‹¹ ê¶Œí•œì— ëŒ€í•œ ì œì–´ê°€ ìˆ˜í–‰ë˜ë¯€ë¡œ Client ì˜ ê°’ì„ ê¸°ì…í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.</p>
</div>
<h2>ì¸ì¦ì„œ ì¬ë°œê¸‰ì‹œ ì´ì „ ì¸ì¦ì„œì˜ ë§Œë£Œ ì—¬ë¶€</h2>
<p>ê¸°ì¡´ ì¸ì¦ì„œë¥¼ ê°•ì œë¡œ revoke ì‹œí‚¤ì§€ ì•Šìœ¼ë©´ ìœ íš¨ê¸°ê°„(ttl)ë™ì•ˆ ë¬¸ì œ ì—†ìŠµë‹ˆë‹¤.</p>
<h2>Secrets ë³„ port ë°”ì¸ë”©</h2>
<p>KMIPì´ í™œì„±í™”ëœ secrets engineì´ ë‹¤ë¥´ë‹¤ë©´, portëŠ” í™œì„±í™”ëœ ì—”ì§„ ë§ˆë‹¤ ê°œë³„ ë°”ì¸ë”©ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<h2>KMIP í”„ë¡œí† ì½œë¡œ êµí™˜ë˜ëŠ” keyì˜ ë¼ì´í”„ì‚¬ì´í´</h2>
<p>VaultëŠ” KMIP ìœ¼ë¡œ ë°œê¸‰ë˜ëŠ” í‚¤ì˜ ë¼ì´í”„ì‚¬ì´í´ì— ëŒ€í•œ ì œì–´ê¶Œì„ í´ë¼ì´ì–¸íŠ¸ì— í¬ê´„ì ìœ¼ë¡œ ìœ„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>scope ë‚´ì˜ Roleì„ ë¶€ì—¬í•˜ëŠ” ê³¼ì • ì¤‘ Roleì— <code>operation_</code> ì ‘ë‘ì‚¬ë¡œ ì‹œì‘ë˜ëŠ” ê¶Œí•œì„ ë¶€ì—¬í•˜ì—¬, í•´ë‹¹ roleì—ì„œ ë°œê¸‰í•œ credentialì„ í†µí•´ í•´ë‹¹ roleì— ë¶€ì—¬ëœ KMIPì— ëŒ€í•œ ê¶Œí•œì„ í–‰ì‚¬í•©ë‹ˆë‹¤. ìš”ì•½í•˜ìë©´, Vaultì„œë²„ì—ì„œ KMIPìì²´ì˜ ë¼ì´í”„ì‚¬ì´í´ì´ ì•„ë‹Œ KMIPì˜ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ìš°íšŒì ì¸ ê´€ë¦¬ì±…ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>ë”°ë¼ì„œ, í•´ë‹¹ roleì—ì„œ KMIP í‚¤ì— ëŒ€í•´ ë³„ë‹¤ë¥¸ ì‘ì—…ì„ ìš”ì²­í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, vault ë‚´ì—ì„œ í‚¤ë¥¼ ë§Œë£Œ í˜¹ì€ ìˆ˜ì •(rotation)í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ ì•Šìœ¼ë©°,<br>
í•´ë‹¹ í‚¤ëŠ” ì§€ì†ì ìœ¼ë¡œ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<p>í˜„ ë²„ì „ vaultì˜ KMIPì— ëŒ€í•œ ì§€ì› ì •ë³´ëŠ” í˜„ì¬ KMIP profile 1.4 í‘œì¤€ì„ ë”°ë¥´ê³  ìˆìŒì´ í¼ë¸”ë¦­ ë¬¸ì„œë¡œ ì˜¤í”ˆë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
<p>(ì°¸ê³  - vault ê°€ êµ¬í˜„ì¤‘ì¸ KMIP profile ì •ë³´ : <a href="https://developer.hashicorp.com/vault/docs/secrets/kmip-profiles" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/docs/secrets/kmip-profiles</a>)</p>
<h2>Vault ë¡œê·¸ì—ì„œ KMIPì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë„ ë‚¨ê¸¸ ìˆ˜ ìˆëŠ”ì§€</h2>
<p>Vaultì˜ ë¡œê·¸ëŠ” Vault í”Œë«í¼ ìì²´ì— ëŒ€í•œ ì´ë²¤íŠ¸ ê¸°ë¡ ë§Œì„ ìˆ˜í–‰í•˜ì—¬, ì„¸ë°€í•œ í‚¤ ì²˜ë¦¬ì— ëŒ€í•œ ë¶€ë¶„ì€ <code>audit log</code> ë¼ëŠ” ê¸°ëŠ¥ì„ enable í•¨ìœ¼ë¡œì¨ ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ ëª¨ë‹ˆí„°ë§ í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2>Vault ë¡œê·¸ íŒŒì¼ ë¶„ë¦¬í•´ì„œ ë¡œí…Œì´ì…˜ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ì§€</h2>
<p>ì–´ë– í•œ ì¶”ê°€ ì„¤ì •ì´ ì—†ë‹¤ë©´, ê¸°ë³¸ì ìœ¼ë¡œ ì‹œìŠ¤í…œ ë¡œê·¸ì— ê¸°ë¡ë˜ë„ë¡ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ë§ì”€í•˜ì‹ ëŒ€ë¡œ í•´ë‹¹ ë¡œê·¸ íŒŒì¼ì„ ë³„ë„ ë¶„ë¦¬ê°€ëŠ¥í•˜ë©°, ë¡œí…Œì´ì…˜ì— ëŒ€í•œ ì„¤ì •ë„ ìš©ëŸ‰/ì‹œê°„/ê°¯ìˆ˜ì˜ ì œí•œì„ ì„¤ì •ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<p>(ì°¸ê³  : <a href="https://developer.hashicorp.com/vault/docs/configuration#log_rotate_duration" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/docs/configuration#log_rotate_duration</a>)</p>
<h2>KMIP í†µì‹  ì‹œ í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ìš”ì²­ì´ ë¦¬ë”ë¡œ í¬ì›Œë”© ë˜ëŠ”ì§€, ì•„ë‹ˆë©´ ìš”ì²­ ì¢…ë¥˜ì— ë”°ë¼ ë‹¤ë¥¸ì§€</h2>
<p>í•´ë‹¹ ë™ì‘ì€ licence ì •ì±…ì— ë”°ë¼ ë¶„í™”ë©ë‹ˆë‹¤. í˜„ì¬ ë¼ì´ì„ ìŠ¤ë¡œëŠ” Read/Write ëª¨ë‘ë¥¼ ë¦¬ë” ë…¸ë“œê°€ ì²˜ë¦¬í•˜ë„ë¡ ë˜ì–´ìˆê³ . ìš”ì²­ì„ ì²˜ë¦¬ë°›ì€ follwer ë…¸ë“œëŠ” ì²˜ë¦¬ë¥¼ ë¦¬ë” ë…¸ë“œë¡œ í¬ì›Œë”©í•©ë‹ˆë‹¤.</p>
<p>Read/Writeë¥¼ ëª¨ë“  Vaultì—ì„œ ì²˜ë¦¬í•˜ëŠ” ë™ì‘ì€ <code>Read Replica</code>ë¼ëŠ” ë™ì‘ìœ¼ë¡œ Vault Enterpriseì˜ Performance ë¼ì´ì„ ìŠ¤ì— í•´ë‹¹ë©ë‹ˆë‹¤.</p>
<p>ë§Œì•½ KMIP ì‚¬ìš©ì´ ê°€ëŠ¥í•œ ë¼ì´ì„ ìŠ¤ì¸ ADP-KM ë§Œ ì ìš© ëœ ê²½ìš°, R/Wê°€ ë¹ˆë²ˆí•˜ì§€ ì•Šì§€ë§Œ, ë†’ì€ ë¹„ìš©ì˜ ë¼ì´ì„ ìŠ¤ ì •ì±…ì—ì„œë§Œ ì‚¬ìš©ê°€ëŠ¥í•˜ë˜ ADP(Advanced Data Protection)ë¼ì´ì„ ìŠ¤ì˜ KMIP ê¸°ëŠ¥ì„ ì¢€ ë” ë¹„ìš©í•©ë¦¬ì ìœ¼ë¡œ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œë”, í•´ë‹¹ ê¸°ëŠ¥ì„ ì œê±°í•˜ê³  ì¢€ ë” ë‚®ì€ ë¹„ìš©ìœ¼ë¡œ ì±…ì •ëœ ë¼ì´ì„ ìŠ¤ì…ë‹ˆë‹¤.</p>
<p>(í˜„ì¬ ë¼ì´ì„ ìŠ¤ ì •ì±…ì— ëŒ€í•œ ìƒì„¸ ì°¸ì¡° ë§í¬ : <a href="https://developer.hashicorp.com/vault/docs/enterprise/license/faq#q-how-can-the-new-adp-modules-be-purchased-and-what-features-are-customer-entitled-to-as-part-of-that-purchase" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/docs/enterprise/license/faq#q-how-can-the-new-adp-modules-be-purchased-and-what-features-are-customer-entitled-to-as-part-of-that-purchase</a>)</p>
<h2>ë§¤ë‰´ì–¼í•˜ê²Œ Vault ë¦¬ë”ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆëŠ”ì§€</h2>
<p>vaultì—ì„œ <code>step-down</code> ì´ë¼ëŠ” ì‘ì—…ìœ¼ë¡œ ì¹­í•©ë‹ˆë‹¤. ì´ë•Œ, ë¦¬ë”ë¥¼ í™•ì¸í•˜ì—¬ ë‹¤ë¥¸ ë…¸ë“œë¡œ ë¦¬ë” ê¶Œí•œì„ ì´ì „í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<p>í•´ë‹¹ ì‘ì—…ì´ ì—†ì´ ë¦¬ë”ë¥¼ shutdowní•˜ê²Œ ë˜ë©´ ìì²´ì ì¸ ë¦¬ë” ì„ ì¶œê³¼ì •ì´ ë°œìƒí•˜ì—¬ ì•½ 5~10ì´ˆì •ë„ì˜ ìˆœë‹¨ì´ ë°œìƒê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì—. maintanance ì‘ì—…ì „ì—” <code>leader</code>ë¥¼ í™•ì¸ í›„ ì‘ì—…ì˜ ì„ í–‰ì´ ê¼­ í•„ìš”í•˜ê² ìŠµë‹ˆë‹¤.</p>
<h2>Vault ì—…ê·¸ë ˆì´ë“œ, ë¼ì´ì„ ìŠ¤ ë³€ê²½(ìˆ˜ë™) ê°™ì€ ì‘ì—… ì ˆì°¨</h2>
<p>ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ê²½ìš°, ë‹¤ìŒê³¼ ê°™ì´ ì§„í–‰ë©ë‹ˆë‹¤.</p>
<ol>
<li>ì˜¤í† ë°±ì—… ì„¤ì • ì¶”ê°€</li>
<li>ìŠ¤í…ë‹¤ìš´</li>
<li>í‚¤ ë§ˆì´ê·¸ë ˆì´ì…˜</li>
<li>ì •ìƒí™” ëª¨ë‹ˆí„°ë§</li>
</ol>
<p>ë‹¤ìŒì€ êµ¬ì„±ëœ Vault í´ëŸ¬ìŠ¤í„° ì˜ˆì‹œ ì´ë©°, health check configëŠ” ì´í•´ë¥¼ ë•ê¸°ìœ„í•œ ì„¤ì • ì…ë‹ˆë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/20240215152435.png" alt="Sample Vault Cluster" tabindex="0" loading="lazy"><figcaption>Sample Vault Cluster</figcaption></figure>
<p>ì‘ì—…ê°„ rolling update í˜•íƒœë¡œ ë…¸ë“œë¥¼ ìˆœí™˜ì  ì¬ê¸°ë™í•˜ê²Œë˜ëŠ”ë°, LBì˜ <code>health check</code> ì¸í„°ë²Œ ë•Œë¬¸ì— í•´ë‹¹ë…¸ë“œê°€ ë‹¤ìš´ë˜ì—ˆìŒì—ë„ ë…¸ë“œë¥¼ ì‹ ë¢°í•˜ì—¬ í¬ì›Œë”© í•˜ëŠ” êµ¬ê°„ì´ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<ol>
<li>
<p>vault follower nodeì˜ í™•ì¸</p>
</li>
<li>
<p>ì‘ì—… ëŒ€ìƒì¸ follower nodeë¥¼ GSLB íƒ€ê²Ÿì—ì„œ ì œê±°<br>
2.1 ì œê±°ëœ follower nodeë¥¼ ì…§ë‹¤ìš´ í›„ í‚¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‘ì—… í›„ GSLBì˜ íƒ€ê²Ÿì— ì¶”ê°€</p>
</li>
<li>
<p>ë‹¤ìŒ follower nodeì— ëŒ€í•´ "2~3"ì‘ì—… ë°˜ë³µ<br>
3.1.  follower node ê¸°ë™ í›„ ì •ìƒì ì¸ followerë¡œì„œ join ë˜ì—ˆëŠ”ì§€ í™•ì¸</p>
</li>
<li>
<p>leader nodeë¥¼ GSLB íƒ€ê²Ÿì—ì„œ ì œê±°<br>
4-1. ì œê±°ëœ leader nodeë¥¼ "step-down"í•˜ì—¬ leader roleì„ followerë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜<br>
4-2. "3"ì˜ ê³¼ì •ì„ í˜„ì¬ nodeì—ì„œ ìˆ˜í–‰</p>
</li>
<li>
<p>ê°€ëŠ¥í•œ ê²½ìš° KMIP í´ë¼ì´ì–¸íŠ¸ (e.g.MongoDB)ë¥¼ ì¬ê¸°ë™ í•˜ì—¬ ì •ìƒì ìœ¼ë¡œ êµ¬ë™ë¨ í™•ì¸</p>
</li>
</ol>
<p>4ì˜ ê³¼ì •ì—ì„œ tagetì„ ë¨¼ì € ì œê±°í•˜ëŠ” ì´ìœ ëŠ”, step-downì‹œ ready ìƒíƒœê°€ ë˜ëŠ” leaderë…¸ë“œë¡œ LBê°€ ìš”ì²­ì„ ë³´ë‚¼ì‹œ ì—­ì‹œ 50XëŒ€ ì„œë²„ ì—ëŸ¬ë¥¼ ë¦¬í„´ë°›ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<p>followerë¥¼ í†µí•´ ìœ ì…ëœ reqeustëŠ” responseë˜í•œ followerë¥¼ í†µí•´ íšŒì‹ ë˜ë¯€ë¡œ, ìš”ì²­ì²˜ë¦¬ì—ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤</p>
<h2>Linux ì„œë¹„ìŠ¤ë¡œ ë“±ë¡ëœ ê²½ìš° ë¡œê·¸ íŒŒì¼ ì™¸ë¶€ êµ¬ì„±</h2>
<p>systemd ìƒì— ë“±ë¡ë˜ì–´ ìˆëŠ”  vault serviceëŠ” "vault server" commandë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<p>systemdë¡œ ë“±ë¡ëœ ì„œë¹„ìŠ¤ëŠ” ë”°ë¡œ ì„¤ì •í•´ ì£¼ì§€ ì•ŠëŠ”ë‹¤ë©´ Standart Out,Error ëª¨ë‘ syslogì— ì €ì¥í•˜ë¯€ë¡œ, Vault Service Scriptì—ì„œ vault logê°€ ì €ì¥ë˜ì§€ ì•Šë„ë¡ Standard Errorë¥¼ nullë¡œ ì²˜ë¦¬í•˜ê³ , <code>vault server</code> commandì— ì˜µì…˜ì„ ì£¼ì–´ vault logë¥¼ ì™¸ë¶€ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-ini" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="line"><span class="token comment"># /lib/systemd/system/vault.service ìˆ˜ì •</span></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span></span>
<span class="line">...</span>
<span class="line"></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span></span>
<span class="line">...</span>
<span class="line"><span class="token key attr-name">ExecStart</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/local/bin/vault server -config=/etc/vault.d/vault.hcl -log-file={ Log_path }</span></span>
<span class="line"><span class="token key attr-name">StandardError</span><span class="token punctuation">=</span><span class="token value attr-value">null</span></span>
<span class="line"></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span></span>
<span class="line">...</span>
<span class="line"></span></code></pre></div><ul>
<li><code>ExecStart</code> í•­ëª©ì— <code>-log-file</code> í•­ëª© ì¶”ê°€</li>
<li><code>StandardError=null</code> í•­ëª¨ê³  ì¶”ê°€</li>
</ul>
<h2>Auto Unseal ì„¤ì •ì„ í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ <code>pkill -HUP vault</code> ì»¤ë§¨ë“œì‹¤í–‰í•˜ëŠ” ê²½ìš°ì— vault í”„ë¡œì„¸ìŠ¤ê°€ ì¬ì‹œì‘ë˜ë©´ì„œ Seal(ë´‰ì¸) ìƒíƒœê°€ ë ê¹Œìš”?</h2>
<p>í•´ë‹¹ pkill -HUP vault ëª…ë ¹ì–´ëŠ” vault ê°€ ì¬ê¸°ë™ë˜ëŠ” ëª…ë ¹ì–´ê°€ ì•„ë‹Œ ì„¤ì •ì„ reloadí•˜ëŠ” ëª…ë ¹ì–´ë¡œ Vault sealì—ëŠ” ì˜í–¥ì´ ì—†ìŠµë‹ˆë‹¤.</p>
<p>Vault service ìƒì—ì„œë„ ëª…ì‹œì ìœ¼ë¡œ Reload ê¸°ëŠ¥ì´ ìˆìœ¼ë©°, <code>Systemctl reload vault.service</code> ëª…ë ¹ìœ¼ë¡œ ê°™ì€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-ini" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="line"><span class="token comment"># /lib/systemd/system/vault.service ìˆ˜ì •</span></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span></span>
<span class="line">...</span>
<span class="line"></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span></span>
<span class="line">...</span>
<span class="line"><span class="token key attr-name">ExecReload</span><span class="token punctuation">=</span><span class="token value attr-value">/bin/kill --signal HUP $MAINPID</span></span>
<span class="line"></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span></span>
<span class="line">...</span>
<span class="line"></span></code></pre></div><h2>KMIP ì—”ì§„ì„ ì„¤ì •í•˜ë©´ KMIP ì„œë¹„ìŠ¤ í¬íŠ¸(5696/TCP)ì— ì„œë²„ì¸¡ SSL ì¸ì¦ì„œê°€ ìë™ìœ¼ë¡œ ì„¸íŒ…ë˜ëŠ”ë°, ì´ ìì²´ ì„œëª…ëœ ì¸ì¦ì„œì˜ ë§Œë£Œì¼ì´ 1ë…„ìœ¼ë¡œ ì¡í˜€ìˆëŠ”ë° ìë™ìœ¼ë¡œ ê°±ì‹ ë˜ê³  ì„œë¹„ìŠ¤ì— ì˜í–¥ì´ ì—†ëŠ”ì§€</h2>
<p>Vault KMIP Secret Engineì—ì„œì˜ ì„œë²„ì¸¡ SSL ì¸ì¦ì„œì˜ ê²½ìš° í•˜ë‹¨ 3ê°€ì§€ ìƒí™©ì—ì„œ ê°±ì‹ ë©ë‹ˆë‹¤</p>
<ul>
<li>Vault ì˜ ë¦¬ë” ë³€ê²½ ì‹œ</li>
<li>KMIP Config ë³€ê²½ ì‹œ</li>
<li>Vault ì¬ê¸°ë™ ì‹œ</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/20240215153819.png" alt="ê²€ì¦ ë‚´ìš©" tabindex="0" loading="lazy"><figcaption>ê²€ì¦ ë‚´ìš©</figcaption></figure>
<p>(ì°¸ê³  : <a href="https://support.hashicorp.com/hc/en-us/articles/4411836765075-KMIP-Secrets-Engine-server-TLS-certificate-Guide" target="_blank" rel="noopener noreferrer">https://support.hashicorp.com/hc/en-us/articles/4411836765075-KMIP-Secrets-Engine-server-TLS-certificate-Guide</a>)</p>
<h2>PR ê¸°ëŠ¥ì´ ìˆëŠ” License ì—ì„œ  PR ê¸°ëŠ¥ì´ ì—†ëŠ” Licenseë¡œ ì´ê´€ ì‹œ ì´ìŠˆ</h2>
<p>PR ê¸°ëŠ¥ì„ í¬í•¨ëœ ë¼ì´ì„ ìŠ¤ ì‚¬ìš© ì‹œ PRì´ ì—†ëŠ” (e.g. ADP-KM) Vault Licenseë¡œ êµì²´í•˜ë©´ Performance Standby ìƒíƒœê°€ ì¢…ë£Œë˜ë©´ì„œ vault ë¦¬ë” ë…¸ë“œì˜ í”„ë¡œì„¸ìŠ¤ ë¦¬ë¡œë“œ ì‹œ íŒ”ë¡œì›Œ ë…¸ë“œ í”„ë¡œì„¸ìŠ¤ê°€ ì¬ì‹œì‘ë˜ì–´ seal ìƒíƒœê°€ ë˜ëŠ” ìƒí™©ì´ ë°œìƒí•©ë‹ˆë‹¤.</p>
<p>ì´ ê²½ìš° í•˜ë‹¨ ë§í¬ì™€ ê°™ì´ vault config íŒŒì¼ì—  <code>disable_performance_standby=true</code>ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ê¸°ì…í•¨ìœ¼ë¡œì¨ í•´ë‹¹ ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>(ë§í¬ : <a href="https://support.hashicorp.com/hc/en-us/articles/21909597784211-Vault-Disabling-Performance-Standby-mode-when-not-licensed-for-this-feature" target="_blank" rel="noopener noreferrer">https://support.hashicorp.com/hc/en-us/articles/21909597784211-Vault-Disabling-Performance-Standby-mode-when-not-licensed-for-this-feature</a>)</p>
<h2>MongoDB - Vault KMIP ì—°ë™ì‹œ <code>--kmipKeyStatePollingSeconds</code> ì˜µì…˜ ë™ì‘</h2>
<p>MongoDBì˜ <code>--kmipKeyStatePollingSeconds</code> ì˜µì…˜ì€ MongoDB ì—ì„œ Vault Kmip ìœ¼ë¡œ ì•”í˜¸í™” Keyê°€ Active ìƒíƒœì¸ì§€ í™•ì¸í•˜ëŠ” ì£¼ê¸° ì…ë‹ˆë‹¤.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/20240215150300.png" type="image/png"/>
    </item>
    <item>
      <title>DevOps Korea ì¢Œë‹´íšŒ 2024.2.13.</title>
      <link>https://docmoa.github.io/06-etc/class/devops-discussion-20240213.html</link>
      <guid>https://docmoa.github.io/06-etc/class/devops-discussion-20240213.html</guid>
      <source url="https://docmoa.github.io/rss.xml">DevOps Korea ì¢Œë‹´íšŒ 2024.2.13.</source>
      <description>DevOps Korea ì¢Œë‹´íšŒ - AI ì‹œëŒ€ì— DevOpsê°€  ë‚˜ì•„ê°ˆ ë°©í–¥ì€?</description>
      <pubDate>Wed, 14 Feb 2024 07:39:18 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/telegram-cloud-photo-size-5-6226272870942751266-y.jpg" alt="torder-townhall" tabindex="0" loading="lazy"><figcaption>torder-townhall</figcaption></figure>
<h1>DevOps Korea ì¢Œë‹´íšŒ 2024.2.13.</h1>
<ul>
<li>
<p>ì¼ì‹œ : 2024ë…„ 2ì›” 13ì¼ (í™”) 19:00</p>
</li>
<li>
<p>ì•ˆë‚´ :</p>
<ul>
<li>Facebook : <a href="https://www.facebook.com/groups/TeAnE/permalink/2971918569610501/" target="_blank" rel="noopener noreferrer">DevOps Korea</a> - AIì˜ ì‹œëŒ€ì—ì„œ DevOpsê°€ ê°€ì•¼í•  ë°©í–¥</li>
<li>GitHub : <a href="https://github.com/ralfyang/DevOps_Korea_sitting_talking/tree/main/20240213" target="_blank" rel="noopener noreferrer">https://github.com/ralfyang/DevOps_Korea_sitting_talking/tree/main/20240213</a></li>
</ul>
</li>
<li>
<p>ì¥ì†Œ : íŒŒí¬ì›2íƒ€ì›Œ í‹°ì˜¤ë”</p>
</li>
<li>
<p>ì£¼ìš” ì•„ì  ë‹¤</p>
<ul>
<li>AIì‹œëŒ€ ê´€ë ¨ ë³€í™”ëœ ì‹œëŒ€ì— ë§ê²Œ ëŒ€ì‘ í•  ë°©í–¥</li>
<li>DevOps ì—…ë¬´ì— ë„ì›€ì´ ë ë§Œí•œ AIë„êµ¬ ë° ë°©ë²•ë¡ </li>
<li>ì´ë¯¸ ì ìš©ì¤‘ì¸ AIë¥¼ í™œìš©í•œ ì—”ì§€ë‹ˆì–´ë§ ì—…ë¬´ì†Œê°œ ë“±</li>
</ul>
</li>
</ul>
<h2>ğŸ§‘â€âš–ï¸ ì‚¬ë¡€ 1. ë²•ì› íŒë¡€</h2>
<p>ë²•ì›ì˜ íŒê²°ì€ ê¸°ì¡´ íŒë¡€ì— í° ì˜í–¥ì„ ë°›ëŠ”ë‹¤. ì‚¬ê±´ë§ˆë‹¤ ê·¸ ë°°ê²½, ìƒí™©, ì¦ê±°, ì •í™© ë“±ì˜ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì´ì „ì— ì–´ë–¤ ê²°ê³¼ê°€ ë‚˜ì™”ëŠ”ì§€ê°€ í˜„ì¬ì˜ íŒê²°ë¬¸ ì‘ì„±ê³¼ ì—°ê´€ì„±ì´ ìˆë‹¤ëŠ” ê²ƒì€ ì •ë³´ë“¤ì˜ ë¶„ì„ìœ¼ë¡œ í˜„ì¬ì˜ ì‚¬ê±´ì´ ì–´ë–¤ ê²°ê³¼ê°€ ë‚˜ì˜¬ì§€ ì˜ˆì¸¡í•  ìˆ˜ ìˆê³ , ë”ë¶ˆì–´ ìƒì„±í˜• AIë¥¼ ì‚¬ìš©í•˜ëŠ” ì†Œë¹„ì ë˜í•œ ì´ëŸ° 'ë²•ë¥  ì„œë¹„ìŠ¤'ë¥¼ ë°›ëŠ” íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.</p>
<p><a href="https://zdnet.co.kr/view/?no=20240124110357" target="_blank" rel="noopener noreferrer">ê´€ë ¨ ë‰´ìŠ¤ - ë²•ì›ë„ AI ë„ì… ì‹œì‘â€¦"íŒê²°ë¬¸ ì‘ì„± ë•ëŠ” AIë„ í•„ìš”"</a></p>
<p>ë²•ë¥ ê³¼ AIëŠ” ì´ì „ì— ë¯¸êµ­ì—ì„œ ChatGPTë¡œ ì°¾ì€ ìë£Œë¥¼ ë²•ì›ì— ì œì¶œí•˜ì—¬ ë²Œê¸ˆí˜•ì„ ë°›ì€ ì‚¬ë¡€ë„ ìˆì§€ë§Œ ê·¸ê²ƒì€ ì˜ëª» ì‚¬ìš©ëœ ì˜ˆì‹œì´ì ì‚¬ì‹¤ ê²€ì¦ì„ í•´ì•¼í•œë‹¤ëŠ” ê²½ì¢…ì´ê¸°ë„ í•˜ë‹¤</p>
<blockquote>
<p>íŒ¨ë„ë¡œ ì°¸ì—¬í•˜ì‹  <a href="https://paranduru.me/" target="_blank" rel="noopener noreferrer">íŒŒë€ë‘ë£¨ë¯¸</a>ì˜ ì´ì¸í¬ ëŒ€í‘œë‹˜ì€ AIì— ì´ì „ íŒë¡€ë“¤ì„ ì ìš©í•˜ì—¬ ì£¼ë³€ì¸ì˜ ì–´ë µê²Œë§Œ ë³´ì´ëŠ” ë²•ë¥  ì‹¸ì›€(?)ì— ë„ì›€ì„ ì¤€ ì ì´ ìˆì—ˆë‹¤.</p>
</blockquote>
<p>ìƒì„±í˜• AIëŠ” ì „ë¬¸ê°€ì  ì†Œê²¬ì´ë‚˜ ì „ì²´ ì„¤ê³„ëŠ” ì•„ì§ ë¬´ë¦¬ì¼ ìˆ˜ ìˆì§€ë§Œ, ê²€ì¦, ìë£Œì •ë¦¬, ë¶€ë¶„ì  êµ¬í˜„ì— íƒì›”í•¨ì„ ë³´ì—¬ì¤€ë‹¤. (ì•„ì§ì´ë¼ëŠ” ê²ƒì€ ì•ìœ¼ë¡œëŠ” ê·¸ëŸ´ ê°€ëŠ¥ì„±ë„ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.) íŠ¹íˆ ì–´ë–¤ ì •ë³´ë¥¼ í•™ìŠµì‹œí‚¤ëŠ”ê°€ì— ë”°ë¼ ì›í•˜ëŠ” ë‹µì„ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>
<h2>ğŸ§‘â€ğŸ’» ì‚¬ë¡€ 2. ì „ë¬¸ ì˜ì—­ì˜ êµì°¨, ê°€ëŠ¥ì„±ì˜ í™•ëŒ€</h2>
<blockquote>
<p>ê²Œì„ ì—…ê³„ì—ì„œëŠ” ì˜ˆìˆ ê°€ì˜ ì˜ì—­ì´ì˜€ë˜ ìºë¦­í„° ì¼ëŸ¬ìŠ¤íŠ¸ì™€ ë°°ê²½ ê°™ì€ ì˜ì—­ì— ìƒì„±í˜• AIì˜ ë„ì…ì´ í™œë°œí•´ì§€ê³  ìˆë‹¤ê³  í–ˆë‹¤.</p>
</blockquote>
<p>ê²Œì„ ê°™ì€ ì—”í„°í…Œì¸ë¨¼íŠ¸ ìš”ì†Œê°€ ê°•í•œ ì†Œí”„íŠ¸ì›¨ì–´ ì‚°ì—…ì—ì„œëŠ” ëˆˆìœ¼ë¡œ ë³´ì—¬ì§€ëŠ” ìš”ì†Œê°€ í¥í–‰ì— ë§ì€ ë¹„ì¤‘ì„ ì°¨ì§€í•  ìˆ˜ ë°–ì— ì—†ë‹¤. ë•Œë¬¸ì— ì•„í‹°ìŠ¤íŠ¸ì— ë§ì€ ë¹„ìš©ì´ ì§€ë¶ˆë˜ê³ , ë˜ëŠ” ìœ ëª…í•œ ì•„í‹°ìŠ¤íŠ¸ë¥¼ ì„­ì™¸í•´ì•¼í•˜ëŠ” ê²½ìš°ë„ ì¦ì•˜ì§€ë§Œ, ìƒì„±í˜• AIê°€ ì´ë¥¼ ëŒ€ì²´í•œë‹¤ë©´ ì›í•˜ëŠ” ì›í™”ë¥¼ ì–»ì„ ë•Œê¹Œì§€ ë°˜ë³µì ìœ¼ë¡œ ìš”ì²­ í•  ìˆ˜ ìˆê³ , ì´ê²ƒì€ ì´ì „ì— ì‚¬ëŒì´ ì§ì ‘ ëª¨ë“  ì˜ˆìˆ ì  ì‘ì—…ì„ ìˆ˜í–‰í–ˆë˜ ìƒí™©ì— ë¹„í•´ ìƒëŒ€ì ìœ¼ë¡œ ì ì€ ë¹„ìš©ìœ¼ë¡œë„ ê²Œì„ ì œì‘ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.</p>
<blockquote>
<p>ëˆˆìœ¼ë¡œ ë³´ì—¬ì§€ê³  ì‚¬ìš©ì ê²½í—˜ì´ ìš”êµ¬ë˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ, ë°±ì—”ë“œ ê°œë°œìë„ í•  ìˆ˜ ìˆì–´ìš”.</p>
</blockquote>
<p>ì „ë¬¸ ì˜ì—­ì„ ë²—ì–´ë‚˜ ë‹¤ë¥¸ ì˜ì—­ì„ ìƒˆë¡œ ë°°ìš°ê¸°ì—ëŠ” ì‹œê°„ê³¼ ë¹„ìš©ì´ í•„ìš”í•˜ì§€ë§Œ ìƒì„±í˜• AIë¥¼ í™œìš©í•˜ë©´, ë°±ì—”ë“œ ê°œë°œìë„ ìŠ¤ë§ˆíŠ¸í° ì•±ì´ë‚˜ UI ì‘ì—… ê°™ì€ ë‹¤ë¥¸ ì—­ëŸ‰ì´ í•„ìš”í•œ ì˜ì—­ì— ëŒ€í•´ì„œë„ ê°œë°œ ê°€ëŠ¥í•œ ê¸°íšŒë¥¼ ì–»ê²Œ ëœë‹¤.</p>
<blockquote>
<p>ìƒì„±í˜• AIëŠ” ì´ˆê¸‰ì ê°œë°œìë¥¼ ë‘ëŠ” ê²ƒ ê°™ì€ íš¨ê³¼ê°€ ìˆì–´ìš”.</p>
</blockquote>
<p>ê²°êµ­ ëª…ë ¹(í”„ë¡¬í”„íŒ…)ì„ í•˜ëŠ” ì‚¬ëŒì´ ì›í•˜ëŠ” ë°”ë¥¼ ì •í™•íˆ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤ë©´ ìƒì„±í˜• AIëŠ” ê·¸ ì¼ì„ ì´ˆê¸‰ìê°€ í•  ìˆ˜ ìˆì„ ì •ë„ì˜ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ê³ , ì´ê²ƒì€ ê¸°ì¡´ì˜ ì „ë¬¸ì˜ì—­ì„ ë²—ì–´ë‚˜ ë” ë§ì€ ê°€ëŠ¥ì„±ì„ ì—´ì–´ì£¼ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.</p>
<h2>ğŸ­ ì‚¬ë¡€ 3. ìì²´ êµ¬ì¶• ìƒì„±í˜• AI</h2>
<p>ìƒì„±í˜• AIë¥¼ ìì²´ êµ¬ì¶•í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤. ê·¸ ìœ ìš©ì„±ê³¼ ì—…ë¬´ íš¨ìœ¨ì„±ì„ ê¸°ëŒ€í•˜ì§€ë§Œ ì™¸ë¶€ SaaS í˜•íƒœë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´, ê¸°ì—…ì˜ ì •ë³´ê°€ ìœ ì¶œ ë  ê°€ëŠ¥ì„±ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>
<blockquote>
<p>ì±„íŒ…í•˜ëŠ” ê²ƒì²˜ëŸ¼ ì‚¬ìš©í•˜ë©´, ê·¸ê²Œ ë‹¤ í† í°ì´ê³  ëˆì´ì—ìš”.</p>
</blockquote>
<p>í•˜ì§€ë§Œ ìƒì„±í˜• AIì´ ì´ì œ ë§‰ í™œì„±í™” ë˜ë“¯, ì‚¬ìš©ìë„ ì•„ì§ ë…¸í•˜ìš°ê°€ ë§ì€í¸ì€ ì•„ë‹ˆë‹¤. ì§ˆë¬¸ í•˜ë‚˜ ë‹¹ ëª¨ë‘ ëª¨ë¸ë¡œë¶€í„°ì˜ ê²°ê³¼ë¥¼ ë„ì¶œí•˜ê¸° ìœ„í•œ ë¹„ìš©(ì „ê¸°, í”„ë¡œì„¸ì‹±)ì´ ë°œìƒí•˜ëŠ” ì‘ì—…ì¸ë°, ë§ˆì¹˜ ì¼ë°˜ ì‚¬ìš©ìë“¤ì€ ì±„íŒ…í•˜ë“¯, ì•„ì£¼ì ì€ ì •ë³´ë“¤ë¡œ ì£¼ê±°ë‹ˆ ë°›ê±°ë‹ˆ í•˜ë©° ì‚¬ìš©í•˜ëŠ” ì‚¬ë¡€ë„ ìˆì—ˆë‹¤.</p>
<p><a href="https://www.hani.co.kr/arti/science/technology/1090180.html" target="_blank" rel="noopener noreferrer">ëŒ€í™” í•œ ë²ˆì— â€˜ìƒìˆ˜ í•œ ë³‘ì”©â€™â€¦ì±—GPTì˜ ë¶ˆí¸í•œ ì§„ì‹¤</a></p>
<p>ì°¸ì„ìë¡œ ì°¸ì—¬í•˜ë‹¤ íŒ¨ë„ë¡œ ì „í–¥(?)í•˜ì‹  ì‚¼ì„±SDSì˜ ì¡°ë‚¨í˜¸ í”„ë¡œë‹˜ì˜ ë¹„ìš©ì— ëŒ€í•œ ì–¸ê¸‰, ê·¸ë¦¬ê³  ì‚¬ìš©ë²•ì— ëŒ€í•´ êµìœ¡í–ˆìŒì—ë„ ì•„ì§ì€ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤ëŠ” ì‚¬ì‹¤ì—ì„œ ë‹µë‹µí•¨ì´ ëŠê»´ì§€ê¸°ëŠ” í–ˆì§€ë§Œ, í•œí¸ìœ¼ë¡œëŠ” ê¸°ì—…ë‚´ë¶€ì—ì„œ ìƒì„±í˜• AIì— ëŒ€í•œ ì˜¬ë°”ë¥¸ ì‚¬ìš©ë²•ê³¼ í™œìš©ë²•ì— ëŒ€í•´ ê³ ë¯¼í•˜ê³  ì‹¤í–‰í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì€ ì•ìœ¼ë¡œì˜ AIì™€ í•¨ê»˜ í•˜ëŠ” ì„¸ìƒì—ì„œ ë˜ ë‹¤ë¥¸ ê¸°ì—…/ê°œì¸ ê²½ìŸë ¥ì´ ë  ê²ƒë„ ê°™ë‹¤.</p>
<p>ì–´ë–»ê²Œ í•˜ë©´ ì˜¬ë°”ë¥¸ ì§ˆë¬¸ì„ í•  ìˆ˜ ìˆì„ê¹Œì— ëŒ€í•œ í•´ë²•ìœ¼ë¡œëŠ” ì„œë¡œë‹¤ë¥¸ LLMì„ ì‚¬ìš©í•´ë³´ëŠ”ê²ƒë„ ë°©ì•ˆìœ¼ë¡œ ì œì‹œë˜ì—ˆë‹¤. ì˜ˆë¥¼ë“¤ì–´, Edge Copilotì—ê²Œ í”„ë¡¬í”„íŠ¸ë¥¼ ë§Œë“¤ì–´ë‹¬ë¼ê³  ìš”ì²­í•˜ê³ , ìƒì„±ëœ  í”„ë¡¬í”„íŠ¸ë¥¼ ChatGPTì— ì…ë ¥í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì¡°ë‚¨í˜¸ í”„ë¡œë‹˜ì€ ë” ë‚˜ì€ ì‚¬ìš©ì„ ìœ„í•´ì„œ ë¬´ë£Œ ê°•ì˜ë¥¼ ë“¤ì–´ë³¼ ê²ƒì„ ì¶”ì²œí•˜ì˜€ë‹¤.</p>
<p><a href="https://www.deeplearning.ai/short-courses/" target="_blank" rel="noopener noreferrer">LERAN GENERATIVE AI - Short Courses</a></p>
<ul>
<li>ChatGPT Prompt Engineering for Developers</li>
<li>Building Systems with the ChatGPT API</li>
<li>LangChain for LLM Application Development</li>
</ul>
<h2>ğŸ‘« ì‚¬ë¡€ 4. "ìš°ë¦° ìƒì„±í˜• AI ì‚¬ìš©í•˜ì§€ ì•Šê¸°ë¡œ í–ˆì–´ìš”."</h2>
<p>ChatGPTì˜ ë°œí‘œ ì´í›„ë¡œ ìˆ˜ë§ì€ ê´€ë ¨ ì„œì ë“¤ì´ ì¶œê°„ë˜ì—ˆê³ , ë”ë¶ˆì–´ ê°œë°œì ì˜ì—­ì—ì„œë„ ë‹¤ì–‘í•œ í™œìš©ë²•, íŠ¹íˆ ê·€ì°®ì€ ì‘ì—…ì„ ì‹œí‚¤ê±°ë‚˜, ì‚¬ìš©ìì—ê²Œ ë¹„ ì „ë¬¸ì ì¸ ì˜ì—­ì˜ í•´ë‹µ(?)ì„ ì–»ëŠ” ë°©ì‹ì´ ì œì•ˆë˜ì—ˆë‹¤.</p>
<blockquote>
<p>Copilotì´ ìƒì„±í•´ì¤€ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ë©´, ì„¤ëª… í•  ìˆ˜ ì—†ê³  ìš°ë¦¬ì˜ ì½”ë“œ ê·œì¹™ì„ ì§€í‚¤ê¸° ì–´ë ¤ì›Œìš”.</p>
</blockquote>
<p>ì°¸ì„í•˜ì‹  í•œ CTOë¶„ì€ ê°œë°œì— ë”ì´ìƒ ìƒì„±í˜• AIë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ ë°©í–¥ì„ ì •í–ˆë‹¤ê³  ì´ì•¼í•´ í•´ì£¼ì—ˆë‹¤. ì•ì„œ ë‹¤ì–‘í•œ í™œìš©ë²•, ê¸ì •ì ì¸ ë¶€ë¶„ì´ ë¶€ê°ë˜ì—ˆë‹¤ë©´ ì´ê²ƒì€ ë°˜ëŒ€ì  ì…ì¥ì´ì—¬ì„œ ê´€ì‹¬ì´ ê°€ëŠ” ë¶€ë¶„ì´ì˜€ë‹¤. íŠ¹íˆ ë‹¹ì¥ì˜ ìƒì‚°ì„±ì€ ë†’ì•„ì§ˆ ìˆ˜ ìˆì§€ë§Œ, ì‘ì„±ëœ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ì€ ì‚¬ëŒë„ ì„¤ëª…í•  ìˆ˜ ì—†ê³  í˜‘ì—…ì„ í•¨ì— ì¶”ê°€ì ì¸ ë…¸ë ¥ê³¼ ë””ë²„ê¹…ì´ í•„ìˆ˜ì ì´ ë˜ë©´ì„œ ìƒì‚°ì„±ê³¼ ì¡°ì§ ê±°ë²„ë„ŒìŠ¤ë¥¼ ìœ ì§€ì‹œí‚¤ê¸° ì–´ë ¤ìš´ ê²ƒì´ ê·¸ ì´ìœ  ì˜€ë‹¤.</p>
<p>ìƒì„±í˜• AIì˜ ì£¼ìš” ë¬¸ì œì ì¤‘ í•˜ë‚˜ëŠ” ì´ë¯¸ í•™ìŠµëœ ë°ì´í„°ì— ì˜ì¡´í•˜ëŠ” í¸í–¥ì  ê²½í–¥ì´ë‹¤. ì´ ë¬¸ì œëŠ” í¸ê²¬ì´ ì™„í™”ë˜ê¸°ë³´ë‹¤ëŠ” í¸í–¥ëœ ê²°ê³¼ë¥¼ ë” í™•ëŒ€í•˜ê±°ë‚˜ ì§€ì†ì ìœ¼ë¡œ ì¶œë ¥í•˜ê¸° ë•Œë¬¸ì— ê³µê°œë˜ì–´ìˆëŠ” í•™ìŠµëª¨ë¸ì„ ê·¸ëŒ€ë¡œ í™œìš©í•˜ëŠ” ê²ƒì€ ì‘ì—…ìì˜ ì˜ë„ì™€ëŠ” ë‹¤ë¥´ê²Œ í˜ëŸ¬í•  ìˆ˜ ìˆë‹¤. ë•Œë¬¸ì—, B2B ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ëŠ” ì°¸ì—¬ì ë¶„ì€ ìì£¼ ë³€ê²½ë˜ê³  ì¼ê´€ì„±ì—†ëŠ” í”„ë¡ íŠ¸ì—”ë“œë¥¼ ê´€ë¦¬í•˜ê³  í†µí•©í•˜ê¸° ìœ„í•´ ì‚¬ë‚´ í‘œì¤€ ì½”ë“œë“¤ì„ í•™ìŠµì‹œí‚¤ê³  ì´ë¥¼ í™œìš©í•  ê³„íšì„ ê³ ë ¤í•˜ê³  ìˆì—ˆë‹¤.</p>
<p>í‹°ì˜¤ë”ì˜ í•˜ë‹´ë‹˜ë„ í•™êµì—ì„œ ìƒì„±í˜• AIì™€ ê´€ë ¨í•˜ì—¬ í˜„ ê°œë°œì—ì„œì˜ ë¶„ìœ„ê¸°, ê·¸ë¦¬ê³  ë¯¸ë˜ì—ëŠ” ë§ì€ ë¶€ë¶„ì´ ì‚¬ëŒì„(ê°œë°œìë„) ëŒ€ì²´í•  ê²ƒì´ë¼ëŠ” ê°•ì˜ë¥¼ í–ˆê³ , ì§€ê¸ˆì˜ ìë…€ë“¤ì—ê²Œ ì½”ë”©ì„ ë°°ìš°ê²Œ í•˜ëŠ” ê²ƒì´ ì˜³ì€ì§€ì— ëŒ€í•œ ì§ˆë¬¸ì„ ë°›ì•˜ë‹¤ê³  í–ˆë‹¤.</p>
<blockquote>
<p>ë¯¸ë˜ì— ëª¨ë“ ê²ƒì„ AIê°€ ëŒ€ì²´í•œë‹¤ë©´, ì§€ê¸ˆ ì½”ë”©ì„ ë°°ìš°ëŠ”ê²Œ ì˜ë¯¸ ì—†ëŠ”ê±° ì•„ë‹Œê°€ìš”?</p>
</blockquote>
<p>ì´ëŸ° ì§ì—…ì  ìœ„ê¸°ëŠ” ë¹„ë‹¨ ìƒì„±í˜• AI ì´ì „ì—ë„ ìˆì—ˆë‹¤. ì‚°ì—…ì´ ë°œì „í•˜ë©´ì„œ ìë™í™”ë¡œ ì¸í•´ ë¡œë´‡ì´ ì œì¡° ê³µì •ì—ì„œ ì‚¬ëŒì´ í•˜ë˜ ì¼, ì¦‰, ë¬¼ë¦¬ì  ë…¸ë™ë ¥ì„ ëŒ€ì²´í•˜ëŠ” ê²ƒì— ëŒ€í•œ ìœ„ê¸°ê°€ ìˆì—ˆë‹¤. ê·¸ë¦¬ê³  ì´ì œëŠ” ì¸ê°„ì˜ ì§€ì‹ ë…¸ë™ë ¥ì„ ëŒ€ì²´í•˜ëŠ” ê²ƒìœ¼ë¡œ AIê°€ ê·¸ ìœ„í˜‘ìœ¼ë¡œ ë‹¤ê°€ì˜¤ê³  ìˆë‹¤.</p>
<p><a href="https://dbr.donga.com/article/view/1901/article_no/7176/ac/magazine" target="_blank" rel="noopener noreferrer">ì¸ê°„ì˜ ì§€ì‹ ë…¸ë™ ëŒ€ì²´í•˜ëŠ” ì¸ê³µì§€ëŠ¥, ì‹œì¥ ê²½ì œ ë¿Œë¦¬ë¶€í„° í”ë“¤ ê²ƒ</a></p>
<p>í˜¹ìëŠ” ì‚´ì•„ë‚¨ì„ ì§ì¢…ì´ ì°½ì¡°ì ì¸ ì¼, ì˜ˆìˆ ì´ë‚˜ ë¯¸ìˆ ì´ë¼ ì´ì•¼ê¸° í–ˆì§€ë§Œ, ì´ë¯¸ ëŒ€ì¤‘ì ì´ê³  ì¼ë°˜ì ì¸ ì¼ì„ ëŒ€ì²´ í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì€ ì•ì„  ê²Œì„ ì—…ê³„ì—ì„œì˜ ì¼ë¡œë„ ì¶©ë¶„íˆ ê·¸ë ‡ì§€ë§Œì€ ì•„ë‹ ê²ƒì„ì„ ì•Œë ¤ì£¼ê³  ìˆë‹¤. ë˜í•œ í™”ì œê°€ ë˜ì—ˆë˜ í…ŒìŠ¬ë¼ì˜ ë¡œë´‡ì´ ë¹¨ë˜ë¥¼ ì ‘ëŠ” ì˜ìƒì—ì„œë„ ë³´ì´ë“¯, ì„¬ì„¸í•œ ìš´ë™ëŠ¥ë ¥ë„ ê¸°ê³„ì™€ AIê°€ ê²°í•©í•˜ë©´ì„œ ê·¸ ê°€ëŠ¥ì„±ì„ ë³´ì—¬ì£¼ê³  ìˆë‹¤.</p>
<p><a href="https://www.forbes.com/sites/mattnovak/2024/01/15/elon-musks-latest-robot-video-accidentally-gives-away-the-magic-trick/?sh=323684afee4c" target="_blank" rel="noopener noreferrer">Elon Muskâ€™s Latest Robot Video Accidentally Gives Away The Magic Trick</a></p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/telegram-cloud-photo-size-5-6226272870942751266-y.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>2024ë…„ 2ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/97-2024/2024-02.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/97-2024/2024-02.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2024ë…„ 2ì›”</source>
      <description>2024ë…„ 2ì›” Update</description>
      <pubDate>Wed, 07 Feb 2024 07:41:40 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>HCP Vault Radar begins limited beta
<ul>
<li><a href="https://www.hashicorp.com/blog/hcp-vault-radar-begins-limited-beta" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ì‘ë…„ 2023ë…„ 10ì›” Hashiconf ì—ì„œ ê³µê°œëœ HCP Vault Radar ê°€ Alpha ë¥¼ ê±°ì³ Beta ê°€ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤. Beta ì—ì„œëŠ” RBAC/ABAC ì„ ì§€ì›í•˜ë©° ìŠ¤ìº”í•  ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ ë°ì´í„° ì†ŒìŠ¤ë„ ì„ ë³´ì…ë‹ˆë‹¤</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.7.2" target="_blank" rel="noopener noreferrer">1.7.2 Release</a>
<ul>
<li>terraform cloud ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” module ë‹¤ìš´ë¡œë“œ ì¬ì‹œë„ ë“± ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2024/v202401-1" target="_blank" rel="noopener noreferrer">1ì›” Release</a> ì¶œì‹œ (<code>v202401-1 (751)</code>)</li>
<li>2023ë…„ 9ì›” (v202309-1) ì— ì¶œì‹œëœ FDO ì„¤ì¹˜ë°©ì‹ê³¼ ê¸°ì¡´ Replicated ì„¤ì¹˜ë°©ì‹ì„ ì„ íƒí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” <code>consolidated_services_enabled</code> ì„¤ì • ì§€ì› ì¢…ë£Œ</li>
<li>Org ë‚´ ì—°ê²°ëœ VCS ì— ëŒ€í•œ Status Check ê°œì„ </li>
<li>Private Registry ê´€ë ¨ <a href="https://developer.hashicorp.com/terraform/cloud-docs/registry/publish-modules#branch-based-publishing-considerations" target="_blank" rel="noopener noreferrer">branch-based publishing workflow</a> ì™€ <a href="https://developer.hashicorp.com/terraform/enterprise/registry/test" target="_blank" rel="noopener noreferrer">automatically run tests for modules</a> ê¸°ëŠ¥ ì§€ì›</li>
<li>Plan and Apply ìˆ˜í–‰ ì‹œ ì¶”ê°€ ì˜µì…˜ì„ ì œê³µí•˜ì—¬ ì„ íƒí•œ ìì›ì— ëŒ€í•´ êµì²´ ë˜ë„ë¡ ì§€ì›</li>
<li>Workspace ì„¤ì •ì— Auto-apply run triggers ë¥¼ ë„ì…í•˜ì—¬ ì—°ê²°ëœ ë‹¤ë¥¸ Workspace ì— ë³€ê²½ ì‚¬í•­ ë°œìƒ ì‹œ ìë™ apply ë˜ë„ë¡ ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v5.35.0" target="_blank" rel="noopener noreferrer">AWS v5.35.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>aws_lexv2models_*</li>
<li>aws_bedrock_*</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>aws_redshift_cluster ì— ëŒ€í•´ multi_az ì„¤ì • ì¶”ê°€</li>
<li>aws_wafv2_rule_group ë° aws_wafv2_web_acl ì— header_order ì™€ field_to_match ì„¤ì • ì¶”ê°€</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>aws_networkmanager_core_network_policy_document ì— ëŒ€í•´ core_network_configuration.edge_locations ì— ëŒ€í•œ ìµœëŒ€ ì„¤ì • ì œí•œ ì œê±°</li>
<li>aws_cognito_user_group ì— ëŒ€í•´ user group ì´ë¦„ì— <code>/</code> ê°€ í¬í•¨ë˜ëŠ” ê²ƒ í—ˆìš©</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.90.0" target="_blank" rel="noopener noreferrer">Azure v3.90.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>azurerm_nginx_configuration</li>
<li>azurerm_virtual_desktop_workspace</li>
<li>azurerm_kubernetes_fleet_update_strategy</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>Resource Provider  ì¶”ê°€: Microsoft.AppConfiguration, Microsoft.DataFactory, Microsoft.SignalRService</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>azurerm_app_service_managed_certificate ì— ëŒ€í•´ app_service_plan_id ê°€ ëŒ€ì†Œë¬¸ì êµ¬ë¶„ì—†ì´ íŒŒì‹±ë˜ì–´ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_cognitive_deployment ì— ëŒ€í•´ version ì„¤ì • ì¶”ê°€</li>
<li>azurerm_mssql_managed_instance_failover_group ì— ëŒ€í•´ ë‹¤ë¥¸ subscription ì—ì„œ failover group ìƒì„±ì‹œ ë°œìƒí•˜ëŠ” ì´ìŠˆ í•´ê²°</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v5.15.0" target="_blank" rel="noopener noreferrer">GCP v5.15.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>google_compute_region_network_endpoint</li>
<li>google_netapp_volume_snapshot</li>
<li>google_compute_machine_types</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>google_compute_region_network_endpoint_group ì— ëŒ€í•´  INTERNET_IP_PORT ì™€ INTERNET_FQDN_PORT ì„¤ì • ì¶”ê°€</li>
<li>google_compute_region_instance_group_manager ì™€google_compute_instance_group_manager ì— ëŒ€í•´ creation_timestamp ì„¤ì • ì¶”ê°€</li>
<li>google_compute_disk ì— ëŒ€í•´ disk_id ì„¤ì • ì¶”ê°€</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>google_vmwareengine_private_cloud ì— ëŒ€í•´ provider upgrade ì‹œ ë°œìƒí•˜ëŠ” ì¬ìƒì„± ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.15.5
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.15.5" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>audit log ê´€ë ¨ log_raw ì„¤ì • ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” ë²„ê·¸ ê°œì„ </li>
<li>ui ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.17.2
<ul>
<li>
<p>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.17.2" target="_blank" rel="noopener noreferrer">Release Note</a></p>
</li>
<li>
<p>Known Issue: 1.17.2 ë° 1.16.5 ì—ì„œ Terminating Gatteway ê°€ TLS SAN ê²€ì¦ì„ ì—„ê²©í•˜ê²Œ ìˆ˜í–‰í•¨ìœ¼ë¡œ ì¸í•´ Service Mesh ì™¸ë¶€ Upstream ì„œë¹„ìŠ¤ ì—°ê²° ë°©ì§€</p>
</li>
<li>
<p>sameness-group ê¸°ë°˜ failover ìˆ˜í–‰ ì‹œ í•´ë‹¹ groupì´ ì†í•´ìˆëŠ” partition ì´ ì•„ë‹Œ ê¸°ë³¸ partition ìœ¼ë¡œ ì§ˆì˜ í•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </p>
</li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.7.3
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.7.3" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>exec driver ì— ëŒ€í•´ OOM ê°ì§€ ê´€ë ¨ ì§€ì›</li>
<li>Consul ì— ëŒ€í•´ admin partition ì§€ì›</li>
<li>1.5 ë° 1.6 client ì—ì„œ ë°œìƒí•˜ëŠ” template ê¸°ë°˜ Variable ë° Service ì‚¬ìš© ì˜¤ë¥˜ ê°œì„ </li>
<li>UI ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Terraform Cloud Agent ê°€ì´ë“œ</title>
      <link>https://docmoa.github.io/04-HashiCorp/03-Terraform/02-Config/terraform-cloud-agent-guide-custom.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/03-Terraform/02-Config/terraform-cloud-agent-guide-custom.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Terraform Cloud Agent ê°€ì´ë“œ</source>
      <description>TFE/TFCì—ì„œ Terraform Cloud Agent êµ¬ì„±</description>
      <pubDate>Mon, 08 Jan 2024 08:27:49 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Terraform Cloud Agent(Agent)ëŠ” Terraform Enterprise/Cloud(TFE/C)ì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•œ ì‚¬ìš©ì ì •ì˜ Terraform ì‹¤í–‰ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” Agentë¥¼ ì‚¬ìš©í•˜ì—¬ Terraform ì‹¤í–‰ì„ ìœ„í•´ ê¸°ë³¸ ì œê³µë˜ëŠ” ì´ë¯¸ì§€ ëŒ€ì‹  ì»¤ìŠ¤í…€ íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ëœ ë³„ë„ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ì´ë¯¸ì§€ ì‹¤í–‰ ìœ„ì¹˜ë¥¼ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì—ì„œ ìì²´ í˜¸ìŠ¤íŒ… í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/Monosnap Terraform Agent | onemodel 2024-01-08 14-40-18.png" alt="Monosnap Terraform Agent | onemodel 2024-01-08 14-40-18" tabindex="0" loading="lazy"><figcaption>Monosnap Terraform Agent | onemodel 2024-01-08 14-40-18</figcaption></figure>
<blockquote>
<p><a href="https://developer.hashicorp.com/terraform/cloud-docs/agents" target="_blank" rel="noopener noreferrer">Terraform Cloud Agents</a></p>
<p><a href="https://developer.hashicorp.com/terraform/enterprise/application-administration/agents-on-tfe" target="_blank" rel="noopener noreferrer">Terraform Cloud Agents on TFE</a></p>
<p><a href="https://developer.hashicorp.com/terraform/tutorials/cloud/cloud-agents" target="_blank" rel="noopener noreferrer">Manage private environments with Terraform Cloud agents</a></p>
</blockquote>
<h2>Terraform Enterprise/Cloud ìš”êµ¬ì‚¬í•­</h2>
<p>AgentëŠ” Pull ê¸°ë°˜ì´ë¯€ë¡œ Agentâ†’ TFE/C ë¡œ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ë°œìƒí•©ë‹ˆë‹¤. ì‹¤í–‰ë˜ëŠ” ëª¨ë“  AgentëŠ” Terraform ì‘ì—… ìˆ˜í–‰ì„ ìœ„í•´ TFE/Cë¥¼ í´ë§í•˜ê³  í•´ë‹¹ ì‘ì—…ì„ ë¡œì»¬ì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<p>TFE/Cì˜ ì œì•½ ë° ì°¨ì´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<p>|                        | TFE                       | TFC                   |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/Monosnap%20Terraform%20Agent%20%7C%20onemodel%202024-01-08%2014-40-18.png" type="image/png"/>
    </item>
    <item>
      <title>2024ë…„ 1ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/97-2024/2024-01.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/97-2024/2024-01.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2024ë…„ 1ì›”</source>
      <description>2024ë…„ 1ì›” Update</description>
      <pubDate>Tue, 02 Jan 2024 23:33:55 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>HashiCorp 2023 year in review: Community
<ul>
<li><a href="https://www.hashicorp.com/blog/hashicorp-2023-year-in-review-community" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ì‘ë…„ 2023ë…„ í•œ í•´ë™ì•ˆ ìˆì—ˆë˜ Hashicorp ê´€ë ¨ ì´ì•¼ê¸°: ê°œìµœëœ ì»¨í¼ëŸ°ìŠ¤ ë° ì´ë²¤íŠ¸ë¶€í„° ìƒˆë¡œ ì¶œì‹œëœ ì†”ë£¨ì…˜ ë³„ íŠ¸ë ˆì´ë‹ ë° ìê²©ì¦ ê´€ë ¨, ê·¸ë¦¬ê³  ì°½ì—…ì Mitchell Hashimoto ì˜ í‡´ì‚¬ ì†Œì‹ ë“±ì„ í•œ ë²ˆì— í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>
<p>Terraform</p>
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.6.6" target="_blank" rel="noopener noreferrer">1.6.6 Release</a>
<ul>
<li><code>terraform test</code> ê´€ë ¨ ì‹¤ì œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìì›ì— ëŒ€í•´ destroy ë¥¼ ìˆ˜í–‰í•˜ë ¤ëŠ” ì˜¤ë¥˜ì— ëŒ€í•œ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202312-1" target="_blank" rel="noopener noreferrer">12ì›” Release</a> ì¶œì‹œ (<code>v202312-1 (745)</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202312-1)</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/workspaces/variables/managing-variables#priority-variable-sets" target="_blank" rel="noopener noreferrer">Priorty Variable Set</a> ë¥¼ í†µí•´ ë³€ìˆ˜ì— ì§€ì •ë˜ëŠ” ê°’ì— ëŒ€í•œ ìš°ì„ ìˆœìœ„ ì„¤ì • ì§€ì›</li>
<li><code>terraform plan -out &lt;FILE&gt;</code> ë˜ëŠ” API í˜¸ì¶œ ì‹œ <code>save-plan</code> ì„ í™œìš©í•˜ì—¬ plan ì •ë³´ë¥¼ ì €ì¥ í›„ ì¶”í›„ apply ì‹œ í™œìš©í•˜ë„ë¡ ì§€ì›</li>
<li>Workspace ì˜ ìƒíƒœ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  <code>inactive</code> ì¸ Workspace ì— ëŒ€í•´ ìë™ destroy ìˆ˜í–‰ ì§€ì›</li>
<li>Known Issue: working directory ì„¤ì • ê´€ë ¨í•˜ì—¬ <code>Operation failed: failed packing filesystem: illegal slug error: invalid symlink</code> ì—ëŸ¬ ë°œìƒí•˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ 2024 1ì›” release ì—ì„œ patch ì˜ˆì •</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v5.31.0" target="_blank" rel="noopener noreferrer">AWS v5.31.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>aws_finspace_*</li>
<li>aws_ssoadmin_*</li>
<li>aws_polly_voices</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>aws_lb ì— ëŒ€í•´ connection_logs, dns_record_client_routing_policy ì„¤ì • ì¶”ê°€</li>
<li>aws_lb ì— ëŒ€í•´ ìì› ì¬ìƒì„± ê³¼ì • ì—†ì´ subnet_mapping ë˜ëŠ” subnets ë³€ê²½ ì§€ì›</li>
<li>aws_db_instance ì— ëŒ€í•´ IBM Db2 ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>aws_s3 ì˜ endpoint ê´€ë ¨ no such host ì˜¤ë¥˜ ê°œì„  ìœ„í•´ regional endpint ê¸°ë³¸ê°’ì„ <code>us-east-1</code> ë¡œ ì„¤ì •</li>
<li>aws_cloud_watch_log_group ê´€ë ¨ <code>invalid new value for .skip_destroy: was cty.False, but now null</code> ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_lb ê´€ë ¨ security_groups ì— ëŒ€í•œ update ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.85.0" target="_blank" rel="noopener noreferrer">Azure v3.85.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>azurerm_locations</li>
<li>azurerm_iotcentral_organization</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>azurerm_dns_txt_record ê´€ë ¨ record.value ì— ëŒ€í•´ 4096 ì í—ˆìš©</li>
<li>azurerm_linux_web_app ë° azurerm_linux_web_app_slot ê´€ë ¨ client_secret_setting_name ê³¼ client_secret_certificate_thumbprint ì— ëŒ€í•´ ì„ íƒì‚¬í•­ìœ¼ë¡œ ë³€ê²½í•˜ê³  app_settings ì„¤ì •ì— ëŒ€í•œ ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_windows_web_app ë° azurerm_windows_web_app_slot ê´€ë ¨ client_secret_setting_name ê³¼ client_secret_certificate_thumbprint ì— ëŒ€í•´ ì„ íƒì‚¬í•­ìœ¼ë¡œ ë³€ê²½í•˜ê³  app_settings ì„¤ì •ì— ëŒ€í•œ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>China region ì‚¬ìš© ì‹œ Azure Storage ì— ëŒ€í•œ ì¸ì¦ ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_virtual_machine ì— ëŒ€í•´ additional_capabilities ê²€ì¦ ì‹œ ë°œìƒí•˜ëŠ” íŒ¨ë‹‰ ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_storage_share_file ì— ëŒ€í•´ source ì •ë³´ ê³µë€ì¼ ì‹œ ë°œìƒí•˜ëŠ” íŒ¨ë‹‰ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v5.10.0" target="_blank" rel="noopener noreferrer">GCP v5.10.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>google_compute_region_disk</li>
<li>google_vmwareengine_*</li>
<li>google_workbench_instance_*</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>google_compute_network ì— ëŒ€í•´ numeric_id ì„¤ì • ì¶”ê°€</li>
<li>google_compute_per_instance_config, google_compute_region_per_instance_config ì— ëŒ€í•´ remove_instance_on_destroy ì„¤ì • ì¶”ê°€</li>
<li>google_container_node_pool ì— ëŒ€í•´ GKE tier 1 networking ì§€ì›ë˜ë„ë¡ network_performance_config ì„¤ì • ì¶”ê°€</li>
<li>google_container_node_pool ì— ëŒ€í•´ machine_type, disk_type, disk_size_gb ë°”ë¡œ update ê°€ëŠ¥í•˜ë„ë¡ ê°œì„ </li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>google_logging_project_sink ì— ëŒ€í•´ unique_writer_identity ì„¤ì • ë³€ê²½ ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Vault</p>
<ul>
<li>1.15.4
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.15.4" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-6337" target="_blank" rel="noopener noreferrer">CVE-2023-6337</a> &amp; <a href="https://discuss.hashicorp.com/t/hcsec-2023-34-vault-vulnerable-to-denial-of-service-through-memory-exhaustion-when-handling-large-http-requests/60741" target="_blank" rel="noopener noreferrer">HCSEC-2023-34</a> ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>sys/leader api í˜¸ì¶œ ì‹œ ë°œìƒ ê°€ëŠ¥í•œ deadlock ì˜¤ë¥˜ ê°œã…“ã……ã„´</li>
<li>ui ê´€ë ¨ ë²„ê·¸ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>
<p>Consul</p>
<ul>
<li>
<p>1.17.1</p>
<ul>
<li>
<p>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.17.1" target="_blank" rel="noopener noreferrer">Release Note</a></p>
</li>
<li>
<p>ì†ŒìŠ¤ì½”ë“œ Go 1.20.12 ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½ í•˜ì—¬</p>
<p><a href="https://nvd.nist.gov/vuln/detail/CVE-2023-45283" target="_blank" rel="noopener noreferrer">CVE-2023-45283</a>, <a href="https://nvd.nist.gov/vuln/detail/CVE-2023-45285" target="_blank" rel="noopener noreferrer">CVE-2023-45284</a>, <a href="https://nvd.nist.gov/vuln/detail/CVE-2023-39326" target="_blank" rel="noopener noreferrer">CVE-2023-39326</a>, <a href="https://nvd.nist.gov/vuln/detail/CVE-2023-45285" target="_blank" rel="noopener noreferrer">CVE-2023-45285</a> ê´€ë ¨ ì´ìŠˆ í•´ê²°</p>
</li>
<li>
<p>ACL ê´€ë ¨ nomad client templated policyì™€  api-gateway templated policy ì§€ì›</p>
</li>
<li>
<p><code>peering exported-services</code> ëª…ë ¹ì–´ ì¶”ê°€í•˜ì—¬ peer cluster ì—ê²Œ export í•œ service ëª©ë¡ í™•ì¸ ì§€ì›</p>
</li>
<li>
<p>Consul Telemetry Collector ì˜ <code>stats_flush_interval</code> ì— ëŒ€í•œ ê¸°ë³¸ê°’ì„ 60ì´ˆë¡œ ì§€ì •</p>
</li>
<li>
<p>Wan Federation ê´€ë ¨ Secondary DC ì— ëŒ€í•´ Replication ì„ ìœ„í•œ ë¶ˆí•„ìš”í•œ ì“°ê¸° ì‘ì—…ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ hash ì ìš©</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Nomad</p>
<ul>
<li>1.7.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.7.2" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li><strong>Reschedule on Lost</strong>: Node Down ë“±ìœ¼ë¡œ ì¤‘ì§€ëœ job ì— ëŒ€í•´ <code>nomad job stop</code> ë“±ì˜ ìˆ˜ë™ ê°œì…ì´ í•„ìš”í–ˆë˜ ë¶€ë¶„ì— ëŒ€í•´ ìë™ìœ¼ë¡œ reschedule ë°©ì§€ ë˜ë„ë¡ ì§€ì›</li>
<li>UI ì—ì„œ Task ì— ëŒ€í•œ ì˜ˆì œ template ì¶”ê°€</li>
<li>ì˜ëª»ëœ CPU ì •ë³´ ê¸°ë°˜ CPU Topology ì‘ì„± ì‹œ ë°œìƒí•˜ëŠ” íŒ¨ë‹‰ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Transit Key Exportable Deny</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/07-Sentinel-Sample/transit-secrets-key-exportable-deny.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/07-Sentinel-Sample/transit-secrets-key-exportable-deny.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Transit Key Exportable Deny</source>
      <description>Sentinel - Transit Secrets Key Exportable Option Deny</description>
      <pubDate>Mon, 18 Dec 2023 05:48:39 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Public Terraform Registry - Policy Library</p>
<p>Src : <a href="https://registry.terraform.io/policies/Great-Stone/vault-transit-exportable-deny" target="_blank" rel="noopener noreferrer">https://registry.terraform.io/policies/Great-Stone/vault-transit-exportable-deny</a></p>
</blockquote>
<h2>1. EGPìš© ì •ì±… ìƒì„± exportable_deny.sentinel</h2>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line">import <span class="token string">"strings"</span></span>
<span class="line"></span>
<span class="line"><span class="token property">exportable</span> <span class="token punctuation">=</span> request.data.exportable</span>
<span class="line"></span>
<span class="line"><span class="token property">exportable_check</span> <span class="token punctuation">=</span> <span class="token keyword">rule</span> <span class="token punctuation">{</span></span>
<span class="line">  exportable is <span class="token string">"false"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token property">main</span> <span class="token punctuation">=</span> <span class="token keyword">rule</span> <span class="token punctuation">{</span></span>
<span class="line">  exportable_check</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul>
<li><code>exportable_check</code> : ìš”ì²­ì˜ Bodyì— <code>exportable</code>ì˜ ê°’ì´ <code>false</code>ì¸ ê²½ìš°ì— <mark>TRUE</mark> ë°˜í™˜</li>
</ul>
<h2>2. EGPì— ì •ì±… ì„¤ì •</h2>
<p>EGPëŠ” ì§€ì •ëœ pathì— ëŒ€í•´ ì •ì±…ì„ ì ìš©</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token function">write</span> sys/policies/egp/exportable-check <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">policy</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span>base64 <span class="token parameter variable">-i</span> exportable-deny.sentinel<span class="token variable">)</span></span>"</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">paths</span><span class="token operator">=</span><span class="token string">"*"</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">enforcement_level</span><span class="token operator">=</span><span class="token string">"hard-mandatory"</span></span>
<span class="line"></span></code></pre></div><ul>
<li><code>paths</code>ë¡œ ì§€ì •ëœ API ê²½ë¡œì— ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ë™ì‘</li>
</ul>
<h2>3. í…ŒìŠ¤íŠ¸</h2>
<h3>3.1 Test Policy</h3>
<p><code>transit</code> ê²½ë¡œì— ëª¨ë“  ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ì</p>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line">vault policy write transit-admin - &lt;&lt; EOF</span>
<span class="line">path <span class="token string">"transit"</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"create"</span>, <span class="token string">"read"</span>, <span class="token string">"update"</span>, <span class="token string">"delete"</span>, <span class="token string">"list"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">path <span class="token string">"transit/*"</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"create"</span>, <span class="token string">"read"</span>, <span class="token string">"update"</span>, <span class="token string">"delete"</span>, <span class="token string">"list"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">EOF</span>
<span class="line"></span></code></pre></div><h3>3.2 Policy Token ìƒì„±</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token assign-left variable">VAULT_TOKEN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>vault token create <span class="token parameter variable">-policy</span><span class="token operator">=</span>transit-admin<span class="token variable">)</span></span></span>
<span class="line"></span></code></pre></div><h3>3.3 Sentinel í…ŒìŠ¤íŠ¸</h3>
<p><code>exportable</code> ì˜µì…˜ì´ <code>falseì¸</code> ê²½ìš° ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token function">write</span> <span class="token parameter variable">-f</span> transit/keys/my-key-name <span class="token assign-left variable">exportable</span><span class="token operator">=</span>false</span>
<span class="line"></span>
<span class="line">Key                       Value</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Kubernetesì— Vault Agent(Sidecar) ìˆ˜ë™ êµ¬ì„±</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/vault-k8s-manually-using-the-sidecar.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/vault-k8s-manually-using-the-sidecar.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Kubernetesì— Vault Agent(Sidecar) ìˆ˜ë™ êµ¬ì„±</source>
      <description>Vaultê°€ K8s Cluster APIì— Inboundê°€ ì•ˆë˜ëŠ” ê²½ìš°(ë³´ì•ˆ ì •ì±… ë•Œë¬¸ì—) Helm/VSO êµ¬ì„±ì´ ë¶ˆê°€ëŠ¥ í•˜ë¯€ë¡œ, ì´ ê²½ìš° ìˆ˜ë™ìœ¼ë¡œ Sidecarë¥¼ ë¶™ì—¬ì£¼ê±°ë‚˜ ë³„ë„ Vault Agent/Proxyë¥¼ êµ¬ì„±í•˜ì—¬ Outboundë¡œ ì²˜ë¦¬í•˜ë„ë¡ í•´ì¤˜ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•œë‹¤.</description>
      <pubDate>Mon, 04 Dec 2023 03:02:42 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Kubernetes(K8s)í™˜ê²½ì—ì„œ ì™¸ë¶€ Vault(External Vault Server)ì™€ ì—°ê³„í•˜ëŠ” ê²½ìš° ì¼ë°˜ì ìœ¼ë¡œ <code>kubernetes</code> ì¸ì¦ë°©ì‹ì„ í™œìš©í•˜ì—¬ Vaultì™€ K8s ê°„ í”Œë«í¼ ìˆ˜ì¤€ì—ì„œì˜ ì¸ì¦ì„ ì²˜ë¦¬í•˜ë‚˜, K8së¡œì˜ Cluster APIì— ëŒ€í•œ inboundê°€ ë§‰í˜€ìˆëŠ” ê²½ìš° ì´ê°™ì€ ë°©ì‹ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ <code>helm</code>, <code>vso</code> ê°™ì€ ë°©ì‹ì˜ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ Vault Agentë¥¼ Sidecarë¡œ í•¨ê»˜ ë°°í¬í•˜ëŠ” ê²½ìš° ìˆ˜ë™ìœ¼ë¡œ êµ¬ì„±í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/Monosnap Samsung MX - Multicloud - Vault | onemodel 2023-12-04 11-55-09.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<div class="hint-container tip">
<p class="hint-container-title">íŒ</p>
<p>êµ¬ì„± ê³¼ì •ì€ Vault Agentë¥¼ BM/VM í™˜ê²½ì— êµ¬ì„±í•˜ëŠ” ë°©ì‹ê³¼ ìœ ì‚¬í•˜ë©°, ê´€ë ¨ êµ¬ì„± íŒŒì¼ê³¼ ì¸ì¦ì„ ìœ„í•œ ì •ë³´ë¥¼ Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ í™œìš©í•œë‹¤ëŠ” ì°¨ì´ê°€ ìˆë‹¤.</p>
</div>
<p>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ Secret Engineì€ <code>kv-v2</code> ì´ë©°, <code>/secret</code> ê²½ë¡œì— í• ë‹¹í•˜ì˜€ë‹¤.</p>
<details class="hint-container details"><summary>Secret Example</summary>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault secrets <span class="token builtin class-name">enable</span> <span class="token parameter variable">-version</span><span class="token operator">=</span><span class="token number">2</span> <span class="token parameter variable">-path</span><span class="token operator">=</span>secret kv</span>
<span class="line"></span>
<span class="line">vault kv put secret/my-k8s-secret <span class="token assign-left variable">foo</span><span class="token operator">=</span>my-k8s-secret-data</span>
<span class="line"></span>
<span class="line">vault policy <span class="token function">write</span> my-secret - <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="line">path "secret/data/my-k8s-secret" {</span>
<span class="line">  capabilities = ["read"]</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre></div></details>
<h2>1.  Approle ì¸ì¦ ë°©ì‹</h2>
<p>AppRole ì¸ì¦ë°©ì‹ì„ í™œì„±í™” í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault auth <span class="token builtin class-name">enable</span> approle</span>
<span class="line"></span></code></pre></div><p>AppRoleì˜ <code>role</code>ì„ ìƒì„±í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault <span class="token function">write</span> auth/approle/role/k8s-role <span class="token punctuation">\</span></span>
<span class="line">    <span class="token assign-left variable">secret_id_ttl</span><span class="token operator">=</span>10m <span class="token punctuation">\</span></span>
<span class="line">    <span class="token assign-left variable">token_ttl</span><span class="token operator">=</span>60m <span class="token punctuation">\</span></span>
<span class="line">    <span class="token assign-left variable">token_max_ttl</span><span class="token operator">=</span>120m <span class="token punctuation">\</span></span>
<span class="line">    <span class="token assign-left variable">policies</span><span class="token operator">=</span>my-secret</span>
<span class="line"></span></code></pre></div><p><code>role_id</code>ë¥¼ í™•ì¸í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault <span class="token builtin class-name">read</span> auth/approle/role/k8s-role/role-id</span>
<span class="line"></span></code></pre></div><p><code>role_id</code>ì™€ <code>secret_id</code>ë¥¼  K8sì˜ Secretì— ì €ì¥í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># kubectl create secret generic vault-approle --from-literal=role_id=&lt;role-id-1234&gt; --from-literal=secret_id=&lt;s.1234567890abcdef&gt;</span></span>
<span class="line">kubectl create secret generic vault-approle <span class="token punctuation">\</span></span>
<span class="line">  --from-literal<span class="token operator">=</span>role_id<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>vault <span class="token builtin class-name">read</span> <span class="token parameter variable">-field</span><span class="token operator">=</span>role_id auth/approle/role/k8s-role/role-id<span class="token variable">)</span></span> <span class="token punctuation">\</span></span>
<span class="line">  --from-literal<span class="token operator">=</span>secret_id<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>vault <span class="token function">write</span> <span class="token parameter variable">-force</span> <span class="token parameter variable">-field</span><span class="token operator">=</span>secret_id auth/approle/role/k8s-role/secret-id<span class="token variable">)</span></span></span>
<span class="line"></span></code></pre></div><p>AppRoleë¡œ ì¸ì¦í•˜ëŠ” Vault Agentë¥¼ ìœ„í•œ êµ¬ì„± íŒŒì¼ì„ <code>vault-agent-config.hcl</code>ì— ì„¤ì •í•œë‹¤. ConfigMapì— ì €ì¥í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> kubectl create configmap vault-agent-config --from-file<span class="token operator">=</span>agent-config.hcl<span class="token operator">=</span>/dev/stdin</span></span>
<span class="line">vault {</span>
<span class="line">  address = "http://10.100.11.233:8200"</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">auto_auth {</span>
<span class="line">  method "approle" {</span>
<span class="line">    config = {</span>
<span class="line">      role_id_file_path = "/etc/vault/approle/role_id"</span>
<span class="line">      secret_id_file_path = "/etc/vault/approle/secret_id"</span>
<span class="line">    }</span>
<span class="line">  }</span>
<span class="line"></span>
<span class="line">  sink "file" {</span>
<span class="line">    config = {</span>
<span class="line">      path = "/etc/vault-agent-token/token"</span>
<span class="line">    }</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">template_config {</span>
<span class="line">	static_secret_render_interval = "20s"</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">template {</span>
<span class="line">  destination = "/etc/secrets/index.html"</span>
<span class="line">  contents = &lt;&lt;EOH</span>
<span class="line">  &lt;html&gt;</span>
<span class="line">  &lt;body&gt;</span>
<span class="line">  &lt;p&gt;Secret Value: {{ with secret "secret/data/my-k8s-secret" }}{{ .Data.data.foo }}{{ end }}&lt;/p&gt;</span>
<span class="line">  &lt;/body&gt;</span>
<span class="line">  &lt;/html&gt;</span>
<span class="line">  EOH</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre></div><p>AppRole IDê³¼ SecretID, Vault Agent Config ë¥¼ ì‚¬ìš©í•˜ëŠ” ìƒ˜í”Œ ì•±ì„ ì‹¤í–‰í•œë‹¤. ë‹¤ìŒì€ Nginxë¥¼ ì‚¬ìš©í•œ Deployment Yamlì˜ ì˜ˆì´ë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl apply <span class="token parameter variable">-f</span> - <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="line">apiVersion: apps/v1</span>
<span class="line">kind: Deployment</span>
<span class="line">metadata:</span>
<span class="line">  name: nginx-vault-demo</span>
<span class="line">spec:</span>
<span class="line">  replicas: 1</span>
<span class="line">  selector:</span>
<span class="line">    matchLabels:</span>
<span class="line">      app: nginx-vault-demo</span>
<span class="line">  template:</span>
<span class="line">    metadata:</span>
<span class="line">      labels:</span>
<span class="line">        app: nginx-vault-demo</span>
<span class="line">    spec:</span>
<span class="line">      containers:</span>
<span class="line">      - name: nginx</span>
<span class="line">        image: nginx:latest</span>
<span class="line">        ports:</span>
<span class="line">        - containerPort: 80</span>
<span class="line">        volumeMounts:</span>
<span class="line">        - name: html-volume</span>
<span class="line">          mountPath: /usr/share/nginx/html</span>
<span class="line">      - name: vault-agent-sidecar</span>
<span class="line">        image: hashicorp/vault:latest</span>
<span class="line">        args:</span>
<span class="line">          - "agent"</span>
<span class="line">          - "-config=/etc/vault/agent-config.hcl"</span>
<span class="line">        volumeMounts:</span>
<span class="line">        - name: vault-agent-config</span>
<span class="line">          mountPath: /etc/vault</span>
<span class="line">        - name: vault-approle</span>
<span class="line">          mountPath: /etc/vault/approle</span>
<span class="line">        - name: vault-token</span>
<span class="line">          mountPath: /etc/vault-agent-token</span>
<span class="line">        - name: html-volume</span>
<span class="line">          mountPath: /etc/secrets</span>
<span class="line">      volumes:</span>
<span class="line">      - name: vault-agent-config</span>
<span class="line">        configMap:</span>
<span class="line">          name: vault-agent-config</span>
<span class="line">      - name: vault-approle</span>
<span class="line">        secret:</span>
<span class="line">          secretName: vault-approle</span>
<span class="line">      - name: vault-token</span>
<span class="line">        emptyDir: {}</span>
<span class="line">      - name: html-volume</span>
<span class="line">        emptyDir: {}</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre></div><p>Nginxì˜ Serviceë¥¼ ë“±ë¡í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl apply <span class="token parameter variable">-f</span> - <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="line">apiVersion: v1</span>
<span class="line">kind: Service</span>
<span class="line">metadata:</span>
<span class="line">  name: nginx-service</span>
<span class="line">spec:</span>
<span class="line">  selector:</span>
<span class="line">    app: nginx-vault-demo</span>
<span class="line">  ports:</span>
<span class="line">    - protocol: TCP</span>
<span class="line">      port: 80</span>
<span class="line">      targetPort: 80</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre></div><p><code>port-forward</code>ë¥¼ ì´ìš©í•˜ì—¬ Nginxì—ì„œ ì •ìƒì ìœ¼ë¡œ ëœë”ë§ëœ vaultì˜ ì‹œí¬ë¦¿ì„ í¬í•¨í•œ í˜ì´ì§€ê°€ ë‚˜íƒ€ë‚˜ëŠ”ì§€ í™•ì¸í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl port-forward <span class="token variable"><span class="token variable">$(</span>kubectl get pods <span class="token parameter variable">-l</span> <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx-vault-demo <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.items[0].metadata.name}'</span><span class="token variable">)</span></span> <span class="token number">8080</span>:80</span>
<span class="line"></span></code></pre></div><figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/image-20231204105453607.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Vault Agent êµ¬ì„±íŒŒì¼ì—ì„œ <code>static_secret_render_interval</code>ì— ëŒ€í•œ ì •ì˜ê°€ ìˆìœ¼ë¯€ë¡œ, 20s ê°„ê²©ë§ˆë‹¤ ë³€ê²½ëœ KV ê°’ìœ¼ë¡œ ëœë”ë§í•˜ëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault kv put secret/my-k8s-secret <span class="token assign-left variable">foo</span><span class="token operator">=</span>my-k8s-secret-data-v2</span>
<span class="line"></span></code></pre></div><p>Pod ë‚´ì˜ <code>vault-agent-sidecar</code> ë¡œê·¸ì— <code>rendered</code> ë¡œê·¸ê°€ ê¸°ë¡ëœë‹¤.</p>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line">â”‚ <span class="token date number">2023-12-04T</span><span class="token time number">02:01:51.992Z</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span> <span class="token operator">(</span>runner<span class="token operator">)</span> rendered <span class="token string">"(dynamic)"</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"/etc/secrets/index.html"</span></span>
<span class="line"></span></code></pre></div><figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/image-20231204110230042.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h2>2. Cloud Provider ì¸ì¦ ë°©ì‹(e.g. AWS Auth)</h2>
<p>ë²”ìš©ì ì¸ AppRole ëŒ€ì‹  Cloud Providerì™€ì˜ ì¸ì¦ ë°©ì‹(ì—¬ê¸°ì„œëŠ” AWS ì¸ì¦ ë°©ì‹)ì„ ì‚¬ìš©í•˜ì—¬ Vaultì™€ í†µì‹ í•˜ëŠ” êµ¬ì„±ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<p>EKSì˜ ê²½ìš°, EKSì— ë°°í¬ë˜ëŠ” Vault AgentëŠ” AWS Roleì„ í™•ì¸ ê°€ëŠ¥í•˜ë¯€ë¡œ, AWS ì¸ì¦ ë°©ì‹ì€ Vaultê°€ AWSì˜ IAM ìê²©ì¦ëª…ì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ì„ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.</p>
<p>Vault AWS ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì‚¬ì „ì— Vault AWS ì¸ì¦ì— ì‚¬ìš©í•  Roleì´ í•„ìš”í•˜ë‹¤.(ì•„ë˜ëŠ” Terraformìœ¼ë¡œì˜ êµ¬ì„± ì˜ˆì œì´ë‹¤.)</p>
<details class="hint-container details"><summary>AWS Role create - Terraform Example</summary>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token keyword">provider<span class="token type variable"> "aws" </span></span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">region</span> <span class="token punctuation">=</span> <span class="token string">"ap-northeast-2"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_iam_role"</span></span> <span class="token string">"eks_vault_auth_role"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"eks-vault-auth-role"</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">assume_role_policy</span> <span class="token punctuation">=</span> jsonencode(<span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">Version</span> <span class="token punctuation">=</span> <span class="token string">"2012-10-17"</span>,</span>
<span class="line">    <span class="token property">Statement</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">Action</span> <span class="token punctuation">=</span> <span class="token string">"sts:AssumeRole"</span>,</span>
<span class="line">        <span class="token property">Effect</span> <span class="token punctuation">=</span> <span class="token string">"Allow"</span>,</span>
<span class="line">        <span class="token property">Principal</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">Service</span> <span class="token punctuation">=</span> <span class="token string">"ec2.amazonaws.com"</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span>)</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Vaultì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì—­í• ì— ëŒ€í•œ ì •ì±… (í•„ìš”ì— ë”°ë¼ ìˆ˜ì •)</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_iam_role_policy"</span></span> <span class="token string">"vault_access"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"VaultAccess"</span></span>
<span class="line">  <span class="token property">role</span> <span class="token punctuation">=</span> aws_iam_role.eks_vault_auth_role.id</span>
<span class="line"></span>
<span class="line">  <span class="token property">policy</span> <span class="token punctuation">=</span> jsonencode(<span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">Version</span> <span class="token punctuation">=</span> <span class="token string">"2012-10-17"</span>,</span>
<span class="line">    <span class="token property">Statement</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">Action</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">          <span class="token string">"ec2:DescribeInstances"</span>,</span>
<span class="line">          <span class="token string">"ec2:DescribeTags"</span></span>
<span class="line">        <span class="token punctuation">]</span>,</span>
<span class="line">        <span class="token property">Effect</span>   <span class="token punctuation">=</span> <span class="token string">"Allow"</span>,</span>
<span class="line">        <span class="token property">Resource</span> <span class="token punctuation">=</span> <span class="token string">"*"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span>)</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">output<span class="token type variable"> "role_arn" </span></span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">value</span> <span class="token punctuation">=</span> aws_iam_role.eks_vault_auth_role.arn</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details>
<p>Vault ì„œë²„ì—ì„œ AWS ì¸ì¦ ë°©ì‹ì„ í™œì„±í™”í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault auth <span class="token builtin class-name">enable</span> aws</span>
<span class="line"></span></code></pre></div><p>AWS ì—­í• ì„ ìƒì„±í•˜ê³ , í•´ë‹¹ ì—­í• ì— ì ì ˆí•œ ì •ì±…ì„ í• ë‹¹í•œë‹¤. ì´ ì—­í• ì€ EKSì—ì„œ ì‹¤í–‰ë˜ëŠ” ì„œë¹„ìŠ¤ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ Vaultì— ì¸ì¦í•  ë•Œ ì‚¬ìš©ëœë‹¤. (terraformìœ¼ë¡œ ìƒì„±í•œ ê²½ìš° role_arn outputì— ì¶œë ¥ëœ ê²°ê³¼ë¥¼ <code>bound_iam_principal_arn</code>ì— ì…ë ¥í•´ì¤€ë‹¤.)</p>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">vault write auth/aws/role/k8s-role \</span>
<span class="line">    auth_type=iam \</span>
<span class="line">    bound_iam_principal_arn="arn:aws:iam::&lt;AWS_ACCOUNT_ID&gt;:role/&lt;EKS_ROLE_NAME&gt;" \</span>
<span class="line">    policies=my-secret \</span>
<span class="line">    ttl=1h</span>
<span class="line"></span></code></pre></div><p>AWSë¡œ ì¸ì¦í•˜ëŠ” Vault Agentë¥¼ ìœ„í•œ êµ¬ì„± íŒŒì¼ì„ <code>vault-agent-config-aws.hcl</code>ì— ì„¤ì •í•œë‹¤. ConfigMapì— ì €ì¥í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> kubectl create configmap vault-agent-config-aws --from-file<span class="token operator">=</span>agent-config.hcl<span class="token operator">=</span>/dev/stdin</span></span>
<span class="line">vault {</span>
<span class="line">  address = "http://10.100.11.233:8200"</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">auto_auth {</span>
<span class="line">  method "aws" {</span>
<span class="line">    mount_path = "auth/aws"</span>
<span class="line">    config = {</span>
<span class="line">      type = "iam"</span>
<span class="line">      role = "k8s-role"</span>
<span class="line">    }</span>
<span class="line">  }</span>
<span class="line"></span>
<span class="line">  sink "file" {</span>
<span class="line">    config = {</span>
<span class="line">      path = "/etc/vault-agent-token/token"</span>
<span class="line">    }</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">template_config {</span>
<span class="line">	static_secret_render_interval = "20s"</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">template {</span>
<span class="line">  destination = "/etc/secrets/index.html"</span>
<span class="line">  contents = &lt;&lt;EOH</span>
<span class="line">  &lt;html&gt;</span>
<span class="line">  &lt;body&gt;</span>
<span class="line">  &lt;p&gt;Secret Value: {{ with secret "secret/data/my-k8s-secret" }}{{ .Data.data.foo }}{{ end }}&lt;/p&gt;</span>
<span class="line">  &lt;/body&gt;</span>
<span class="line">  &lt;/html&gt;</span>
<span class="line">  EOH</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre></div><p>DeploymentëŠ” ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ì—¬ ì ìš©í•œë‹¤.  AppRole êµ¬ì„±ì—ì„œì˜ ê´€ë ¨ ì„¤ì •ë“¤ì´ ì œì™¸ëœë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl apply <span class="token parameter variable">-f</span> - <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="line">apiVersion: apps/v1</span>
<span class="line">kind: Deployment</span>
<span class="line">metadata:</span>
<span class="line">  name: nginx-vault-demo</span>
<span class="line">spec:</span>
<span class="line">  replicas: 1</span>
<span class="line">  selector:</span>
<span class="line">    matchLabels:</span>
<span class="line">      app: nginx-vault-demo</span>
<span class="line">  template:</span>
<span class="line">    metadata:</span>
<span class="line">      labels:</span>
<span class="line">        app: nginx-vault-demo</span>
<span class="line">    spec:</span>
<span class="line">      containers:</span>
<span class="line">      - name: nginx</span>
<span class="line">        image: nginx:latest</span>
<span class="line">        ports:</span>
<span class="line">        - containerPort: 80</span>
<span class="line">        volumeMounts:</span>
<span class="line">        - name: html-volume</span>
<span class="line">          mountPath: /usr/share/nginx/html</span>
<span class="line">      - name: vault-agent-sidecar</span>
<span class="line">        image: hashicorp/vault:latest</span>
<span class="line">        args:</span>
<span class="line">          - "agent"</span>
<span class="line">          - "-config=/etc/vault/agent-config.hcl"</span>
<span class="line">        volumeMounts:</span>
<span class="line">        - name: vault-agent-config-aws</span>
<span class="line">          mountPath: /etc/vault</span>
<span class="line">        - name: vault-token</span>
<span class="line">          mountPath: /etc/vault-agent-token</span>
<span class="line">        - name: html-volume</span>
<span class="line">          mountPath: /etc/secrets</span>
<span class="line">      volumes:</span>
<span class="line">      - name: vault-agent-config</span>
<span class="line">        configMap:</span>
<span class="line">          name: vault-agent-config</span>
<span class="line">      - name: vault-token</span>
<span class="line">        emptyDir: {}</span>
<span class="line">      - name: html-volume</span>
<span class="line">        emptyDir: {}</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/picgo/Monosnap%20Samsung%20MX%20-%20Multicloud%20-%20Vault%20%7C%20onemodel%202023-12-04%2011-55-09.png" type="image/png"/>
    </item>
    <item>
      <title>2023ë…„ 11ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-11.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-11.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 11ì›”</source>
      <description>2023ë…„ 11ì›” Update</description>
      <pubDate>Fri, 03 Nov 2023 05:48:51 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>Infrastructure and security releases open HashiConf 2023
<ul>
<li><a href="https://www.hashicorp.com/blog/infrastructure-security-lifecycle-releases-open-hashiconf-2023" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ìƒŒí”„ë€ì‹œìŠ¤ì½”ì—ì„œ ê°œìµœëœ Hashiconf 2023 ì—ì„œ 8ê°€ì§€ì˜ ì†”ë£¨ì…˜ì— ëŒ€í•´ ê·¸ë£¹ì„ í¬ê²Œ Infrastructure ì™€ Security ë¡œ êµ¬ë¶„ì§€ì–´ ì•ìœ¼ë¡œì˜ ì†”ë£¨ì…˜ í¬íŠ¸í´ë¦¬ì˜¤ ë° ì—…ë°ì´íŠ¸ë¥¼ ì§„í–‰í•˜ë©°, Terraform test framework, Vault Secret Sync, Vault Radar ë“± ì›Œí¬í”Œë¡œìš° ê°œì„ ì„ ìœ„í•œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ê³µê°œí–ˆìŠµë‹ˆë‹¤. ìì„¸í•œ ì‚¬í•­ì€ í–‰ì‚¬ í˜„ì¥ì„ ì§ì ‘ ë‹¤ë…€ì˜¨ ì´ë“¤ì´ ì „í•´ì£¼ëŠ” <a href="https://www.linkedin.com/search/results/content/?fromMember=%5B%22ACoAABFOyc0BZBke7ai9SSnSjeoYufUuYByUFqo%22%5D&amp;heroEntityKey=urn%3Ali%3Afsd_profile%3AACoAABFOyc0BZBke7ai9SSnSjeoYufUuYByUFqo&amp;keywords=jin%20sol%20kim&amp;position=0&amp;searchId=ccb5024f-0353-4b04-a8e3-41e3bace4159&amp;sid=_%40V&amp;update=urn%3Ali%3Afs_updateV2%3A(urn%3Ali%3Aactivity%3A7126034287874699264%2CBLENDED_SEARCH_FEED%2CEMPTY%2CDEFAULT%2Cfalse)" target="_blank" rel="noopener noreferrer">Hashicorp Korea: Hashiconf 2023</a> ì—ì„œ í™•ì¸í•˜ì„¸ìš”!</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.6.0" target="_blank" rel="noopener noreferrer">1.6 Release</a>
<ul>
<li><code>terraform test</code> ê¸°ëŠ¥ ì¶”ê°€ - ì‘ì„±í•œ terraform code ì— ëŒ€í•´ .tftest.hcl code ë¥¼ ì‘ì„±í•˜ì—¬ ê²€ì¦ ì§€ì›</li>
<li>Terraform CLI ì„¤ì¹˜ ëŒ€ìƒ OS ìµœì†Œë²„ì „ ëª…ì‹œ
<ul>
<li>MacOS: 10.15 Catalina ì´ìƒ</li>
<li>Windows: Windows 10 ë˜ëŠ” Windows Server 2016 ì´ìƒ</li>
</ul>
</li>
<li>S3 Remote Backend ì„¤ì • ì‹œ AWS ì„œë¹„ìŠ¤ endpoint ì§€ì •ì— í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ ì •ì˜ - <code>AWS_ENDPOINT_URL_DYNAMODB</code>, <code>AWS_ENDPOINT_URL_IAM</code>, <code>AWS_ENDPOINT_URL_S3</code>, <code>AWS_ENDPOINT_URL_STS</code></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202310-1" target="_blank" rel="noopener noreferrer">10ì›” Release</a> ì¶œì‹œ (<code>v202310-1 (741)</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2)</li>
<li>v202309-1 release ë¶€í„° FDO (<a href="https://developer.hashicorp.com/terraform/enterprise/flexible-deployments" target="_blank" rel="noopener noreferrer">flexible deployment options</a>) ì§€ì›í•˜ë©°,<code>consolidated_services_enabled</code> ì„¤ì • ì—¬ë¶€ì— ë”°ë¼ ê¸°ì¡´ replicated ì„¤ì¹˜ ë°©ì‹ ì‚¬ìš© ì§€ì›.</li>
<li>Known Issue 1. Azure DevOps VCS ì—°ë™ ì‹œ ë°œìƒí•˜ëŠ” Known Issue ì— ëŒ€í•´ Azure DevOps Server ì˜ ë²„ì „ì„ <code>2020 Update 1.2 Patch 7</code> ë¡œ ì—…ê·¸ë ˆì´ë“œ í•˜ì—¬ í•´ê²°</li>
<li>Known Issue 2. GCP í™˜ê²½ì—ì„œ <code>consolidated_services_enabled</code> ì„¤ì • í™œì„±í™”í•˜ê³  ì„¤ì¹˜ ì‹œ ë°œìƒí•˜ëŠ” Object Storage Issue ëŠ” v202311-1 ì—ì„œ ê°œì„  ì˜ˆì •</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v5.23.1" target="_blank" rel="noopener noreferrer">AWS v5.23.1 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>Bug Fix
<ul>
<li>data-source/aws_lambda_function ì— ëŒ€í•´ vpc_config.ipv6_allowed_for_dual_stack ì„¤ì • ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.78.0" target="_blank" rel="noopener noreferrer">Azure v3.78.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>azurerm_resource_management_private_link_association</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>azurerm_redis_enterprise_cluster ì— ëŒ€í•œ Japan East ë¦¬ì „ ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>azurerm_backup_policy_vm ì— ëŒ€í•´ í˜„ì¬ ì‹œê°„ì •ë³´ ì‚¬ìš© ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v5.4.0" target="_blank" rel="noopener noreferrer">GCP v5.4.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>google_cloud_identity_group_lookup</li>
<li>google_network_connectivity_policy_based_route</li>
<li>google_pubsub_schema_iam_</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>google_bigquery_connection ì— ëŒ€í•´ cloud_spanner.use_serverless_analytics ì„¤ì • ëŒ€ì‹  cloud_spanner.use_data_boost ì„¤ì • ì§€ì›</li>
<li>google_bigquery_connection ì— ëŒ€í•´ cloud_spanner.database_role, cloud_spanner.use_data_boost, cloud_spanner.max_parallelism ì„¤ì • ì§€ì›</li>
<li>google_bigquery_dataset.access ì— ëŒ€í•´ iam_member ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>google_bigquery_capacity_commitment ì— ëŒ€í•´ ì˜ëª»ëœ capacity_commitment_id ì„¤ì •ìœ¼ë¡œ ì¸í•œ ìì› ì¬ìƒì„± ì˜¤ë¥˜ ê°œì„ </li>
<li>cloudrunv2 ì— ëŒ€í•´ annotations ê·¸ë¦¬ê³  labels ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.15.1
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.15.1" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Secret Sync ê´€ë ¨ telemetry ì¶”ê°€</li>
<li>UI ê°œì„ </li>
<li>Audit Device ì„¤ì • ê´€ë ¨ <code>file</code> ì‚¬ìš© ì‹œ SIGHUP ì—ì„œ ë°œìƒí•˜ëŠ” log file ì¬ì—´ê¸° ì˜¤ë¥˜ ê°œì„ </li>
<li>AWS Auth Method ê´€ë ¨ Client Config ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë°œìƒí•˜ëŠ” íŒ¨ë‹‰ ì˜¤ë¥˜ ê°œì„ </li>
<li>Transit Engine ê´€ë ¨ managed key ì‚¬ìš© ì‹œ sign/verify ê³¼ì • ì¶”ê°€ key auto rotation ë¶ˆê°€í•˜ë„ë¡ ê°œì„ </li>
<li>DB Secret Engine ê´€ë ¨ Mongo DB ì— ëŒ€í•´ admin ì´ ì•„ë‹Œ ê³„ì •ì— ëŒ€í•œ root rotate ì§€ì›</li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.16.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.16.2" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Vault ì™€ ì—°ë™í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ì¸ì¦ì„œ ê´€ë ¨ Leaf Cert ìƒì„± ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>Snapshot ê¸°ë°˜ ë³µì› í›„ Envoy Endpoint ì˜¬ë°”ë¥´ê²Œ ìƒì„±ë˜ì§€ ì•ŠëŠ” ì´ìŠˆ í•´ê²°</li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.6.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.6.2" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Service Mesh ìœ„í•´ Consul ì—°ë™ ì‹œ upstream ì„¤ì • ê´€ë ¨ DestinationPeer, DestinationType, LocalBindSocketPath ë“± ì„¤ì • ì§€ì›</li>
<li>jobspec ê´€ë ¨ ì—¬ëŸ¬ê°œì˜ cron ì •ì˜ë¥¼ ìœ„í•´ crons ì§€ì›</li>
<li>UI ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>2023ë…„ 10ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-10.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-10.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 10ì›”</source>
      <description>2023ë…„ 10ì›” Update</description>
      <pubDate>Thu, 05 Oct 2023 03:27:21 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>Creating a multi-cloud golden image pipeline with Terraform Cloud and HCP Packer
<ul>
<li><a href="https://www.hashicorp.com/blog/multicloud-golden-image-pipeline-terraform-cloud-hcp-packer" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ì¡°ì§ ë‚´ í´ë¼ìš°ë“œ ì‚¬ìš©í™˜ê²½ì—ì„œ "í‘œì¤€í™”" ë˜ì§€ ì•Šì€ VM OS Image ë¡œ ì¸í•´ ì¥ì•  ë°œìƒ ì‹œ ì¼€ì´ìŠ¤ë¥¼ í‘œì¤€í™” í•˜ì§€ ëª»í•˜ê³  ëŒ€ì‘ì— ë¯¸ì§„í•œ ê²½ìš°ë¥¼ ì¢…ì¢… ì ‘í•˜ê³¤ í•©ë‹ˆë‹¤. Hashicorp Packer ì™€ Terraform ì„ ì—°ë™í•˜ì—¬ ì¡°ì§ ë‚´ ì‚¬ìš©ì¤‘ì¸ ê° í´ë¼ìš°ë“œ í™˜ê²½ ë§ˆë‹¤ Golden OS Image ë¥¼ êµ¬ì„±í•˜ê³  ì´ë¥¼ í™œìš©í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ ìì› ë°°í¬í•˜ëŠ” ê³¼ì •ê¹Œì§€ì˜ ë¼ì´í”„ì‚¬ì´í´ì„ "í‘œì¤€í™”" í•¨ìœ¼ë¡œì¨ ë³´ë‹¤ ë” íš¨ìœ¨ì ì´ê³  ì•ˆì •ì ì¸ ì‹œìŠ¤í…œ í™˜ê²½ì„ êµ¬ì„±í•´ë³´ì„¸ìš”.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.5.7" target="_blank" rel="noopener noreferrer">1.5.7 Release</a>
<ul>
<li><code>terraform init</code> ìˆ˜í–‰ ì‹œ ì˜ëª»ëœ ê²½ë¡œë¡œ ëª¨ë“ˆì„ ë‹¤ìš´ë¡œë“œ í•˜ëŠ” ê²½ìš°ì— ëŒ€í•œ ì˜¤ë¥˜ ê°œì„ </li>
<li><code>terraform remote state</code> ê´€ë¦¬ ì‹œ ë°œìƒ ê°€ëŠ¥í•œ state ê°„ í˜¸í™˜ì„± ë¶ˆì¼ì¹˜ì— ëŒ€í•œ ì´ìŠˆ ë°©ì§€</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202309-1" target="_blank" rel="noopener noreferrer">9ì›” Release</a> ì¶œì‹œ (<code>v202309-1 (733)</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2)</li>
<li>ê¸°ì¡´ì— ìˆ˜ì‹­ ê°€ì§€ì˜ container ë¡œ ë¶„ì‚° êµ¬ì„±ë˜ì–´ ìˆë˜ ì„œë¹„ìŠ¤ êµ¬ì„±ì„ ë‹¨ì¼ container ë¡œ í†µí•© (terraform-enterprise). ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ <a href="https://developer.hashicorp.com/terraform/enterprise/flexible-deployments" target="_blank" rel="noopener noreferrer">flexible deployment options</a> ë¡œì¨ VM ë˜ëŠ” K8S ë“± ë‹¤ì–‘í•œ í”Œë«í¼ì— ì„¤ì¹˜ ë° êµ¬ë™ë°©ì‹ ì œê³µ</li>
<li>Azure DevOps VCS ì—°ë™ ì‹œ ë°œìƒí•˜ëŠ” Known Issue ì— ëŒ€í•´ Azure DevOps Server ì˜ ë²„ì „ì„ <code>2020 Update 1.2 Patch 7</code> ë¡œ ì—…ê·¸ë ˆì´ë“œ í•˜ì—¬ í•´ê²°</li>
<li>Terraform Enterprise ë¡œê·¸ì¸ ì§„í–‰ í›„ ë°œìƒí•˜ëŠ” <code>step-up</code> ì¶”ê°€ ì¸ì¦ ì´ìŠˆì— 10ì›” Release ì—ì„œ ê°œì„  ì˜ˆì •</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v5.19.0" target="_blank" rel="noopener noreferrer">AWS v5.19.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>aws_s3_bucket_object ì— ëŒ€í•´ AWS SDK for Go v2 ì˜ ì •ì±…ì— ë”°ë¼ metadata ì˜ keys ì •ë³´ëŠ” í•­ìƒ ì†Œë¬¸ìë¡œ ë°˜í™˜</li>
<li>aws_s3_object ì— ëŒ€í•´ AWS SDK for Go v2 ì˜ ì •ì±…ì— ë”°ë¼ metadata ì˜ keys ì •ë³´ëŠ” í•­ìƒ ì†Œë¬¸ìë¡œ ë°˜í™˜</li>
</ul>
</li>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>aws_rds_custom_db_engine_version</li>
<li>aws_vpclattice_service_network</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>aws_cloudfront_distribution ì— ëŒ€í•´ aws_cloudfront_continuous_deployment_policy ê°€ ì—…ë°ì´íŠ¸ ë¨ì— ë”°ë¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_iam_* ì— ëŒ€í•´ policy ì— ì¡´ì¬ í•˜ëŠ” ì¤‘ë³µ í‚¤ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” validation ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.75.0" target="_blank" rel="noopener noreferrer">Azure v3.75.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>azurerm_application_load_balancer</li>
<li>azurerm_resource_management_private_link</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>azurerm_kubernetes_cluster ì— ëŒ€í•´ network_profile.network_policy ë¥¼ cilium ìœ¼ë¡œ migration í•˜ë„ë¡ ì§€ì›</li>
<li>azurerm_log_analytics_workspace ì— ëŒ€í•´ data_collection_rule_id ì„¤ì • ì§€ì›</li>
<li>azurerm_mysql_flexible_server ì— ëŒ€í•´ io_scaling_enabled ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>azurerm_api_management_api ì— ëŒ€í•´ openapi format ì˜ íŒŒì¼ import ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_key_vault_certificate ì— ëŒ€í•´ soft-deleted ëœ ì¸ì¦ì„œ ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v5.0.0" target="_blank" rel="noopener noreferrer">GCP v5.0.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>google_scc_folder_custom_module</li>
<li>google_scc_organization_custom_module</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>default labels, terraform_labels, effective_labels ë“± label ê´€ë ¨ ê¸°ëŠ¥ ê°œì„ </li>
<li>provider level ì˜ credentials, access_token, impersonate_service_account ë“±ì˜ ì •ë³´ ê²€ì¦</li>
<li>terraform import ì‹œ gcp resource id ì— ëŒ€í•œ ì˜¨ì „í•œ ë§¤í•‘ ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>bigquery ì— ëŒ€í•´ view ì™€ materialized view ìƒì„± ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>bigtable ì— ëŒ€í•´ í´ëŸ¬ìŠ¤í„°ê°€ ì—…ë°ì´íŠ¸ ì¤‘ì´ê±°ë‚˜ storage íƒ€ì… ë³€ê²½ ì‹œ ë°œìƒí•˜ëŠ” google_bigtable_instance ì¬ìƒì„± ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.15
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.15.0" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Auth Method (alicloud, azure, cf, gcp, jet, k8s, oci ë“±) plugin ë²„ì „ ì—…ê·¸ë ˆì´ë“œ</li>
<li>RGP (Role Governing Policies) ì„¤ì • ì‹œ Namespace ë‹¨ìœ„ë¡œ ì ìš©</li>
<li>System Backend Pathì— ì ‘ê·¼ ê°€ëŠ¥í•œ Administrative Namespace ë„ì… (ê¸°ì¡´ì—ëŠ” root ë§Œ ê°€ëŠ¥)</li>
<li>UI ìƒì—ì„œ KV v2 ì˜ Path ì •ë³´ì— ëŒ€í•œ ë³µì‚¬ ê¸°ëŠ¥ ì§€ì›í•˜ì—¬ CLI ë˜ëŠ” API ì—ì„œì˜ í™œìš© í¸ì˜ì„± ì¦ê°€</li>
<li>UI ì²« í˜ì´ì§€ì— Dashbaord ë„ì…</li>
<li>SAML Auth Method ì§€ì›</li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.16.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.16.2" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Vault ì™€ ì—°ë™í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ì¸ì¦ì„œ ê´€ë ¨ Leaf Cert ìƒì„± ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>Snapshot ê¸°ë°˜ ë³µì› í›„ Envoy Endpoint ì˜¬ë°”ë¥´ê²Œ ìƒì„±ë˜ì§€ ì•ŠëŠ” ì´ìŠˆ í•´ê²°</li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.6.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.6.2" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Service Mesh ìœ„í•´ Consul ì—°ë™ ì‹œ upstream ì„¤ì • ê´€ë ¨ DestinationPeer, DestinationType, LocalBindSocketPath ë“± ì„¤ì • ì§€ì›</li>
<li>jobspec ê´€ë ¨ ì—¬ëŸ¬ê°œì˜ cron ì •ì˜ë¥¼ ìœ„í•´ crons ì§€ì›</li>
<li>UI ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Vault +1.12 ë¼ì´ì„ ìŠ¤</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/06-Config/vault-entierprise-license.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/06-Config/vault-entierprise-license.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault +1.12 ë¼ì´ì„ ìŠ¤</source>
      <description>Vault +1.12 ë¼ì´ì„ ìŠ¤ ê´€ë ¨ URL https://developer.hashicorp.com/vault/docs/enterprise/license/faq#q-how-do-the-license-termination-changes-affect-upgrades License ê¸°í•œ ì˜í–¥ë„ expiration : ì—”í„°...</description>
      <pubDate>Tue, 26 Sep 2023 23:02:12 GMT</pubDate>
      <content:encoded><![CDATA[
<div class="hint-container tip">
<p class="hint-container-title">ê´€ë ¨ URL</p>
<p><a href="https://developer.hashicorp.com/vault/docs/enterprise/license/faq#q-how-do-the-license-termination-changes-affect-upgrades" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/docs/enterprise/license/faq#q-how-do-the-license-termination-changes-affect-upgrades</a></p>
</div>
<h2>License ê¸°í•œ ì˜í–¥ë„</h2>
<ul>
<li>expiration : ì—”í„°í”„ë¼ì´ì¦ˆ ì‚¬ìš© ê¸°ê°„ì˜ ë§Œë£Œ</li>
<li>termination : ë¼ì´ì„ ìŠ¤ ì‚¬ìš© ì¢…ë£Œ</li>
<li>expiration ~ termination ê¸°ê°„ì„ ìœ ì˜ˆê¸°ê°„ì´ë¼ í•˜ë©°, ì´ ë•Œ VaultëŠ” ì ê¹€(Seal)</li>
<li>ë¼ì´ì„ ìŠ¤ ì ìš© ê°€ì´ë“œ
<ul>
<li><a href="https://www.hashicorp.com/products/vault/trial" target="_blank" rel="noopener noreferrer">https://www.hashicorp.com/products/vault/trial</a></li>
<li>í‰ê°€ ë¼ì´ì„ ìŠ¤ëŠ” ìœ ì˜ˆê¸°ê°„ì´ 1ì¼</li>
<li>í‰ê°€ ìš”ì²­(í•œêµ­): <a href="mailto:korea@hasihcorp.com" target="_blank" rel="noopener noreferrer">korea@hasihcorp.com</a></li>
</ul>
</li>
</ul>
<h2>ë¼ì´ì„ ìŠ¤ exprire(ê¸°ê°„ ë§Œë£Œ)</h2>
<ul>
<li>
<p>License</p>
<ul>
<li>Expiration : 2022-6-19</li>
<li>Termination : 2032-6-18</li>
</ul>
</li>
<li>
<p>ì¸¡ì • ì‹œì  : 2022-12-9</p>
</li>
<li>
<p>Case 1 : Vault ë°”ì´ë„ˆë¦¬ê°€ ë¦´ë¦¬ì¦ˆëœ ì‹œì ì´ expiration ê¸°ê°„ë³´ë‹¤ ì´ì „ì¸ ê²½ìš°</p>
<ul>
<li>
<p>ì‹¤í–‰ ê°€ëŠ¥</p>
</li>
<li>
<p>ì‚¬ìš©ì€ ë¶ˆê°€</p>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token date number">2022-12-09T</span><span class="token time number">14:39:09.474+0900</span> <span class="token punctuation">[</span><span class="token level error important">ERROR</span><span class="token punctuation">]</span> <span class="token property">core.licensing:</span> <span class="token property">core:</span> <span class="token property">licensing error:</span> expiration_time<span class="token operator">=</span><span class="token string">"2022-06-19 00:00:00 +0000 UTC"</span> time_left<span class="token operator">=</span><span class="token operator">-</span>4157h39m9s</span>
<span class="line"></span></code></pre></div></li>
</ul>
</li>
<li>
<p>Case 2 : Vault ë°”ì´ë„ˆë¦¬ê°€ ë¦´ë¦¬ì¦ˆëœ ì‹œì ì´ expiration ê¸°ê°„ë³´ë‹¤ ì´í›„ì¸ ê²½ìš°</p>
<ul>
<li>
<p>ì‹¤í–‰ ë¶ˆê°€</p>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token property">Error initializing core:</span> <span class="token property">licensing could not be initialized:</span> <span class="token property">license validation failed:</span> <span class="token number">1</span> error occurred<span class="token operator">:</span></span>
<span class="line">	<span class="token operator">*</span> license expiration date is before version build date</span>
<span class="line"></span></code></pre></div></li>
</ul>
</li>
<li>
<p>Case 3 : í‰ê°€ ë¼ì´ì„ ìŠ¤ì˜ Termination ì‹œì  ì´í›„</p>
<ul>
<li>ì‹¤í–‰ ë¶ˆê°€</li>
</ul>
</li>
<li>
<p>Case 3 : ì¼ë°˜ ë¼ì´ì„ ìŠ¤ì˜ Termination ì‹œì  ì´í›„</p>
<ul>
<li>ë°”ì´ë„ˆë¦¬ ë¦´ë¦¬ì¦ˆ ê¸°ì¤€ìœ¼ë¡œ expiration ê¸°ê°„ê³¼ ë¹„êµí•˜ì—¬ Case1, 2ì™€ ê°™ì´ ë™ì‘</li>
</ul>
</li>
</ul>
<h2>ë¼ì´ì„ ìŠ¤ ê°±ì‹ </h2>
<p>expirationë˜ì—ˆì§€ë§Œ ì‹¤í–‰ì€ ê°€ëŠ¥í•œ ì´ìœ </p>
<ul>
<li>ìš´ì˜ì¤‘ì¸ ê²½ìš° í”„ë¡œì„¸ìŠ¤ ë‹¤ìš´ì€ ë°œìƒí•˜ì§€ ì•ŠìŒ</li>
<li><code>/sys/config/reload/license</code> ë¡œ ë³€ê²½ëœ í™˜ê²½ë³€ìˆ˜ ë˜ëŠ” íŒŒì¼ì„ ë‹¤ì‹œ ì½ìŒ
<ul>
<li>ë‚´ìš© : <a href="https://developer.hashicorp.com/vault/docs/enterprise/license/autoloading" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/docs/enterprise/license/autoloading</a></li>
<li>êµ¬ì„± íŒŒì¼ì—ì„œ <code>license_path</code>ë¡œ ì§€ì •ëœ íŒŒì¼ ê²½ë¡œ ì…ë ¥</li>
<li>í™˜ê²½ ë³€ìˆ˜ <code>VAULT_LICENSE</code>ì— ë¼ì´ì„ ìŠ¤ ë‚´ìš© ì…ë ¥</li>
<li>í™˜ê²½ ë³€ìˆ˜ <code>VAULT_LICENSE_PATH</code>ì— ë¼ì´ì„ ìŠ¤ íŒŒì¼ ê²½ë¡œ ì…ë ¥</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Transit (Import)</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/02-Secret_Engine/transit-import.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/02-Secret_Engine/transit-import.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Transit (Import)</source>
      <description>Vault Transit - Import (BYOK)</description>
      <pubDate>Thu, 21 Sep 2023 10:38:22 GMT</pubDate>
      <content:encoded><![CDATA[
<p>í‚¤ ê°€ì ¸ì˜¤ê¸°(Import) ê¸°ëŠ¥ì€ HSM, ì‚¬ìš©ì ì •ì˜ í‚¤, ê¸°íƒ€ ì™¸ë¶€ ì‹œìŠ¤í…œì—ì„œ ê¸°ì¡´ í‚¤ë¥¼ ê°€ì ¸ì™€ì•¼ í•˜ëŠ” ê²½ìš°ë¥¼ ì§€ì›í•œë‹¤. ê³µê°œí‚¤(Public Key)ë§Œì„ ê°€ì ¸ì˜¬ ìˆ˜ë„ ìˆë‹¤.</p>
<div class="hint-container info">
<p class="hint-container-title">links</p>
<ul>
<li>
<p>Article : <a href="https://support.hashicorp.com/hc/en-us/articles/9742464723987-Importing-keys-into-transit-secret-engine-BYOK" target="_blank" rel="noopener noreferrer">https://support.hashicorp.com/hc/en-us/articles/9742464723987-Importing-keys-into-transit-secret-engine-BYOK</a></p>
</li>
<li>
<p>CLI : <a href="https://developer.hashicorp.com/vault/docs/commands/transit/import" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/docs/commands/transit/import</a></p>
</li>
<li>
<p>API : <a href="https://developer.hashicorp.com/vault/api-docs/secret/transit#import-key" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/api-docs/secret/transit#import-key</a></p>
</li>
</ul>
</div>
<h2>1. CLI</h2>
<p><code>transit import</code>ì™€ <code>transit import-version</code>ì€ <a href="https://developer.hashicorp.com/vault/docs/secrets/transit#bring-your-own-key-byok" target="_blank" rel="noopener noreferrer">BYOK ë©”ì»¤ë‹ˆì¦˜</a>ì„ í†µí•´ ì‚¬ìš©ìê°€ ìƒì„±í•œ í‚¤ë¥¼ Transit ì—”ì§„ì—ì„œ ì‚¬ìš©í•  í‚¤ë¡œ ê°€ì ¸ì˜¨ë‹¤.</p>
<ul>
<li><code>transit import</code> : í‚¤ë¥¼ ìƒˆ í‚¤ë¡œ ê°€ì ¸ì˜¤ë©° ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ìš° ì‹¤íŒ¨</li>
<li><code>transit import-version</code> : ê¸°ì¡´ í‚¤ë¥¼ ìƒˆ ë²„ì „ì˜ í‚¤ë¡œ ì—…ë°ì´íŠ¸</li>
</ul>
<h2>2. OpenSSLì„ ì‚¬ìš©í•˜ì—¬ ì•”ë³µí˜¸í™”</h2>
<p><code>openssl</code>ì„ ì´ìš©í•˜ì—¬ RSA í‚¤ë¥¼ ìƒì„±í•´ë³´ê³ , ë°ì´í„°ë¥¼ ì•”í˜¸í™” ë° ë³µí˜¸í™”</p>
<h3>2.1 RSA í‚¤ ìƒì„±</h3>
<p>ë¨¼ì € <code>openssl</code>ì„ ì´ìš©í•˜ì—¬ RSA í‚¤ìŒì„ ìƒì„±í•œë‹¤. ì´ ì˜ˆì—ì„œëŠ” 2048ë¹„íŠ¸ í‚¤ë¥¼ ìƒì„±í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># Private í‚¤</span></span>
<span class="line">openssl genrsa <span class="token parameter variable">-out</span> private_key.pem <span class="token number">2048</span></span>
<span class="line"><span class="token comment"># Public í‚¤</span></span>
<span class="line">openssl rsa <span class="token parameter variable">-pubout</span> <span class="token parameter variable">-in</span> private_key.pem <span class="token parameter variable">-out</span> public_key.pem</span>
<span class="line"></span></code></pre></div><p><code>private_key.pem</code>ì— ê°œì¸ í‚¤ê°€ ì €ì¥ë˜ê³  <code>public_key.pem</code>ì— ê³µê°œ í‚¤ê°€ ì €ì¥ëœë‹¤.</p>
<div class="hint-container note">
<p class="hint-container-title">ìƒì„±ëœ PEM ì˜ˆì œ</p>

</div>
]]></content:encoded>
    </item>
    <item>
      <title>Error: state snapshot was created by Terraform vX.Y.Z</title>
      <link>https://docmoa.github.io/04-HashiCorp/03-Terraform/04-TroubleShooting/error-state-snapshot-was-created-by-terraform-version.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/03-Terraform/04-TroubleShooting/error-state-snapshot-was-created-by-terraform-version.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Error: state snapshot was created by Terraform vX.Y.Z</source>
      <description>Terraform Azure AdminUsername Error</description>
      <pubDate>Wed, 20 Sep 2023 02:21:13 GMT</pubDate>
      <content:encoded><![CDATA[
<table>
<thead>
<tr>
<th>Log</th>
</tr>
</thead>
<tbody>
<tr>
<td>Error: state snapshot was created by Terraform v0.13.2, which is newer than current v0.12.26; upgrade to Terraform v0.13.2 or greater to work with this state</td>
</tr>
</tbody>
</table>
<ul>
<li>ë²„ì „ê´€ë ¨ ì—ëŸ¬ ë©”ì‹œì§€ì— ëŒ€í•´ ëª‡ê°€ì§€ í…ŒìŠ¤íŠ¸ í•´ë³¸ ê²°ê³¼, ìƒìœ„ë²„ì „ìœ¼ë¡œ Terraform Stateê°€ ìƒì„± ëœ ì´í›„ í•˜ìœ„ ë²„ì „ìœ¼ë¡œ  Refresh/Plan/Apply ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ì— ë°œìƒí•˜ëŠ” ê²ƒìœ¼ë¡œ í™•ì¸</li>
<li><code>terraform_remote_state</code> ëŠ” ë²„ì „ì— ê´€ê³„ ì—†ì´ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê°„ì— outputì„ ì½ì–´ì˜¬ ìˆ˜ ìˆìŒì„ í™•ì¸</li>
</ul>
<h2>Example</h2>
<ul>
<li>0.12.x ë¡œ ìƒì„±ëœ stateì—ì„œ 0.13.xë¡œ Refresh/Plan/Apply ìˆ˜í–‰ ì‹œ stateì˜ ë²„ì „ì´ ì—…ê·¸ë ˆì´ë“œ ë¨</li>
<li>0.13.x ë¡œ ìƒì„±ëœ stateì—ì„œ 0.12.xë¡œ Refresh/Plan/Apply ìˆ˜í–‰ ì‹œ ë™ì¼í•œ ì—ëŸ¬ ë°œìƒ<br>
</li>
<li>0.13.xë¡œ ìƒì„±ëœ stateë¥¼ "terraform_remote_state"ë¡œ ë‹¤ë¥¸ 0.12.xì¸ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ ì½ì–´ì˜¤ëŠ” ê²½ìš° ì •ìƒì ìœ¼ë¡œ ë™ì‘</li>
</ul>
<p>ë”°ë¼ì„œ, ê´€ë ¨ ì—ëŸ¬ê°€ ë°œìƒí•œ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì˜ ì„¤ì •ì—ì„œ ìµœì¢…ì ìœ¼ë¡œ ìƒì„œëœ stateì˜ ë²„ì „ê³¼ ë™ì¼í•œ ì‹¤í–‰ ë²„ì „ì¸ì§€ í™•ì¸ì´ í•„ìš”í•˜ë‹¤. (ì•„ë˜ ìº¡ì³ì™€ ê°™ì´ State ë²„ì „ì´ ì„¤ì •ì˜ Terraform Version ë³´ë‹¤ ë†’ì€ ê²½ìš° ì—ëŸ¬ ë°œìƒ)</p>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line highlighted">  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"terraform_version"</span><span class="token operator">:</span> <span class="token string">"0.13.7"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"serial"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"lineage"</span><span class="token operator">:</span> <span class="token string">"83b1b4d5-826a-ecc9-ce4a-ea41f06f93af"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"outputs"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"uuid_from_0_13"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"34ee63e3-860b-1a1b-c0fa-1546f922be5a-0.12"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"resources"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"data"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"terraform_remote_state"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"v0_13"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"provider"</span><span class="token operator">:</span> <span class="token string">"provider[\"terraform.io/builtin/terraform\"]"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"instances"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        </span>
<span class="line">      <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div>
]]></content:encoded>
    </item>
    <item>
      <title>Private Platform</title>
      <link>https://docmoa.github.io/02-PrivatePlatform/</link>
      <guid>https://docmoa.github.io/02-PrivatePlatform/</guid>
      <source url="https://docmoa.github.io/rss.xml">Private Platform</source>
      <description>Private Platform Recent pages [ {{ (new Date(page.frontmatter.date)).toLocaleString() }} ]</description>
      <pubDate>Mon, 18 Sep 2023 13:12:54 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Recent pages</h2>
<ul>
  <li v-for="page in pages" :key="page.key">
    <a :to="page.path" href="undefined" target="_blank">{{ page.title }}</a>
    <span v-if="page.frontmatter.date">
      [ {{ (new Date(page.frontmatter.date)).toLocaleString() }} ]
    </span>
  </li>
</ul>]]></content:encoded>
    </item>
    <item>
      <title>Public Cloud</title>
      <link>https://docmoa.github.io/03-PublicCloud/</link>
      <guid>https://docmoa.github.io/03-PublicCloud/</guid>
      <source url="https://docmoa.github.io/rss.xml">Public Cloud</source>
      <description>Public Cloud Recent pages [ {{ (new Date(page.frontmatter.date)).toLocaleString() }} ]</description>
      <pubDate>Mon, 18 Sep 2023 13:12:54 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Recent pages</h2>
<ul>
  <li v-for="page in pages" :key="page.key">
    <a :to="page.path" href="undefined" target="_blank">{{ page.title }}</a>
    <span v-if="page.frontmatter.date">
      [ {{ (new Date(page.frontmatter.date)).toLocaleString() }} ]
    </span>
  </li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Kubernetes</title>
      <link>https://docmoa.github.io/07-Kubernetes/</link>
      <guid>https://docmoa.github.io/07-Kubernetes/</guid>
      <source url="https://docmoa.github.io/rss.xml">Kubernetes</source>
      <description>Kubernetes Recent pages [ {{ (new Date(page.frontmatter.date)).toLocaleString() }} ]</description>
      <pubDate>Mon, 18 Sep 2023 13:12:54 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Recent pages</h2>
<ul>
  <li v-for="page in pages" :key="page.key">
    <a :to="page.path" href="undefined" target="_blank">{{ page.title }}</a>
    <span v-if="page.frontmatter.date">
      [ {{ (new Date(page.frontmatter.date)).toLocaleString() }} ]
    </span>
  </li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Guides</title>
      <link>https://docmoa.github.io/00-Howto/02-Guide/</link>
      <guid>https://docmoa.github.io/00-Howto/02-Guide/</guid>
      <source url="https://docmoa.github.io/rss.xml">Guides</source>
      <description>Guides</description>
      <pubDate>Mon, 18 Sep 2023 13:12:54 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>Tips</title>
      <link>https://docmoa.github.io/00-Howto/03-Tips/</link>
      <guid>https://docmoa.github.io/00-Howto/03-Tips/</guid>
      <source url="https://docmoa.github.io/rss.xml">Tips</source>
      <description>Tips</description>
      <pubDate>Mon, 18 Sep 2023 13:12:54 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>Alibaba Cloud</title>
      <link>https://docmoa.github.io/03-PublicCloud/AlibabaCloud/</link>
      <guid>https://docmoa.github.io/03-PublicCloud/AlibabaCloud/</guid>
      <source url="https://docmoa.github.io/rss.xml">Alibaba Cloud</source>
      <description>Alibaba Cloud</description>
      <pubDate>Mon, 18 Sep 2023 13:12:54 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>Azure</title>
      <link>https://docmoa.github.io/03-PublicCloud/Azure/</link>
      <guid>https://docmoa.github.io/03-PublicCloud/Azure/</guid>
      <source url="https://docmoa.github.io/rss.xml">Azure</source>
      <description>Azure</description>
      <pubDate>Mon, 18 Sep 2023 13:12:54 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>NCP(Naver Cloud Platform)</title>
      <link>https://docmoa.github.io/03-PublicCloud/NCP/</link>
      <guid>https://docmoa.github.io/03-PublicCloud/NCP/</guid>
      <source url="https://docmoa.github.io/rss.xml">NCP(Naver Cloud Platform)</source>
      <description>NCP(Naver Cloud Platform)</description>
      <pubDate>Mon, 18 Sep 2023 13:12:54 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>2023ë…„ 9ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-09.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-09.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 9ì›”</source>
      <description>2023ë…„ 9ì›” Update</description>
      <pubDate>Mon, 04 Sep 2023 03:12:14 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>Terraform ephemeral workspaces public beta now available
<ul>
<li><a href="https://www.hashicorp.com/blog/terraform-ephemeral-workspaces-public-beta-now-available" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ê°œë°œ ë° í…ŒìŠ¤íŠ¸ ë“±ì„ ìœ„í•´ ì„ì‹œë¡œ ì‚¬ìš©í•˜ëŠ” Workspace ì— ëŒ€í•´ ì‚¬ìš© ì™„ë£Œ í›„ ë°©ì¹˜í•¨ìœ¼ë¡œ ì¸í•´ ë°œìƒë˜ëŠ” ìì› ë‚­ë¹„ ë˜ëŠ” ë³´ì•ˆ ìœ ì¶œ ìœ„í—˜ì„±ì„ ë°©ì§€í•˜ê³ ì Workspace ì‚¬ìš©ì— ëŒ€í•´ ë¯¸ë¦¬ ì‹œê°„ ì„¤ì •ì„ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ë² íƒ€ë¡œ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ, ì •í•´ë†“ì€ íƒ€ì´ë¨¸ê°€ ë„ë˜í•˜ë©´ Workspace ì™€ í•´ë‹¹ Workspace ë¥¼ í†µí•´ ìƒì„±í•œ ìì›ì„ ìë™ íê¸° ë° ì •ë¦¬í•¨ìœ¼ë¡œì¨ ìì› ê´€ë¦¬ì˜ íš¨ìœ¨ì„±ì„ ë†’ì´ê³  ë¯¸ì‚¬ìš© ìì›ì— ëŒ€í•œ ë³´ì•ˆ ìœ ì¶œ ë“±ì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë² íƒ€ ë²„ì „ì€ Terraform Cloud (Plus ìš”ê¸ˆì œ ì´ìƒ) ì—ì„œ ì²´í—˜ ë° ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.5.6" target="_blank" rel="noopener noreferrer">1.5.6 Release</a>
<ul>
<li>ì—¬ëŸ¬ ê°œì˜ <code>terraform_remote_state</code> ë¥¼ ì½ì–´ ì˜¤ëŠ” ì¤‘ ë°œìƒ ê°€ëŠ¥í•œ ì˜¤ë¥˜ì— ëŒ€í•œ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202308-1" target="_blank" rel="noopener noreferrer">8ì›” Release</a> ì¶œì‹œ (<code>v202308-1 (725)</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2)</li>
<li>Postgres DB v14.0, v14.1, v14.2, v14.3 ì— ëŒ€í•œ ì§€ì› ì¢…ë£Œ</li>
<li>TFE êµ¬ë™ì„ ìœ„í•œ Container êµ¬ì„±ì´  <code>terraform-enterprise</code> ë¼ëŠ” ë‹¨ì¼ Container ë¡œ í†µí•©. <code>terraform plan</code> ë˜ëŠ” <code>terraform apply</code> ëŠ” ê¸°ì¡´ ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ ìˆ˜í–‰ ë•Œë§ˆë‹¤ agent container ìƒì„± (ì ìš©ì‹œì : <code>v202309-1</code> ë¶€í„° ì ìš©)</li>
<li>Docker 19.03, 20.10 ì§€ì› ì¢…ë£Œ</li>
<li><code>dynamic provider credentials</code> ì— ëŒ€í•´ Workspace ë‚´ Provider ë‹¹ ì„¤ì • ì§€ì›</li>
<li>UI ì¶œë ¥ ë° Cloud Provider ì‚¬ìš© ìœ„í•œ Key ê²€ì¦ ì²˜ë¦¬ ë“± ì„±ëŠ¥ ê°œì„ </li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v5.15.0" target="_blank" rel="noopener noreferrer">AWS v5.15.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>aws_efs_file_system ì— ëŒ€í•´ name ì„¤ì • ì§€ì›</li>
<li>aws_datasync_location_fsx_openzfs_file_system ì— ëŒ€í•´ <code>setting protocol: Invalid address to set</code> ì˜¤ë¥˜ ìˆ˜ì •</li>
<li>aws_opensearch_domain ì— ëŒ€í•´ cluster_config.multi_az_with_standby_enabled ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>tag ì‚¬ìš© ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_efs_file_system_policy ì— ëŒ€í•´ IAM ê´€ë ¨ ì¼ê´€ì„± ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_kms_key ì— ëŒ€í•´ tag ì •ë³´ê°€ ê³µë€ì¼ ë•Œ ë°œìƒí•˜ëŠ” <code>tag propagation: timeout while waiting for state to become 'TRUE'</code> ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.71.0" target="_blank" rel="noopener noreferrer">Azure v3.71.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>azurerm_databricks_workspace_root_dbfs_customer_managed_key</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>azurerm_kubernetes_cluster ì— ëŒ€í•´ sysctl_config ì„¤ì • ê°€ëŠ¥ ë²”ìœ„ í™•ëŒ€</li>
<li>azurerm_linux(windows)_virtual_machine_scale_set ì— ëŒ€í•´ ìì› ì‚­ì œ ì „ rolling upgrade ì·¨ì†Œ ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>ìë™ ë³µêµ¬ë¥¼ ìœ„í•œ win32_status ì„¤ì • ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê´€ë ¨ azurerm_linux_web_app, azurerm_linux_web_app_slot, azurerm_windows_web_app, azurerm_windows_web_app_slot ìì›ì— ëŒ€í•´ win32_status_code (3.63.0 ì´í›„ ë²„ì „ì—ì„œëŠ” intë¡œ ìœ ì§€) ë¡œ ëŒ€ì²´</li>
<li>azurerm_kubernetes_cluster ì— ëŒ€í•´ public_network_access_enabled ì„¤ì • ì‚­ì œ</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.80.0" target="_blank" rel="noopener noreferrer">GCP v4.80.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>google_certificate_manager_trust_config</li>
<li>google_compute_region_security_policy_rule</li>
<li>google_sql_database_instance_latest_recovery_time</li>
<li>google_iam_deny_policy</li>
<li>google_bigquery_bi_reservation</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>google_compute_target_instance ì— ëŒ€í•´ security_policy ì„¤ì • ì§€ì›</li>
<li>google_compute_target_pool ì— ëŒ€í•´ security_policy ì„¤ì • ì§€ì›</li>
<li>google_compute_instance ì— ëŒ€í•´ regional disk ì§€ì›</li>
<li>google_container_cluster ì— ëŒ€í•´ additional_pod_ranges_config ì„¤ì • ì§€ì›</li>
<li>google_dns_response_policy ì— ëŒ€í•´ networks ì„¤ì • ì§€ì› ì œê±°</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>bigquery ì— ëŒ€í•´ table schema ëŒ€ìƒ policy set ì„¤ì • í•´ì œ ì§€ì›</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.14.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.14.2" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Azure Auth Method ì— ëŒ€í•´ Auto auth ìœ„í•œ Azure Workload Identity Federation ì„¤ì • ì§€ì›</li>
<li>KMIP ì— ëŒ€í•´ Namespace Lock/Unlock ì„¤ì • ì§€ì›</li>
<li>Replication ê´€ë ¨ Flush ë‹¨ê³„ì—ì„œ ì“°ê¸° ì§€ì›í•˜ì—¬ Index ì¬ìƒì„± ì‘ì—…ì— ì˜í–¥ ì£¼ì§€ ì•Šë„ë¡ ê°œì„ </li>
<li>Vault Agent Template ì— ëŒ€í•´ VAULT_CACERT_BYTES í™˜ê²½ë³€ìˆ˜ ì‚¬ìš© ì§€ì›</li>
<li>Transform Engine ê´€ë ¨ Standby Node ì—ì„œ ë°œìƒí•˜ëŠ” ì¸ì½”ë”© ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.16.1
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.16.1" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li><code>consul members</code> ëª…ë ¹ì–´ì— ëŒ€í•´ -filter ì„¤ì • ì¶”ê°€</li>
<li>operator/usage api ì— ëŒ€í•´ node ìˆ˜ ì¶œë ¥ ì§€ì› (CLI ì‚¬ìš© ì‹œ consul operator usage ëª…ë ¹ì–´ ì‚¬ìš©)</li>
<li>Service Mesh ê´€ë ¨ Virtual Service ë° Failover ì— ëŒ€í•œ  Transparent Proxy ì„±ëŠ¥ ê°œì„ </li>
<li>Topology ê´€ì  UI ì¶œë ¥ ê°œì„ </li>
<li>Envoy Proxy ê´€ë ¨ xDS configuration ì™„ë£Œë˜ê¸° ì „ êµ¬ë™ ë˜ì–´ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>RSA Key ì— ëŒ€í•´ ì‚¬ì´ì¦ˆê°€ 2048 bits ì´í•˜ì—¬ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë¥¼ ê²€ì¦ ë‹¨ê³„ì—ì„œ ë¯¸ë¦¬ í™•ì¸í•˜ë„ë¡ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.6.1
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.6.1" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Datacenter ë‚´ Client Node ì— ëŒ€í•´ ë…¼ë¦¬ì  íŒŒí‹°ì…˜ìœ¼ë¡œ êµ¬ë¶„ì§€ì–´ Job ë°°í¬ ì‹œ í•´ë‹¹í•˜ëŠ” Pool ì—ë§Œ ë°°í¬ë˜ë„ë¡ í•˜ëŠ” Node Pool ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Namespace ë¥¼ ìƒì„±í•˜ê³  ê° Namespace ë³„ ê¸°ë³¸ Node Pool ì§€ì • ë° ë°°í¬ í—ˆìš© ì—¬ë¶€ë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” Node Pool Governance ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Job Status ë° Job Deployments ì— ëŒ€í•œ UI ê°œì„ </li>
<li>Job Spec ì†ŒìŠ¤ì½”ë“œì— ëŒ€í•œ ê¸°ì¡´ Raw JSON ì§€ì›í–ˆë˜ ë¶€ë¶„ì— ëŒ€í•´ ì†ŒìŠ¤ì½”ë“œ ì›ë¬¸ì„ UI ìƒì—ì„œ í™•ì¸ ë° ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ ê°œì„ </li>
<li>Podman ì •ì‹ ì§€ì›</li>
<li>Job restart ëª…ë ¹ì–´ ì§€ì› (ê¸°ì¡´ì—ëŠ” stop í›„ start)</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Nomadì—ì„œ Ansibleë¡œ Docker ì„¤ì¹˜ì™€ Template ì£¼ì˜ì‚¬í•­</title>
      <link>https://docmoa.github.io/04-HashiCorp/07-Nomad/05-SampleJob/install-ansible-docker.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/07-Nomad/05-SampleJob/install-ansible-docker.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Nomadì—ì„œ Ansibleë¡œ Docker ì„¤ì¹˜ì™€ Template ì£¼ì˜ì‚¬í•­</source>
      <description>Nomadì—ì„œ Aisnble ì‹¤í–‰ ë° í…œí”Œë¦¿ ì£¼ì˜ì‚¬í•­</description>
      <pubDate>Wed, 30 Aug 2023 07:59:20 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ì°¸ê³  : <a href="https://discuss.hashicorp.com/t/escape-characters-recognized-as-a-variable-in-template-stanza/40525" target="_blank" rel="noopener noreferrer">https://discuss.hashicorp.com/t/escape-characters-recognized-as-a-variable-in-template-stanza/40525</a></p>
</blockquote>
<p>Nomadë¥¼ í†µí•´ Opsì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ <code>sysbatch</code> íƒ€ì…ì˜ Jobì— Ansibleì„ <code>raw_exec</code>ë¡œ ì‹¤í–‰í•˜ë©´ ì „ì²´ ë…¸ë“œì—ì„œ ì¼ê´„ë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.</p>
<p>Ansibleì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¬¸ë²• ì¤‘ <code>{{}}</code>ì˜ ë¶€í˜¸ë¡œ íŒ©íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° Nomadì—ì„œ ì‚¬ìš©í•˜ëŠ” Templateì˜ <code>{{}}</code>ê³¼ ê²¹ì³ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.</p>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token property">Template failed:</span> <span class="token operator">(</span>dynamic<span class="token operator">)</span><span class="token operator">:</span> parse<span class="token operator">:</span> template<span class="token operator">:</span> <span class="token operator">:</span><span class="token number">23</span><span class="token operator">:</span> function <span class="token string">"ansible_distribution_release"</span> not defined</span>
<span class="line"></span></code></pre></div><p>ì´ê²½ìš° Nomadì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ í‘œê¸°í•˜ì—¬ í…œí”Œë¦¿ ë¬¸ìì— ëŒ€í•œ ì¹˜í™˜ì´ ê°€ëŠ¥í•˜ë‹¤.</p>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"> <span class="token punctuation">{</span><span class="token punctuation">{</span> --&gt; <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token string">"{{"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">}</span> --&gt; <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token string">"}}"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>ë‹¤ìŒì€ Ansibleì—ì„œ <code>apt_repository</code> ìˆ˜í–‰ ì‹œ <code>ansible_architecture</code>ì™€ <code>ansible_distribution_release</code> ê°™ì€ íŒ©íŠ¸ ê°’ì„ Templateìœ¼ë¡œ Playbookì„ ì‘ì„±í•œ ì˜ˆì œ ì´ë‹¤.</p>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line">job <span class="token string">"install-ansible-docker"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">datacenters</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"hashitalks-kr"</span><span class="token punctuation">]</span>  <span class="token comment"># ì‚¬ìš©í•  ë°ì´í„° ì„¼í„° ì´ë¦„ìœ¼ë¡œ ìˆ˜ì •</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">"sysbatch"</span>  <span class="token comment"># ë°°ì¹˜ ì‘ì—… ìœ í˜•</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">constraint</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">attribute</span> <span class="token punctuation">=</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>attr<span class="token punctuation">.</span>os<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>"</span></span>
<span class="line">    <span class="token property">value</span>     <span class="token punctuation">=</span> <span class="token string">"ubuntu"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">parameterized</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">payload</span>       <span class="token punctuation">=</span> <span class="token string">"forbidden"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  group <span class="token string">"install- group"</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    task <span class="token string">"install-ansible-task"</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">lifecycle</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">hook</span> <span class="token punctuation">=</span> <span class="token string">"prestart"</span></span>
<span class="line">        <span class="token property">sidecar</span> <span class="token punctuation">=</span> <span class="token boolean">false</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      </span>
<span class="line">      <span class="token property">driver</span> <span class="token punctuation">=</span> <span class="token string">"raw_exec"</span>  <span class="token comment"># ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">config</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">command</span> <span class="token punctuation">=</span> <span class="token string">"local/install_ansible.sh"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">destination</span> <span class="token punctuation">=</span> <span class="token string">"local/install_ansible.sh"</span></span>
<span class="line">        <span class="token property">data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;EOF</span>
<span class="line">#!/bin/bash</span>
<span class="line">sudo apt-get update</span>
<span class="line">sudo apt-get install -y ansible</span>
<span class="line">EOF</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    task <span class="token string">"install-docker-task"</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">driver</span> <span class="token punctuation">=</span> <span class="token string">"raw_exec"</span>  <span class="token comment"># ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">config</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">command</span> <span class="token punctuation">=</span> <span class="token string">"ansible-playbook"</span></span>
<span class="line">        <span class="token property">args</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">          <span class="token string">"local/playbook.yml"</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">env</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">JAVA_VERSION</span> <span class="token punctuation">=</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>NOMAD_META_DesiredJavaVersion<span class="token punctuation">}</span></span>"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">destination</span> <span class="token punctuation">=</span> <span class="token string">"local/playbook.yml"</span></span>
<span class="line">        <span class="token property">data</span> <span class="token punctuation">=</span> &lt;&lt;EOF</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Key Management</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/02-Secret_Engine/keymgmt.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/02-Secret_Engine/keymgmt.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Key Management</source>
      <description>Key Management - AWS, Azure, GCP</description>
      <pubDate>Sun, 06 Aug 2023 23:41:33 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Key Management Secret Engineì„ í™œì„±í™” í•˜ê¸° ìœ„í•´ì„œëŠ” <code>ADP</code> ìˆ˜ì¤€ì˜ ë¼ì´ì„ ìŠ¤ê°€ í•„ìš”í•˜ë‹¤.</p>
</blockquote>
<p>Key Management ì‹œí¬ë¦¿ ì—”ì§„ì€ KMS(Key Management Service)ë¥¼ ê³µê¸‰í•˜ëŠ” ëŒ€ìƒì˜ ì•”í˜¸í™” í‚¤ì˜ ë°°í¬ ë° ìˆ˜ëª… ì£¼ê¸° ê´€ë¦¬ë¥¼ ìœ„í•œ ì›Œí¬í”Œë¡œë¥¼ ì œê³µí•œë‹¤. KMS ê³µê¸‰ì ê³ ìœ ì˜ ì•”í˜¸í™” ê¸°ëŠ¥ì„ ê¸°ì¡´ì²˜ëŸ¼ ì‚¬ìš©í•˜ë©´ì„œë„, ë³¼íŠ¸ì—ì„œ í‚¤ë¥¼ ì¤‘ì•™ ì§‘ì¤‘ì‹ìœ¼ë¡œ ì œì–´í•  ìˆ˜ ìˆë‹¤.</p>
<p>ë³¼íŠ¸ëŠ” KMSì˜ êµ¬ì„±ì— ì‚¬ìš©ë˜ëŠ” Key Meterial ì›ë³¸ì„ ìƒì„±í•˜ì—¬ ë³´ìœ í•œë‹¤. ê´€ë¦¬ê°€ëŠ¥í•œ KMSì— ëŒ€í•´ í‚¤ ìˆ˜ëª…ì£¼ê¸°ë¥¼ ì„¤ì • ë° ê´€ë¦¬í•˜ë©´ Key Meterialì˜ ë³µì‚¬ë³¸ì´ ëŒ€ìƒì— ë°°í¬ëœë‹¤. ì´ ë°©ì‹ìœ¼ë¡œ ë³¼íŠ¸ëŠ” KMS ì„œë¹„ìŠ¤ì˜ ì „ì²´ ìˆ˜ëª… ì£¼ê¸° ê´€ë¦¬ ë° í‚¤ ë³µêµ¬ ìˆ˜ë‹¨ì„ ì œê³µí•œë‹¤. ì§€ì›ë˜ëŠ” KMSëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li>AWS KMS</li>
<li>Azure Key Vault</li>
<li>GCP Cloud KMS</li>
<li>PKCS#11 í˜¸í™˜</li>
</ul>
<p>Key Managementì˜ êµ¬ì„± ë° ë™ì‘ì˜ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ol>
<li>
<p>Key Management ì‹œí¬ë¦¿ ì—”ì§„ì¸ <code>keymgmt</code>ë¥¼ í™œì„±í™”</p>
</li>
<li>
<p>í‚¤ ìƒì„±</p>
<ul>
<li><code>type</code> : í‚¤ ìœ í˜•
<ul>
<li>AWS KMS ì§€ì› ìœ í˜•: <code>aes256-gcm96</code></li>
<li>Azure Key Vault ì§€ì› ìœ í˜• : <code>rsa-2048</code>, <code>rsa-3072</code>, <code>rsa-4096</code></li>
<li>GCP Cloud KMS ì§€ì› ìœ í˜• : <code>aes256-gcm96</code>, <code>rsa-2048</code>, <code>rsa-3072</code>, <code>rsa-4096</code>, <code>ecdsa-p256</code>, <code>ecdsa-p384</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>ì§€ì›ë˜ëŠ” KMS ì„œë¹„ìŠ¤ ì§€ì • ë° ê³µê¸‰ì ë³„ ì¸ì¦ ì •ë³´ ë“±ë¡</p>
<ul>
<li><code>awskms</code> : AWS KMS</li>
<li><code>azurekeyvault</code> : Azure Key Vault</li>
<li><code>gcpckms</code> : GCP Cloud KMS</li>
</ul>
</li>
<li>
<p>KMS ì„œë¹„ìŠ¤ì— í‚¤ ìƒì„±</p>
<ul>
<li><code>purpose</code> : ëª©ì 
<ul>
<li><code>enctypt</code></li>
<li><code>dectypt</code></li>
<li><code>sign</code></li>
<li><code>verify</code></li>
<li><code>wrap</code></li>
<li><code>unwrap</code></li>
</ul>
</li>
<li><code>protection</code> : í‚¤ ë³´í˜¸ ì§€ì •
<ul>
<li><code>hsm</code></li>
<li><code>software</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>ê´€ë¦¬ë¥¼ ìœ„í•œ í‚¤ íšŒì „ (ì„ íƒ)</p>
</li>
<li>
<p>í‚¤ ë²„ì „ í™œì„±/ë¹„í™œì„± (ì„ íƒ)</p>
</li>
<li>
<p>KMS ì„œë¹„ìŠ¤ì˜ í‚¤ ì œê±°</p>
<ul>
<li>KMS ì„œë¹„ìŠ¤ì˜ í‚¤ê°€ ì‚­ì œë˜ì§€ë§Œ í‚¤ëŠ” ë³¼íŠ¸ì— ì €ì¥</li>
<li>ì˜êµ¬ ì œê±°ë¥¼ ìœ„í•´ì„œëŠ” ë³„ë„ í‚¤ ì‚­ì œ í˜¸ì¶œ</li>
</ul>
</li>
</ol>
<h3>keymgmt Secret Engine í™œì„±í™”</h3>
<p><code>keymgmt</code> ì‹œí¬ë¦¿ ì—”ì§„ì„ í™œì„±í™”í•˜ì—¬, í•´ë‹¹ ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ì‹œí¬ë¦¿ì— ëŒ€í•œ ê´€ë¦¬ë¥¼ ìˆ˜í–‰í•œë‹¤. ê´€ë¦¬ ëª©ì ì— ë”°ë¼ ë³„ë„ì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ <code>path</code>ë¡œ ì§€ì •í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault secrets <span class="token builtin class-name">enable</span> keymgmt</span>
<span class="line">Success<span class="token operator">!</span> Enabled the keymgmt secrets engine at: keymgmt/</span>
<span class="line"></span></code></pre></div><h2>1. AWS KMS</h2>
<h3>1.1 êµ¬ì„± ìš”ì†Œ</h3>
<ul>
<li>AWS KMS ê´€ë¦¬ë¥¼ ìœ„í•œ ê¶Œí•œ
<ul>
<li><code>kms:CreateKey</code></li>
<li><code>kms:GetParametersForImport</code></li>
<li><code>kms:ImportKeyMaterial</code></li>
<li><code>kms:EnableKey</code></li>
<li><code>kms:DisableKey</code></li>
<li><code>kms:ScheduleKeyDeletion</code></li>
<li><code>kms:CreateAlias</code></li>
<li><code>kms:UpdateAlias</code></li>
<li><code>kms:DeleteAlias</code></li>
<li><code>kms:ListAliases</code></li>
<li><code>kms:TagResource</code></li>
</ul>
</li>
<li><code>keymgmt</code> Secret Engine</li>
</ul>
<h3>1.2 Vault ê°€ ëŒ€ìƒ AWS KMS ê´€ë¦¬ ìœ„í•´ ì‚¬ìš©í•  ìê²©ì¦ëª…</h3>
<p>Secret Engine ì— ëŒ€í•œ í™œì„±í™”ëŠ” Secret Engine ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ ì •ë³´ë§Œ ìƒì„±ë˜ì—ˆì„ ë¿, ì—°ë™í•˜ê³ ì í•˜ëŠ” ëŒ€ìƒ AWS í™˜ê²½ì— ëŒ€í•œ ì •ë³´ì— ëŒ€í•´ì„œëŠ” ì„¸ë¶€ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤. ì´ë¥¼ ìœ„í•´ Vault ê°€ ëŒ€ìƒ AWS í™˜ê²½ì— ëŒ€í•´ ì ‘ê·¼, ìê²©ì¦ëª… ë°œê¸‰ ê·¸ë¦¬ê³  ìƒëª…ì£¼ê¸° ê´€ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ë¶€ì—¬ëœ ìê²©ì¦ëª… ë°œê¸‰ì´ í•„ìš”í•˜ë‹¤.</p>
<ol>
<li>
<p><strong>ìê²©ì¦ëª… ë°œê¸‰ ë° ìƒëª…ì£¼ê¸° ê´€ë¦¬ ê¶Œí•œì„ ìœ„í•œ ì •ì±… ìƒì„±</strong></p>
<blockquote>
<p>AWS IAM ì •ì±… ìƒì„±: <a href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies_create-console.html" target="_blank" rel="noopener noreferrer">https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies_create-console.html</a></p>
</blockquote>
<ol>
<li>
<p><a href="https://console.aws.amazon.com/iam/%EC%97%90%EC%84%9C" target="_blank" rel="noopener noreferrer">https://console.aws.amazon.com/iam/ì—ì„œ</a> IAM ì½˜ì†”ì— ì ‘ì†.</p>
</li>
<li>
<p>ì™¼ìª½ì˜ íƒìƒ‰ ì°½ì—ì„œ <strong>ì •ì±…(Policies)</strong> ì„ ì„ íƒ.</p>
</li>
<li>
<p><strong>ì •ì±… ìƒì„±(Create policy)</strong> ì„ ì„ íƒ.</p>
</li>
<li>
<p><strong>JSON</strong> íƒ­ì„ ì„ íƒ.</p>
</li>
<li>
<p>JSON ì •ì±… ë¬¸ì„œ ì…ë ¥</p>
<ul>
<li>Action ë€ì— ê¶Œí•œ ë¶€ì—¬ë¥¼ í¬í•¨í•œ ìê²© ì¦ëª… ë°œê¸‰ ë° ê´€ë¦¬ë¥¼ ìœ„í•œ IAM ì„œë¹„ìŠ¤ ê´€ë ¨ ê¶Œí•œ ì‘ì„±</li>
<li>Resource ë€ì˜ <code>ACCOUNT-ID-WITHOUT-HYPHENS</code> ëŠ” AWS ì½˜ì†” ìš°ìƒë‹¨ì—ì„œ í™•ì¸ ê°€ëŠ¥í•œ ìˆ«ì 12ìë¦¬ë¡œ êµ¬ì„±ëœ ê³„ì • ê³ ìœ  ID ì •ë³´ ì…ë ¥</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">{</span>
<span class="line">  "Version": "2012-10-17",</span>
<span class="line">  "Statement": [</span>
<span class="line">    {</span>
<span class="line">      "Effect": "Allow",</span>
<span class="line">      "Action": [</span>
<span class="line">        "kms:CreateKey",</span>
<span class="line">        "kms:GetParametersForImport",</span>
<span class="line">        "kms:ImportKeyMaterial",</span>
<span class="line">        "kms:EnableKey",</span>
<span class="line">        "kms:DisableKey",</span>
<span class="line">        "kms:ScheduleKeyDeletion",</span>
<span class="line">        "kms:CreateAlias",</span>
<span class="line">        "kms:UpdateAlias",</span>
<span class="line">        "kms:DeleteAlias",</span>
<span class="line">        "kms:ListAliases",</span>
<span class="line">        "kms:TagResource"</span>
<span class="line">      ],</span>
<span class="line">      "Resource": ["*"]</span>
<span class="line">    }</span>
<span class="line">  ]</span>
<span class="line">}</span>
<span class="line"></span></code></pre></div></li>
<li>
<p>ë³´ì•ˆ ê²½ê³ , ì˜¤ë¥˜ ë˜ëŠ” ì¼ë°˜ ê²½ê³ ë¥¼ í•´ê²°í•œ ë‹¤ìŒ <strong>ì •ì±… ê²€í† (Review policy)</strong> ì„ íƒ.</p>
</li>
<li>
<p>ì •ì±… ì´ë¦„ ì •ì˜ í›„ <strong>ì •ì±… ìƒì„±(Create Policy)</strong> ì„ íƒ í•˜ì—¬ ìƒì„± ì™„ë£Œ</p>
</li>
</ol>
</li>
<li>
<p><strong>ìê²©ì¦ëª… ë°œê¸‰</strong></p>
<blockquote>
<p>AWS ê³„ì • ë° ì•¡ì„¸ìŠ¤ í‚¤ : <a href="https://docs.aws.amazon.com/ko_kr/powershell/latest/userguide/pstools-appendix-sign-up.html" target="_blank" rel="noopener noreferrer">https://docs.aws.amazon.com/ko_kr/powershell/latest/userguide/pstools-appendix-sign-up.html</a></p>
</blockquote>
<ol>
<li><a href="https://console.aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">https://console.aws.amazon.com/iam/</a> ì—ì„œ IAM ì½˜ì†”ì— ì ‘ì†.</li>
<li>íƒìƒ‰ ë©”ë‰´ì—ì„œ <strong>ì‚¬ìš©ì</strong> ì„ íƒ.</li>
<li><strong>ì‚¬ìš©ì ì¶”ê°€(Add User)</strong> ì„ íƒ í•˜ì—¬ ì‚¬ìš©ì ì´ë¦„ ì§€ì •</li>
<li><strong>ì§ì ‘ ì •ì±… ì—°ê²°(Attach policies directly)</strong> ì„ íƒí•˜ì—¬ ì´ì „ ë‹¨ê³„ì—ì„œ ìƒì„±í•œ ì •ì±… ì„ íƒ</li>
<li><strong>ì‚¬ìš©ì ìƒì„±(Create User)</strong> ì„ íƒí•˜ì—¬ ì‚¬ìš©ì ìƒì„± ì™„ë£Œ</li>
<li><strong>Security credentials(ë³´ì•ˆ ìê²© ì¦ëª…)</strong> íƒ­ì„ ì—° ë‹¤ìŒ **Create access key(ì•¡ì„¸ìŠ¤ í‚¤ ìƒì„±)**ë¥¼ ì„ íƒ.</li>
<li>ìƒˆ ì•¡ì„¸ìŠ¤ í‚¤ë¥¼ ë³´ë ¤ë©´ [<strong>Show</strong>]ë¥¼ ì„ íƒ. í‚¤ ì •ë³´ëŠ” ì•„ë˜ì™€ ê°™ì´ ì•¡ì„¸ìŠ¤ í‚¤ / ë³´ì•ˆ ì•¡ì„¸ìŠ¤ í‚¤ë¡œ êµ¬ì„±.
<ul>
<li>ì•¡ì„¸ìŠ¤ í‚¤ ID: <code>AKIAIOSFODNN7EXAMPLE</code></li>
<li>ë³´ì•ˆ ì•¡ì„¸ìŠ¤ í‚¤: <code>wJalrXUt******************XAMPLEKEY</code></li>
</ul>
</li>
<li>í‚¤ í˜ì–´ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•˜ë ¤ë©´ [<strong>Download .csv file</strong>]ì„ ì„ íƒ</li>
</ol>
</li>
</ol>
<h3>1.3 Vaultì˜ AWS KMS êµ¬ì„±</h3>
<p>AWS KMSì—ì„œ í˜¸í™˜ë˜ëŠ” ì•”í˜¸í™” í‚¤ë¥¼ ìƒì„±í•œë‹¤.</p>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line"> vault secrets enable keymgmt</span>
<span class="line"></span>
<span class="line">$ vault write -f keymgmt/key/aes256-gcm96 type="aes256-gcm96"</span>
<span class="line">Success! Data written to: keymgmt/key/aes256-gcm96</span>
<span class="line"></span></code></pre></div><p>ìƒì„±ëœ ì•”í˜¸í™” í‚¤ì˜ ì •ë³´ë¥¼ í™•ì¸í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token builtin class-name">read</span> keymgmt/key/aes256-gcm96</span>
<span class="line">Key                    Value</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/KMS%20Console%202023-07-05%2021-15-20.png" type="image/png"/>
    </item>
    <item>
      <title>2023ë…„ 8ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-08.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-08.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 8ì›”</source>
      <description>2023ë…„ 8ì›” Update</description>
      <pubDate>Tue, 01 Aug 2023 04:05:51 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>Using Terraform dynamic provider credentials in your AWS landing zones
<ul>
<li><a href="https://www.hashicorp.com/blog/using-terraform-dynamic-provider-credentials-in-your-aws-landing-zones" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ì§€ë‚œ 4ì›” ì†Œê°œëœ Terraform ì‚¬ìš© ì‹œ í•„ìš”í•œ ëŒ€ìƒ í™˜ê²½ì— ëŒ€í•œ í´ë¼ìš°ë“œ ìê²©ì¦ëª…ì„ Vault ì™€ ì—°ë™í•˜ì—¬ ë™ì ìœ¼ë¡œ ì‚¬ìš© ë° ê´€ë¦¬í•˜ëŠ” Dynamic Provider Credentials ê¸°ëŠ¥ì„ AWS Landing Zone ì—ì„œë„ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Terraform ê³¼ í•¨ê»˜ Landing Zone ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” AWS ì˜ ì—¬ì •ì—ì„œ ë” ë³´ì•ˆ ê°•í™”ëœ IaC ë¥¼ ê²½í—˜í•´ë³´ì„¸ìš”!</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.5.4" target="_blank" rel="noopener noreferrer">1.5.4 Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/language/checks" target="_blank" rel="noopener noreferrer"><code>check</code></a> Block ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202307-1" target="_blank" rel="noopener noreferrer">7ì›” Release</a> ì¶œì‹œ (<code>v202307-1 (722)</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2)</li>
<li>TFE êµ¬ë™ì„ ìœ„í•œ Container êµ¬ì„±ì´  <code>terraform-enterprise</code> ë¼ëŠ” ë‹¨ì¼ Container ë¡œ í†µí•©. <code>terraform plan</code> ë˜ëŠ” <code>terraform apply</code> ëŠ” ê¸°ì¡´ ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ ìˆ˜í–‰ ë•Œë§ˆë‹¤ agent container ìƒì„± (ì ìš©ì‹œì : <code>v202309-1</code> ë¶€í„° ì ìš©)</li>
<li>Docker 19.03, 20.10 ë¯¸ì§€ì› (ì ìš©ì‹œì : <code>v202308-1</code> ë¶€í„° ì ìš©)</li>
<li>Redis v5 ì§€ì› ì¢…ë£Œ</li>
<li><code>Manage Policy Overrides</code> ì— ëŒ€í•´ ê¸°ë³¸ ë¶€ì—¬ëœ ì •ì±… ìˆ˜ì • (ê¸°ì¡´ Read -&gt; List)</li>
<li>ì‹ ê·œ Org ì— ëŒ€í•´ Cost Estimation ê¸°ë³¸ ë¹„í™œì„±í™”</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v5.10.0" target="_blank" rel="noopener noreferrer">AWS v5.10.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resoure ì¶”ê°€
<ul>
<li>aws_iam_security_token_service_preferences</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>aws_nat_gateway ì— ëŒ€í•´ secondary_allocation_ids, secondary_private_ip_address, secondary_private_ip_count ë“± ì„¤ì • ì¶”ê°€</li>
<li>aws_batch_compute_environment ì— ëŒ€í•´ compute_resources.allocation_strategy,  compute_resources.bid_percentage ë¥¼ í¬í•¨í•œ ì„¸ë¶€ ì„¤ì • ì¶”ê°€</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>aws_quicksight_* ì— ëŒ€í•´ definition.sheets.visuals.pie_chart_visual.chart_configuration.data_labels.measure_label_visibility ì„¤ì • ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_apigatewayv2_authorizer ì— ëŒ€í•´ TTL ì„¤ì • ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_kms_* ì— ëŒ€í•´ tag ì „ì²´ ì‚­ì œ ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.67.0" target="_blank" rel="noopener noreferrer">Azure v3.67.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>azurerm_eventhub_sas</li>
<li>azurerm_kubernetes_cluster_trusted_access_role_binding</li>
<li>azurerm_marketplace_role_assignment</li>
<li>azurerm_network_function_azure_traffic_collector</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>azurerm_image ì— ëŒ€í•´ disk_encryption_set_id ì„¤ì • ì¶”ê°€</li>
<li>azurerm_linux_virtual_machine ì— ëŒ€í•´ bypass_platform_safety_checks_on_user_schedule_enabled ì™€ reboot_setting ì„¤ì • ì¶”ê°€</li>
<li>azurerm_windows_virtual_machine ì— ëŒ€í•´ bypass_platform_safety_checks_on_user_schedule_enabled ì™€ reboot_setting ì„¤ì • ì¶”ê°€</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>azurerm_cosmosdb_account ì— ëŒ€í•´ max_age_in_seconds ê°€ 2147483647 ì´ˆê¹Œì§€ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ ê°œì„ </li>
<li>azurerm_redis_cache ì— ëŒ€í•´ patch_schedule ì—…ë°ì´íŠ¸ ì¡°ê±´ ì„¤ì • ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_postgresql_flexible_server ì— ëŒ€í•´ storage_mb ì„¤ì •ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ ì •ë³´ë¥¼ 3355340 ì—ì„œ 33554432 ìœ¼ë¡œ ìˆ˜ì •</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.76.0" target="_blank" rel="noopener noreferrer">GCP v4.76.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>google_compute_region_ssl_policy</li>
<li>google_iap_web_region_backend_service_iam_*</li>
<li>google_dataplex_task</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>compute ì— ëŒ€í•´ google_compute_service_attachmentë¥¼ ìœ„í•œ reconcile_connections ì„¤ì • ì¶”ê°€</li>
<li>container ì— ëŒ€í•´ google_container_cluster ì˜ addons_config ë¥¼ ìœ„í•œ gcs_fuse_csi_driver_config ì„¤ì • ì¶”ê°€</li>
<li>container ì— ëŒ€í•´ google_container_cluster ë¥¼ ìœ„í•œ allow_net_admin ì„¤ì • ì¶”ê°€</li>
<li>networkservices ì— ëŒ€í•´ google_network_services_gateway ë¥¼ ìœ„í•œ scope ì„¤ì • ì¶”ê°€</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>compute ì— ëŒ€í•´ google_compute_security_policy ë¥¼ ìœ„í•œenforce_on_key_configs ì˜ íŠ¸ë¦¬ê±° ì‹œì  ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.14.1
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.14.1" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Administrative Namespace ë„ì…. ê¸°ì¡´ Root Namespace ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ System Backend Path ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œ ë“±ì„ ê¸°ë°˜ìœ¼ë¡œ Cluster ê´€ë¦¬ìš© Namespace ë¡œ í™œìš©</li>
<li>Transform Secrets Engine ì‚¬ìš© ì‹œ Encoding ìš”ì²­ì— ëŒ€í•œ Max TTL ì ìš©</li>
<li>Performance Standby (Read Replica) Node ì—ì„œ ë°œìƒí•˜ëŠ” ìš”ì²­ì— ëŒ€í•œ Logging ì•ŒëŒ ë°©ì§€</li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.16
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.16.0" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li><code>/v1/health/connect/</code> ì™€ <code>/v1/health/ingress/</code> api ì— ëŒ€í•´ ì ì ˆí•œ ê¶Œí•œ ì—†ëŠ” token ì‚¬ìš© ì‹œ 403 ì˜¤ë¥˜ ì¶œë ¥</li>
<li>cluster peering: ì§€ì› ì¢…ë£Œëœ version ì„ ì‚¬ìš©í•˜ëŠ” cluster ì— ëŒ€í•œ í•˜ìœ„ í˜¸í™˜ì„± ì œê±°</li>
<li><code>consul services export</code>: peer cluster ë˜ëŠ” íƒ€ partition ì— ì„œë¹„ìŠ¤ ë…¸ì¶œì„ ìœ„í•œ ëª…ë ¹ì–´ ì¶”ê°€</li>
<li>Permissive mTLS: Service Mesh ì— ëŒ€í•´ mTLS í™œì„±í™” ìœ ë¬´ ì„ íƒ</li>
<li>audit hash: audit log hash function ê¸°ë°˜ data hash ê°’ ê²€ì¦ ì§€ì›</li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.6.0
<ul>
<li><a href="https://www.hashicorp.com/blog/nomad-1-6-adds-node-pools-ux-updates-and-more" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.6.1" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Datacenter ë‚´ Client Node ì— ëŒ€í•´ ë…¼ë¦¬ì  íŒŒí‹°ì…˜ìœ¼ë¡œ êµ¬ë¶„ì§€ì–´ Job ë°°í¬ ì‹œ í•´ë‹¹í•˜ëŠ” Pool ì—ë§Œ ë°°í¬ë˜ë„ë¡ í•˜ëŠ” Node Pool ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Namespace ë¥¼ ìƒì„±í•˜ê³  ê° Namespace ë³„ ê¸°ë³¸ Node Pool ì§€ì • ë° ë°°í¬ í—ˆìš© ì—¬ë¶€ë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” Node Pool Governance ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Job Status ë° Job Deployments ì— ëŒ€í•œ UI ê°œì„ </li>
<li>Job Spec ì†ŒìŠ¤ì½”ë“œì— ëŒ€í•œ ê¸°ì¡´ Raw JSON ì§€ì›í–ˆë˜ ë¶€ë¶„ì— ëŒ€í•´ ì†ŒìŠ¤ì½”ë“œ ì›ë¬¸ì„ UI ìƒì—ì„œ í™•ì¸ ë° ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ ê°œì„ </li>
<li>Podman ì •ì‹ ì§€ì›</li>
<li>Job restart ëª…ë ¹ì–´ ì§€ì› (ê¸°ì¡´ì—ëŠ” stop í›„ start)</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Intro to Terraform on Azure</title>
      <link>https://docmoa.github.io/04-HashiCorp/03-Terraform/03-Sample/hashicat-azure.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/03-Terraform/03-Sample/hashicat-azure.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Intro to Terraform on Azure</source>
      <description>Intro to Terraform on Azure í•¸ì¦ˆì˜¨ ì›Œí¬ìƒµ ì„¤ëª… ë° ì½”ë“œë¶„ì„</description>
      <pubDate>Sat, 15 Jul 2023 09:49:00 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ë³¸ ê¸€ì€ HashiCorpì˜ ê³µì‹ ì›Œí¬ìƒµì¸ "Intro to Terraform on Azure" ë‚´ìš©ì„ ë°œì·Œí•˜ì—¬ ì‘ì„±í•œ ê¸€ì…ë‹ˆë‹¤. <a href="https://hashicorp.github.io/field-workshops-terraform/slides/azure/terraform-oss/#1" target="_blank" rel="noopener noreferrer">ì°¸ê³ </a></p>
<p>ì‹¤ìŠµ ì›ë³¸ ì†ŒìŠ¤ì½”ë“œëŠ” <a href="https://github.com/hashicorp/hashicat-azure" target="_blank" rel="noopener noreferrer">hashicat-azure ì €ì¥ì†Œ</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<figure><img src="https://media.licdn.com/dms/image/C5612AQGhxYMwcjsNSQ/article-cover_image-shrink_600_2000/0/1643170479486?e=2147483647&amp;v=beta&amp;t=yHuifr0mLn3lU1D41ZJ_HvhJ6uDqcfkbxp2GjyRcdYo" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2>Azure ìê²©ì¦ëª… ì„¤ì •</h2>
<blockquote>
<p>ìê²©ì¦ëª… ì„¤ì •ì„ ìœ„í•œ ìƒì„¸ ì„¤ëª…ì€ ìƒëµí•©ë‹ˆë‹¤.</p>
</blockquote>
<p>Terraformì—ì„œëŠ” í•´ë‹¹ CSPì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ë°°í¬í•˜ê¸° ìœ„í•´ ìê²©ì¦ëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ìì‹ ì˜ Azure êµ¬ë…ì •ë³´ë¥¼ ì—°ë™í•˜ê¸° ìœ„í•´ credentialsë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<ul>
<li>ARM_SUBSCRIPTION_ID</li>
<li>ARM_CLIENT_ID</li>
<li>ARM_CLIENT_SECRET</li>
<li>ARM_TENANT_ID</li>
<li>ARM_ENVIRONMENT (ì˜µì…˜)</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">env</span> <span class="token operator">|</span> <span class="token function">grep</span> ARM</span>
<span class="line"><span class="token assign-left variable">ARM_CLIENT_ID</span><span class="token operator">=</span>xxx</span>
<span class="line"><span class="token assign-left variable">ARM_CLIENT_SECRET</span><span class="token operator">=</span>xxx</span>
<span class="line"><span class="token assign-left variable">ARM_SUBSCRIPTION_ID</span><span class="token operator">=</span>xxx</span>
<span class="line"><span class="token assign-left variable">ARM_TENANT_ID</span><span class="token operator">=</span>xxx</span>
<span class="line"></span></code></pre></div><h2>ì‹¤ìŠµ) ì‹œë‚˜ë¦¬ì˜¤1. azurerm_resource_group ìƒì„±</h2>
<p>Azureì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì„ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë²ˆ ì‚¬ë‹ˆë¦¬ì˜¤ì—ì„œëŠ” ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì„ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h3>HCL êµ¬ì„±íŒŒì¼</h3>
<ul>
<li><a href="http://main.tf" target="_blank" rel="noopener noreferrer">main.tf</a></li>
</ul>
<p>ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” <code>main.tf</code> ì½”ë“œì˜ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">terraform <span class="token punctuation">{</span></span>
<span class="line">  required_providers <span class="token punctuation">{</span></span>
<span class="line">    azurerm <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      source  <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"hashicorp/azurerm"</span></span></span>
<span class="line">      version <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"=2.60.0"</span></span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">provider <span class="token string-literal"><span class="token string">"azurerm"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  features <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_resource_group"</span></span> <span class="token string-literal"><span class="token string">"myresourcegroup"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-workshop"</span></span></span>
<span class="line">  location <span class="token operator">=</span> var<span class="token punctuation">.</span>location</span>
<span class="line">  </span>
<span class="line">  tags <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul>
<li><a href="http://variables.tf" target="_blank" rel="noopener noreferrer">variables.tf</a></li>
</ul>
<p>í•´ë‹¹ ìƒ˜í”Œì½”ë“œì—ì„œëŠ” <code>prefix</code> ë¼ëŠ” ë³€ìˆ˜ë§Œ í•„ìš”í•˜ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì„ ì–¸í•©ë‹ˆë‹¤.</p>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">variable <span class="token string-literal"><span class="token string">"prefix"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"This prefix will be included in the name of most resources."</span></span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"unknown"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul>
<li>terraform.tfvars</li>
</ul>
<p>ì•ì„œ <code>variables.tf</code> ì—ì„œ <code>default = "unknown"</code> ìœ¼ë¡œ ì„ ì–¸í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë•Œ, ì‚¬ìš©ìí™”ëœ ê°’ìœ¼ë¡œ ëŒ€ì²´í•˜ê¸° ìœ„í•´ì„œ ë³€ìˆ˜ì˜ ìš°ì„ ìˆœìœ„ë¥¼ í™œìš©í•˜ì—¬ ë®ì–´ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>í•„ìëŠ” <code>terraform.tfvars</code> íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ë®ì–´ì“°ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line"><span class="token comment"># prefixì— ìì‹ ì˜ ì´ë¦„ì„ ì‘ì„±í•˜ì„¸ìš”</span></span>
<span class="line">prefix <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"hyungwook"</span></span></span>
<span class="line"></span></code></pre></div><h3>í…Œë¼í¼ ì´ˆê¸°í™”(init)</h3>
<ul>
<li><code>terraform init</code> ëª…ë ¹ì„ í†µí•´ azurerm í”„ë¡œë°”ì´ë”ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">terraform init</span>
<span class="line"></span></code></pre></div><p>ì´ˆê¸°í™” ëª…ë ¹ ì´í›„ì— azurerm ì—ì„œ ì‚¬ìš©í•  ë°ì´í„°ê°€ <code>.terraform</code> ë””ë ‰í† ë¦¬ í•˜ìœ„ì— ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">ls</span> .terraform/providers/registry.terraform.io/hashicorp</span>
<span class="line">azurerm</span>
<span class="line"></span></code></pre></div><h3>í…Œë¼í¼ ê³„íš &amp; ë°°í¬(plan &amp; apply)</h3>
<ul>
<li><code>terraform plan</code> ëª…ë ¹ì„ í†µí•´ ë°°í¬ë˜ê¸° ì „ ê³„íšì„ í™•ì¸í•©ë‹ˆë‹¤. í•´ë‹¹ ì‹¤ìŠµì—ì„œëŠ” ìµœì´ˆ ë°°í¬ì´ë¯€ë¡œ í•œ ê°œì˜ ë¦¬ì†ŒìŠ¤ê°€ create ë©ë‹ˆë‹¤.</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">terraform plan</span>
<span class="line"></span>
<span class="line">Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:</span>
<span class="line">  + create</span>
<span class="line"></span>
<span class="line">Terraform will perform the following actions:</span>
<span class="line"></span>
<span class="line">  <span class="token comment"># azurerm_resource_group.myresourcegroup will be created</span></span>
<span class="line">  + resource <span class="token string">"azurerm_resource_group"</span> <span class="token string">"myresourcegroup"</span> <span class="token punctuation">{</span></span>
<span class="line">      + <span class="token function">id</span>       <span class="token operator">=</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      + location <span class="token operator">=</span> <span class="token string">"koreacentral"</span></span>
<span class="line">      + name     <span class="token operator">=</span> <span class="token string">"hyungwook-workshop"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">Plan: <span class="token number">1</span> to add, <span class="token number">0</span> to change, <span class="token number">0</span> to destroy.</span>
<span class="line"></span></code></pre></div><ul>
<li><code>terraform apply</code> ëª…ë ¹ì„ í†µí•´ ì‹¤ì œ ë¦¬ì†ŒìŠ¤ë¥¼ ë°°í¬í•©ë‹ˆë‹¤.</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">terraform apply</span>
<span class="line"></span>
<span class="line">Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:</span>
<span class="line">  + create</span>
<span class="line"></span>
<span class="line">Terraform will perform the following actions:</span>
<span class="line"></span>
<span class="line">  <span class="token comment"># azurerm_resource_group.myresourcegroup will be created</span></span>
<span class="line">  + resource <span class="token string">"azurerm_resource_group"</span> <span class="token string">"myresourcegroup"</span> <span class="token punctuation">{</span></span>
<span class="line">      + <span class="token function">id</span>       <span class="token operator">=</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      + location <span class="token operator">=</span> <span class="token string">"koreacentral"</span></span>
<span class="line">      + name     <span class="token operator">=</span> <span class="token string">"hyungwook-workshop"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">Plan: <span class="token number">1</span> to add, <span class="token number">0</span> to change, <span class="token number">0</span> to destroy.</span>
<span class="line"></span>
<span class="line">Do you want to perform these actions?</span>
<span class="line">  Terraform will perform the actions described above.</span>
<span class="line">  Only <span class="token string">'yes'</span> will be accepted to approve.</span>
<span class="line"></span>
<span class="line">  Enter a value: <span class="token function">yes</span></span>
<span class="line"></span>
<span class="line">azurerm_resource_group.myresourcegroup: Creating<span class="token punctuation">..</span>.</span>
<span class="line">azurerm_resource_group.myresourcegroup: Creation complete after 5s <span class="token punctuation">[</span>id<span class="token operator">=</span>/subscriptions/0222cb06-f803-4f66-a922-a0957813a90c/resourceGroups/hyungwook-workshop<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre></div><h2>ì‹¤ìŠµ) ì‹œë‚˜ë¦¬ì˜¤ 2. vnet ìƒì„±</h2>
<p>ì‹œë‚˜ë¦¬ì˜¤ 1ì—ì„œ ìƒì„±í•œ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì— vnetì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<h3>HCL êµ¬ì„±íŒŒì¼</h3>
<ul>
<li><a href="http://main.tf" target="_blank" rel="noopener noreferrer">main.tf</a></li>
</ul>
<p>ì•ì„œ ì‚¬ìš©í–ˆë˜ <code>main.tf</code> íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì´ ì¶”ê°€í•  <code>azurerm_virtual_network</code> ì ˆì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line"><span class="token comment"># ìƒëµ</span></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_virtual_network"</span></span> <span class="token string-literal"><span class="token string">"vnet"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name                <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-vnet"</span></span></span>
<span class="line">  location            <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>location</span>
<span class="line">  address_space       <span class="token operator">=</span> <span class="token punctuation">[</span>var<span class="token punctuation">.</span>address_space<span class="token punctuation">]</span></span>
<span class="line">  resource_group_name <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul>
<li><a href="http://variables.tf" target="_blank" rel="noopener noreferrer">variables.tf</a> ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‘ ê°€ì§€ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
<ul>
<li><code>prefix</code> : ë¦¬ì†ŒìŠ¤ì˜ ê°€ì¥ ì•ì— ì„ ì–¸í•  ë³€ìˆ˜ëª…</li>
<li><code>address_space</code>  : ê¸°ë³¸ CIDR ì •ì˜</li>
</ul>
</li>
</ul>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">variable <span class="token string-literal"><span class="token string">"prefix"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"This prefix will be included in the name of most resources."</span></span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"unknown"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"address_space"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"The address space that is used by the virtual network. You can supply more than one address space. Changing this forces a new resource to be created."</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"10.0.0.0/16"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>í…Œë¼í¼ ê³„íš &amp; ë°°í¬(plan &amp; apply)</h3>
<p><code>azurerm_virtual_network</code> ë¦¬ì†ŒìŠ¤ê°€ ì¶”ê°€ë¡œ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ìƒëµ</span></span>
<span class="line">Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:</span>
<span class="line">  + create</span>
<span class="line"></span>
<span class="line">Terraform will perform the following actions:</span>
<span class="line"></span>
<span class="line">  <span class="token comment"># azurerm_virtual_network.vnet will be created</span></span>
<span class="line">  + resource <span class="token string">"azurerm_virtual_network"</span> <span class="token string">"vnet"</span> <span class="token punctuation">{</span></span>
<span class="line">      + address_space         <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">          + <span class="token string">"10.0.0.0/16"</span>,</span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">      + guid                  <span class="token operator">=</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      + <span class="token function">id</span>                    <span class="token operator">=</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      + location              <span class="token operator">=</span> <span class="token string">"koreacentral"</span></span>
<span class="line">      + name                  <span class="token operator">=</span> <span class="token string">"hyungwook-vnet"</span></span>
<span class="line">      + resource_group_name   <span class="token operator">=</span> <span class="token string">"hyungwook-workshop"</span></span>
<span class="line">      + subnet                <span class="token operator">=</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      + vm_protection_enabled <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h2>ì‹¤ìŠµ) ì‹œë‚˜ë¦¬ì˜¤ 3. Subnet &amp; security group ìƒì„±</h2>
<p>ì´ë²ˆ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” vnet ë‚´ë¶€ì— subnetê³¼ security groupì„ ì¶”ê°€ë¡œ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h3>HCL êµ¬ì„±íŒŒì¼</h3>
<ul>
<li><a href="http://main.tf" target="_blank" rel="noopener noreferrer">main.tf</a> ì—ì„œëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ ë¦¬ì†ŒìŠ¤ë¥¼ ì¶”ê°€ë¡œ ìƒì„±í•˜ëŠ” ì ˆì„ ì¶”ê°€í•©ë‹ˆë‹¤.
<ul>
<li><code>azurerm_subnet</code></li>
<li><code>azurerm_network_security_group</code></li>
</ul>
</li>
</ul>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line"><span class="token comment"># ìƒëµ</span></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_subnet"</span></span> <span class="token string-literal"><span class="token string">"subnet"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name                 <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-subnet"</span></span></span>
<span class="line">  virtual_network_name <span class="token operator">=</span> azurerm_virtual_network<span class="token punctuation">.</span>vnet<span class="token punctuation">.</span>name</span>
<span class="line">  resource_group_name  <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>name</span>
<span class="line">  address_prefixes     <span class="token operator">=</span> <span class="token punctuation">[</span>var<span class="token punctuation">.</span>subnet_prefix<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_network_security_group"</span></span> <span class="token string-literal"><span class="token string">"catapp-sg"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name                <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-sg"</span></span></span>
<span class="line">  location            <span class="token operator">=</span> var<span class="token punctuation">.</span>location</span>
<span class="line">  resource_group_name <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>name</span>
<span class="line"></span>
<span class="line">  security_rule <span class="token punctuation">{</span></span>
<span class="line">    name                       <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"HTTP"</span></span></span>
<span class="line">    priority                   <span class="token operator">=</span> <span class="token number">100</span></span>
<span class="line">    direction                  <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Inbound"</span></span></span>
<span class="line">    access                     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Allow"</span></span></span>
<span class="line">    protocol                   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Tcp"</span></span></span>
<span class="line">    source_port_range          <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_port_range     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"80"</span></span></span>
<span class="line">    source_address_prefix      <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_address_prefix <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  security_rule <span class="token punctuation">{</span></span>
<span class="line">    name                       <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"HTTPS"</span></span></span>
<span class="line">    priority                   <span class="token operator">=</span> <span class="token number">102</span></span>
<span class="line">    direction                  <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Inbound"</span></span></span>
<span class="line">    access                     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Allow"</span></span></span>
<span class="line">    protocol                   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Tcp"</span></span></span>
<span class="line">    source_port_range          <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_port_range     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"443"</span></span></span>
<span class="line">    source_address_prefix      <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_address_prefix <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  security_rule <span class="token punctuation">{</span></span>
<span class="line">    name                       <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"SSH"</span></span></span>
<span class="line">    priority                   <span class="token operator">=</span> <span class="token number">101</span></span>
<span class="line">    direction                  <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Inbound"</span></span></span>
<span class="line">    access                     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Allow"</span></span></span>
<span class="line">    protocol                   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Tcp"</span></span></span>
<span class="line">    source_port_range          <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_port_range     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"22"</span></span></span>
<span class="line">    source_address_prefix      <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_address_prefix <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul>
<li><a href="http://variables.tf" target="_blank" rel="noopener noreferrer">variables.tf</a> ì—ì„œëŠ” <code>subnet_prerix</code> ì ˆì„ ì¶”ê°€í•˜ì—¬ ì„œë¸Œë„·ì˜ CIDRì„ ì„ ì–¸í•©ë‹ˆë‹¤.
<ul>
<li><code>prefix</code></li>
<li><code>address_space</code></li>
<li><strong><code>subnet_prefix</code></strong></li>
</ul>
</li>
</ul>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">variable <span class="token string-literal"><span class="token string">"subnet_prefix"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"The address prefix to use for the subnet."</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"10.0.10.0/24"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>í…Œë¼í¼ ê³„íš &amp; ë°°í¬(plan &amp; apply)</h3>
<p>ë‹¤ìŒ ë‘ ë¦¬ì†ŒìŠ¤ê°€ ì¶”ê°€ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.</p>
<ul>
<li>azurerm_network_security_group.catapp-sg</li>
<li>azurerm_subnet.subnet</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment">#(ìƒëµ)</span></span>
<span class="line">Terraform will perform the following actions:</span>
<span class="line"></span>
<span class="line">  <span class="token comment"># azurerm_network_security_group.catapp-sg will be created</span></span>
<span class="line">  + resource <span class="token string">"azurerm_network_security_group"</span> <span class="token string">"catapp-sg"</span> <span class="token punctuation">{</span></span>
<span class="line">      + <span class="token function">id</span>                  <span class="token operator">=</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      + location            <span class="token operator">=</span> <span class="token string">"koreacentral"</span></span>
<span class="line">      + name                <span class="token operator">=</span> <span class="token string">"hyungwook-sg"</span></span>
<span class="line">      + resource_group_name <span class="token operator">=</span> <span class="token string">"hyungwook-workshop"</span></span>
<span class="line">      + security_rule       <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">          + <span class="token punctuation">{</span></span>
<span class="line">              + access                                     <span class="token operator">=</span> <span class="token string">"Allow"</span></span>
<span class="line">              + description                                <span class="token operator">=</span> <span class="token string">""</span></span>
<span class="line">              + destination_address_prefix                 <span class="token operator">=</span> <span class="token string">"*"</span></span>
<span class="line">              + destination_address_prefixes               <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">              + destination_application_security_group_ids <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">              + destination_port_range                     <span class="token operator">=</span> <span class="token string">"22"</span></span>
<span class="line">              + destination_port_ranges                    <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">              + direction                                  <span class="token operator">=</span> <span class="token string">"Inbound"</span></span>
<span class="line">              + name                                       <span class="token operator">=</span> <span class="token string">"SSH"</span></span>
<span class="line">              + priority                                   <span class="token operator">=</span> <span class="token number">101</span></span>
<span class="line">              + protocol                                   <span class="token operator">=</span> <span class="token string">"Tcp"</span></span>
<span class="line">              + source_address_prefix                      <span class="token operator">=</span> <span class="token string">"*"</span></span>
<span class="line">              + source_address_prefixes                    <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">              + source_application_security_group_ids      <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">              + source_port_range                          <span class="token operator">=</span> <span class="token string">"*"</span></span>
<span class="line">              + source_port_ranges                         <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">            <span class="token punctuation">}</span>,</span>
<span class="line"><span class="token comment">#(ì¤‘ëµ)            </span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># azurerm_subnet.subnet will be created</span></span>
<span class="line">  + resource <span class="token string">"azurerm_subnet"</span> <span class="token string">"subnet"</span> <span class="token punctuation">{</span></span>
<span class="line">      + address_prefix                                 <span class="token operator">=</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      + address_prefixes                               <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">          + <span class="token string">"10.0.10.0/24"</span>,</span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">      + enforce_private_link_endpoint_network_policies <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">      + enforce_private_link_service_network_policies  <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">      + <span class="token function">id</span>                                             <span class="token operator">=</span> <span class="token punctuation">(</span>known after apply<span class="token punctuation">)</span></span>
<span class="line">      + name                                           <span class="token operator">=</span> <span class="token string">"hyungwook-subnet"</span></span>
<span class="line">      + resource_group_name                            <span class="token operator">=</span> <span class="token string">"hyungwook-workshop"</span></span>
<span class="line">      + virtual_network_name                           <span class="token operator">=</span> <span class="token string">"hyungwook-vnet"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">Plan: <span class="token number">2</span> to add, <span class="token number">0</span> to change, <span class="token number">0</span> to destroy.</span>
<span class="line"></span></code></pre></div><h2>ì‹¤ìŠµ) ì‹œë‚˜ë¦¬ì˜¤ 4. hashicat ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬</h2>
<blockquote>
<p>ì°¸ê³  : ì›ë³¸ ì†ŒìŠ¤ì½”ë“œëŠ” <a href="https://github.com/hashicorp/hashicat-azure" target="_blank" rel="noopener noreferrer">hashicat-azure ì €ì¥ì†Œ</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ì´ë²ˆ ì‹œë‚˜ë¦¬ì˜¤ëŠ” ì‹¤ì œ VM ì¸ìŠ¤í„´ìŠ¤ì— ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<h3>HCL êµ¬ì„±íŒŒì¼</h3>
<ul>
<li><a href="http://main.tf" target="_blank" rel="noopener noreferrer">main.tf</a>
<ul>
<li><code>azurerm_network_interface</code> : Network Interface ìƒì„±</li>
<li><code>azurerm_network_interface_security_group_association</code> : Network Interfaceì— Security Group í• ë‹¹</li>
<li><code>azurerm_public_ip</code> : ê°€ìƒë¨¸ì‹ ì— ì ‘ì†í•˜ê¸° ìœ„í•œ Public IP</li>
<li><code>azurerm_virtual_machine</code> : ê°€ìƒë¨¸ì‹ </li>
<li><code>null_resource</code> : ê°€ìƒë¨¸ì‹  ë°°í¬ í›„ <code>provisioner</code> ë¥¼ í†µí•´ ì›¹ ì„œë¹„ìŠ¤ ì„¤ì¹˜ë¥¼ ìœ„í•´ ì‚¬ìš©</li>
</ul>
</li>
</ul>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">terraform <span class="token punctuation">{</span></span>
<span class="line">  required_providers <span class="token punctuation">{</span></span>
<span class="line">    azurerm <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      source  <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"hashicorp/azurerm"</span></span></span>
<span class="line">      version <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"=2.60.0"</span></span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">provider <span class="token string-literal"><span class="token string">"azurerm"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  features <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_resource_group"</span></span> <span class="token string-literal"><span class="token string">"myresourcegroup"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-workshop"</span></span></span>
<span class="line">  location <span class="token operator">=</span> var<span class="token punctuation">.</span>location</span>
<span class="line"></span>
<span class="line">  tags <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    environment <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Production"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_virtual_network"</span></span> <span class="token string-literal"><span class="token string">"vnet"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name                <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-vnet"</span></span></span>
<span class="line">  location            <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>location</span>
<span class="line">  address_space       <span class="token operator">=</span> <span class="token punctuation">[</span>var<span class="token punctuation">.</span>address_space<span class="token punctuation">]</span></span>
<span class="line">  resource_group_name <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_subnet"</span></span> <span class="token string-literal"><span class="token string">"subnet"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name                 <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-subnet"</span></span></span>
<span class="line">  virtual_network_name <span class="token operator">=</span> azurerm_virtual_network<span class="token punctuation">.</span>vnet<span class="token punctuation">.</span>name</span>
<span class="line">  resource_group_name  <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>name</span>
<span class="line">  address_prefixes     <span class="token operator">=</span> <span class="token punctuation">[</span>var<span class="token punctuation">.</span>subnet_prefix<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_network_security_group"</span></span> <span class="token string-literal"><span class="token string">"catapp-sg"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name                <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-sg"</span></span></span>
<span class="line">  location            <span class="token operator">=</span> var<span class="token punctuation">.</span>location</span>
<span class="line">  resource_group_name <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>name</span>
<span class="line"></span>
<span class="line">  security_rule <span class="token punctuation">{</span></span>
<span class="line">    name                       <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"HTTP"</span></span></span>
<span class="line">    priority                   <span class="token operator">=</span> <span class="token number">100</span></span>
<span class="line">    direction                  <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Inbound"</span></span></span>
<span class="line">    access                     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Allow"</span></span></span>
<span class="line">    protocol                   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Tcp"</span></span></span>
<span class="line">    source_port_range          <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_port_range     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"80"</span></span></span>
<span class="line">    source_address_prefix      <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_address_prefix <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  security_rule <span class="token punctuation">{</span></span>
<span class="line">    name                       <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"HTTPS"</span></span></span>
<span class="line">    priority                   <span class="token operator">=</span> <span class="token number">102</span></span>
<span class="line">    direction                  <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Inbound"</span></span></span>
<span class="line">    access                     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Allow"</span></span></span>
<span class="line">    protocol                   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Tcp"</span></span></span>
<span class="line">    source_port_range          <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_port_range     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"443"</span></span></span>
<span class="line">    source_address_prefix      <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_address_prefix <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  security_rule <span class="token punctuation">{</span></span>
<span class="line">    name                       <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"SSH"</span></span></span>
<span class="line">    priority                   <span class="token operator">=</span> <span class="token number">101</span></span>
<span class="line">    direction                  <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Inbound"</span></span></span>
<span class="line">    access                     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Allow"</span></span></span>
<span class="line">    protocol                   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Tcp"</span></span></span>
<span class="line">    source_port_range          <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_port_range     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"22"</span></span></span>
<span class="line">    source_address_prefix      <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">    destination_address_prefix <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"*"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_network_interface"</span></span> <span class="token string-literal"><span class="token string">"catapp-nic"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name                      <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-catapp-nic"</span></span></span>
<span class="line">  location                  <span class="token operator">=</span> var<span class="token punctuation">.</span>location</span>
<span class="line">  resource_group_name       <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>name</span>
<span class="line"></span>
<span class="line">  ip_configuration <span class="token punctuation">{</span></span>
<span class="line">    name                          <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}ipconfig"</span></span></span>
<span class="line">    subnet_id                     <span class="token operator">=</span> azurerm_subnet<span class="token punctuation">.</span>subnet<span class="token punctuation">.</span>id</span>
<span class="line">    private_ip_address_allocation <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Dynamic"</span></span></span>
<span class="line">    public_ip_address_id          <span class="token operator">=</span> azurerm_public_ip<span class="token punctuation">.</span>catapp<span class="token operator">-</span>pip<span class="token punctuation">.</span>id</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_network_interface_security_group_association"</span></span> <span class="token string-literal"><span class="token string">"catapp-nic-sg-ass"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  network_interface_id      <span class="token operator">=</span> azurerm_network_interface<span class="token punctuation">.</span>catapp<span class="token operator">-</span>nic<span class="token punctuation">.</span>id</span>
<span class="line">  network_security_group_id <span class="token operator">=</span> azurerm_network_security_group<span class="token punctuation">.</span>catapp<span class="token operator">-</span>sg<span class="token punctuation">.</span>id</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_public_ip"</span></span> <span class="token string-literal"><span class="token string">"catapp-pip"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name                <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-ip"</span></span></span>
<span class="line">  location            <span class="token operator">=</span> var<span class="token punctuation">.</span>location</span>
<span class="line">  resource_group_name <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>name</span>
<span class="line">  allocation_method   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Dynamic"</span></span></span>
<span class="line">  domain_name_label   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-meow"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"azurerm_virtual_machine"</span></span> <span class="token string-literal"><span class="token string">"catapp"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name                <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-meow"</span></span></span>
<span class="line">  location            <span class="token operator">=</span> var<span class="token punctuation">.</span>location</span>
<span class="line">  resource_group_name <span class="token operator">=</span> azurerm_resource_group<span class="token punctuation">.</span>myresourcegroup<span class="token punctuation">.</span>name</span>
<span class="line">  vm_size             <span class="token operator">=</span> var<span class="token punctuation">.</span>vm_size</span>
<span class="line"></span>
<span class="line">  network_interface_ids         <span class="token operator">=</span> <span class="token punctuation">[</span>azurerm_network_interface<span class="token punctuation">.</span>catapp<span class="token operator">-</span>nic<span class="token punctuation">.</span>id<span class="token punctuation">]</span></span>
<span class="line">  delete_os_disk_on_termination <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"true"</span></span></span>
<span class="line"></span>
<span class="line">  storage_image_reference <span class="token punctuation">{</span></span>
<span class="line">    publisher <span class="token operator">=</span> var<span class="token punctuation">.</span>image_publisher</span>
<span class="line">    offer     <span class="token operator">=</span> var<span class="token punctuation">.</span>image_offer</span>
<span class="line">    sku       <span class="token operator">=</span> var<span class="token punctuation">.</span>image_sku</span>
<span class="line">    version   <span class="token operator">=</span> var<span class="token punctuation">.</span>image_version</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  storage_os_disk <span class="token punctuation">{</span></span>
<span class="line">    name              <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-osdisk"</span></span></span>
<span class="line">    managed_disk_type <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Standard_LRS"</span></span></span>
<span class="line">    caching           <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"ReadWrite"</span></span></span>
<span class="line">    create_option     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"FromImage"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  os_profile <span class="token punctuation">{</span></span>
<span class="line">    computer_name  <span class="token operator">=</span> var<span class="token punctuation">.</span>prefix</span>
<span class="line">    admin_username <span class="token operator">=</span> var<span class="token punctuation">.</span>admin_username</span>
<span class="line">    admin_password <span class="token operator">=</span> var<span class="token punctuation">.</span>admin_password</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  os_profile_linux_config <span class="token punctuation">{</span></span>
<span class="line">    disable_password_authentication <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  tags <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment"># Added to allow destroy to work correctly.</span></span>
<span class="line">  depends_on <span class="token operator">=</span> <span class="token punctuation">[</span>azurerm_network_interface_security_group_association<span class="token punctuation">.</span>catapp<span class="token operator">-</span>nic<span class="token operator">-</span>sg<span class="token operator">-</span>ass<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"null_resource"</span></span> <span class="token string-literal"><span class="token string">"configure-cat-app"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  depends_on <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    azurerm_virtual_machine<span class="token punctuation">.</span>catapp<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment"># Terraform 0.12</span></span>
<span class="line">  triggers <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    build_number <span class="token operator">=</span> timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  provisioner <span class="token string-literal"><span class="token string">"file"</span></span> <span class="token punctuation">{</span></span>
<span class="line">    source      <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"files/"</span></span></span>
<span class="line">    destination <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"/home/${var.admin_username}/"</span></span></span>
<span class="line"></span>
<span class="line">    connection <span class="token punctuation">{</span></span>
<span class="line">      type     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"ssh"</span></span></span>
<span class="line">      user     <span class="token operator">=</span> var<span class="token punctuation">.</span>admin_username</span>
<span class="line">      password <span class="token operator">=</span> var<span class="token punctuation">.</span>admin_password</span>
<span class="line">      host     <span class="token operator">=</span> azurerm_public_ip<span class="token punctuation">.</span>catapp<span class="token operator">-</span>pip<span class="token punctuation">.</span>fqdn</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  provisioner <span class="token string-literal"><span class="token string">"remote-exec"</span></span> <span class="token punctuation">{</span></span>
<span class="line">    inline <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"sudo apt -y update"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"sleep 15"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"sudo apt -y update"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"sudo apt -y install apache2"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"sudo systemctl start apache2"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"sudo chown -R ${var.admin_username}:${var.admin_username} /var/www/html"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"chmod +x *.sh"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"PLACEHOLDER=${var.placeholder} WIDTH=${var.width} HEIGHT=${var.height} PREFIX=${var.prefix} ./deploy_app.sh"</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    connection <span class="token punctuation">{</span></span>
<span class="line">      type     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"ssh"</span></span></span>
<span class="line">      user     <span class="token operator">=</span> var<span class="token punctuation">.</span>admin_username</span>
<span class="line">      password <span class="token operator">=</span> var<span class="token punctuation">.</span>admin_password</span>
<span class="line">      host     <span class="token operator">=</span> azurerm_public_ip<span class="token punctuation">.</span>catapp<span class="token operator">-</span>pip<span class="token punctuation">.</span>fqdn</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><ul>
<li><a href="http://variables.tf" target="_blank" rel="noopener noreferrer">variables.tf</a>
<ul>
<li>ì„¤ëª…ìƒëµ</li>
</ul>
</li>
</ul>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">variable <span class="token string-literal"><span class="token string">"prefix"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"This prefix will be included in the name of most resources."</span></span></span>
<span class="line">  default <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"unknown"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"location"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"The region where the virtual network is created."</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"eastus"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"address_space"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"The address space that is used by the virtual network. You can supply more than one address space. Changing this forces a new resource to be created."</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"10.0.0.0/16"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"subnet_prefix"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"The address prefix to use for the subnet."</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"10.0.10.0/24"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"vm_size"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Specifies the size of the virtual machine."</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Standard_B1s"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"image_publisher"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Name of the publisher of the image (az vm image list)"</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Canonical"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"image_offer"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Name of the offer (az vm image list)"</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"0001-com-ubuntu-server-jammy"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"image_sku"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Image SKU to apply (az vm image list)"</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"22_04-LTS-gen2"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"image_version"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Version of the image to apply (az vm image list)"</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"latest"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"admin_username"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Administrator user name for linux and mysql"</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"hashicorp"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"admin_password"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Administrator password for linux and mysql"</span></span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Password123!"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"height"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"400"</span></span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Image height in pixels."</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"width"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"600"</span></span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Image width in pixels."</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">variable <span class="token string-literal"><span class="token string">"placeholder"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  default     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"placekitten.com"</span></span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Image-as-a-service URL. Some other fun ones to try are fillmurray.com, placecage.com, placebeard.it, loremflickr.com, baconmockup.com, placeimg.com, placebear.com, placeskull.com, stevensegallery.com, placedog.net"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>í…Œë¼í¼ ê³„íš &amp; ë°°í¬(plan &amp; apply)</h3>
<p><code>main.tf</code>ì—ì„œ ì¶”ê°€í–ˆë˜ ê°ì¢… ë¦¬ì†ŒìŠ¤ê°€ ì¶”ê°€ì ìœ¼ë¡œ ë°°í¬ë˜ëŠ” ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.<br>
í•´ë‹¹ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ê°€ìƒë¨¸ì‹  ìƒì„± í›„ <code>null_resource</code> ë¦¬ì†ŒìŠ¤ë¥¼ í†µí•´ ì•„íŒŒì¹˜ ì›¹ ì„œë²„ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ 3~5ë¶„ì •ë„ ì†Œìš”ë©ë‹ˆë‹¤.</p>
<h3>ê²°ê³¼ í™•ì¸ : output</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ìƒëµ</span></span>
<span class="line">null_resource.configure-cat-app <span class="token punctuation">(</span>remote-exec<span class="token punctuation">)</span>: Script complete.</span>
<span class="line">null_resource.configure-cat-app: Creation complete after 31s <span class="token punctuation">[</span>id<span class="token operator">=</span><span class="token number">7198378208770846330</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">Apply complete<span class="token operator">!</span> Resources: <span class="token number">1</span> added, <span class="token number">0</span> changed, <span class="token number">1</span> destroyed.</span>
<span class="line"></span>
<span class="line">Outputs:</span>
<span class="line"></span>
<span class="line">catapp_url <span class="token operator">=</span> <span class="token string">"http://hyungwook-meow.koreacentral.cloudapp.azure.com"</span></span>
<span class="line"></span></code></pre></div><h3>ê²°ê³¼í™•ì¸ : WEB UI</h3>
<p><code>catapp_url</code> ì„ í†µí•´ ì ‘ì†í•´ë³¸ ê²°ê³¼ ì •ìƒì ìœ¼ë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë°°í¬ë˜ê³  ê³ ì–‘ì´ ì´ë¯¸ì§€ë¥¼ ì¶œë ¥í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<figure><img src="https://github.com/hyungwook0221/img/blob/main/uPic/hashicat-azure.png?raw=true" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2>ì •ë¦¬</h2>
<p>ë³¸ ì‹¤ìŠµì„ í†µí•´ì„œ ê°„ëµí•˜ê²Œ Azureì˜ azurerm í”„ë¡œë°”ì´ë”ë¥¼ í†µí•´ ê°ì¢… ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì•ˆì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.<br>
ì˜ëª»ëœ ì •ë³´ë‚˜ ìˆ˜ì •ì´ í•„ìš”í•œ ë¶€ë¶„ì´ ìˆë‹¤ë©´ ì–¸ì œë“  í”¼ë“œë°± ë¶€íƒë“œë¦½ë‹ˆë‹¤!</p>
<blockquote>
<p>ì‘ì„±ì : ìœ í˜•ìš±(<a href="mailto:hyungwook.yu@hashicorp.com" target="_blank" rel="noopener noreferrer">hyungwook.yu@hashicorp.com</a>)</p>
</blockquote>
]]></content:encoded>
      <enclosure url="https://media.licdn.com/dms/image/C5612AQGhxYMwcjsNSQ/article-cover_image-shrink_600_2000/0/1643170479486?e=2147483647&amp;v=beta&amp;t=yHuifr0mLn3lU1D41ZJ_HvhJ6uDqcfkbxp2GjyRcdYo" type="image/"/>
    </item>
    <item>
      <title>AWS Secrets Role Type Check</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/07-Sentinel-Sample/aws-secrets-credential-type-check.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/07-Sentinel-Sample/aws-secrets-credential-type-check.html</guid>
      <source url="https://docmoa.github.io/rss.xml">AWS Secrets Role Type Check</source>
      <description>Sentinel - AWS Secrets Role Type Allow/Deny</description>
      <pubDate>Thu, 13 Jul 2023 02:48:28 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Public Terraform Registry - Policy Library</p>
<p>Src : <a href="https://registry.terraform.io/policies/Great-Stone/vault-aws-secret-type" target="_blank" rel="noopener noreferrer">https://registry.terraform.io/policies/Great-Stone/vault-aws-secret-type</a></p>
</blockquote>
<h2>1. EGPìš© ì •ì±… ìƒì„± egp_iam_user_deny.sentinel</h2>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line">import <span class="token string">"strings"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># print(request.data)</span></span>
<span class="line"><span class="token property">credential_type</span> <span class="token punctuation">=</span> request.data.credential_type</span>
<span class="line">print(<span class="token string">"CREDENTIAL_TYPE: "</span>, credential_type)</span>
<span class="line"></span>
<span class="line"><span class="token property">allow_role_type</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"federation_token"</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token property">role_type_check</span> <span class="token punctuation">=</span> <span class="token keyword">rule</span> <span class="token punctuation">{</span></span>
<span class="line">  credential_type in allow_role_type</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Only check AWS Secret Engine</span></span>
<span class="line"><span class="token comment"># Only check create, update</span></span>
<span class="line"><span class="token property">precond</span> <span class="token punctuation">=</span> <span class="token keyword">rule</span> <span class="token punctuation">{</span></span>
<span class="line">	request.operation in <span class="token punctuation">[</span><span class="token string">"create"</span>, <span class="token string">"update"</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token property">main</span> <span class="token punctuation">=</span> rule when <span class="token keyword">precond</span> <span class="token punctuation">{</span></span>
<span class="line">    role_type_check</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul>
<li><code>precond</code> : API ìš”ì²­ì´ POST, UPDATE ì¸ ê²½ìš°</li>
<li><code>role_type_check</code> : ìš”ì²­ì˜ Bodyì— <code>credential_type</code>ì˜ ê°’ì´ í—ˆìš©ëœ type ì¸ì§€ í™•ì¸ (e.g. <code>federation_token</code> í—ˆìš©)</li>
</ul>
<h2>2. EGPì— ì •ì±… ì„¤ì •</h2>
<p>EGPëŠ” ì§€ì •ëœ pathì— ëŒ€í•´ ì •ì±…ì„ ì ìš©</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token function">write</span> /sys/policies/egp/iam_user_deny <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">policy</span><span class="token operator">=</span>@egp_iam_user_deny.sentinel <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">enforcement_level</span><span class="token operator">=</span>hard-mandatory <span class="token punctuation">\</span></span>
<span class="line">  <span class="token assign-left variable">paths</span><span class="token operator">=</span><span class="token string">"aws/roles/*"</span></span>
<span class="line"></span></code></pre></div><ul>
<li><code>paths</code>ë¡œ ì§€ì •ëœ API ê²½ë¡œì— ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ë™ì‘</li>
</ul>
<h2>3. í…ŒìŠ¤íŠ¸</h2>
<p>EGPë¡œ ì§€ì •ëœ pathë¡œ credential_type ì´ iam_user ì¸ê²½ìš° í—ˆìš©ëœ íƒ€ì…ì´ ì•„ë‹ˆë¯€ë¡œ ê±°ë¶€ë¨</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token function">write</span> aws/roles/iam-role <span class="token punctuation">\</span></span>
<span class="line">    <span class="token assign-left variable">credential_type</span><span class="token operator">=</span>iam_user <span class="token punctuation">\</span></span>
<span class="line">    <span class="token assign-left variable">policy_document</span><span class="token operator">=</span>-<span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="line">{</span>
<span class="line">  "Version": "2012-10-17",</span>
<span class="line">  "Statement": [</span>
<span class="line">    {</span>
<span class="line">      "Effect": "Allow",</span>
<span class="line">      "Action": "ec2:*",</span>
<span class="line">      "Resource": "*"</span>
<span class="line">    }</span>
<span class="line">  ]</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre></div><p>ì—ëŸ¬ ë©”ì‹œì§€</p>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token property">Error writing data to aws/roles/iam-role:</span> Error making API request<span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line"><span class="token property">URL:</span> PUT <span class="token url">http://127.0.0.1:8200/v1/aws/roles/iam-role</span></span>
<span class="line"><span class="token property">Code:</span> <span class="token number">403</span><span class="token punctuation">.</span> Errors<span class="token operator">:</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">*</span> <span class="token number">2</span> errors occurred<span class="token operator">:</span></span>
<span class="line">	<span class="token operator">*</span> egp standard policy <span class="token string">"root/iam_user_deny"</span> evaluation resulted in denial<span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line"><span class="token property">The specific error was:</span></span>
<span class="line"><span class="token operator">&lt;</span>nil<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">A trace of the execution for policy <span class="token string">"root/iam_user_deny"</span> <span class="token property">is available:</span></span>
<span class="line"></span>
<span class="line"><span class="token property">Result:</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line"><span class="token property">Description:</span> <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">print<span class="token operator">(</span><span class="token operator">)</span> output<span class="token operator">:</span></span>
<span class="line"></span>
<span class="line"><span class="token property">CREDENTIAL_TYPE:</span>  iam_user</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">Rule <span class="token string">"main"</span> <span class="token operator">(</span>root<span class="token operator">/</span>iam_user_deny<span class="token operator">:</span><span class="token number">19</span><span class="token operator">:</span><span class="token number">1</span><span class="token operator">)</span> <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">Rule <span class="token string">"precond"</span> <span class="token operator">(</span>root<span class="token operator">/</span>iam_user_deny<span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">1</span><span class="token operator">)</span> <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">Rule <span class="token string">"role_type_check"</span> <span class="token operator">(</span>root<span class="token operator">/</span>iam_user_deny<span class="token operator">:</span><span class="token number">9</span><span class="token operator">:</span><span class="token number">1</span><span class="token operator">)</span> <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">	<span class="token operator">*</span> permission denied</span>
<span class="line"></span></code></pre></div><p><code>federation_token</code>ì€ ìƒì„±ë©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token function">write</span> aws/roles/sts-role <span class="token punctuation">\</span></span>
<span class="line">    <span class="token assign-left variable">credential_type</span><span class="token operator">=</span>federation_token <span class="token punctuation">\</span></span>
<span class="line">    <span class="token assign-left variable">policy_document</span><span class="token operator">=</span>-<span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="line">{</span>
<span class="line">  "Version": "2012-10-17",</span>
<span class="line">  "Statement": [</span>
<span class="line">    {</span>
<span class="line">      "Effect": "Allow",</span>
<span class="line">      "Action": "ec2:*",</span>
<span class="line">      "Resource": "*"</span>
<span class="line">    }</span>
<span class="line">  ]</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line">Success<span class="token operator">!</span> Data written to: aws/roles/sts-role</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>2023ë…„ 7ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-07.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-07.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 7ì›”</source>
      <description>2023ë…„ 7ì›” Update</description>
      <pubDate>Wed, 12 Jul 2023 14:25:54 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ (Hashidays 2023)</h2>
<ul>
<li>ë§¤ë…„ ìœ ëŸ½ ë„¤ëœë€ë“œì—ì„œ ì´í‹€ê°„ ì§„í–‰ë˜ë˜ Hashiconf ê°€ ì˜¬í•´ëŠ” í•œë‹¨ê³„ ë” ì„±ì¥í•˜ì—¬ ì˜êµ­ ëŸ°ë˜, í”„ë‘ìŠ¤ íŒŒë¦¬ ê·¸ë¦¬ê³  ë…ì¼ ë®Œí—¨ì—ì„œ ë™ì‹œì— ì§„í–‰ë˜ëŠ” Hashidays 2023 ìœ¼ë¡œ ê°œìµœë˜ì—ˆìŠµë‹ˆë‹¤. ìƒˆë¡­ê²Œ í¼ì³ì§„ Hashidays ì—ì„œëŠ” Terraform, Vault, Consul ê·¸ë¦¬ê³  Boundary ì— ëŒ€í•´ ê·¸ë™ì•ˆ ì‚¬ìš©ìë“¤ì´ ì‚¬ìš©í•˜ë©´ì„œ ëŠê¼ˆë˜ ë¶ˆí¸í•¨ì„ í•´ì†Œí•  ì‹ ê¸°ëŠ¥ì„ ì¶œì‹œí–ˆìŠµë‹ˆë‹¤.
<ul>
<li><a href="https://www.hashicorp.com/blog/a-hashicorp-ambassador-at-hashidays-london" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li><a href="https://www.hashicorp.com/blog/announcing-hcp-vault-secrets-public-beta" target="_blank" rel="noopener noreferrer">HCP Vault Secrets</a> (Public Beta): Vault ì—ì„œ ê°€ì¥ ë§ì´ í™œìš©ë˜ê³  ìˆëŠ” Secret Engine ì¤‘ í•˜ë‚˜ì¸ KV Engine ê¸°ë°˜ ì‹œí¬ë¦¿ ê´€ë¦¬ì— íŠ¹í™”ëœ HCP SaaS ì„œë¹„ìŠ¤ë¡œì¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ë° ìš´ì˜ì— ì‚¬ìš©ë˜ëŠ” ì‹œí¬ë¦¿ì— ëŒ€í•œ ì €ì¥, ì ‘ê·¼ ê·¸ë¦¬ê³  ìë™ ë™ê¸°í™” ê¸°ëŠ¥ì„ ë”ìš± ì‰½ê²Œ êµ¬ì„± ê°€ëŠ¥í•˜ë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. íŠ¹íˆ ê¸°ì¡´ ì‚¬ìš© ì¤‘ì¸ AWS Secret Manager ë“± í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì™€ë„ ì›í´ë¦­ ë™ê¸°í™”ë¥¼ ì§€ì›í•¨ìœ¼ë¡œì¨ ê¸°ì¡´ ì›Œí¬í”Œë¡œìš°ì— ëŒ€í•´ ìµœì†Œí•œì˜ ë³€ê²½ìœ¼ë¡œ ì‹œí¬ë¦¿ ë™ì ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
<li><a href="https://www.hashicorp.com/blog/vault-secrets-operator-for-kubernetes-now-ga" target="_blank" rel="noopener noreferrer">Vault Secrets Operator</a>: CRD ê¸°ë°˜ìœ¼ë¡œ K8Sì˜ Secrets ì™€ ì—°ê³„í•˜ì—¬ Secrets ë¥¼ ë™ì ìœ¼ë¡œ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ ìµœì†Œí•œì˜ ì¶”ê°€ êµ¬ì„±ìœ¼ë¡œ ê¸°ì¡´ êµ¬ì„±í•˜ì—¬ ì‚¬ìš©ì¤‘ì¸ Secrets ì— ëŒ€í•´  ë³´ì•ˆì„ ê°•í™”í•©ë‹ˆë‹¤.</li>
<li><a href="https://www.hashicorp.com/blog/boundary-0-13-introduces-ssh-session-recording-boundary-enterprise-and-more" target="_blank" rel="noopener noreferrer">Boundary Enterprise</a>: ê¸°ì¡´ì— Opensource ê·¸ë¦¬ê³  HCP SaaS ë¡œë§Œ ì œê³µë˜ë˜ Boundary ê°€ ë“œë””ì–´ Enterprise Edition ì´ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤. Enterprise Edition ì—ì„œëŠ” ê·¸ë™ì•ˆ ë§ì€ ì‚¬ìš©ìë“¤ì´ í•„ìš”ë¡œ í–ˆë˜ Session Recording ê³¼ ë”ë¶ˆì–´ ê·¸ì™¸ ë‹¤ì–‘í•œ ì‹ ê·œ ê¸°ëŠ¥ë“¤ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</li>
<li><a href="https://www.hashicorp.com/blog/new-terraform-cloud-capabilities-to-import-view-and-manage-infrastructure" target="_blank" rel="noopener noreferrer">Terraform</a>: ì§€ë‚œ 6ì›”í˜¸ì—ì„œ ì†Œê°œí•œ <a href="https://www.hashicorp.com/blog/terraform-cloud-adds-vault-backed-dynamic-credentials" target="_blank" rel="noopener noreferrer">Vault-backed dynamic credentials</a> ì˜ ì •ì‹ GA ì¶œì‹œ, ê·¸ë™ì•ˆ ë„ˆë¬´ ë¶ˆí¸í•˜ê³  ì–´ë ¤ì› ë˜ Terraform import ë¥¼ ë³´ì™„í•´ì¤„ <a href="https://www.hashicorp.com/blog/terraform-1-5-brings-config-driven-import-and-checks" target="_blank" rel="noopener noreferrer">Config-driven Import</a>, ìƒì„± ë° ê´€ë¦¬ ì¤‘ì¸ ìì›ì— ëŒ€í•œ ë³´ë‹¤ íš¨ê³¼ì ì¸ ê´€ë¦¬ë¥¼ ìœ„í•œ Explorer (Beta) ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</li>
<li><a href="https://www.hashicorp.com/blog/consul-1-16-enhances-service-mesh-reliability-user-experience-and-security" target="_blank" rel="noopener noreferrer">Consul 1.16</a>: Envoy Proxy ì— Extension ì´ ì¶œì‹œë˜ì–´ WASM (Web Assembly) Code ê¸°ë°˜ ì¶”ê°€ ê¸°ëŠ¥ì„ í™œìš©í•˜ê±°ë‚˜ ì™¸ë¶€ ë³´ì•ˆ ì„œë¹„ìŠ¤ì™€ ì—°ê³„í•˜ì—¬ ì¸ì¦ ê¸°ë°˜ ê¸°ëŠ¥ í™œìš©í•©ë‹ˆë‹¤, ë˜í•œ ì—¬ëŸ¬ Cluster ì— ê±¸ì³ ë™ì¼ ì„œë¹„ìŠ¤ì— ëŒ€í•´ ë™ì¼ ì„œë¹„ìŠ¤ ì´ë¦„ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ëŠ” Sameness Groups ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ê´€ë¦¬ ë¿ë§Œ ì•„ë‹ˆë¼ ì¥ì•  ë°œìƒ ì‹œ ìˆ˜í–‰í•˜ëŠ” Failover ë¥¼ ë³´ë‹¤ ê°„ë‹¨í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.5.0" target="_blank" rel="noopener noreferrer">1.5.0 Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/language/checks" target="_blank" rel="noopener noreferrer"><code>check</code></a> Block ì¶”ê°€, ìµœì†Œ 1ê°œ ì´ìƒì˜ <code>assert</code> êµ¬ë¬¸ì„ ìš”êµ¬í•˜ë©° <code>assert</code> êµ¬ë¬¸ ë‚´ 1ê°œ í˜¹ì€ ì—¬ëŸ¬ ê°œì˜ <code>condition</code> ê³¼ <code>error_message</code> ë¥¼ ì§€ì •í•˜ì—¬ <code>resource</code> ë˜ëŠ” <code>data</code> ìì›ì— ëŒ€í•œ ê²€ì¦ ì§€ì›</li>
<li><code>import</code> Block ì¶”ê°€, ê¸°ì¡´ terraform import ëª…ë ¹ì–´ ê¸°ë°˜ import ì‘ì—…ì„ hcl code ë¡œ ì‘ì„±í•˜ì—¬ ë³´ë‹¤ ì†ì‰½ê²Œ import ì‘ì—… ìˆ˜í–‰í•˜ë„ë¡ ì§€ì›</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202306-1" target="_blank" rel="noopener noreferrer">6ì›” Release</a> ì¶œì‹œ (<code>v202306-1 (713)</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2)</li>
<li>Terraform run ì‹œ êµ¬ë™ë˜ëŠ” Build Worker ê´€ë ¨ ì§€ì› ì¢…ë£Œ (v202306-1 ë¶€í„° ì ìš©, Terraform run ì‹œ TFC Agent ë¡œ ëŒ€ì²´)</li>
<li><code>v202308-1</code> ë¶€í„° TFE êµ¬ë™ì„ ìœ„í•œ Container êµ¬ì„±ì´  <code>terraform-enterprise</code> ë¼ëŠ” ë‹¨ì¼ Container ë¡œ í†µí•© (<code>terraform plan</code> ë˜ëŠ” <code>terraform apply</code> ëŠ” ê¸°ì¡´ ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ ìˆ˜í–‰ ë•Œë§ˆë‹¤ agent container ìƒì„±)</li>
<li><code>v202308-1</code> ë¶€í„° Docker 19.03 ì§€ì› ì¢…ë£Œ ì˜ˆì •</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/no-code-provisioning/module-design" target="_blank" rel="noopener noreferrer">No-code Provisioning</a> ì§€ì›</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v5.7.0" target="_blank" rel="noopener noreferrer">AWS v5.7.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>data/aws_opensearchserverless_*</li>
<li>aws_cleanrooms_collaboration</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>aws_lambda_function ì— ëŒ€í•´ <code>ap-east-1</code> region ì—ì„œ <code>code_signing_config_arn</code> ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>provider ì— ëŒ€í•´ <code>forbidden_account_ids</code> ì²˜ë¦¬ ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_kms ì— ëŒ€í•´ tag ì‚­ì œ ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_secretsmanager_secret_rotation ì— ëŒ€í•´ update ì‹œ ë°œìƒí•˜ëŠ”<code>InvalidParameterException: You cannot specify both rotation frequency and schedule expression together</code> ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_vpc_endpoint ì— ëŒ€í•´ s3 interface vpc endpoint ìƒì„± ì‹œ ë°œìƒí•˜ëŠ” <code>InvalidParameter: PrivateDnsOnlyForInboundResolverEndpoint not supported for this service</code> ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.64.0" target="_blank" rel="noopener noreferrer">Azure v3.64.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>azurerm_automation_variables</li>
<li>azurerm_arc_private_link_scope</li>
<li>azurerm_kusto_cosmosdb_data_connection</li>
<li>azurerm_pim_*</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>azurerm_windows_* ì— ëŒ€í•´ <code>public_network_access_enabled</code> ì„¤ì • ì§€ì›</li>
<li>azurerm_linux_* ì— ëŒ€í•´ <code>public_network_access_enabled</code> ì„¤ì • ì§€ì›</li>
<li>azurerm_spring_cloud_gateway ì— ëŒ€í•´ <code>allowed_origin_patterns</code> ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>azurerm_windows_* ì— ëŒ€í•´ <code>cors</code> ì„¤ì • ì‹œ <code>allowed_origins</code> ì— ëŒ€í•œ ì„¤ì • í•­ëª© ìˆ˜ ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_linux_* ì— ëŒ€í•´ <code>cors</code> ì„¤ì • ì‹œ <code>allowed_origins</code> ì— ëŒ€í•œ ì„¤ì • í•­ëª© ìˆ˜ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.73.0" target="_blank" rel="noopener noreferrer">GCP v4.73.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>google_firebase_extensions_instance</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>compute ì— ëŒ€í•´ <code>google_compute_forwarding_rule</code> ì„¤ì • ë‚´ <code>no_automate_dns_zone</code> ì¶”ê°€</li>
<li>compute ì— ëŒ€í•´ <code>google_compute_disk_async_replication</code> ì •ì‹ ì§€ì›</li>
<li>compute ì— ëŒ€í•´ <code>google_compute_disk</code> ì„¤ì • ë‚´ <code>async_primary_disk</code> ì¶”ê°€</li>
<li>compute ì— ëŒ€í•´ <code>google_compute_region_disk</code> ì„¤ì • ë‚´  <code>async_primary_disk</code> ì¶”ê°€</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>networkservices ì— ëŒ€í•´ <code>google_network_services_edge_cache_keyset</code> ì˜ ê¸°ë³¸ timeout ê°’ì„ 90 ë¶„ìœ¼ë¡œ ì„¤ì •</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.14.0
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.14.0" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>PKI Engine ì— ëŒ€í•´ ì‚¬ìš© ì¤‘ì¸ ìœ íš¨ ì¸ì¦ì„œ ì •ë³´ ê´€ë¦¬ì— ëŒ€í•œ ê¸°ë³¸ ì„¤ì •ì„ off ë¡œ ë³€ê²½</li>
<li>AWS Secret Engine: Static Rotation ì§€ì› (ê¸°ì¡´ ìƒì„±ëœ IAM User ì— ëŒ€í•´ Access Key / Secret Key Rotation)</li>
<li>Auth Method ì¶”ê°€: OCI (Oracle Cloud Infrastructure)</li>
<li>Vault Agent Supervisor Mode: Vault ì— ì €ì¥ëœ Secret ì„ í™˜ê²½ë³€ìˆ˜ë¡œ ë“±ë¡</li>
<li>PKI: ACME ì§€ì›</li>
<li>UI: Terraform ê³¼ ê°™ì´ ì¢Œì¸¡ Sidebar í˜•íƒœë¡œ UI ë³€ê²½</li>
<li>Vault Proxy: Vault Agent API Proxy ì™€ ë™ì¼ ê¸°ëŠ¥ ì œê³µ, í–¥í›„ ê¸°ëŠ¥ ì¶”ê°€ ë° Vault Agent API Proxy ì‚¬ìš© ì¢…ë£Œ ì˜ˆì •</li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.16
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.16.0" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li><code>/v1/health/connect/</code> ì™€ <code>/v1/health/ingress/</code> api ì— ëŒ€í•´ ì ì ˆí•œ ê¶Œí•œ ì—†ëŠ” token ì‚¬ìš© ì‹œ 403 ì˜¤ë¥˜ ì¶œë ¥</li>
<li>cluster peering: ì§€ì› ì¢…ë£Œëœ version ì„ ì‚¬ìš©í•˜ëŠ” cluster ì— ëŒ€í•œ í•˜ìœ„ í˜¸í™˜ì„± ì œê±°</li>
<li><code>consul services export</code>: peer cluster ë˜ëŠ” íƒ€ partition ì— ì„œë¹„ìŠ¤ ë…¸ì¶œì„ ìœ„í•œ ëª…ë ¹ì–´ ì¶”ê°€</li>
<li>Permissive mTLS: Service Mesh ì— ëŒ€í•´ mTLS í™œì„±í™” ìœ ë¬´ ì„ íƒ</li>
<li>audit hash: audit log hash function ê¸°ë°˜ data hash ê°’ ê²€ì¦ ì§€ì›</li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.5.6
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.5.6" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Job allocation ì´ ì¬ì‹œì‘ ë˜ì—ˆì„ ë•Œ ë°œìƒí•˜ëŠ” group service ê°€ ë“±ë¡ í•´ì œ ë˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>ì¢…ë£Œë˜ì—ˆìŒì—ë„ ì‚­ì œ ë˜ì§€ ì•Šì€  Job allocation ì— ëŒ€í•œ ì˜¤ë¥˜ ê°œì„ </li>
<li>Job Evaluation ì´ ì˜ëª»ëœ type ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>AWS Auth Method</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/03-Auth_Method/aws-auth.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/03-Auth_Method/aws-auth.html</guid>
      <source url="https://docmoa.github.io/rss.xml">AWS Auth Method</source>
      <description>AWS Auth Method ì„¤ëª… ë° êµ¬ì„± ë°©ë²• ì•ˆë‚´</description>
      <pubDate>Fri, 30 Jun 2023 12:58:35 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><a href="https://developer.hashicorp.com/vault/docs/auth/aws" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/docs/auth/aws</a></p>
<p><a href="https://developer.hashicorp.com/vault/api-docs/auth/aws" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/api-docs/auth/aws</a></p>
<p><a href="https://blog.gruntwork.io/a-guide-to-automating-hashicorp-vault-3-authenticating-with-an-iam-user-or-role-a3203a3ee088" target="_blank" rel="noopener noreferrer">https://blog.gruntwork.io/a-guide-to-automating-hashicorp-vault-3-authenticating-with-an-iam-user-or-role-a3203a3ee088</a></p>
</blockquote>
<p>AWS auth methodëŠ” IAM ê³„ì • ë˜ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ Vault í† í°ì„ ê²€ìƒ‰í•˜ëŠ” ìë™í™”ëœ ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•œë‹¤. ì´ ë°©ì‹ì€ ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ìš´ì˜ìê°€ ë³´ì•ˆì— ë¯¼ê°í•œ ìê²©ì¦ëª…(í† í°, ì‚¬ìš©ì ì´ë¦„/ë¹„ë°€ë²ˆí˜¸, í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ ë“±)ì„ ìˆ˜ë™ìœ¼ë¡œ ë¨¼ì € ìƒì„±í•  í•„ìš”ê°€ ì—†ë‹¤.</p>
<h2>1. ì¸ì¦ ì›Œí¬í”Œë¡œ</h2>
<p>AWS auth methodëŠ” <code>iam</code>ê³¼ <code>ec2</code> ë°©ì‹ì„ ì§€ì›í•œë‹¤.</p>
<h3><code>iam</code> ì¸ì¦ ë°©ì‹</h3>
<p>AWS IAM ìê²© ì¦ëª…ìœ¼ë¡œ ì„œëª…ëœ AWS ìš”ì²­ì´ ì¸ì¦ì— ì‚¬ìš©ëœë‹¤. ê±°ì˜ ëª¨ë“  AWS ë¦¬ì†ŒìŠ¤ëŠ” AWS ë³´ì•ˆ í† í° ì„œë¹„ìŠ¤(STS)ë¥¼ í˜¸ì¶œí•˜ì—¬ ìì‹ ì˜ ì‹ ì›ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. Vaultì˜ AWS iam ì¸ì¦ ë°©ì‹ì€ ì‚¬ìš©ìê°€ ì§ì ‘ ìš”ì²­ì„ ë³´ë‚´ëŠ” ëŒ€ì‹ , ì„œëª…ëœ ìš”ì²­ ë°ì´í„°ë¥¼ Vaultë¡œ ì „ì†¡í•˜ì—¬ STSì— ì„œëª…ëœ ìš”ì²­ì„ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ í•¨ìœ¼ë¡œì¨ ì´ëŸ¬í•œ ì´ì ì„ í™œìš©í•œë‹¤. VaultëŠ” ìš”ì²­ì„ ì‹¤í–‰í•˜ê³  AWS(ë‹¤ì‹œ ë§í•´ì„œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì œ3ì)ë¡œë¶€í„° ì‚¬ìš©ìì˜ ì‹¤ì œ ì‹ ì›ì„ í™•ì¸í•œë‹¤. <code>iam</code>ë°©ì‹ì´ ì¢€ë” ìµœì‹ ì˜ ë°©ì‹ì´ë©°, ê¸°ì¡´  <code>ec2</code>ë°©ì‹ì˜ í•œê³„ì˜€ë˜ ëŒë‹¤ ë˜ëŠ” ECS ê°™ì€ ë‹¤ì–‘í•œ ìœ í˜•ì˜ ì„œë¹„ìŠ¤ì—ì„œ ì‘ë™í•œë‹¤.</p>
<p>AWS STS APIì—ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì‹ ì›ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œì¸ <code>sts:GetCallerIdentity</code>ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” AWS ì„œëª… v4 ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ <code>GetCallerIdentity</code> ì¿¼ë¦¬ì— ì„œëª…í•˜ê³  ì´ë¥¼ Vault ì„œë²„ë¡œ ë³´ë‚¸ë‹¤. <code>GetCallerIdentity</code> ìš”ì²­ì— ì„œëª…í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ìê²© ì¦ëª…ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ ë©”íƒ€ë°ì´í„° ì„œë¹„ìŠ¤ ë˜ëŠ” AWS Lambda í•¨ìˆ˜ ì‹¤í–‰ì˜ AWS í™˜ê²½ ë³€ìˆ˜ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìš´ì˜ìê°€ ë¨¼ì € ì‹ ì› ìë£Œë¥¼ ìˆ˜ë™ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹í•  í•„ìš”ê°€ ì—†ë‹¤. ê·¸ë¦¬ê³  ì‚¬ìš©ë˜ëŠ” ìê²© ì¦ëª…ì€ ì›ì¹™ì ìœ¼ë¡œ AWSë‚´ë¶€ì˜ Roleì´ë¶€ì—¬ëœ ë¦¬ì†ŒìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ Access Keyë¥¼ ì‚¬ìš©í•˜ì—¬ ì–´ë””ì—ì„œë‚˜ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</p>
<p><code>GetCallerIdentity</code> ì¿¼ë¦¬ëŠ” <code>Request URL</code>, <code>Request Body</code>, <code>Request Header</code>, <code>Request Method</code>ì˜ ë„¤ ê°€ì§€ ì •ë³´ë¡œ êµ¬ì„±ë˜ë©°, AWS ì„œëª…ì€ ì´ëŸ¬í•œ í•„ë“œë¥¼ í†µí•´ ê³„ì‚°ëœë‹¤. Vault ì„œë²„ëŠ” ì´ ì •ë³´ë¥¼ ì‚¬ìš©í•´ ì¿¼ë¦¬ë¥¼ ì¬êµ¬ì„±í•˜ê³  AWS STS ì„œë¹„ìŠ¤ë¡œ ì „ë‹¬í•œë‹¤. STS ì„œë¹„ìŠ¤ì˜ ì‘ë‹µì— ë”°ë¼ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¸ì¦í•œë‹¤.</p>
<p>í´ë¼ì´ì–¸íŠ¸ê°€ AWS STS API ì—”ë“œí¬ì¸íŠ¸ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼ì´ í•„ìš”í•˜ì§€ ì•Šìœ¼ë©°, ìš”ì²­ì— ì„œëª…í•˜ê¸° ìœ„í•œ ìê²© ì¦ëª…ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë§Œ ìˆìœ¼ë©´ ëœë‹¤. ê·¸ëŸ¬ë‚˜ Vault ì„œë²„ê°€ STS ì—”ë“œí¬ì¸íŠ¸ë¡œ ìš”ì²­ì„ ì „ì†¡í•˜ë ¤ë©´ ë„¤íŠ¸ì›Œí¬ ìˆ˜ì¤€ ì•¡ì„¸ìŠ¤ê°€ í•„ìš”í•˜ë‹¤.</p>
<p>ì„œëª…ëœ ê° AWS ìš”ì²­ì—ëŠ” í˜„ì¬ íƒ€ì„ìŠ¤íƒ¬í”„ê°€ í¬í•¨ë˜ì–´ ë¦¬í”Œë ˆì´ ê³µê²©ì˜ ìœ„í—˜ì„ ì™„í™”í•©ë‹ˆë‹¤. ë˜í•œ, Vaultì—ì„œëŠ” ë‹¤ì–‘í•œ ìœ í˜•ì˜ ë¦¬í”Œë ˆì´ ê³µê²©(ì˜ˆ: ê°œë°œ Vault ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì„œëª…ëœ <code>GetCallerIdentity</code> ìš”ì²­ì„ ë„ìš©í•˜ì—¬ í”„ë¡œë•ì…˜ Vault ì¸ìŠ¤í„´ìŠ¤ì— ì¸ì¦í•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ê³µê²©)ì„ ì™„í™”í•˜ê¸° ìœ„í•´ ì¶”ê°€ í—¤ë”ì¸ X-Vault-AWS-IAM-Server-IDë¥¼ ìš”êµ¬í•  ìˆ˜ ìˆë‹¤. ë˜í•œ VaultëŠ” ì´ í—¤ë”ê°€ AWS ì„œëª…ì— í¬í•¨ëœ í—¤ë” ì¤‘ í•˜ë‚˜ì´ì–´ì•¼ í•˜ë©°, í•´ë‹¹ ì„œëª…ì„ ì¸ì¦í•˜ê¸° ìœ„í•´ AWSì— ì˜ì¡´í•œë‹¤.</p>
<p>AWS API ì—”ë“œí¬ì¸íŠ¸ëŠ” ì„œëª…ëœ GET ìš”ì²­ê³¼ POST ìš”ì²­ì„ ëª¨ë‘ ì§€ì›í•˜ì§€ë§Œ, ê°„ë‹¨í•˜ê²Œ í•˜ê¸° ìœ„í•´ aws auth ë©”ì„œë“œëŠ” POST ìš”ì²­ë§Œ ì§€ì›í•©ë‹ˆë‹¤. ë˜í•œ ì‚¬ì „ ì„œëª…ëœ ìš”ì²­, ì¦‰ ì¸ì¦ ì •ë³´ê°€ í¬í•¨ëœ <code>X-Amz-Credential</code>, <code>X-Amz-Signature</code>, <code>X-Amz-SignedHeaders</code> GET ì¿¼ë¦¬ ë§¤ê°œ ë³€ìˆ˜ê°€ ìˆëŠ” ìš”ì²­ì€ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.</p>
<p>ë˜í•œ <code>GetCallerIdentity</code> í˜¸ì¶œê³¼ ê´€ë ¨í•˜ì—¬ ì–´ë–¤ ì¢…ë¥˜ì˜ ê¶Œí•œ ë¶€ì—¬ë„ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìê²© ì¦ëª…ì— ëŒ€í•´ ëª¨ë“  ì•¡ì„¸ìŠ¤ê°€ MFA ì¸ì¦ì„ ë°›ì•„ì•¼ í•˜ëŠ” IAM ì •ì±…ì´ ìˆëŠ” ê²½ìš°, MFA ì¸ì¦ì„ ë°›ì§€ ì•Šì€ ìê²© ì¦ëª…(ì¦‰, <code>GetSessionToken</code>ì„ í˜¸ì¶œí•˜ê³  MFA ì½”ë“œë¥¼ ì œê³µí•˜ì—¬ ê²€ìƒ‰í•œ ìê²© ì¦ëª…ì´ ì•„ë‹Œ ì›ì‹œ ìê²© ì¦ëª…)ì€ ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì—¬ì „íˆ Vaultì— ì¸ì¦í•  ìˆ˜ ìˆë‹¤. Vaultì— ì¸ì¦í•˜ëŠ” ë™ì•ˆ IAM ì£¼ì²´ê°€ MFA ì¸ì¦ì„ ë°›ë„ë¡ ê°•ì œí•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.</p>
<h3><code>ec2</code> ì¸ì¦ ë°©ì‹</h3>
<p>ec2 ë°©ì‹ì—ì„œëŠ” AWSê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì œ3ìë¡œ ì·¨ê¸‰ë˜ë©°, ê° EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³ ìœ í•˜ê²Œ ë‚˜íƒ€ë‚´ëŠ” ì•”í˜¸í™” ì„œëª…ëœ ë™ì  ë©”íƒ€ë°ì´í„° ì •ë³´ê°€ ì¸ì¦ì— ì‚¬ìš©ëœë‹¤. ì´ ë©”íƒ€ë°ì´í„° ì •ë³´ëŠ” AWSê°€ ëª¨ë“  EC2 ì¸ìŠ¤í„´ìŠ¤ì— ìë™ìœ¼ë¡œ ì œê³µí•œë‹¤. íŠ¹ì • AMI, íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ë˜ëŠ” íŠ¹ìˆ˜ íƒœê·¸ ê°’ì„ ê°€ì§„ EC2 ì¸ìŠ¤í„´ìŠ¤(role_tag ê¸°ëŠ¥ì„ í†µí•´)ì—ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œí•œí•˜ëŠ” ë“± EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° íŠ¹í™”ë˜ì–´ ìˆë‹¤.</p>
<p>Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„¤ëª…í•˜ëŠ” ë©”íƒ€ë°ì´í„°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Vault EC2 ì¸ì¦ ë©”ì„œë“œëŠ” ì´ ë©”íƒ€ë°ì´í„°ì˜ êµ¬ì„± ìš”ì†Œë¥¼ í™œìš©í•˜ì—¬ ì´ˆê¸° Vault í† í°ì„ ì¸ì¦í•˜ê³  EC2 ì¸ìŠ¤í„´ìŠ¤ì— ë°°í¬í•œë‹¤. ë°ì´í„° íë¦„(ì•„ë˜ ê·¸ë˜í”½ì—ë„ í‘œì‹œë¨)ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:</p>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/assets (1368Ã—998) 2023-06-30 20-34-15.png" alt="assets (1368Ã—998) 2023-06-30 20-34-15" tabindex="0" loading="lazy"><figcaption>assets (1368Ã—998) 2023-06-30 20-34-15</figcaption></figure>
<ol>
<li>AWS EC2 ì¸ìŠ¤í„´ìŠ¤ëŠ” EC2 ë©”íƒ€ë°ì´í„° ì„œë¹„ìŠ¤ì—ì„œ AWS ì¸ìŠ¤í„´ìŠ¤ ID ë¬¸ì„œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. AWSëŠ” ë°ì´í„° ìì²´ ì™¸ì—ë„ ë°ì´í„°ì˜ PKCS#7 ì„œëª…ì„ ì œê³µí•˜ê³ , ì„œëª…ì„ í™•ì¸í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê³µê°œ í‚¤(ì§€ì—­ë³„ë¡œ)ë¥¼ ê²Œì‹œí•œë‹¤.</li>
<li>AWS EC2 ì¸ìŠ¤í„´ìŠ¤ëŠ” PKCS#7 ì„œëª…ì„ ì‚¬ìš©í•˜ì—¬ Vaultì— ìš”ì²­í•©ë‹ˆë‹¤. PKCS#7 ì„œëª…ì—ëŠ” ì¸ìŠ¤í„´ìŠ¤ ID ë¬¸ì„œê°€ í¬í•¨ëœë‹¤.</li>
<li>VaultëŠ” PKCS#7 ë¬¸ì„œì˜ ì„œëª…ì„ í™•ì¸í•˜ì—¬ ì •ë³´ê°€ AWSì— ì˜í•´ ì •í™•í•˜ê²Œ ì¸ì¦ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì´ í”„ë¡œì„¸ìŠ¤ëŠ” ë¬¸ì„œ ë°ì´í„°ì˜ ìœ íš¨ì„±ê³¼ ë¬´ê²°ì„±ì„ ëª¨ë‘ ê²€ì¦í•©ë‹ˆë‹¤. ì¶”ê°€ ë³´ì•ˆ ì¡°ì¹˜ë¡œ, VaultëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ í˜„ì¬ í¼ë¸”ë¦­ EC2 API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•œë‹¤.</li>
<li>ëª¨ë“  ë‹¨ê³„ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ VaultëŠ” ì´ˆê¸° Vault í† í°ì„ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ë°˜í™˜í•©ë‹ˆë‹¤. ì´ í† í°ì€ ì¸ìŠ¤í„´ìŠ¤ ë©”íƒ€ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì„±ëœ ëª¨ë“  ì •ì±…ì— ë§¤í•‘ëœë‹¤.</li>
</ol>
<h2>2. Vaultì˜ AWS auth method ì¸ì¦ì— í•„ìš”í•œ ê¶Œì¥ IAM Policy</h2>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"ec2:DescribeInstances"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:GetInstanceProfile"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:GetUser"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:GetRole"</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"*"</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"sts:AssumeRole"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"arn:aws:iam::&lt;AccountId&gt;:role/&lt;VaultRole&gt;"</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Sid"</span><span class="token operator">:</span> <span class="token string">"ManageOwnAccessKeys"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"iam:CreateAccessKey"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:DeleteAccessKey"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:GetAccessKeyLastUsed"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:GetUser"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:ListAccessKeys"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:UpdateAccessKey"</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"arn:aws:iam::*:user/${aws:username}"</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Sid"</span><span class="token operator">:</span> <span class="token string">"IAM_Method"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"sts:GetCallerIdentity"</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"*"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><ul>
<li><code>arn:aws:iam::\&lt;AccountId\&gt;:*</code>: ë¡œ êµ¬ì„±í•˜ë©´ AWS ê³„ì •ì˜ ëª¨ë“  ì£¼ì²´ê°€ ì´ ê³„ì •ì— ë¡œê·¸ì¸</li>
<li><code>arn:aws:iam::\&lt;AccountId\&gt;:role/*</code> ë¡œ êµ¬ì„±í•˜ë©´ AWS ê³„ì •ì˜ ëª¨ë“  IAM ì—­í• ì´ í•´ë‹¹ ê³„ì •ì— ë¡œê·¸ì¸</li>
<li>ì™€ì¼ë“œì¹´ë“œë¥¼ ì§€ì •í•˜ë ¤ë©´ ì „ì²´ ì‚¬ìš©ì ê²½ë¡œë¥¼ ì˜¬ë°”ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ Vaultì— <code>iam:GetUser</code> ë° <code>iam:GetRole</code> ê¶Œí•œì„ ë¶€ì—¬</li>
<li>ARNì´ <code>arn:aws:iam::123456789012:role/MyRole</code>ì¸ ì—­í• ì´ ìˆëŠ” ê²½ìš°, í•´ë‹¹ ì—­í• ì—ì„œ AssumeRoleì„ í˜¸ì¶œí•˜ì—¬ ë°˜í™˜ë˜ëŠ” ìê²© ì¦ëª…ì€ <code>arn:aws:sts::123456789012:assumed-role/MyRole/RoleSessionName</code>ì´ë©°, ì—¬ê¸°ì„œ <code>RoleSessionName</code>ì€ AssumeRole API í˜¸ì¶œì˜ ì„¸ì…˜ ì´ë¦„</li>
<li><code>ec2:DescribeInstances</code>ëŠ” ec2 ì¸ì¦ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ role binding ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ <code>ec2_instance</code>ì—”í‹°í‹° ìœ í˜•ì„ ì¶”ë¡ í•  ë•Œ í•„ìš”</li>
<li><code>iam:GetInstanceProfile</code>ì€ ec2 ì¸ì¦ ë©”ì„œë“œì— <code>bound_iam_role_arn</code>ì´ ìˆì„ ë•Œ ì‚¬ìš©</li>
<li>ê³„ì •ê°„ ì ‘ê·¼ì´ í•„ìš”í•œ ê²½ìš° <code>sts:AssumeRole</code> êµ¬ë¬¸ì´ í•„ìš”(ì§€ì •ëœ ë¦¬ì†ŒìŠ¤ëŠ” ê³„ì • ê°„ ì•¡ì„¸ìŠ¤ë¥¼ êµ¬ì„±í•œ ëª¨ë“  ì—­í• ì˜ ëª©ë¡ì´ì–´ì•¼ í•˜ë©°, ê° ì—­í• ì—ëŠ” ì´ IAM ì •ì±…ì´ ì²¨ë¶€ë˜ì–´ ìˆì–´ì•¼ í•˜ë©° <code>sts:AssumeRole</code> ë¬¸ì€ ì œì™¸)</li>
<li>ì •ì  ìê²© ì¦ëª…ìœ¼ë¡œ Vaultë¥¼ êµ¬ì„±í•œ í›„ Rotate Root Credentials API í˜¸ì¶œì„ í†µí•´ ì´ëŸ¬í•œ ìê²© ì¦ëª…ì„ íšŒì „í•˜ë ¤ëŠ” ê²½ìš° <code>ManageOwnAccessKeys</code> êµ¬ì ˆì´ í•„ìš”</li>
</ul>
<h2>3. AWS ì™¸ë¶€ì—ì„œ êµ¬ì„±</h2>
<p>AWSì™¸ë¶€ì—ì„œ êµ¬ì„±í•˜ëŠ” ê²½ìš° AWS ì¸ì¦ì„ ìœ„í•œ Policyê°€ êµ¬ì„±ëœ Access Key/Secret Keyê°€ í•„ìš”í•˜ë‹¤.</p>
<h3><code>aws</code> auth method í™œì„±í™”</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault auth <span class="token builtin class-name">enable</span> aws</span>
<span class="line"></span></code></pre></div><h3>í™œì„±í™”ëœ auth methodì˜ êµ¬ì„±</h3>
<ul>
<li>access_key</li>
<li>secret_key</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token function">write</span> auth/aws/config/client <span class="token assign-left variable">secret_key</span><span class="token operator">=</span>vCtSM8ZUEQ3mOFVlYPBQkf2sO6F/W7a5TVzrl3Oj <span class="token assign-left variable">access_key</span><span class="token operator">=</span>VKIAJBRHKH6EVTTNXDHA</span>
<span class="line"></span></code></pre></div><h3><code>ec2</code> role êµ¬ì„± ë° ë¡œê·¸ì¸</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token function">write</span> auth/aws/role/dev-role <span class="token assign-left variable">auth_type</span><span class="token operator">=</span>ec2 <span class="token assign-left variable">bound_ami_id</span><span class="token operator">=</span>ami-fce3c696 <span class="token assign-left variable">policies</span><span class="token operator">=</span>prod,dev <span class="token assign-left variable">max_ttl</span><span class="token operator">=</span>500h</span>
<span class="line"></span>
<span class="line">$ <span class="token assign-left variable">SIGNATURE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> http://169.254.169.254/latest/dynamic/instance-identity/rsa2048 <span class="token operator">|</span> <span class="token function">tr</span> <span class="token parameter variable">-d</span> <span class="token string">'\n'</span><span class="token variable">)</span></span></span>
<span class="line"></span>
<span class="line">$ vault <span class="token function">write</span> auth/aws/login <span class="token assign-left variable">role</span><span class="token operator">=</span>dev-role <span class="token assign-left variable">pkcs7</span><span class="token operator">=</span><span class="token variable">$SIGNATURE</span></span>
<span class="line"></span></code></pre></div><h3><code>iam</code> role êµ¬ì„± ë° ë¡œê·¸ì¸</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault <span class="token function">write</span> auth/aws/role/dev-role-iam <span class="token assign-left variable">auth_type</span><span class="token operator">=</span>iam  <span class="token assign-left variable">bound_iam_principal_arn</span><span class="token operator">=</span>arn:aws:iam::123456789012:role/MyRole <span class="token assign-left variable">policies</span><span class="token operator">=</span>prod,dev <span class="token assign-left variable">max_ttl</span><span class="token operator">=</span>500h</span>
<span class="line"></span>
<span class="line">$ vault login <span class="token parameter variable">-method</span><span class="token operator">=</span>aws <span class="token assign-left variable">header_value</span><span class="token operator">=</span>vault.example.com <span class="token assign-left variable">role</span><span class="token operator">=</span>dev-role-iam <span class="token punctuation">\</span></span>
<span class="line">        <span class="token assign-left variable">aws_access_key_id</span><span class="token operator">=</span><span class="token operator">&lt;</span>access_key<span class="token operator">&gt;</span> <span class="token punctuation">\</span></span>
<span class="line">        <span class="token assign-left variable">aws_secret_access_key</span><span class="token operator">=</span><span class="token operator">&lt;</span>secret_key<span class="token operator">&gt;</span> <span class="token punctuation">\</span></span>
<span class="line">        <span class="token assign-left variable">aws_security_token</span><span class="token operator">=</span><span class="token operator">&lt;</span>security_token<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># AWS SDKê°€ ì§€ì›í•˜ëŠ” ì¸ì¦ ë°©ì‹ì´ ì„¤ì •ë˜ì–´ìˆëŠ” ê²½ìš° aws_access_key_id ìƒëµ ê°€ëŠ¥</span></span>
<span class="line"><span class="token comment"># ~/.aws/credentials</span></span>
<span class="line"><span class="token comment"># IAM ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼</span></span>
<span class="line"><span class="token comment"># ECS task role ë“±</span></span>
<span class="line">$ vault login <span class="token parameter variable">-method</span><span class="token operator">=</span>aws <span class="token assign-left variable">header_value</span><span class="token operator">=</span>vault.example.com <span class="token assign-left variable">role</span><span class="token operator">=</span>dev-role-iam</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë¦¬ì „ ì§€ì •ì´ í•„ìš”í•œ ê²½ìš° ëŒ€ìƒ ì§€ì •</span></span>
<span class="line">$ vault login <span class="token parameter variable">-method</span><span class="token operator">=</span>aws <span class="token assign-left variable">region</span><span class="token operator">=</span>us-west-2 <span class="token assign-left variable">role</span><span class="token operator">=</span>dev-role-iam</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ìš”ì²­ ë§¤ê°œë³€ìˆ˜ë¥¼ ìƒì„±í•˜ì—¬ ë¡œê·¸ì¸ ë©”ì„œë“œì— ì „ë‹¬</span></span>
<span class="line">vault <span class="token function">write</span> auth/aws/login <span class="token assign-left variable">role</span><span class="token operator">=</span>dev-role-iam <span class="token punctuation">\</span></span>
<span class="line">        <span class="token assign-left variable">iam_http_request_method</span><span class="token operator">=</span>POST <span class="token punctuation">\</span></span>
<span class="line">        <span class="token assign-left variable">iam_request_url</span><span class="token operator">=</span>aHR0cHM6Ly9zdHMuYW1hem9uYXdzLmNvbS8<span class="token operator">=</span> <span class="token punctuation">\</span></span>
<span class="line">        <span class="token assign-left variable">iam_request_body</span><span class="token operator">=</span>QWN0aW9uPUdldENhbGxlcklkZW50aXR5JlZlcnNpb249MjAxMS0wNi0xNQ<span class="token operator">==</span> <span class="token punctuation">\</span></span>
<span class="line">        <span class="token assign-left variable">iam_request_headers</span><span class="token operator">=</span>eyJDb250ZW50LUxlbmd0aCI6IFsiNDMiXSwgIlVzZXItQWdlbnQiOiBbImF3cy1zZGstZ28vMS40LjEyIChnbzEuNy4xOyBsaW51eDsgYW1kNjQpIl0sICJYLVZhdWx0LUFXU0lBTS1TZXJ2ZXItSWQiOiBbInZhdWx0LmV4YW1wbGUuY29tIl0sICJYLUFtei1EYXRlIjogWyIyMDE2MDkzMFQwNDMxMjFaIl0sICJDb250ZW50LVR5cGUiOiBbImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD11dGYtOCJdLCAiQXV0aG9yaXphdGlvbiI6IFsiQVdTNC1ITUFDLVNIQTI1NiBDcmVkZW50aWFsPWZvby8yMDE2MDkzMC91cy1lYXN0LTEvc3RzL2F3czRfcmVxdWVzdCwgU2lnbmVkSGVhZGVycz1jb250ZW50LWxlbmd0aDtjb250ZW50LXR5cGU7aG9zdDt4LWFtei1kYXRlO3gtdmF1bHQtc2VydmVyLCBTaWduYXR1cmU9YTY5ZmQ3NTBhMzQ0NWM0ZTU1M2UxYjNlNzlkM2RhOTBlZWY1NDA0N2YxZWI0ZWZlOGZmYmM5YzQyOGMyNjU1YiJdfQ<span class="token operator">==</span></span>
<span class="line"></span></code></pre></div><ul>
<li>
<p>iam_request_url ê°’ ì˜ˆì‹œ : <code>https://sts.amazonaws.com/</code></p>
</li>
<li>
<p>iam_request_body ê°’ ì˜ˆì‹œ : <code>Action=GetCallerIdentity&amp;Version=2011-06-15</code></p>
</li>
<li>
<p>iam_request_headers ê°’ ì˜ˆì‹œ :</p>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"Content-Length"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">"43"</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"User-Agent"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">"aws-sdk-go/1.4.12 (go1.7.1; linux; amd64)"</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"X-Vault-AWSIAM-Server-Id"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">"vault.example.com"</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"X-Amz-Date"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">"20160930T043121Z"</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Content-Type"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">"application/x-www-form-urlencoded; charset=utf-8"</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Authorization"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">"AWS4-HMAC-SHA256 Credential=foo/20160930/us-east-1/sts/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-vault-server, Signature=a69fd750a3445c4e553e1b3e79d3da90eef54047f1eb4efe8ffbc9c428c2655b"</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></li>
</ul>
<h2>4. AWS ë‚´ë¶€ì—ì„œ êµ¬ì„±</h2>
<p>AWS ë‚´ë¶€ì—ì„œ êµ¬ì„±ëœ Vault ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ ë° í´ë¼ì´ì–¸íŠ¸ì— í”„ë¡œíŒŒì¼ì„ êµ¬ì„±í•˜ì—¬ Access Keyë¥¼ ìƒëµí•˜ê³  ì¸ì¦ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.</p>
<h3>Terraform Sample</h3>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token keyword">terraform</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">required_providers</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">aws</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">source</span>  <span class="token punctuation">=</span> <span class="token string">"hashicorp/aws"</span></span>
<span class="line">      <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"5.5.0"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token property">random</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">source</span>  <span class="token punctuation">=</span> <span class="token string">"hashicorp/random"</span></span>
<span class="line">      <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"3.5.1"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token property">tls</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">source</span>  <span class="token punctuation">=</span> <span class="token string">"hashicorp/tls"</span></span>
<span class="line">      <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"3.0.0"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">provider<span class="token type variable"> "aws" </span></span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">region</span> <span class="token punctuation">=</span> <span class="token string">"ap-northeast-2"</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">default_tags</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">tags</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">Environment</span> <span class="token punctuation">=</span> <span class="token string">"Demo"</span></span>
<span class="line">      <span class="token property">Owner</span>       <span class="token punctuation">=</span> <span class="token string">"gs@hashicorp.com"</span></span>
<span class="line">      <span class="token property">Project</span>     <span class="token punctuation">=</span> <span class="token string">"example"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">data <span class="token type variable">"aws_caller_identity"</span></span> <span class="token string">"current"</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_vpc"</span></span> <span class="token string">"example"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">cidr_block</span>           <span class="token punctuation">=</span> <span class="token string">"10.0.0.0/16"</span></span>
<span class="line">  <span class="token property">enable_dns_support</span>   <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">enable_dns_hostnames</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">data <span class="token type variable">"aws_availability_zones"</span></span> <span class="token string">"available"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">state</span> <span class="token punctuation">=</span> <span class="token string">"available"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// public subnet</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_subnet"</span></span> <span class="token string">"public"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">vpc_id</span>                  <span class="token punctuation">=</span> aws_vpc.example.id</span>
<span class="line">  <span class="token property">availability_zone</span>       <span class="token punctuation">=</span> data.aws_availability_zones.available.names.<span class="token number">0</span></span>
<span class="line">  <span class="token property">cidr_block</span>              <span class="token punctuation">=</span> cidrsubnet(aws_vpc.example.cidr_block, <span class="token number">8</span>, <span class="token number">0</span>) <span class="token comment">// "10.0.0.0/24" &amp; "10.0.1.0/24"</span></span>
<span class="line">  <span class="token property">map_public_ip_on_launch</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_internet_gateway"</span></span> <span class="token string">"public"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">vpc_id</span> <span class="token punctuation">=</span> aws_vpc.example.id</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_route_table"</span></span> <span class="token string">"public"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">vpc_id</span> <span class="token punctuation">=</span> aws_vpc.example.id</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">route</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">cidr_block</span> <span class="token punctuation">=</span> <span class="token string">"0.0.0.0/0"</span></span>
<span class="line">    <span class="token property">gateway_id</span> <span class="token punctuation">=</span> aws_internet_gateway.public.id</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_route_table_association"</span></span> <span class="token string">"public"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">subnet_id</span>      <span class="token punctuation">=</span> aws_subnet.public.id</span>
<span class="line">  <span class="token property">route_table_id</span> <span class="token punctuation">=</span> aws_route_table.public.id</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_eip"</span></span> <span class="token string">"public"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">domain</span> <span class="token punctuation">=</span> <span class="token string">"vpc"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_nat_gateway"</span></span> <span class="token string">"public"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">allocation_id</span> <span class="token punctuation">=</span> aws_eip.public.id</span>
<span class="line">  <span class="token property">subnet_id</span>     <span class="token punctuation">=</span> aws_subnet.public.id</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// SG</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_security_group"</span></span> <span class="token string">"example"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span>   <span class="token punctuation">=</span> <span class="token string">"example"</span></span>
<span class="line">  <span class="token property">vpc_id</span> <span class="token punctuation">=</span> aws_vpc.example.id</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">egress</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">from_port</span>        <span class="token punctuation">=</span> <span class="token number">0</span></span>
<span class="line">    <span class="token property">to_port</span>          <span class="token punctuation">=</span> <span class="token number">0</span></span>
<span class="line">    <span class="token property">protocol</span>         <span class="token punctuation">=</span> <span class="token string">"-1"</span></span>
<span class="line">    <span class="token property">cidr_blocks</span>      <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"0.0.0.0/0"</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token property">ipv6_cidr_blocks</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"::/0"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_security_group_rule"</span></span> <span class="token string">"example_ssh"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">type</span>              <span class="token punctuation">=</span> <span class="token string">"ingress"</span></span>
<span class="line">  <span class="token property">from_port</span>         <span class="token punctuation">=</span> <span class="token number">22</span></span>
<span class="line">  <span class="token property">to_port</span>           <span class="token punctuation">=</span> <span class="token number">22</span></span>
<span class="line">  <span class="token property">protocol</span>          <span class="token punctuation">=</span> <span class="token string">"tcp"</span></span>
<span class="line">  <span class="token property">cidr_blocks</span>       <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"0.0.0.0/0"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">security_group_id</span> <span class="token punctuation">=</span> aws_security_group.example.id</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_security_group_rule"</span></span> <span class="token string">"example_vault"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">type</span>              <span class="token punctuation">=</span> <span class="token string">"ingress"</span></span>
<span class="line">  <span class="token property">from_port</span>         <span class="token punctuation">=</span> <span class="token number">8200</span></span>
<span class="line">  <span class="token property">to_port</span>           <span class="token punctuation">=</span> <span class="token number">8200</span></span>
<span class="line">  <span class="token property">protocol</span>          <span class="token punctuation">=</span> <span class="token string">"tcp"</span></span>
<span class="line">  <span class="token property">cidr_blocks</span>       <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"0.0.0.0/0"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">security_group_id</span> <span class="token punctuation">=</span> aws_security_group.example.id</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// key pair</span></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"tls_private_key"</span></span> <span class="token string">"ssh"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">algorithm</span> <span class="token punctuation">=</span> <span class="token string">"RSA"</span></span>
<span class="line">  <span class="token property">rsa_bits</span>  <span class="token punctuation">=</span> <span class="token number">4096</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"local_sensitive_file"</span></span> <span class="token string">"ssh_private"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">content</span>  <span class="token punctuation">=</span> tls_private_key.ssh.private_key_pem</span>
<span class="line">  <span class="token property">filename</span> <span class="token punctuation">=</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">path</span><span class="token punctuation">.</span><span class="token type variable">module</span><span class="token punctuation">}</span></span>/ssh_private"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"random_id"</span></span> <span class="token string">"key_id"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">keepers</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">ami_id</span> <span class="token punctuation">=</span> tls_private_key.ssh.public_key_openssh</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">byte_length</span> <span class="token punctuation">=</span> <span class="token number">8</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_key_pair"</span></span> <span class="token string">"ssh"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">key_name</span>   <span class="token punctuation">=</span> <span class="token string">"key-<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>random_id<span class="token punctuation">.</span>key_id<span class="token punctuation">.</span>hex<span class="token punctuation">}</span></span>"</span></span>
<span class="line">  <span class="token property">public_key</span> <span class="token punctuation">=</span> tls_private_key.ssh.public_key_openssh</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// EC2</span></span>
<span class="line"><span class="token keyword">data <span class="token type variable">"aws_ami"</span></span> <span class="token string">"ubuntu"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">most_recent</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">filter</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">name</span>   <span class="token punctuation">=</span> <span class="token string">"name"</span></span>
<span class="line">    <span class="token property">values</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">filter</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">name</span>   <span class="token punctuation">=</span> <span class="token string">"virtualization-type"</span></span>
<span class="line">    <span class="token property">values</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"hvm"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">owners</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"099720109477"</span><span class="token punctuation">]</span> <span class="token comment"># Canonical</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">data <span class="token type variable">"aws_iam_policy_document"</span></span> <span class="token string">"example_instance_role_client"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">statement</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">effect</span>  <span class="token punctuation">=</span> <span class="token string">"Allow"</span></span>
<span class="line">    <span class="token property">actions</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"sts:AssumeRole"</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">principals</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">type</span>        <span class="token punctuation">=</span> <span class="token string">"Service"</span></span>
<span class="line">      <span class="token property">identifiers</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"ec2.amazonaws.com"</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_iam_role"</span></span> <span class="token string">"example_client_instance_role_client"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name_prefix</span>        <span class="token punctuation">=</span> <span class="token string">"auth-example-iam-role-client"</span></span>
<span class="line">  <span class="token property">assume_role_policy</span> <span class="token punctuation">=</span> data.aws_iam_policy_document.example_instance_role_client.json</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_iam_instance_profile"</span></span> <span class="token string">"example_instance_profile_client"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">path</span> <span class="token punctuation">=</span> <span class="token string">"/"</span></span>
<span class="line">  <span class="token property">role</span> <span class="token punctuation">=</span> aws_iam_role.example_client_instance_role_client.name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_instance"</span></span> <span class="token string">"client"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">ami</span>                         <span class="token punctuation">=</span> data.aws_ami.ubuntu.id</span>
<span class="line">  <span class="token property">iam_instance_profile</span>        <span class="token punctuation">=</span> aws_iam_instance_profile.example_instance_profile_client.name</span>
<span class="line">  <span class="token property">instance_type</span>               <span class="token punctuation">=</span> <span class="token string">"t3.micro"</span></span>
<span class="line">  <span class="token property">key_name</span>                    <span class="token punctuation">=</span> aws_key_pair.ssh.key_name</span>
<span class="line">  <span class="token property">subnet_id</span>                   <span class="token punctuation">=</span> aws_subnet.public.id</span>
<span class="line">  <span class="token property">associate_public_ip_address</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">vpc_security_group_ids</span>      <span class="token punctuation">=</span> <span class="token punctuation">[</span>aws_security_group.example.id<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">user_data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;EOF</span>
<span class="line">		#! /bin/bash</span>
<span class="line">    sudo apt update &amp;&amp; sudo apt install gpg</span>
<span class="line">    wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg</span>
<span class="line">    gpg --no-default-keyring --keyring /usr/share/keyrings/hashicorp-archive-keyring.gpg --fingerprint</span>
<span class="line">    echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/hashicorp.list</span>
<span class="line">    sudo apt update</span>
<span class="line">    sudo apt install vault</span>
<span class="line">  EOF</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">tags</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">Name</span> <span class="token punctuation">=</span> <span class="token string">"client"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">data <span class="token type variable">"aws_iam_policy_document"</span></span> <span class="token string">"assume_role"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">statement</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">effect</span> <span class="token punctuation">=</span> <span class="token string">"Allow"</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">principals</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">type</span>        <span class="token punctuation">=</span> <span class="token string">"Service"</span></span>
<span class="line">      <span class="token property">identifiers</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"ec2.amazonaws.com"</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token property">actions</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"sts:AssumeRole"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_iam_role"</span></span> <span class="token string">"vault_role"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span>               <span class="token punctuation">=</span> <span class="token string">"vault-role"</span></span>
<span class="line">  <span class="token property">assume_role_policy</span> <span class="token punctuation">=</span> data.aws_iam_policy_document.assume_role.json</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">data <span class="token type variable">"aws_iam_policy_document"</span></span> <span class="token string">"example_policy_vault"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">statement</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">effect</span>    <span class="token punctuation">=</span> <span class="token string">"Allow"</span></span>
<span class="line">    <span class="token property">actions</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"ec2:DescribeInstances"</span>,</span>
<span class="line">      <span class="token string">"iam:GetInstanceProfile"</span>,</span>
<span class="line">      <span class="token string">"iam:GetUser"</span>,</span>
<span class="line">      <span class="token string">"iam:GetRole"</span>,</span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    <span class="token property">resources</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"*"</span></span>
<span class="line">      <span class="token comment">// "arn:aws:iam::*:user/*",</span></span>
<span class="line">      <span class="token comment">// "arn:aws:iam::*:role/*",</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">statement</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">effect</span>    <span class="token punctuation">=</span> <span class="token string">"Allow"</span></span>
<span class="line">    <span class="token property">actions</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"sts:AssumeRole"</span>,</span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    <span class="token property">resources</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"arn:aws:iam::<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">data</span><span class="token punctuation">.</span><span class="token type variable">aws_caller_identity</span><span class="token punctuation">.</span>current<span class="token punctuation">.</span>account_id<span class="token punctuation">}</span></span>:role/<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>aws_iam_role<span class="token punctuation">.</span>vault_role<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>"</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">statement</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">effect</span>    <span class="token punctuation">=</span> <span class="token string">"Allow"</span></span>
<span class="line">    <span class="token property">actions</span>   <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"sts:GetCallerIdentity"</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    <span class="token property">resources</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">statement</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">sid</span> <span class="token punctuation">=</span> <span class="token string">"ManageOwnAccessKeys"</span></span>
<span class="line">    <span class="token property">actions</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">"iam:CreateAccessKey"</span>,</span>
<span class="line">      <span class="token string">"iam:DeleteAccessKey"</span>,</span>
<span class="line">      <span class="token string">"iam:GetAccessKeyLastUsed"</span>,</span>
<span class="line">      <span class="token string">"iam:GetUser"</span>,</span>
<span class="line">      <span class="token string">"iam:ListAccessKeys"</span>,</span>
<span class="line">      <span class="token string">"iam:UpdateAccessKey"</span>,</span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    <span class="token property">resources</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"arn:aws:iam::*:user/$${aws:username}"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_iam_policy"</span></span> <span class="token string">"policy"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span>        <span class="token punctuation">=</span> <span class="token string">"vault-policy"</span></span>
<span class="line">  <span class="token property">description</span> <span class="token punctuation">=</span> <span class="token string">"A test policy"</span></span>
<span class="line">  <span class="token property">policy</span>      <span class="token punctuation">=</span> data.aws_iam_policy_document.example_policy_vault.json</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_iam_role_policy_attachment"</span></span> <span class="token string">"vault-attach"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">role</span>       <span class="token punctuation">=</span> aws_iam_role.vault_role.name</span>
<span class="line">  <span class="token property">policy_arn</span> <span class="token punctuation">=</span> aws_iam_policy.policy.arn</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_iam_instance_profile"</span></span> <span class="token string">"vault_profile"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"vault_profile"</span></span>
<span class="line">  <span class="token property">role</span> <span class="token punctuation">=</span> aws_iam_role.vault_role.name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">resource <span class="token type variable">"aws_instance"</span></span> <span class="token string">"vault"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">ami</span>                         <span class="token punctuation">=</span> data.aws_ami.ubuntu.id</span>
<span class="line">  <span class="token property">iam_instance_profile</span>        <span class="token punctuation">=</span> aws_iam_instance_profile.vault_profile.name</span>
<span class="line">  <span class="token property">instance_type</span>               <span class="token punctuation">=</span> <span class="token string">"t3.micro"</span></span>
<span class="line">  <span class="token property">key_name</span>                    <span class="token punctuation">=</span> aws_key_pair.ssh.key_name</span>
<span class="line">  <span class="token property">subnet_id</span>                   <span class="token punctuation">=</span> aws_subnet.public.id</span>
<span class="line">  <span class="token property">associate_public_ip_address</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token property">vpc_security_group_ids</span>      <span class="token punctuation">=</span> <span class="token punctuation">[</span>aws_security_group.example.id<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">user_data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;EOF</span>
<span class="line">		#! /bin/bash</span>
<span class="line">    sudo apt update &amp;&amp; sudo apt install gpg</span>
<span class="line">    wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg</span>
<span class="line">    gpg --no-default-keyring --keyring /usr/share/keyrings/hashicorp-archive-keyring.gpg --fingerprint</span>
<span class="line">    echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/hashicorp.list</span>
<span class="line">    sudo apt update</span>
<span class="line">    sudo apt install vault</span>
<span class="line">  EOF</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">tags</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">Name</span> <span class="token punctuation">=</span> <span class="token string">"vault"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">output<span class="token type variable"> "info" </span></span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">value</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">client_ip</span>       <span class="token punctuation">=</span> aws_instance.client.public_ip</span>
<span class="line">    <span class="token property">vault_ip</span>        <span class="token punctuation">=</span> aws_instance.vault.public_ip</span>
<span class="line">    <span class="token property">client_role_arn</span> <span class="token punctuation">=</span> aws_iam_role.example_client_instance_role_client.arn</span>
<span class="line">    <span class="token property">ami_id</span>          <span class="token punctuation">=</span> aws_instance.client.ami</span>
<span class="line">    <span class="token property">ec2_id</span>          <span class="token punctuation">=</span> aws_instance.client.id</span>
<span class="line">    <span class="token property">private_key</span>     <span class="token punctuation">=</span> nonsensitive(tls_private_key.ssh.private_key_pem)</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul>
<li>ì„œë²„ ssh ì ‘ì†ì„ ìœ„í•œ private keyëŠ” <code>ssh_private</code> íŒŒì¼ë¡œ ìë™ ìƒì„±<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">ssh</span> <span class="token parameter variable">-i</span> ./ssh_private <span class="token variable"><span class="token variable">$(</span>terraform output <span class="token parameter variable">-raw</span> vault_ip<span class="token variable">)</span></span></span>
<span class="line"></span></code></pre></div></li>
</ul>
<h3>Vault Server ì‹¤í–‰</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># Server Instance</span></span>
<span class="line">$ vault server <span class="token parameter variable">-dev</span> -dev-root-token-id<span class="token operator">=</span>root -log-level<span class="token operator">=</span>trace</span>
<span class="line"></span></code></pre></div><h3>Clientì—ì„œ Auth êµ¬ì„± ë° í…ŒìŠ¤íŠ¸</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># Client Instance</span></span>
<span class="line">$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_ADDR</span><span class="token operator">=</span>http://10.0.0.8:8200</span>
<span class="line">$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_TOKEN</span><span class="token operator">=</span>root</span>
<span class="line"></span>
<span class="line">$ vault policy <span class="token function">write</span> <span class="token string">"example-policy"</span> -<span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="line">path "secret/data/example_*" {</span>
<span class="line">  capabilities = ["create", "read"]</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line"></span>
<span class="line">$ vault kv put secret/example_test <span class="token assign-left variable">foo</span><span class="token operator">=</span>bar</span>
<span class="line"></span>
<span class="line">$ vault auth <span class="token builtin class-name">enable</span> aws</span>
<span class="line"></span>
<span class="line"><span class="token comment"># auth êµ¬ì„±ì— access key ì„ ì–¸ì´ ìƒëµ</span></span>
<span class="line">$ vault <span class="token function">write</span> auth/aws/config/client <span class="token assign-left variable">sts_region</span><span class="token operator">=</span><span class="token string">"ap-northeast-2"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë§Œì•½ Vault Serverì˜ AWS Authì— ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°</span></span>
<span class="line">$ vault <span class="token function">write</span> <span class="token punctuation">\</span></span>
<span class="line">   auth/aws/role/example-role-name <span class="token punctuation">\</span></span>
<span class="line">   <span class="token assign-left variable">auth_type</span><span class="token operator">=</span>iam <span class="token punctuation">\</span></span>
<span class="line">   <span class="token assign-left variable">policies</span><span class="token operator">=</span>example-policy <span class="token punctuation">\</span></span>
<span class="line">   <span class="token assign-left variable">max_ttl</span><span class="token operator">=</span>500h <span class="token punctuation">\</span></span>
<span class="line">   <span class="token assign-left variable">bound_iam_principal_arn</span><span class="token operator">=</span><span class="token variable">$client_instance_role_arn</span> <span class="token punctuation">\</span></span>
<span class="line">   <span class="token assign-left variable">inferred_entity_type</span><span class="token operator">=</span><span class="token string">"ec2_instance"</span> <span class="token punctuation">\</span></span>
<span class="line">   <span class="token assign-left variable">inferred_aws_region</span><span class="token operator">=</span><span class="token string">"ap-northeast-2"</span></span>
<span class="line"></span>
<span class="line">Error writing data to auth/aws/role/example-role-name: Error making API request.</span>
<span class="line"></span>
<span class="line">URL: PUT http://10.0.0.86:8200/v1/auth/aws/role/example-role-name</span>
<span class="line">Code: <span class="token number">400</span>. Errors:</span>
<span class="line"></span>
<span class="line">* unable to resolve ARN <span class="token string">"arn:aws:iam::467567795630:role/auth-example-iam-role20230630045547898800000001"</span> to internal ID: unable to fetch current caller: NoCredentialProviders: no valid providers <span class="token keyword">in</span> chain. Deprecated.</span>
<span class="line">	For verbose messaging see aws.Config.CredentialsChainVerboseErrors</span>
<span class="line">	</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Policy ì¶”ê°€ í›„ login ìˆ˜í–‰</span></span>
<span class="line">$ vault login <span class="token parameter variable">-method</span><span class="token operator">=</span>aws <span class="token assign-left variable">role</span><span class="token operator">=</span>example-role-name</span>
<span class="line"></span>
<span class="line">Key                      Value</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/assets%20(1368%C3%97998" type="image/"/>
    </item>
    <item>
      <title>ArgoCD Vault Plugin</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/argocd-vault-plugin.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/argocd-vault-plugin.html</guid>
      <source url="https://docmoa.github.io/rss.xml">ArgoCD Vault Plugin</source>
      <description>ArgoCD Vault Plugin ì—°ë™ë°©ì•ˆ</description>
      <pubDate>Mon, 12 Jun 2023 02:29:23 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ì°¸ê³  : ë³¸ ê¸€ì€ AEWS ìŠ¤í„°ë”” 7ì£¼ì°¨ ë‚´ìš©ì¤‘ ì¼ë¶€ë¡œ ì‘ì„±ëœ ë‚´ìš©ì…ë‹ˆë‹¤.</p>
</blockquote>
<h2>1. ArgoCD</h2>
<img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/oH5ELj.jpg" alt="img" style="zoom:50%;">
<h3>1) ê°œìš” ë° ì†Œê°œ</h3>
<p>Argo <strong>CD</strong> is a declarative, <strong>GitOps</strong> continuous delivery tool for <strong>Kubernetes</strong>.</p>
<ul>
<li>ì§€ì†ì ì¸ ë°°í¬ë€(Continuous Delivery, CD) ê°œë°œìê°€ ì†ŒìŠ¤ì½”ë“œë¥¼ ë³€ê²½í•´ì„œ ê¹ƒ ì €ì¥ì†Œì— í‘¸ì‹œí•˜ë©´ í•´ë‹¹ ë³€ê²½ ì‚¬í•­ì´ ê³ ê°ì´ ì‚¬ìš©í•˜ëŠ” ì‹¤ì œ ìš´ì˜í™˜ê²½ì˜ ì‹œìŠ¤í…œê¹Œì§€ ìë™ìœ¼ë¡œ ë°˜ì˜í•¨
<ul>
<li>ê°œë°œìì˜ ì½”ë“œê°€ ì›ê²© ì €ì¥ì†Œì— ì—…ë¡œë“œëì„ ë•Œ <strong>ì•„ë¥´ê³ ì‹œë””</strong>ê°€ ìë™ìœ¼ë¡œ í•´ë‹¹ ì½”ë“œë¥¼ í´ëŸ¬ìŠ¤í„° ìš´ì˜í™˜ê²½ì— <strong>ë°°í¬</strong>í•©ë‹ˆë‹¤.</li>
<li><strong>ì•„ë¥´ê³ ì‹œí‹°</strong>ë¡œ ë°°í¬í•œ í—¬ë¦„ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¦¬ì†ŒìŠ¤ ëª©ë¡, ê° ë¦¬ì†ŒìŠ¤ ê°„ ê´€ê³„ ë° ì—ëŸ¬ ìœ ë¬´ë¥¼ <strong>UI</strong>ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.</li>
</ul>
</li>
<li>ë‹¨ì¼ ì§„ì‹¤ ì›ì²œ(SSOT, Single Source Of Truth)ì´ë€ ì–´ë– í•œ ì§„ì‹¤(ê²°ê³¼)ì˜ ì›ì¸ì´ í•˜ë‚˜ì˜ ì´ìœ (ì›ì²œ)ì—ì„œ ë¹„ë¡¯ë˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
<ul>
<li>ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ ê¹ƒì˜µìŠ¤ì˜ ì˜ë¯¸ëŠ” ì‹¤ì œ ìš´ì˜ ì¤‘ì¸ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœë¥¼ ê°œë°œìì˜ ë¡œì»¬ PCí˜¹ì€ ì•„ë¬´ëŸ° ê¸°ë¡ì„ ë‚¨ê¸°ì§€ ì•Šê³  í´ëŸ¬ìŠ¤í„°ì—ì„œ ì„ì˜ë¡œ ìˆ˜ì •í•˜ê²Œ í•˜ì§€ ì•Šê³  ê³µìš©ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê¹ƒ ì €ì¥ì†Œì—ì„œë§Œ ìœ ì¼í•˜ê²Œ ë³€ê²½ì„ í—ˆìš©í•¨ìœ¼ë¡œì¨ ë‹¨ì¼ ì§„ì‹¤ ì›ì²œ(SSOT)ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.</li>
<li><strong>ì•„ë¥´ê³ ì‹œë””</strong>ë¥¼ ì‚¬ìš©í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ <strong>ì†ŒìŠ¤</strong> íŒŒì¼ì„ ì—¬ëŸ¬ ê°œë°œìì˜ ê°œì¸ PCì— ë³´ê´€í•˜ì§€ ì•Šê³  ì¤‘ì•™ì˜ í†µí•©ëœ <strong>ê¹ƒ ì €ì¥ì†Œ</strong>ì— ë°˜ë“œì‹œ ì—…ë¡œë“œí•˜ê³  ë™ê¸°í™”í•˜ë„ë¡ ì •ì±… ê´€ë¦¬ ê°€ëŠ¥í•¨</li>
</ul>
</li>
<li>GitOps - <a href="https://aws.amazon.com/ko/blogs/containers/automating-amazon-eks-with-gitops/" target="_blank" rel="noopener noreferrer">ì¶œì²˜(Automating Amazon EKS with GitOps)</a></li>
</ul>
<img src="https://d2908q01vomqb2.cloudfront.net/fe2ef495a1152561572949784c16bf23abb28057/2020/11/22/Screen-Shot-2020-11-22-at-4.52.30-PM.png" alt="img" style="zoom:50%;">
<ul>
<li>ìƒ˜í”Œ êµ¬ì„±ë„ - ì¶œì²˜(<a href="https://logonme.net/tech/k8s/pkos2_w3/" target="_blank" rel="noopener noreferrer">https://logonme.net/tech/k8s/pkos2_w3/</a>)</li>
</ul>
<img src="https://logonme.net/wp-content/uploads/2023/03/Untitled-10.png" alt="img" style="zoom:50%;">
<h3>2) ì„¤ì¹˜</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ì„¤ì¹˜</span></span>
<span class="line">helm repo <span class="token function">add</span> argo https://argoproj.github.io/argo-helm</span>
<span class="line">helm repo update</span>
<span class="line">helm <span class="token function">install</span> argocd argo/argo-cd <span class="token parameter variable">--set</span> <span class="token assign-left variable">server.service.type</span><span class="token operator">=</span>LoadBalancer <span class="token parameter variable">--namespace</span> argocd --create-namespace <span class="token parameter variable">--version</span> <span class="token number">5.42</span>.3</span>
<span class="line"></span>
<span class="line"><span class="token comment"># External IP í™•ì¸</span></span>
<span class="line"><span class="token assign-left variable">EXTERNAL_IP</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>k get svc <span class="token parameter variable">-n</span> argocd argocd-server <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.status.loadBalancer.ingress[0].hostname}'</span><span class="token variable">)</span></span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token variable">$EXTERNAL_IP</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># admin ê³„ì •ì˜ ì•”í˜¸ í™•ì¸</span></span>
<span class="line"><span class="token assign-left variable">ARGOPW</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl <span class="token parameter variable">-n</span> argocd get secret argocd-initial-admin-secret <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">"{.data.password}"</span> <span class="token operator">|</span> base64 <span class="token parameter variable">-d</span><span class="token variable">)</span></span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token variable">$ARGOPW</span></span>
<span class="line">mf8bOtNEq7iHMqq1</span>
<span class="line"></span></code></pre></div><h4>(1) UI ì ‘ì† í™•ì¸</h4>
<img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/89u0XP.jpg" alt="img" style="zoom: 33%;">
<h4>(2) CLI ë„êµ¬ì„¤ì¹˜ ë° ì—°ë™</h4>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ìµœì‹ ë²„ì „ ì„¤ì¹˜</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-sSL</span> <span class="token parameter variable">-o</span> argocd-linux-amd64 https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64</span>
<span class="line"><span class="token function">install</span> <span class="token parameter variable">-m</span> <span class="token number">555</span> argocd-linux-amd64 /usr/local/bin/argocd</span>
<span class="line"><span class="token function">chmod</span> +x /usr/local/bin/argocd</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë²„ì „ í™•ì¸</span></span>
<span class="line">argocd version <span class="token parameter variable">--short</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># argocd ì„œë²„ ë¡œê·¸ì¸</span></span>
<span class="line">argocd login <span class="token variable">$EXTERNAL_IP</span> <span class="token parameter variable">--username</span> admin <span class="token parameter variable">--password</span> <span class="token variable">$ARGOPW</span></span>
<span class="line">WARNING: server certificate had error: tls: failed to verify certificate: x509: certificate signed by unknown authority. Proceed insecurely <span class="token punctuation">(</span>y/n<span class="token punctuation">)</span>? y</span>
<span class="line"><span class="token string">'admin:login'</span> logged <span class="token keyword">in</span> successfully</span>
<span class="line">Context <span class="token string">'k8s-argocd-argocdse-789cd00c72-b0b60b99b16f1fc7.elb.ap-northeast-2.amazonaws.com'</span> updated</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ê¸° ì„¤ì¹˜í•œ ê¹ƒë©ì˜ í”„ë¡œì íŠ¸ URL ì„ argocd ê¹ƒ ë¦¬í¬ì§€í† ë¦¬(argocd repo)ë¡œ ë“±ë¡. ê¹ƒë©ì€ í”„ë¡œì íŠ¸ ë‹¨ìœ„ë¡œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë³´ê´€.</span></span>
<span class="line">argocd repo <span class="token function">add</span> <span class="token operator">&lt;</span>ì €ì¥ì†Œ ì£¼ì†Œ<span class="token operator">&gt;</span> <span class="token parameter variable">--username</span> <span class="token operator">&lt;</span>ê³„ì •ëª…<span class="token operator">&gt;</span> <span class="token parameter variable">--password</span> <span class="token operator">&lt;</span>ì•”í˜¸<span class="token operator">&gt;</span></span>
<span class="line"> </span>
<span class="line"><span class="token comment"># ë“±ë¡ í™•ì¸ : ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë¥´ê³ ì‹œë””ê°€ ì„¤ì¹˜ëœ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ëŠ” íƒ€ê¹ƒ í´ëŸ¬ìŠ¤í„°ë¡œ ë“±ë¡ë¨</span></span>
<span class="line">argocd repo list</span>
<span class="line">TYPE  NAME  REPO                                            INSECURE  OCI    LFS    CREDS  STATUS      MESSAGE  PROJECT</span>
<span class="line"><span class="token function">git</span>         https://github.com/hyungwook0221/argo-demo.git  <span class="token boolean">false</span>     <span class="token boolean">false</span>  <span class="token boolean">false</span>  <span class="token boolean">true</span>   Successful</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë¥´ê³ ì‹œë””ê°€ ì„¤ì¹˜ëœ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ëŠ” íƒ€ê¹ƒ í´ëŸ¬ìŠ¤í„°ë¡œ ë“±ë¡ë¨</span></span>
<span class="line">argocd cluster list</span>
<span class="line">SERVER                          NAME        VERSION  STATUS   MESSAGE                                                  PROJECT</span>
<span class="line">https://kubernetes.default.svc  in-cluster           Unknown  Cluster has no applications and is not being monitored.</span>
<span class="line"></span></code></pre></div><h3>3) ìƒ˜í”Œ ì•± ë°°í¬</h3>
<h4>(1) Git ì €ì¥ì†Œ ìƒì„± ë° ë‹¤ìš´</h4>
<blockquote>
<p>í•´ë‹¹ ì €ì¥ì†ŒëŠ” ê°œì¸ì´ ìƒì„±í•œ Git ì €ì¥ì†Œë¡œ ëŒ€ì²´í•˜ì…”ë„ ë©ë‹ˆë‹¤.<br>
í•„ìê°€ ë§Œë“  ì €ì¥ì†Œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤ë©´, "ArgoCD Application CRD" ì±•í„°ë¡œ ë„˜ì–´ê°€ì‹œë©´ ë©ã„´ë””ã….</p>
</blockquote>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># Git ì €ì¥ì†Œ ì„¤ì •</span></span>
<span class="line"><span class="token function">git</span> clone https://github.com/hyungwook0221/argo-demo.git</span>
<span class="line"><span class="token builtin class-name">cd</span> argo-demo</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ê¹ƒ ì›ê²© ì˜¤ë¦¬ì§„ ì£¼ì†Œ í™•ì¸</span></span>
<span class="line"><span class="token function">git</span> config <span class="token parameter variable">-l</span> <span class="token operator">|</span> <span class="token function">grep</span> remote.origin.url</span>
<span class="line"><span class="token assign-left variable">remote.origin.url</span><span class="token operator">=</span>https://github.com/hyungwook0221/argo-demo.git</span>
<span class="line"></span></code></pre></div><h4>(2) PostgreSQL ë°°í¬</h4>
<blockquote>
<p>ì°¸ê³  : <a href="https://artifacthub.io/packages/helm/bitnami/postgresql" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/helm/bitnami/postgresql</a></p>
</blockquote>
<ul>
<li>PostgreSQL í—¬ë¦„ì°¨íŠ¸ ì¤€ë¹„ ë° Github ì €ì¥ì†Œ</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># PostgreSQL í—¬ë¦„ì°¨íŠ¸ ì¶”ê°€ ë° ë‹¤ìš´ë¡œë“œ</span></span>
<span class="line">helm repo <span class="token function">add</span> bitnami https://charts.bitnami.com/bitnami</span>
<span class="line">helm fetch bitnami/postgresql <span class="token parameter variable">--untar</span></span>
<span class="line"><span class="token builtin class-name">cd</span> postgresql/</span>
<span class="line"></span>
<span class="line"><span class="token comment"># audit.logConnections=falseì—ì„œ trueë¡œ ë³€ê²½</span></span>
<span class="line"><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> override-values.yaml</span></span>
<span class="line">audit:</span>
<span class="line">  logConnections: true</span>
<span class="line">EOF</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># í—¬ë¦„ ì°¨íŠ¸ë¥¼ ê¹ƒë© ì €ì¥ì†Œì— ì—…ë¡œë“œ</span></span>
<span class="line"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"add postgresql helm"</span></span>
<span class="line"><span class="token function">git</span> push</span>
<span class="line"></span></code></pre></div><ul>
<li>ArgoCD Application CRD ì¤€ë¹„ : postgresql-helm-argo-application.yml</li>
</ul>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token comment"># postgresql-helm-argo-application.yml</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/8p131S.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>2023ë…„ 6ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-06.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-06.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 6ì›”</source>
      <description>2023ë…„ 6ì›” Update</description>
      <pubDate>Wed, 07 Jun 2023 05:34:37 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>Terraform Cloud updates plans with an enhanced Free tier and more flexibility</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/terraform-cloud-updates-plans-with-an-enhanced-free-tier-and-more-flexibility" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>Terraform Cloud ì— ëŒ€í•œ ìš”ê¸ˆì œê°€ ê°œí¸ë©ë‹ˆë‹¤. ìš”ê¸ˆì œ ê°œí¸ê³¼ í•¨ê»˜ ê° ìš”ê¸ˆì œì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•œ ê¸°ëŠ¥ë“¤ë„ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. (ì˜ˆë¥¼ ë“¤ì–´ ê¸°ì¡´ Free Tier ì—ì„œëŠ” ì‚¬ìš©ë¶ˆê°€ í–ˆë˜ Sentinel/OPA, SSO, Terraform Agent, Run Tasks ë“±)</li>
</ul>
</li>
<li>
<p>Terraform Cloud adds Vault-backed dynamic credentials</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/terraform-cloud-adds-vault-backed-dynamic-credentials" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ì§€ë‚œ 4ì›” ì†Œê°œëœ Dynamic provider credentials now generally available for Terraform Cloud ì— ì´ì–´ Vaultì˜ Cloud Secrets Engine (AWS, Azure, GCP) ë¥¼ ì—°ê³„í•œ ë™ì  ìê²©ì¦ëª… ë°œê¸‰ ê¸°ëŠ¥ì´ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ, Terraform Apply ìˆ˜í–‰ ì‹œ ë§ˆë‹¤ Vault ë¡œ ë¶€í„° ìê²©ì¦ëª…ì„ ë°œê¸‰ë°›ì•„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë³´ë‹¤ ë³´ì•ˆ ê°•í™”ëœ ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.4.6" target="_blank" rel="noopener noreferrer">1.4.6 Release</a>
<ul>
<li><code>terraform plan</code> ì‹œ null string ë˜ëŠ” ì˜ëª» ì •ì˜ëœ map ìœ¼ë¡œ ì¸í•œ ì˜¤ë¥˜ ê°œì„ </li>
<li><code>terraform plan</code> ì‹œ êµ¬ë²„ì „ TFE ì—ì„œ plan ë‘ë²ˆ ë˜ëŠ” ì´ìŠˆ ê°œì„ </li>
<li><code>forces replacement</code> ì„¤ì •ëœ ìì› ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202305-1" target="_blank" rel="noopener noreferrer">5ì›” Release</a> ì¶œì‹œ (<code>v202305-1 (703)</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2)</li>
<li>Terraform run ì‹œ êµ¬ë™ë˜ëŠ” Build Worker ê´€ë ¨ ì§€ì› ì¢…ë£Œ (v202306-1 ë¶€í„° ì ìš©, Terraform run ì‹œ TFC Agent ë¡œ ëŒ€ì²´)</li>
<li>Project ë‹¨ìœ„ Variable Set ì‚¬ìš© ê°€ëŠ¥</li>
<li>Vault ì™€ ì—°ê³„í•œ Dynamic Credentials ì‚¬ìš© ì‹œ base64 encoded PEM format Cert ì§€ì •ì‹œ <code>TFC_VAULT_ENCODED_CACERT</code> í™˜ê²½ë³€ìˆ˜ ì‚¬ìš© ì§€ì›</li>
<li>Authentication Token ë°œí–‰ ì‹œ íê¸° ì‹œì  (Expire date) ì„¤ì •ì§€ì›</li>
<li>OPA Version ìë™ ì—…ê·¸ë ˆì´ë“œ ì§€ì›</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v5.0.0" target="_blank" rel="noopener noreferrer">AWS v5.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ë²„ì „ ì¶œì‹œ ê´€ë ¨ <a href="https://www.hashicorp.com/blog/terraform-aws-provider-5-0-adds-updates-to-default-tags" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>Provider ë‹¨ìœ„ë³„ ìƒì„±/ê´€ë¦¬ ë˜ëŠ” ìì›ì— ëŒ€í•œ Default Tag ì„¤ì • ì§€ì› ë° ê¸°ì¡´ ë°œìƒí•˜ë˜ Tag ê´€ë ¨ ì´ìŠˆì— ëŒ€í•œ ê°œì„ </li>
<li>EC2 Classic ê´€ë ¨ ê¸°ëŠ¥ ì§€ì› ì¢…ë£Œ</li>
<li>ê¸°ì¡´ì— ì‚¬ìš©ìê°€ ê³ ì§€ ë°›ë˜ Warning ì•Œë¦¼ (ì§€ì› ì¢…ë£Œëœ ìì› ì‚¬ìš© ë“±) ì— ëŒ€í•œ ê°œì„ </li>
<li>ì‹ ê·œ ìì› ê´€ë ¨ ì§€ì› ì¶”ê°€
<ul>
<li>Amazon CloudWatch Observability Access Manager</li>
<li>Amazon EC2 Recycle Bin</li>
<li>Amazon QuickSight</li>
<li>Amazon VPC Lattice</li>
<li>AWS Directory Service trust relationships</li>
<li>Amazon EventBridge Pipes</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.58.0" target="_blank" rel="noopener noreferrer">Azure v3.58.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>azurerm_cosmosdb_mongo_*</li>
<li>azurerm_mobile_network_packet_core_control_plane</li>
<li>azurerm_monitor_alert_prometheus_rule_group</li>
<li>azurerm_site_recovery_*</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>azurerm_subnet_service_endpoint_policy ì— ëŒ€í•´ service ì„¤ì • ê°€ëŠ¥</li>
<li>azurerm_site_recovery_replication_recovery_plan ì— ëŒ€í•´ azure_to_azure_settings ì„¤ì • ê°€ëŠ¥</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>azurerm_kubernetes_cluster ì— ëŒ€í•´ nil ê°’ ë°˜í™˜ìœ¼ë¡œ ì¸í•œ panic ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_api_management ì— ëŒ€í•´ triple_des_ciphers_enabled ì„¤ì •ê°’ ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_key_vault ì— ëŒ€í•´ <code>createMode</code> ë¥¼ nil ëŒ€ì‹  default ë¡œ ëŒ€ì²´</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.67.0" target="_blank" rel="noopener noreferrer">GCP v4.67.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>google_____*_iam_policy</li>
<li>google_vertex_ai_index</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>google_compute_instance ì™€ google_compute_instance_template ì— ëŒ€í•´ network_performance_config ì„¤ì • ì§€ì›</li>
<li>google_compute_disk ì™€ google_compute_region_disk ì— ëŒ€í•´ guest_os_features ë° licenses ì„¤ì • ì§€ì›</li>
<li>google_datastream_stream ì— ëŒ€í•´ mysql_source_config.max_concurrent_backfill_tasks ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>google_apigee_orginization ì— ëŒ€í•œ default timeout ì„ ê¸°ì¡´ 20ë¶„ì—ì„œ 45ë¶„ìœ¼ë¡œ ê°œì„ </li>
<li>google_container_node_pool ì— ëŒ€í•´ crash ì˜¤ë¥˜ ê´€ë ¨ ê°œì„ </li>
<li>google_gkeonprem_vmware_cluster ì— ëŒ€í•´ hostname ì„¤ì •ì„ í•„ìˆ˜ì—ì„œ ì„ íƒìœ¼ë¡œ ë³€ê²½</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.13.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.13.2" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>namespace ì— ëŒ€í•œ output ì •ë³´ ìƒì„¸í™”</li>
<li>pki secret engine ì— ëŒ€í•´ OCSP ì— ëŒ€í•œ ì‚¬ì´ì¦ˆ ì¡°ì • ë° í˜¸í™˜ì„± ì œê³ </li>
<li>ldap auth method ì— ëŒ€í•´ max_page_size ì„¤ì • ì§€ì›</li>
<li>ì‹ ê·œ ìƒì„±ëœ Token ì´ ì¸ì§€ë˜ì§€ ì•ŠìŒìœ¼ë¡œ ì¸í•´ ê°„í—ì ìœ¼ë¡œ ë°œìƒë˜ëŠ”  <code>error performing token check: no lease entry found for token that ought to have one, possible eventual consistency issue</code> ì˜¤ë¥˜ ê°œì„ </li>
<li>Perf Standby Cluster ì— ëŒ€í•´ Leader ë³€ê²½, Unseal ë“±ì˜ ì‘ì—… ì´í›„ ë°œìƒí•˜ëŠ” 412 ì˜¤ë¥˜ ê°œì„ </li>
<li>PR Cluster ì— filter ëœ ì •ë³´ replication ì‘ì—… ì‹œ ë°œìƒí•˜ëŠ” caching ì˜¤ë¥˜ ê°œì„ </li>
<li>UI ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.15.3
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.15.3" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>ë³´ì•ˆ ì·¨ì•½ì  ê´€ë ¨ íŒ¨ì¹˜: <a href="https://github.com/advisories/GHSA-9f7g-gqwh-jpf5" target="_blank" rel="noopener noreferrer">CVE-2023-24537 (<code>go/scanner</code>)</a>, <a href="https://github.com/advisories/GHSA-v4m2-x4rp-hv22" target="_blank" rel="noopener noreferrer">CVE-2023-24538(<code>html/template</code>)</a>, <a href="https://github.com/advisories/GHSA-8v5j-pwr7-w5f8" target="_blank" rel="noopener noreferrer">CVE-2023-24534(<code>net/textproto</code>)</a>, <a href="https://github.com/advisories/GHSA-9f7g-gqwh-jpf5" target="_blank" rel="noopener noreferrer">CVE-2023-24536(<code>mime/multipart</code>)</a></li>
<li>HCP Consul ì— ëŒ€í•´ OTEL í˜•íƒœì˜ Metric ìˆ˜ì§‘ ì§€ì›</li>
<li>Raft Storage ê´€ë ¨ ì„±ëŠ¥ ê°œì„ </li>
<li>partition/region ê°„ peering ê´€ë ¨ ê¸°ëŠ¥ ê°œì„ </li>
<li>Envoy Version ì§€ì›ì¶”ê°€: <code>1.22.11</code>, <code>1.23.8</code>, <code>1.24.6</code>, <code>1.25.4</code></li>
<li>Envoy Proxy ê´€ë ¨ Passive Health Check ì— ëŒ€í•´ <code>MaxEjectionPercent</code> ê³¼ <code>BaseEjectionTime</code> ì„¤ì • ì§€ì›</li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.5.6
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.5.6" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Job allocation ì´ ì¬ì‹œì‘ ë˜ì—ˆì„ ë•Œ ë°œìƒí•˜ëŠ” group service ê°€ ë“±ë¡ í•´ì œ ë˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>ì¢…ë£Œë˜ì—ˆìŒì—ë„ ì‚­ì œ ë˜ì§€ ì•Šì€  Job allocation ì— ëŒ€í•œ ì˜¤ë¥˜ ê°œì„ </li>
<li>Job Evaluation ì´ ì˜ëª»ëœ type ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>AEWS 3ì£¼ì°¨ - Amzaon EKS Storage</title>
      <link>https://docmoa.github.io/07-Kubernetes/06-EKS/03-eks-storage.html</link>
      <guid>https://docmoa.github.io/07-Kubernetes/06-EKS/03-eks-storage.html</guid>
      <source url="https://docmoa.github.io/rss.xml">AEWS 3ì£¼ì°¨ - Amzaon EKS Storage</source>
      <description>AEWS 3ì£¼ì°¨ - Amzaon EKS Storage</description>
      <pubDate>Sat, 20 May 2023 16:20:14 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>Vault Secrets Operator ê°œìš”</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-secret-operator/1-vso-overview.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-secret-operator/1-vso-overview.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault Secrets Operator ê°œìš”</source>
      <description>Vault Secrets Operator(ì´í•˜, VSO)ë¥¼ ì‚¬ìš©í•˜ë©´ íŒŒë“œê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œí¬ë¦¿ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ë³¼íŠ¸ ì‹œí¬ë¦¿ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</description>
      <pubDate>Sat, 20 May 2023 16:20:14 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ì°¸ê³ :<br>
í˜„ì¬ Vault ë¹„ë°€ ì˜¤í¼ë ˆì´í„°ëŠ” ê³µê°œ ë² íƒ€ ë²„ì „ì…ë‹ˆë‹¤. *<a href="https://github.com/hashicorp/vault-secrets-operator/issues" target="_blank" rel="noopener noreferrer">here</a>*ì—ì„œ GitHub ì´ìŠˆë¥¼ ê°œì„¤í•˜ì—¬ í”¼ë“œë°±ì„ ì œê³µí•´ ì£¼ì„¸ìš”.</p>
</blockquote>
<figure><img src="https://external-preview.redd.it/UWYqK9zEwREq18MnMbIC7T6W5mUJbF_i4C2K3T1cV6Y.jpg?width=640&amp;crop=smart&amp;auto=webp&amp;s=927dad31a962359c0b61c5ae57ce1d57f6957cf7" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Vault Secrets Operator(ì´í•˜, VSO)ë¥¼ ì‚¬ìš©í•˜ë©´ íŒŒë“œê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œí¬ë¦¿ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ë³¼íŠ¸ ì‹œí¬ë¦¿ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<h2>ê°œìš”</h2>
<p>VSOëŠ” ì§€ì›ë˜ëŠ” Custom Resource Definitions (CRD) ì§‘í•©ì˜ ë³€ê²½ ì‚¬í•­ì„ ê°ì‹œí•˜ì—¬ ì‘ë™í•œë‹¤. ê° CRDëŠ” ì˜¤í¼ë ˆì´í„°ê°€ Vault Secretsì„ Kubernetes Secretì— ë™ê¸°í™”í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë° í•„ìš”í•œ ì‚¬ì–‘(specification)ì„ ì œê³µí•œë‹¤.</p>
<p>ì˜¤í¼ë ˆì´í„°ëŠ” ì†ŒìŠ¤(source) ë³¼íŠ¸ ì‹œí¬ë¦¿ ë°ì´í„°ë¥¼ ëŒ€ìƒ(destination) ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œí¬ë¦¿ì— ì§ì ‘ ì“°ë©°, ì†ŒìŠ¤ì— ëŒ€í•œ ë³€ê²½ ì‚¬í•­ì´ ìˆ˜ëª… ê¸°ê°„ ë™ì•ˆ ëŒ€ìƒì— ë³µì œë˜ë„ë¡ í•œë‹¤. ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ëŒ€ìƒ ì‹œí¬ë¦¿ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œë§Œ ìˆìœ¼ë©´ ê·¸ ì•ˆì— í¬í•¨ëœ ì‹œí¬ë¦¿ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<h3>íŠ¹ì§•</h3>
<p>VSOê°€ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:</p>
<ul>
<li>ëª¨ë“  Vault ë¹„ë°€ ì—”ì§„ ì§€ì›.</li>
<li>Vaultì™€ì˜ TLS/mTLS í†µì‹ .</li>
<li><a href="https://developer.hashicorp.com/vault/docs/auth/kubernetes" target="_blank" rel="noopener noreferrer">Kubernetes Auth Method</a>ì„ í†µí•´ ìš”ì²­í•˜ëŠ” <code>Pod</code>ì˜ <code>ServiceAccount</code>ë¥¼ ì‚¬ìš©í•œ ì¸ì¦.</li>
<li>Vault Secretsì„ Kubernetes Secretsì— ë™ê¸°í™”.</li>
<li><code>Deployment</code>, <code> ReplicaSet</code>, <code>StatefulSet</code>  ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤ ìœ í˜•ì— ëŒ€í•œ ì‹œí¬ë¦¿ ë¡œí…Œì´ì…˜.</li>
<li>ìš´ì˜ì ëª¨ë‹ˆí„°ë§ì„ ìœ„í•œ Prometheus ê³„ì¸¡(instrumentation) ì œê³µ.</li>
<li>ì§€ì›ë˜ëŠ” ì„¤ì¹˜ ë°©ë²•: <code>Helm</code>, <code>Kustomize</code></li>
<li>ìì„¸í•œ ë‚´ìš©ì€ <em><a href="https://developer.hashicorp.com/vault/docs/platform/k8s/vso/installation" target="_blank" rel="noopener noreferrer">installation</a></em> ë¬¸ì„œë¥¼ ì°¸ì¡°.</li>
</ul>
<h2>ì§€ì›ë˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „</h2>
<p>í˜„ì¬ ì§€ì›ë˜ëŠ” <a href="https://kubernetes.io/releases/" target="_blank" rel="noopener noreferrer">Kubernetes minor releases</a>ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. ìµœì‹  ë²„ì „ì€ ê° ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ì— ëŒ€í•´ í…ŒìŠ¤íŠ¸ë˜ë©°, ë‹¤ë¥¸ ë²„ì „ì˜ Kubernetesì—ì„œë„ ì‘ë™í•  ìˆ˜ ìˆì§€ë§Œ ì§€ì›ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.</p>
<ul>
<li>1.26</li>
<li>1.25</li>
<li>1.24</li>
<li>1.23</li>
<li>1.22</li>
</ul>
<h2>Vault ì ‘ê·¼ ë° ì‚¬ìš©ì ì§€ì • ë¦¬ì†ŒìŠ¤ ì •ì˜</h2>
<blockquote>
<p>ì°¸ê³ :<br>
í˜„ì¬, ì˜¤í¼ë ˆì´í„°ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì¸ì¦ ë°©ë²•ë§Œ ì§€ì›í•œë‹¤. ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë” ë§ì€ Vault ì¸ì¦ ë°©ì‹ì— ëŒ€í•œ ì§€ì›ì„ ì¶”ê°€í•  ì˜ˆì •ì´ë‹¤.</p>
</blockquote>
<p>Vault ì—°ê²° ë° ì¸ì¦ êµ¬ì„±ì€ <code>VaultConnection</code> ë° <code>VaultAuth</code> CRDì—ì„œ ì œê³µí•œë‹¤. ì´ëŠ” ëª¨ë“  ë¹„ë°€ ë³µì œ ìœ í˜• ë¦¬ì†ŒìŠ¤ê°€ ì°¸ì¡°í•˜ëŠ” ê¸°ë³¸ ì‚¬ìš©ì ì§€ì • ë¦¬ì†ŒìŠ¤ë¡œ ê°„ì£¼í•  ìˆ˜ ìˆë‹¤.</p>
<h3><code>VaultConnection</code> ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤</h3>
<p>ì˜¤í¼ë ˆì´í„°ê°€ ë‹¨ì¼ Vault ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•˜ëŠ” ë° í•„ìš”í•œ êµ¬ì„±ì„ ì œê³µí•œë‹¤.</p>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://external-preview.redd.it/UWYqK9zEwREq18MnMbIC7T6W5mUJbF_i4C2K3T1cV6Y.jpg?width=640&amp;crop=smart&amp;auto=webp&amp;s=927dad31a962359c0b61c5ae57ce1d57f6957cf7" type="image/"/>
    </item>
    <item>
      <title>Vault Secrets Operator ì„¤ì¹˜</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-secret-operator/2-vso-install.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-secret-operator/2-vso-install.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault Secrets Operator ì„¤ì¹˜</source>
      <description>Vault Secrets Operator(ì´í•˜, VSO)ë¥¼ ì„¤ì¹˜í•˜ê³  êµ¬ì„±í•˜ëŠ” ê¶Œê³  ë°©ì•ˆì´ë‹¤.</description>
      <pubDate>Sat, 20 May 2023 16:20:14 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ì°¸ê³ :<br>
í˜„ì¬ Vault ë¹„ë°€ ì˜¤í¼ë ˆì´í„°ëŠ” ê³µê°œ ë² íƒ€ ë²„ì „ì…ë‹ˆë‹¤. *<a href="https://github.com/hashicorp/vault-secrets-operator/issues" target="_blank" rel="noopener noreferrer">here</a>*ì—ì„œ GitHub ì´ìŠˆë¥¼ ê°œì„¤í•˜ì—¬ í”¼ë“œë°±ì„ ì œê³µí•´ ì£¼ì„¸ìš”.</p>
</blockquote>
<h2>ì‚¬ì „ ìš”êµ¬ì‚¬í•­</h2>
<ul>
<li>Kubernetes 1.22+</li>
<li>Vault OSS/Enterprise 1.11+</li>
</ul>
<h2>Helmì„ í™œìš©í•œ ì„¤ì¹˜</h2>
<p><a href="https://developer.hashicorp.com/vault/docs/platform/k8s/vso/helm" target="_blank" rel="noopener noreferrer">Vault Secrets Operator Helm chart</a>ëŠ” Vault Secrets Operator(ì´í•˜, VSO)ë¥¼ ì„¤ì¹˜í•˜ê³  êµ¬ì„±í•˜ëŠ” ê¶Œê³  ë°©ì•ˆì´ë‹¤.</p>
<p>VSOì˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ë ¤ë©´ ë¨¼ì € HashiCorp Helm Repoë¥¼ ì¶”ê°€í•˜ê³  Chartì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤:</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token variable">$helm</span> repo <span class="token function">add</span> hashicorp https://helm.releases.hashicorp.com</span>
<span class="line"><span class="token string">"hashicorp"</span> has been added to your repositories</span>
<span class="line"></span>
<span class="line">$ helm search repo hashicorp/vault-secrets-operator <span class="token parameter variable">--devel</span></span>
<span class="line">NAME            CHART VERSION   APP VERSION DESCRIPTION</span>
<span class="line">hashicorp/vault-secrets-operator    <span class="token number">0.1</span>.0-beta          <span class="token number">0.1</span>.0-beta      Official HashiCorp Vault Secrets Operator Chart</span>
<span class="line"></span></code></pre></div><p>ê·¸ëŸ°ë‹¤ìŒ Operatorë¥¼ ì„¤ì¹˜í•œë‹¤:</p>
<div class="language-shell-session" data-highlighter="prismjs" data-ext="shell-session" data-title="shell-session"><pre class="language-shell-session"><code><span class="line"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">helm <span class="token function">install</span> --create-namespace <span class="token parameter variable">--namespace</span> vault-secrets-operator vault-secrets-operator hashicorp/vault-secrets-operator <span class="token parameter variable">--version</span> <span class="token number">0.1</span>.0-beta</span></span></span>
<span class="line"></span></code></pre></div><h2>Helmì„ ì‚¬ìš©í•œ ì—…ê·¸ë ˆì´ë“œ</h2>
<p>ì—…ê·¸ë ˆì´ë“œëŠ” ê¸°ì¡´ ì„¤ì¹˜ì—ì„œ <code>helm upgrade</code>ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ì„¤ì¹˜ ë˜ëŠ” ì—…ê·¸ë ˆì´ë“œ ì „ì— í•­ìƒ <code>--dry-run</code>ìœ¼ë¡œ í—¬ë¦„ì„ ì‹¤í–‰í•˜ì—¬ ë³€ê²½ ì‚¬í•­ì„ í™•ì¸í•œë‹¤.</p>
<h3>Helm Chart Values</h3>
<p>ì§€ì›ë˜ëŠ” ëª¨ë“  í—¬ë¦„ ì°¨íŠ¸ ê°’ì€ <a href="https://developer.hashicorp.com/vault/docs/platform/k8s/vso/helm" target="_blank" rel="noopener noreferrer">here</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Vault Secrets Operator ì˜ˆì œì‹¤ìŠµ</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-secret-operator/3-vso-samples.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-secret-operator/3-vso-samples.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault Secrets Operator ì˜ˆì œì‹¤ìŠµ</source>
      <description>Vault Secret Operator ì €ì¥ì†Œì—ì„œ ì œê³µí•˜ëŠ” ì½”ë“œë¥¼ í™œìš©í•˜ì—¬ í™˜ê²½êµ¬ì„± ë° ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬/ì—°ë™ì— ëŒ€í•œ ìƒì„¸ ë¶„ì„ì„ ì œê³µí•œë‹¤.</description>
      <pubDate>Sat, 20 May 2023 16:20:14 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ğŸ“Œ ì°¸ê³ :<br>
í˜„ì¬ Vault ë¹„ë°€ ì˜¤í¼ë ˆì´í„°ëŠ” ê³µê°œ ë² íƒ€ ë²„ì „ì…ë‹ˆë‹¤. *<a href="https://github.com/hashicorp/vault-secrets-operator/issues" target="_blank" rel="noopener noreferrer">here</a>*ì—ì„œ GitHub ì´ìŠˆë¥¼ ê°œì„¤í•˜ì—¬ í”¼ë“œë°±ì„ ì œê³µí•´ ì£¼ì„¸ìš”.</p>
</blockquote>
<p>ë³¸ ë¬¸ì„œëŠ” HashiCorp ê³µì‹ GitHubì˜ <a href="%5Bhere%5D(https://github.com/hashicorp/vault-secrets-operator#samples)">Vault Secret Operator ì €ì¥ì†Œ</a> ì—ì„œ ì œê³µí•˜ëŠ” ì½”ë“œë¥¼ í™œìš©í•˜ì—¬ í™˜ê²½êµ¬ì„± ë° ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬/ì—°ë™ì— ëŒ€í•œ ìƒì„¸ ë¶„ì„ì„ ì œê³µí•œë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/vso_repo.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2>0. ì‚¬ì „ ìš”êµ¬ì‚¬í•­</h2>
<h3>1) íŒ¨í‚¤ì§€ ë° ë°”ì´ë„ˆë¦¬ ì •ë³´</h3>
<ul>
<li>go(1.20.2 ì´ìƒ)</li>
<li>make</li>
<li>KinD</li>
<li>Docker</li>
<li>Kubectl</li>
<li>unzip</li>
</ul>
<h3>2) ì €ì¥ì†Œ ë³µì œ</h3>
<p>ì‹¤ìŠµì„ ìœ„í•´ <a href="https://github.com/hashicorp/vault-secrets-operator" target="_blank" rel="noopener noreferrer">vault-secrets-operator</a> ì €ì¥ì†Œë¥¼ ë³µì œí•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ì €ì¥ì†Œ ë³µì œ</span></span>
<span class="line">$ <span class="token function">git</span> clone https://github.com/hashicorp/vault-secrets-operator.git</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ì‘ì—… ë””ë ‰í† ë¦¬ ì´ë™</span></span>
<span class="line">$ <span class="token builtin class-name">cd</span> vault-secrets-operator</span>
<span class="line"></span></code></pre></div><h2>1. K8s í™˜ê²½êµ¬ì„± ë° ìƒ˜í”Œë°°í¬</h2>
<blockquote>
<p>ğŸ“Œ ì°¸ê³ :<br>
ì‹¤í–‰ê²°ê³¼ : <a href="https://gist.githubusercontent.com/hyungwook0221/85ec45d06a8c7643bcfe4afcd8843856/raw/b40096f6bbfad75636e3657f6c0827f8b7a0b436/vso-demo-1.sh" target="_blank" rel="noopener noreferrer">vso-demo-1.sh</a></p>
</blockquote>
<ul>
<li>Start a KinD Cluster</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">make</span> setup-kind</span>
<span class="line"></span></code></pre></div><ul>
<li><code>setup-kind</code> ìˆ˜í–‰ í›„ ìƒì„±ëœ KinD í´ëŸ¬ìŠ¤í„° ë° íŒŒë“œì •ë³´ í™•ì¸</li>
</ul>
<p><code>vault-secrets-operator-control-plane</code> ê°€ ë‹¨ì¼ë…¸ë“œë¡œ ë°°í¬ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ kubectl get nodes <span class="token parameter variable">-o</span> wide</span>
<span class="line">NAME                                   STATUS   ROLES           AGE     VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION     CONTAINER-RUNTIME</span>
<span class="line">vault-secrets-operator-control-plane   Ready    control-plane   3m18s   v1.25.3   <span class="token number">172.18</span>.0.2    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        Ubuntu <span class="token number">22.04</span>.1 LTS   <span class="token number">5.15</span>.49-linuxkit   containerd://1.6.9</span>
<span class="line"></span>
<span class="line">$ kubectl get pods <span class="token parameter variable">-A</span></span>
<span class="line">NAMESPACE            NAME                                                           READY   STATUS    RESTARTS   AGE</span>
<span class="line">kube-system          coredns-565d847f94-42vpm                                       <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m5s</span>
<span class="line">kube-system          coredns-565d847f94-6fsv9                                       <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m5s</span>
<span class="line">kube-system          etcd-vault-secrets-operator-control-plane                      <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m18s</span>
<span class="line">kube-system          kindnet-9j486                                                  <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m6s</span>
<span class="line">kube-system          kube-apiserver-vault-secrets-operator-control-plane            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m18s</span>
<span class="line">kube-system          kube-controller-manager-vault-secrets-operator-control-plane   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m18s</span>
<span class="line">kube-system          kube-proxy-tfqc8                                               <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m6s</span>
<span class="line">kube-system          kube-scheduler-vault-secrets-operator-control-plane            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m17s</span>
<span class="line">local-path-storage   local-path-provisioner-684f458cdd-2dzfn                        <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m5s</span>
<span class="line"></span></code></pre></div><h2>2. Vault í´ëŸ¬ìŠ¤í„° ë°°í¬</h2>
<blockquote>
<p>ğŸ“Œ ì°¸ê³ <br>
ì‹¤í–‰ê²°ê³¼ : <a href="https://gist.githubusercontent.com/hyungwook0221/3bf0603ca179f367492fefab9574595f/raw/53b33e501082193999c1f5dca9ed73c70507d42f/vso-demo-2.sh" target="_blank" rel="noopener noreferrer">vso-demo-2.sh</a></p>
</blockquote>
<p>ì•ì„œ ìƒì„±ëœ KinD í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì— Vault í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•œë‹¤. ì´ë•Œ, í•„ìš”í•œ ì‚¬ì „ í™˜ê²½ì„ Terraform ì½”ë“œë¥¼ í†µí•´ ìë™ìœ¼ë¡œ êµ¬ì„±í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">make</span> setup-integration-test</span>
<span class="line"></span></code></pre></div><ul>
<li>ë°°í¬ëœ Vaulat Server Pod í™•ì¸</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># Pod í™•ì¸</span></span>
<span class="line">$ kubectl get pods <span class="token parameter variable">-n</span> vault</span>
<span class="line">NAME      READY   STATUS    RESTARTS   AGE</span>
<span class="line">vault-0   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          73s</span>
<span class="line"></span>
<span class="line"><span class="token comment"># vault ìƒíƒœí™•ì¸</span></span>
<span class="line">$ kubectl <span class="token builtin class-name">exec</span> <span class="token parameter variable">-n</span> vault <span class="token parameter variable">-it</span> vault-0 -- vault status</span>
<span class="line">Key             Value</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/vso_repo.png" type="image/png"/>
    </item>
    <item>
      <title>Rancher Desktop Disk Resize on MAC</title>
      <link>https://docmoa.github.io/07-Kubernetes/04-RancherDesktop/rancher-desktop-disk-resize-mac.html</link>
      <guid>https://docmoa.github.io/07-Kubernetes/04-RancherDesktop/rancher-desktop-disk-resize-mac.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Rancher Desktop Disk Resize on MAC</source>
      <description>no space left on device</description>
      <pubDate>Tue, 09 May 2023 08:42:23 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Private docker registry<br>
Rancher Desktop<br>
MacOS<br>
Src :  <a href="https://slack-archive.rancher.com/t/8508077/on-my-m1-mac-i-ve-started-getting-this-error-and-it-wont-go-#3e8d178c-aee8-46e6-b4cc-094c2339cbaa" target="_blank" rel="noopener noreferrer">https://slack-archive.rancher.com/t/8508077/on-my-m1-mac-i-ve-started-getting-this-error-and-it-wont-go-#3e8d178c-aee8-46e6-b4cc-094c2339cbaa</a></p>
</blockquote>
<h2>issue</h2>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">docker</span> run abc</span>
<span class="line">f631eb8a0078: Already exists</span>
<span class="line">d04f82e55126: Already exists</span>
<span class="line">0b1212f566e8: Already exists</span>
<span class="line">8e7d076cd7f0: Already exists</span>
<span class="line">62aa9a741295: Already exists</span>
<span class="line">f3e65750a6be: Extracting  <span class="token number">22</span>.02GB/22.02GB</span>
<span class="line">docker: failed to register layer: Error processing <span class="token function">tar</span> file<span class="token punctuation">(</span>exit status <span class="token number">1</span><span class="token punctuation">)</span>: <span class="token function">write</span> /0000.dat: no space left on device.</span>
<span class="line">See <span class="token string">'docker run --help'</span><span class="token builtin class-name">.</span></span>
<span class="line"></span></code></pre></div><div class="hint-container caution">
<p class="hint-container-title">ìœ„í—˜</p>
<p>Check the Rancher desktop stopped</p>
</div>
<h2>Resize</h2>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ /Applications/Rancher<span class="token punctuation">\</span> Desktop.app/Contents/Resources/resources/darwin/lima/bin/qemu-img resize <span class="token environment constant">$HOME</span>/Library/Application<span class="token punctuation">\</span> Support/rancher-desktop/lima/0/diffdisk +10G</span>
<span class="line"></span>
<span class="line">Image resized.</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>AEWS 2ì£¼ì°¨ - Amzaon EKS Networking</title>
      <link>https://docmoa.github.io/07-Kubernetes/06-EKS/02-eks-networking.html</link>
      <guid>https://docmoa.github.io/07-Kubernetes/06-EKS/02-eks-networking.html</guid>
      <source url="https://docmoa.github.io/rss.xml">AEWS 2ì£¼ì°¨ - Amzaon EKS Networking</source>
      <description>AWSì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì œê³µë˜ëŠ” ë‹¤ì–‘í•œ HOL ê¸°ë°˜ì˜ Workshopê³¼ ê°€ì‹œë‹¤ë‹˜ì˜ íŒ€ì—ì„œ 2ì°¨ ê°€ê³µí•œ ì»¨í…ì¸ ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•œë‹¤..</description>
      <pubDate>Sat, 06 May 2023 17:36:03 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ì´ë²ˆì— ì—°ì¬í•  ìŠ¤í„°ë””ëŠ” AWS EKS Workshop Study (=AEWS)ì´ë‹¤. AWSì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì œê³µë˜ëŠ” ë‹¤ì–‘í•œ HOL ê¸°ë°˜ì˜ Workshopê³¼ ê°€ì‹œë‹¤ë‹˜ì˜ íŒ€ì—ì„œ 2ì°¨ ê°€ê³µí•œ ì»¨í…ì¸ ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•œë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/9cxho8.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2>0. ì‹¤ìŠµí™˜ê²½ ì¤€ë¹„</h2>
<p>2ì£¼ì°¨ ë¶€í„°ëŠ” ì›í´ë¦­ìœ¼ë¡œ EKS ì‹¤ìŠµí™˜ê²½ì„ ë°°í¬í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•œë‹¤. í•„ìëŠ” ì‚¬ìš©ì¤‘ì¸ AWS IAM ê¶Œí•œ ì œì•½ì‚¬í•­ìœ¼ë¡œ ê¸°ì¡´ CF ì½”ë“œë¥¼ ë³€ê²½í•˜ì—¬ ë² ìŠ¤ì²œìš© EC2ì— ê´€ë¦¬ì ê¶Œí•œì„ ìœ„ì„í•˜ì—¬ ë°°í¬í•  ì˜ˆì •ì´ë‹¤.</p>
<blockquote>
<p>ì°¸ê³  : <a href="https://cloudkatha.com/attach-an-iam-role-to-an-ec2-instance-with-cloudformation/" target="_blank" rel="noopener noreferrer">https://cloudkatha.com/attach-an-iam-role-to-an-ec2-instance-with-cloudformation/</a></p>
</blockquote>
<ul>
<li>ì›í´ë¦­ ë°°í¬</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># YAML íŒŒì¼ ë‹¤ìš´ë¡œë“œ</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-O</span> https://gist.githubusercontent.com/hyungwook0221/238d96b3b751362cc03ea40494d15313/raw/49de0a9056688b206a41349fc90727d2375f4f02/aews-eks-oneclick-with-ec2-profile.yaml</span>
<span class="line"></span>
<span class="line"><span class="token comment"># CloudFormation ìŠ¤íƒ ë°°í¬</span></span>
<span class="line"><span class="token comment"># aws cloudformation deploy --template-file eks-oneclick.yaml --stack-name myeks --parameter-overrides KeyName=&lt;My SSH Keyname&gt; SgIngressSshCidr=&lt;My Home Public IP Address&gt;/32 MyIamUserAccessKeyID=&lt;IAM Userì˜ ì•¡ì„¸ìŠ¤í‚¤&gt; MyIamUserSecretAccessKey=&lt;IAM Userì˜ ì‹œí¬ë¦¿ í‚¤&gt; ClusterBaseName='&lt;eks ì´ë¦„&gt;' --region ap-northeast-2</span></span>
<span class="line">ì˜ˆì‹œ<span class="token punctuation">)</span> aws cloudformation deploy --template-file eks-oneclick.yaml --stack-name myeks --parameter-overrides <span class="token assign-left variable">KeyName</span><span class="token operator">=</span>hw-key <span class="token assign-left variable">SgIngressSshCidr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> ipinfo.io/ip<span class="token variable">)</span></span>/32 <span class="token assign-left variable">ClusterBaseName</span><span class="token operator">=</span>myeks <span class="token parameter variable">--region</span> ap-northeast-2 <span class="token parameter variable">--capabilities</span> CAPABILITY_NAMED_IAM</span>
<span class="line"></span>
<span class="line"><span class="token comment"># CloudFormation ìŠ¤íƒ ë°°í¬ ì™„ë£Œ í›„ ì‘ì—…ìš© EC2 IP ì¶œë ¥</span></span>
<span class="line">aws cloudformation describe-stacks --stack-name myeks <span class="token parameter variable">--query</span> <span class="token string">'Stacks[*].Outputs[0].OutputValue'</span> <span class="token parameter variable">--output</span> text</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë§ˆìŠ¤í„°ë…¸ë“œ SSH ì ‘ì†</span></span>
<span class="line"><span class="token function">ssh</span> <span class="token parameter variable">-i</span> ~/.ssh/kp-gasida.pem ec2-user@<span class="token variable"><span class="token variable">$(</span>aws cloudformation describe-stacks --stack-name myeks <span class="token parameter variable">--query</span> <span class="token string">'Stacks[*].Outputs[0].OutputValue'</span> <span class="token parameter variable">--output</span> text<span class="token variable">)</span></span></span>
<span class="line"></span></code></pre></div><h2>1. AWS VPC CNI</h2>
<p>ì¼ë°˜ì ìœ¼ë¡œ Calicoì™€ ê°™ì€ K8s CNIì˜ ê²½ìš°ëŠ” Node - Podì˜ IP ëŒ€ì—­ì´ ë‹¤ë¥´ì§€ë§Œ AWS VPC CNIì˜ ê²½ìš°ì—ëŠ” Node-Pod ëŒ€ì—­ì„ ë™ì¼í•˜ê²Œ í•´ì„œ í†µì‹ ì´ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.</p>
<p>ì¼ë°˜ì ìœ¼ë¡œ Outer íŒ¨í‚·ì„ ê°ì‹¸ì„œ ì˜¤ë²„ë ˆì´ë¡œ í†µì‹ í•˜ì§€ë§Œ AWS VPC CNIëŠ” ì˜¤íˆë ¤ ì‹¬í”Œí•œ êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤. ì´ë¡œì¸í•´ ê°„ë‹¨í•˜ê³  íš¨ìœ¨ì ì¸ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤!</p>
<h3>K8s Calico CNI vs AWS VPC CNI ë¹„êµ</h3>
<ul>
<li>ë„¤íŠ¸ì›Œí¬ í†µì‹ ì˜ ìµœì í™”(ì„±ëŠ¥, ì§€ì—°)ë¥¼ ìœ„í•´ì„œ ë…¸ë“œì™€ íŒŒë“œì˜ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì„ ë™ì¼í•˜ê²Œ ì„¤ì • (ê·¸ë¦¼ì¶œì²˜-ê°€ì‹œë‹¤)</li>
</ul>
<img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/aFbQX7.jpg" alt="img" style="zoom: 33%;">
<ul>
<li>íŒŒë“œê°„ í†µì‹  ì‹œ
<ul>
<li>K8S CNIëŠ” <strong>ì˜¤ë²„ë ˆì´(VXLAN, IP-IP ë“±)</strong> í†µì‹ </li>
<li>AWS VPC CNIëŠ” <strong>ë™ì¼ ëŒ€ì—­ìœ¼ë¡œ ì§ì ‘</strong> í†µì‹ </li>
</ul>
</li>
</ul>
<img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/tMpJbl.jpg" alt="img" style="zoom:33%;">
<ul>
<li>ë…¸ë“œê°„ í†µì‹ (ì¶”í›„ ì—…ë°ì´íŠ¸)</li>
<li>íŒŒë“œê°„ í†µì‹ (ì¶”í›„ ì—…ë°ì´íŠ¸)</li>
</ul>
<h2>2. Service &amp; AWS LoadBalancer Controller</h2>
<p>K8s í™˜ê²½ì—ì„œëŠ” ë‚´/ì™¸ë¶€ í†µì‹ ì„ ìœ„í•œ ì„œë¹„ìŠ¤ë¥¼ í¬ê²Œ 3ê°€ì§€ í˜•íƒœë¡œ ì œê³µí•œë‹¤.</p>
<ul>
<li>Cluster IP</li>
<li>NodePort</li>
<li><strong>LoadBalancer</strong></li>
</ul>
<p>í•„ìëŠ” ê·¸ ì¤‘ì—ì„œ <strong>LoadBalancer</strong> íƒ€ì…ì„ AWS í™˜ê²½ì—ì„œ ì–´ë–»ê²Œ í™œìš©í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì§‘ì¤‘ì ìœ¼ë¡œ í™•ì¸í•˜ê³  Consul ìƒ˜í”Œ ì˜ˆì œì™€ í•¨ê»˜ ì ìš©í•´ë³¼ ì˜ˆì •ì´ë‹¤.</p>
<h2>3. LoadBalancer NLB ëª¨ë“œ</h2>
<p>LoadBalancer ë°°í¬ ì‹œ NLB ëª¨ë“œëŠ”  ë‹¤ìŒ ë‘ ê°€ì§€ ìœ í˜•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<h3>ìœ í˜•1. ì¸ìŠ¤í„´ìŠ¤</h3>
<ol>
<li><code>externalTrafficPolicy</code> : ClusterIP â‡’ 2ë²ˆ ë¶„ì‚° ë° SNATìœ¼ë¡œ Client IP í™•ì¸ ë¶ˆê°€ëŠ¥ â† <code>LoadBalancer</code> íƒ€ì… (ê¸°ë³¸ ëª¨ë“œ) ë™ì‘</li>
<li><code>externalTrafficPolicy</code> : Local â‡’ 1ë²ˆ ë¶„ì‚° ë° ClientIP ìœ ì§€, ì›Œì»¤ ë…¸ë“œì˜ iptables ì‚¬ìš©í•¨</li>
</ol>
<img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/bvP3xu.jpg" alt="img" style="zoom: 33%;">
<h3>ìœ í˜•2. IP</h3>
<blockquote>
<p>ì°¸ê³  : ë°˜ë“œì‹œ AWS LoadBalancer ì»¨íŠ¸ë¡¤ëŸ¬ íŒŒë“œ ë° ì •ì±… ì„¤ì •ì´ í•„ìš”í•¨!</p>
</blockquote>
<ol>
<li><code>Proxy Protocol v2 ë¹„í™œì„±í™”</code> â‡’ NLBì—ì„œ ë°”ë¡œ íŒŒë“œë¡œ ì¸ì…, ë‹¨ ClientIPê°€ NLBë¡œ SNAT ë˜ì–´ Client IP í™•ì¸ ë¶ˆê°€ëŠ¥</li>
<li><code>Proxy Protocol v2 í™œì„±í™”</code> â‡’ NLBì—ì„œ ë°”ë¡œ íŒŒë“œë¡œ ì¸ì… ë° ClientIP í™•ì¸ ê°€ëŠ¥(â†’ ë‹¨ PPv2 ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¸ì§€í•  ìˆ˜ ìˆê²Œ ì„¤ì • í•„ìš”)</li>
</ol>
<img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/J4nUpO.jpg" alt="img" style="zoom:33%;">
<h3>AWS LoadBalancer Controller ë°°í¬ with IRSA</h3>
<blockquote>
<p>ì°¸ê³  : <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/aws-load-balancer-controller.html" target="_blank" rel="noopener noreferrer">AWS Load Balancer Controller ì¶”ê°€ ê¸°ëŠ¥ ì„¤ì¹˜</a></p>
</blockquote>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># AWSLoadBalancerControllerIAMPolicy ìƒì„±</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-o</span> iam_policy.json https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.4.7/docs/install/iam_policy.json</span>
<span class="line">aws iam create-policy --policy-name AWSLoadBalancerControllerIAMPolicy --policy-document file://iam_policy.json</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•œ ê²½ìš° </span></span>
<span class="line"><span class="token comment"># aws iam update-policy --policy-name AWSLoadBalancerControllerIAMPolicy --policy-document file://iam_policy.json</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># AWS Load Balancer Controllerë¥¼ ìœ„í•œ ServiceAccountë¥¼ ìƒì„± </span></span>
<span class="line">eksctl create iamserviceaccount <span class="token parameter variable">--cluster</span><span class="token operator">=</span><span class="token variable">$CLUSTER_NAME</span> <span class="token parameter variable">--namespace</span><span class="token operator">=</span>kube-system <span class="token parameter variable">--name</span><span class="token operator">=</span>aws-load-balancer-controller <span class="token punctuation">\</span></span>
<span class="line">--attach-policy-arn<span class="token operator">=</span>arn:aws:iam::<span class="token variable">$ACCOUNT_ID</span>:policy/AWSLoadBalancerControllerIAMPolicy --override-existing-serviceaccounts <span class="token parameter variable">--approve</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">## IRSA ì •ë³´ í™•ì¸</span></span>
<span class="line">eksctl get iamserviceaccount <span class="token parameter variable">--cluster</span> <span class="token variable">$CLUSTER_NAME</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">## ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ í™•ì¸</span></span>
<span class="line">kubectl get serviceaccounts <span class="token parameter variable">-n</span> kube-system aws-load-balancer-controller <span class="token parameter variable">-o</span> yaml <span class="token operator">|</span> yh</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Helm Chart ì„¤ì¹˜</span></span>
<span class="line">helm repo <span class="token function">add</span> eks https://aws.github.io/eks-charts</span>
<span class="line">helm repo update</span>
<span class="line">helm <span class="token function">install</span> aws-load-balancer-controller eks/aws-load-balancer-controller <span class="token parameter variable">-n</span> kube-system <span class="token parameter variable">--set</span> <span class="token assign-left variable">clusterName</span><span class="token operator">=</span><span class="token variable">$CLUSTER_NAME</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--set</span> <span class="token assign-left variable">serviceAccount.create</span><span class="token operator">=</span>false <span class="token parameter variable">--set</span> <span class="token assign-left variable">serviceAccount.name</span><span class="token operator">=</span>aws-load-balancer-controller</span>
<span class="line">  </span>
<span class="line"><span class="token comment"># ì„¤ì¹˜ í™•ì¸</span></span>
<span class="line">kubectl get crd</span>
<span class="line">kubectl get deployment <span class="token parameter variable">-n</span> kube-system aws-load-balancer-controller</span>
<span class="line">kubectl describe deploy <span class="token parameter variable">-n</span> kube-system aws-load-balancer-controller <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'Service Account'</span></span>
<span class="line">  Service Account:  aws-load-balancer-controller</span>
<span class="line"> </span>
<span class="line"><span class="token comment"># í´ëŸ¬ìŠ¤í„°ë¡¤, í´ëŸ¬ìŠ¤í„° ë¡¤ë°”ì¸ë”© í™•ì¸</span></span>
<span class="line">kubectl describe clusterrolebindings.rbac.authorization.k8s.io aws-load-balancer-controller-rolebinding</span>
<span class="line">kubectl describe clusterroles.rbac.authorization.k8s.io aws-load-balancer-controller-role</span>
<span class="line"></span></code></pre></div><ul>
<li>ìƒì„±ëœ ClusterRole í™•ì¸</li>
</ul>
<p>AWS LoadBalancer Controllerê°€ ë™ì‘í•˜ê¸° ìœ„í•´ í•„ìš”í•œ SAë¥¼ ìƒì„± í›„ ì—°ê²°ëœ ClusterRoleê³¼ ClusterRoleBindingì„ í™”ì¸</p>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/tKiW7W.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h4>ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸</h4>
<p>LoadBalancer íƒ€ì…ì˜ ì„œë¹„ìŠ¤ì™€ ë° íŒŒë“œë¥¼ ë°°í¬í•˜ê³  NLB ëª¨ë“œì— ë”°ë¼ì„œ Client IPê°€ ì–´ë–»ê²Œ í™•ì¸ë˜ëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ëª¨ë‹ˆí„°ë§</span></span>
<span class="line"><span class="token function">watch</span> <span class="token parameter variable">-d</span> kubectl get pod,svc,ep</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ì‘ì—…ìš© EC2 - ë””í”Œë¡œì´ë¨¼íŠ¸ &amp; ì„œë¹„ìŠ¤ ìƒì„±</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-O</span> https://raw.githubusercontent.com/gasida/PKOS/main/2/echo-service-nlb.yaml</span>
<span class="line"><span class="token function">cat</span> echo-service-nlb.yaml <span class="token operator">|</span> yh</span>
<span class="line">kubectl apply <span class="token parameter variable">-f</span> echo-service-nlb.yaml</span>
<span class="line"></span>
<span class="line"><span class="token comment"># íŒŒë“œ ë¡œê¹… ëª¨ë‹ˆí„°ë§</span></span>
<span class="line">kubectl logs <span class="token parameter variable">-l</span> <span class="token assign-left variable">app</span><span class="token operator">=</span>deploy-websrv <span class="token parameter variable">-f</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë¶„ì‚° ì ‘ì† í™•ì¸</span></span>
<span class="line"><span class="token assign-left variable">NLB</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl get svc svc-nlb-ip-type <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token punctuation">{</span>.status.loadBalancer.ingress<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.hostname<span class="token punctuation">}</span><span class="token variable">)</span></span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token variable">$NLB</span></span>
<span class="line"></span></code></pre></div><ul>
<li>NLB í™•ì¸ : Target IP ì •ë³´ í™•ì¸(UI)</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/Gr1F1F.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>NLBì— ë“±ë¡ëœ Target IP ì •ë³´ëŠ” ìƒì„±ëœ ìƒ˜í”Œ Podì˜ IPì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/XW9vaE.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>ì´ì œ NLBë¥¼ í†µí•´ì„œ Podë¥¼ í˜¸ì¶œí•  ê²½ìš° Client IPê°€ ì–´ë–»ê²Œ í™•ì¸ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.</p>
<ul>
<li>Client IP í™•ì¸ ê²°ê³¼</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/FVppDY.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>ë‹¤ìŒ ì •ë³´ëŠ” ê° Nodeì˜ ì •ë³´ê°€ ì•„ë‹Œ ë‹¤ë¥¸ IP ì •ë³´ê°€ í™•ì¸ëœë‹¤.</p>
<ul>
<li>ê° Nodeì˜ IP ì •ë³´ í™•ì¸</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/WAkmPs.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p><strong>ê·¸ë ‡ë‹¤ë©´ Client IPì˜ ì •ì²´ëŠ”?</strong> ë°”ë¡œ NLBì— í• ë‹¹ëœ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì˜ IP ì´ë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/BY1AQ6.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>ì´ì œ ì‹¤ì œë¡œ Client IPë¥¼ ì¶”ì í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì•Œì•„ë³¸ë‹¤.</p>
<h4>NLB IP Target &amp; Proxy Protocol v2 í™œì„±í™”</h4>
<p>ì•ì„  ì‹¤ìŠµì—ì„œ NLBë¡œ SNATë˜ì–´ì„œClient IP í™•ì¸ë˜ì§€ ëª»í•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ë‹¤. ì´ë²ˆì—ëŠ” Proxy Protocol v2ì„ í™œì„±í™” í•˜ì—¬ IP ì •ë³´ë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³¸ë‹¤. (ì´ë¯¸ì§€ ì¶œì²˜ : ê°€ì‹œë‹¤ë‹˜ ìŠ¤í„°ë””)</p>
<img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/r8IvNa.jpg" alt="img" style="zoom: 50%;">
<ul>
<li>ìƒ˜í”Œì½”ë“œ ë°°í¬</li>
</ul>
<p>ì´ë•Œ ì¤‘ìš”í•œ ë¶€ë¶„ì€ SVC ìƒì„± ì‹œ <code>service.beta.kubernetes.io/aws-load-balancer-proxy-protocol: "*"</code> ì–´ë…¸í…Œì´ì…˜ì„ í™œì„±í™” í•˜ëŠ” ê²ƒì´ë‹¤.</p>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token comment"># ìƒì„±</span></span>
<span class="line">cat &lt;&lt;EOF <span class="token punctuation">|</span> kubectl create <span class="token punctuation">-</span>f <span class="token punctuation">-</span></span>
<span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> gasida<span class="token punctuation">-</span>web</span>
<span class="line"><span class="token key atrule">spec</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
<span class="line">  <span class="token key atrule">selector</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">app</span><span class="token punctuation">:</span> gasida<span class="token punctuation">-</span>web</span>
<span class="line">  <span class="token key atrule">template</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">labels</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">app</span><span class="token punctuation">:</span> gasida<span class="token punctuation">-</span>web</span>
<span class="line">    <span class="token key atrule">spec</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">terminationGracePeriodSeconds</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
<span class="line">      <span class="token key atrule">containers</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> gasida<span class="token punctuation">-</span>web</span>
<span class="line">        <span class="token key atrule">image</span><span class="token punctuation">:</span> gasida/httpd<span class="token punctuation">:</span>pp</span>
<span class="line">        <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/9cxho8.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>AEWS 1ì£¼ì°¨ - Amzaon EKS ì„¤ì¹˜ ë° ê¸°ë³¸ ì‚¬ìš©</title>
      <link>https://docmoa.github.io/07-Kubernetes/06-EKS/01-eks-deploy.html</link>
      <guid>https://docmoa.github.io/07-Kubernetes/06-EKS/01-eks-deploy.html</guid>
      <source url="https://docmoa.github.io/rss.xml">AEWS 1ì£¼ì°¨ - Amzaon EKS ì„¤ì¹˜ ë° ê¸°ë³¸ ì‚¬ìš©</source>
      <description>AWSì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì œê³µë˜ëŠ” ë‹¤ì–‘í•œ HOL ê¸°ë°˜ì˜ Workshopê³¼ ê°€ì‹œë‹¤ë‹˜ì˜ íŒ€ì—ì„œ 2ì°¨ ê°€ê³µí•œ ì»¨í…ì¸ ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•œë‹¤.</description>
      <pubDate>Sat, 29 Apr 2023 16:00:29 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ì´ë²ˆì— ì—°ì¬í•  ìŠ¤í„°ë””ëŠ” AWS EKS Workshop Study (=AEWS)ì´ë‹¤. AWSì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì œê³µë˜ëŠ” ë‹¤ì–‘í•œ HOL ê¸°ë°˜ì˜ Workshopê³¼ ê°€ì‹œë‹¤ë‹˜ì˜ íŒ€ì—ì„œ 2ì°¨ ê°€ê³µí•œ ì»¨í…ì¸ ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•œë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/751VTo.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>í•„ìëŠ” ê¸°ë³¸ì ì¸ ìŠ¤í„°ë””ë‚´ìš©ì„ ì´ë²ˆ ì‹œë¦¬ì¦ˆì— ì—°ì¬í•  ì˜ˆì •ì´ë©°, ì¶”ê°€ì ìœ¼ë¡œ HashiCorpì˜ Consul, Vault ë“±ì„ ìƒ˜í”Œë¡œ ë°°í¬í•˜ë©° ì—°ë™í•˜ëŠ” ë‚´ìš©ì„ ì¡°ê¸ˆì”© ë‹¤ë¤„ë³¼ ì˜ˆì •ì´ë‹¤.</p>
<h2>AWS Workshop - EKS ê´€ë ¨</h2>
<blockquote>
<p>ì°¸ê³  : AWS EKS ê´€ë ¨ í•¸ì¦ˆì˜¨ ì›Œí¬ìƒµì„ í•´ë³¼ ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ë§í¬ ëª¨ìŒì´ë‹¤.</p>
</blockquote>
<ul>
<li>[AWS] EKS Workshop - <a href="https://www.eksworkshop.com/" target="_blank" rel="noopener noreferrer">ë§í¬</a> / Github - <a href="https://github.com/aws-samples/eks-workshop-v2" target="_blank" rel="noopener noreferrer">ë§í¬</a> / Blog - <a href="https://aws.amazon.com/ko/blogs/containers/introducing-the-amazon-eks-workshop/" target="_blank" rel="noopener noreferrer">ë§í¬</a> / Youtube - <a href="https://www.youtube.com/@ContainersfromtheCouch" target="_blank" rel="noopener noreferrer">ë§í¬</a> <a href="https://www.youtube.com/@ContainersfromtheCouch/streams" target="_blank" rel="noopener noreferrer">Streams</a></li>
<li>[í•œê¸€] EKS ì›¹ ì•± êµ¬ì¶• - <a href="https://catalog.us-east-1.prod.workshops.aws/workshops/9c0aa9ab-90a9-44a6-abe1-8dff360ae428/ko-KR" target="_blank" rel="noopener noreferrer">ë§í¬</a> / (Old) Amazon EKS ì›Œí¬ìƒµ - <a href="https://awskrug.github.io/eks-workshop/" target="_blank" rel="noopener noreferrer">ë§í¬</a></li>
<li>[í•œê¸€/whchoi98] EKS Hands On LAB - <a href="https://awskocaptain.gitbook.io/aws-builders-eks/" target="_blank" rel="noopener noreferrer">ë§í¬</a></li>
<li>[AWS] EKS Terraform Workshop - <a href="https://tf-eks-workshop.workshop.aws/" target="_blank" rel="noopener noreferrer">ë§í¬</a> / Youtube - <a href="https://www.youtube.com/live/TXa-y-Uwh2w?feature=share" target="_blank" rel="noopener noreferrer">ë§í¬</a></li>
<li>[AWS] EKS Best Practices Guides - <a href="https://aws.github.io/aws-eks-best-practices/" target="_blank" rel="noopener noreferrer">ë§í¬</a></li>
<li>[AWS workshop studio] Running batch workloads on Amazon EKS with AWS Batch - <a href="https://catalog.us-east-1.prod.workshops.aws/workshops/b67b6665-f7a2-427f-affb-caccd087d50d/en-US" target="_blank" rel="noopener noreferrer">ë§í¬</a></li>
<li>[AWS workshop studio] Manage your EKS cluster in Full-stack with CDK - <a href="https://catalog.us-east-1.prod.workshops.aws/workshops/c15012ac-d05d-46b1-8a4a-205e7c9d93c9/en-US" target="_blank" rel="noopener noreferrer">ë§í¬</a></li>
<li>[AWS workshop studio] One Observability Workshop - <a href="https://catalog.workshops.aws/observability/en-US" target="_blank" rel="noopener noreferrer">ë§í¬</a></li>
<li>[AWS workshop studio] Web Application Hosts on EKS Workshop - <a href="https://catalog.us-east-1.prod.workshops.aws/workshops/a1101fcc-c7cf-4dd5-98c4-f599a65056d5/en-US" target="_blank" rel="noopener noreferrer">ë§í¬</a></li>
<li>[í•œê¸€/AWS workshop studio] AWS General Immersion Day - <a href="https://catalog.workshops.aws/general-immersionday/ko-KR" target="_blank" rel="noopener noreferrer">ë§í¬</a></li>
<li>[í•œê¸€/whchoi98] AWS IAM Hands On LAB - <a href="https://whchoi98.gitbook.io/aws-iam/" target="_blank" rel="noopener noreferrer">ë§í¬</a></li>
</ul>
<blockquote>
<p><s>ì—¬ë‹´ì´ì§€ë§Œ, HashiCorp ì†”ë£¨ì…˜ì— ëŒ€í•œ ë‹¤ì–‘í•œ HOL Workshop ì‹¤ìŠµë„ ì‚¬ìš©ìë“¤ì´ ë§ì´ ë§Œë“¤ê³  ê¸°ì—¬í•  ìˆ˜ ìˆë„ë¡ í”Œë«í¼ì„ ì˜¤í”ˆí•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</s></p>
</blockquote>
<h2>Amazon EKS ì†Œê°œ</h2>
<figure><img src="https://static.us-east-1.prod.workshops.aws/public/e7ab9b91-502d-4ada-84e2-5c8b92d8f791/static/images/10-intro/eks_architecture.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>Amazon <strong>E</strong>lastic <strong>K</strong>ubernetes ServiceëŠ” ìì²´ Kubernetes ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë˜ëŠ” ë…¸ë“œë¥¼ ì„¤ì¹˜, ìš´ì˜ ë° ìœ ì§€ ê´€ë¦¬í•  í•„ìš” ì—†ì´ Kubernetes ì‹¤í–‰ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ì´ë‹¤.</p>
<p>EKSë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ ì´ìœ ê°€ ìˆê² ì§€ë§Œ ëŒ€í‘œì ìœ¼ë¡œ ì—¬ëŸ¬ AWS ì„œë¹„ìŠ¤ì™€ í†µí•©í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ í¬ë‹¤.</p>
<ul>
<li>ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ì €ì¥ì†Œ Amazon ECR</li>
<li>ë¡œë“œ ë¶„ì‚°ì„ ìœ„í•œ ELB</li>
<li>ê³ ê°€ìš©ì„± ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ EBS/EFS</li>
<li>ì¸ì¦ IAM</li>
<li>ê²©ë¦¬ë¥¼ ìœ„í•œ Amazon VPC</li>
</ul>
<p>ë‹¤ë§Œ ë‹¨ì (?)ì´ë¼ê³  í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì€ ì§€ì› ë²„ì „ì´  ë³´í†µ 4ê°œì˜ ë§ˆì´ë„ˆ ë²„ì „ ì§€ì›(í˜„ì¬ 1.22~1.26), í‰ê·  3ê°œì›”ë§ˆë‹¤ ìƒˆ ë²„ì „ ì œê³µ, ê° ë²„ì „ì€ 12ê°œì›” ì •ë„ ì§€ì›í•œë‹¤ëŠ” ê²ƒì´ë‹¤. <a href="https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions.html" target="_blank" rel="noopener noreferrer">ë§í¬</a></p>
<p>ì´ ë¶€ë¶„ì´ ë‹¨ì ì´ë¼ê³  ì´ì•¼ê¸°í•˜ëŠ” ì´ìœ ëŠ” ì‹¤ì œ ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ë³´ë©´ EKS í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œë¥¼ í•˜ê¸°ìœ„í•œ ìš´ì˜ì¡°ì§ ì²´ê³„ê°€ ê°–ì¶°ì ¸ ìˆì§€ ì•Šì€ ìƒí™©ì—ì„œ ê°•ì œë¡œ EKS êµ¬ë²„ì „ì— ëŒ€í•œ ì—…ê·¸ë ˆì´ë“œë¥¼ í•´ì•¼í•˜ëŠ” ìƒí™©ì„ ì§ë©´í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>
<p>ë¬¼ë¡ , ë³´ì•ˆ, ì„œë¹„ìŠ¤ ì§€ì› ë“± ë‹¤ì–‘í•œ ì´ìœ ë¡œ ì¸í•´ í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œëŠ” ë¶ˆê°€í”¼í•˜ì§€ë§Œ ë•Œë•Œë¡œ ì—…ê·¸ë ˆì´ë“œë¥¼ ê°•ì œí•´ì•¼í•˜ëŠ” ê²ƒì€ íŠ¹ì • ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ëŠ” ì¡°ì§ì—ê²ŒëŠ” í° ê±¸ë¦¼ëŒì´ ë  ìˆ˜ ìˆë‹¤.</p>
<p>ê¸°íšŒê°€ ëœë‹¤ë©´ ì´ë²ˆ ìŠ¤í„°ë””ì¤‘ì— EKS ì—…ê·¸ë ˆì´ë“œë¡œ ì¸í•œ ì–´ë ¤ì›€ì„ ê²ªì—ˆë˜ ì‚¬ë¡€ë¥¼ ë°œí‘œí•´ë³´ë ¤ í•œë‹¤.</p>
<blockquote>
<p>ì°¸ê³  : EKS ì—…ë°ì´íŠ¸ ìº˜ë¦°ë” : <a href="https://endoflife.date/amazon-eks" target="_blank" rel="noopener noreferrer">https://endoflife.date/amazon-eks</a></p>
</blockquote>
<h2>Amazon EKS í´ëŸ¬ìŠ¤í„° êµ¬ì„± ë°©ì•ˆ</h2>
<p>EKS í´ëŸ¬ìŠ¤í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë°°í¬í•  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li>ì›¹ ê´€ë¦¬ ì½˜ì†”</li>
<li><strong>eksctl</strong></li>
<li>ê¸°íƒ€(CDK, CloudFormation, Terraform ë“±)</li>
</ul>
<p>ì´ë²ˆ EKS ìŠ¤í„°ë”” ì‹œë¦¬ì¦ˆì—ì„œëŠ”  <code>eksctl</code> ì„ í™œìš©í•œ ë°°í¬ë°©ì‹ì„ í™œìš©í•  ì˜ˆì •ì´ë‹¤.</p>
<blockquote>
<p>eksctl : EKS í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ë° ê´€ë¦¬ë¥¼ í•˜ê¸° ìœ„í•œ ì˜¤í”„ì†ŒìŠ¤ ëª…ë ¹ì¤„ ë„êµ¬ - <a href="https://eksctl.io/" target="_blank" rel="noopener noreferrer">ë§í¬</a></p>
</blockquote>
<figure><img src="https://eksctl.io/img/eksctl.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2>ì‹¤ìŠµí™˜ê²½ êµ¬ì„±</h2>
<p>ì‹¤ìŠµí™˜ê²½ì€ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ Bastion ì—­í• ì„ í•˜ëŠ” EC2ì™€  í¼ë¸”ë¦­ ì„œë¸Œë„· 2ê°œì— ì›Œì»¤ë…¸ë“œ ë‘ ëŒ€ë¥¼ êµ¬ì„±í•œë‹¤.</p>
<blockquote>
<p>ì°¸ê³  : ì‹¤ìŠµí™˜ê²½ ë³€ê²½ ì±•í„°ì—ì„œ ë…¸ë“œë¥¼ 3ëŒ€ë¡œ ì¦ì„¤ì˜ˆì •</p>
</blockquote>
<ul>
<li>ì‹¤ìŠµí™˜ê²½ ì•„í‚¤í…ì²˜(ì¶œì²˜:ê°€ì‹œë‹¤ë‹˜ ìŠ¤í„°ë””)</li>
</ul>
<img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/2DsILw.jpg" alt="img" style="zoom: 33%;">
<ul>
<li>Cloudformantionì„ í†µí•œ Bastion ë…¸ë“œ ë°°í¬</li>
</ul>
<p>ê°„ë‹¨í•˜ê²Œ VPC, Security Group, EC2 ë“±ì„ êµ¬ì„±í•˜ëŠ” CF ì½”ë“œë¥¼ í†µí•´ ì‚¬ì „ í™˜ê²½ì„ êµ¬ì„±í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">aws cloudformation deploy --template-file myeks-1week.yaml <span class="token punctuation">\</span></span>
<span class="line">     --stack-name myeks --parameter-overrides <span class="token assign-left variable">KeyName</span><span class="token operator">=</span>hw-key <span class="token assign-left variable">SgIngressSshCidr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> ipinfo.io/ip<span class="token variable">)</span></span>/32 <span class="token parameter variable">--region</span> ap-northeast-2</span>
<span class="line"></span>
<span class="line">Waiting <span class="token keyword">for</span> changeset to be created<span class="token punctuation">..</span></span>
<span class="line">Waiting <span class="token keyword">for</span> stack create/update to complete</span>
<span class="line">Successfully created/updated stack - myeks</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Public IP í™•ì¸</span></span>
<span class="line">aws cloudformation describe-stacks --stack-name myeks <span class="token parameter variable">--query</span> <span class="token string">'Stacks[*].Outputs[*].OutputValue'</span> <span class="token parameter variable">--output</span> text</span>
<span class="line"><span class="token number">13.124</span>.14.182</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ec2 ì— SSH ì ‘ì†</span></span>
<span class="line"><span class="token function">ssh</span> <span class="token parameter variable">-i</span> ~/.ssh/id_rsa ec2-user@<span class="token variable"><span class="token variable">$(</span>aws cloudformation describe-stacks --stack-name myeks <span class="token parameter variable">--query</span> <span class="token string">'Stacks[*].Outputs[0].OutputValue'</span> <span class="token parameter variable">--output</span> text<span class="token variable">)</span></span></span>
<span class="line"></span></code></pre></div><ul>
<li>VPC êµ¬ì„± í™•ì¸</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/6ulJkf.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>í•„ìì˜ ê²½ìš°ì—ëŠ” AWS IAM ê³„ì • ì •ì±…ì— ëŒ€í•œ ì œì•½ì‚¬í•­ì´ ìˆì–´,  <code>aws configure</code> ëª…ë ¹ë“±ìœ¼ë¡œ <code>access_key</code>, <code>secret_key</code> ì„¤ì •ì„ í•˜ì§€ì•Šê³  EC2 ì¸ìŠ¤í„´ìŠ¤ì— admin ê¶Œí•œì„ ë¶€ì—¬í•˜ì—¬ ì‚¬ìš©í•˜ì˜€ë‹¤.</p>
<ul>
<li>Cloudformation ìœ¼ë¡œ ë°°í¬í•œ myeks-hostì¸ìŠ¤í„´ìŠ¤ì— <code>eks-admin</code> ì´ë¼ê³ í•˜ëŠ” admin ê¶Œí•œì˜ ì—­í• ì„ ìƒì„± í›„ ë¶€ì—¬</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/eObYCj.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<ul>
<li>í™˜ê²½ë³€ìˆ˜ ì„¤ì •  ë° EKS í´ëŸ¬ìŠ¤í„° ë°°í¬</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># EKS ë°°í¬í•  VPC ì •ë³´ í™•ì¸</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VPCID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>aws ec2 describe-vpcs <span class="token parameter variable">--filters</span> <span class="token string">"Name=tag:Name,Values=<span class="token variable">$CLUSTER_NAME</span>-VPC"</span> <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> .Vpcs<span class="token punctuation">[</span><span class="token punctuation">]</span>.VpcId<span class="token variable">)</span></span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">"export VPCID=<span class="token variable">$VPCID</span>"</span> <span class="token operator">&gt;&gt;</span> /etc/profile</span>
<span class="line"><span class="token builtin class-name">echo</span> VPCID</span>
<span class="line"></span>
<span class="line"><span class="token comment">## í¼ë¸”ë¦­ ì„œë¸Œë„· ID í™•ì¸</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">PubSubnet1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>aws ec2 describe-subnets <span class="token parameter variable">--filters</span> <span class="token assign-left variable">Name</span><span class="token operator">=</span>tag:Name,Values<span class="token operator">=</span><span class="token string">"<span class="token variable">$CLUSTER_NAME</span>-PublicSubnet1"</span> <span class="token parameter variable">--query</span> <span class="token string">"Subnets[0].[SubnetId]"</span> <span class="token parameter variable">--output</span> text<span class="token variable">)</span></span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">PubSubnet2</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>aws ec2 describe-subnets <span class="token parameter variable">--filters</span> <span class="token assign-left variable">Name</span><span class="token operator">=</span>tag:Name,Values<span class="token operator">=</span><span class="token string">"<span class="token variable">$CLUSTER_NAME</span>-PublicSubnet2"</span> <span class="token parameter variable">--query</span> <span class="token string">"Subnets[0].[SubnetId]"</span> <span class="token parameter variable">--output</span> text<span class="token variable">)</span></span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">"export PubSubnet1=<span class="token variable">$PubSubnet1</span>"</span> <span class="token operator">&gt;&gt;</span> /etc/profile</span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">"export PubSubnet2=<span class="token variable">$PubSubnet2</span>"</span> <span class="token operator">&gt;&gt;</span> /etc/profile</span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token variable">$PubSubnet1</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token variable">$PubSubnet2</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># EKS í´ëŸ¬ìŠ¤í„° ë°°í¬</span></span>
<span class="line">eksctl create cluster <span class="token parameter variable">--name</span> <span class="token variable">$CLUSTER_NAME</span> <span class="token parameter variable">--region</span><span class="token operator">=</span><span class="token variable">$AWS_DEFAULT_REGION</span> --nodegroup-name<span class="token operator">=</span><span class="token variable">$CLUSTER_NAME</span>-nodegroup --node-type<span class="token operator">=</span>t3.medium --node-volume-size<span class="token operator">=</span><span class="token number">30</span> --vpc-public-subnets <span class="token string">"<span class="token variable">$PubSubnet1</span>,<span class="token variable">$PubSubnet2</span>"</span> <span class="token parameter variable">--version</span> <span class="token number">1.24</span> --ssh-access --external-dns-access <span class="token parameter variable">--verbose</span> <span class="token number">4</span></span>
<span class="line"></span></code></pre></div><p>EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ëª…ë ¹í˜•ìœ¼ë¡œ ë°°í¬í•˜ì§€ ì•Šê³  YAMLë¡œ ì‘ì„±í•˜ì—¬ ì–¸ì–¸ì ìœ¼ë¡œ ë°°í¬í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ë‹¤ìŒì€ ì•ì„œ ì‹¤í–‰í•œ <code>eksctl create cluster</code> ëª…ë ¹ì˜ <code> --dry-run</code> ì˜µì…˜ì„ í†µí•´ ì¶”ì¶œí•œ ëª…ì„¸ì´ë‹¤.</p>
<ul>
<li>myeks-sample.yaml</li>
</ul>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> eksctl.io/v1alpha5</span>
<span class="line"><span class="token key atrule">cloudWatch</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">clusterLogging</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token key atrule">iam</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">vpcResourceControllerPolicy</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">withOIDC</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterConfig</span>
<span class="line"><span class="token key atrule">kubernetesNetworkConfig</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">ipFamily</span><span class="token punctuation">:</span> IPv4</span>
<span class="line"><span class="token key atrule">managedNodeGroups</span><span class="token punctuation">:</span></span>
<span class="line"><span class="token punctuation">-</span> <span class="token key atrule">amiFamily</span><span class="token punctuation">:</span> AmazonLinux2</span>
<span class="line">  <span class="token key atrule">desiredCapacity</span><span class="token punctuation">:</span> <span class="token number">2</span></span>
<span class="line">  <span class="token key atrule">disableIMDSv1</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">disablePodIMDS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">iam</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">withAddonPolicies</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">albIngress</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">appMesh</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">appMeshPreview</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">autoScaler</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">awsLoadBalancerController</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">certManager</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">cloudWatch</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">ebs</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">efs</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">externalDNS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">      <span class="token key atrule">fsx</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">imageBuilder</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">      <span class="token key atrule">xRay</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">instanceSelector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token key atrule">instanceType</span><span class="token punctuation">:</span> t3.medium</span>
<span class="line">  <span class="token key atrule">labels</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">alpha.eksctl.io/cluster-name</span><span class="token punctuation">:</span> myeks</span>
<span class="line">    <span class="token key atrule">alpha.eksctl.io/nodegroup-name</span><span class="token punctuation">:</span> myeks<span class="token punctuation">-</span>nodegroup</span>
<span class="line">  <span class="token key atrule">maxSize</span><span class="token punctuation">:</span> <span class="token number">2</span></span>
<span class="line">  <span class="token key atrule">minSize</span><span class="token punctuation">:</span> <span class="token number">2</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> myeks<span class="token punctuation">-</span>nodegroup</span>
<span class="line">  <span class="token key atrule">privateNetworking</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">releaseVersion</span><span class="token punctuation">:</span> <span class="token string">""</span></span>
<span class="line">  <span class="token key atrule">securityGroups</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">withLocal</span><span class="token punctuation">:</span> <span class="token null important">null</span></span>
<span class="line">    <span class="token key atrule">withShared</span><span class="token punctuation">:</span> <span class="token null important">null</span></span>
<span class="line">  <span class="token key atrule">ssh</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">allow</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">publicKeyPath</span><span class="token punctuation">:</span> ~/.ssh/id_rsa.pub</span>
<span class="line">  <span class="token key atrule">tags</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">alpha.eksctl.io/nodegroup-name</span><span class="token punctuation">:</span> myeks<span class="token punctuation">-</span>nodegroup</span>
<span class="line">    <span class="token key atrule">alpha.eksctl.io/nodegroup-type</span><span class="token punctuation">:</span> managed</span>
<span class="line">  <span class="token key atrule">volumeIOPS</span><span class="token punctuation">:</span> <span class="token number">3000</span></span>
<span class="line">  <span class="token key atrule">volumeSize</span><span class="token punctuation">:</span> <span class="token number">30</span></span>
<span class="line">  <span class="token key atrule">volumeThroughput</span><span class="token punctuation">:</span> <span class="token number">125</span></span>
<span class="line">  <span class="token key atrule">volumeType</span><span class="token punctuation">:</span> gp3</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> myeks</span>
<span class="line">  <span class="token key atrule">region</span><span class="token punctuation">:</span> ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span><span class="token number">2</span></span>
<span class="line">  <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"1.24"</span></span>
<span class="line"><span class="token key atrule">privateCluster</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">skipEndpointCreation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line"><span class="token key atrule">vpc</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">autoAllocateIPv6</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">cidr</span><span class="token punctuation">:</span> 192.168.0.0/16</span>
<span class="line">  <span class="token key atrule">clusterEndpoints</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">privateAccess</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">    <span class="token key atrule">publicAccess</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">id</span><span class="token punctuation">:</span> vpc<span class="token punctuation">-</span>0521fc003559b2f2c</span>
<span class="line">  <span class="token key atrule">manageSharedNodeSecurityGroupRules</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">nat</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">gateway</span><span class="token punctuation">:</span> Disable</span>
<span class="line">  <span class="token key atrule">subnets</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">public</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">ap-northeast-2a</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">az</span><span class="token punctuation">:</span> ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2a</span>
<span class="line">        <span class="token key atrule">cidr</span><span class="token punctuation">:</span> 192.168.1.0/24</span>
<span class="line">        <span class="token key atrule">id</span><span class="token punctuation">:</span> subnet<span class="token punctuation">-</span>0fdff27653277aaf0</span>
<span class="line">      <span class="token key atrule">ap-northeast-2c</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">az</span><span class="token punctuation">:</span> ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2c</span>
<span class="line">        <span class="token key atrule">cidr</span><span class="token punctuation">:</span> 192.168.2.0/24</span>
<span class="line">        <span class="token key atrule">id</span><span class="token punctuation">:</span> subnet<span class="token punctuation">-</span>084a8752d4c7ddf6c</span>
<span class="line"></span></code></pre></div><ul>
<li>EKS í´ëŸ¬ìŠ¤í„° ë°°í¬ í™•ì¸</li>
</ul>
<p>ì •ìƒì ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ê°€ êµ¬ì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># eksí´ëŸ¬ìŠ¤í„° í™•ì¸</span></span>
<span class="line">eksctl get cluster</span>
<span class="line">NAME	REGION		EKSCTL CREATED</span>
<span class="line">myeks	ap-northeast-2	True</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë…¸ë“œí™•ì¸</span></span>
<span class="line">kubectl get <span class="token function">node</span> <span class="token parameter variable">-v</span><span class="token operator">=</span><span class="token number">6</span></span>
<span class="line">I0423 <span class="token number">22</span>:10:48.050969    <span class="token number">2339</span> loader.go:374<span class="token punctuation">]</span> Config loaded from file:  /root/.kube/config</span>
<span class="line"></span>
<span class="line">I0423 <span class="token number">22</span>:10:48.880262    <span class="token number">2339</span> round_trippers.go:553<span class="token punctuation">]</span> GET https://6E205513BA73EEBC3CA693BADEEC5294.gr7.ap-northeast-2.eks.amazonaws.com/api/v1/nodes?limit<span class="token operator">=</span><span class="token number">500</span> <span class="token number">200</span> OK <span class="token keyword">in</span> <span class="token number">819</span> milliseconds</span>
<span class="line">NAME                                               STATUS   ROLES    AGE   VERSION</span>
<span class="line">ip-192-168-1-139.ap-northeast-2.compute.internal   Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>   61m   v1.24.11-eks-a59e1f0</span>
<span class="line">ip-192-168-2-225.ap-northeast-2.compute.internal   Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>   61m   v1.24.11-eks-a59e1f0</span>
<span class="line"></span>
<span class="line"><span class="token comment"># íŒŒë“œí™•ì¸</span></span>
<span class="line">k get pods <span class="token parameter variable">-A</span></span>
<span class="line">NAMESPACE     NAME                      READY   STATUS    RESTARTS   AGE</span>
<span class="line">kube-system   aws-node-2bpxr            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          62m</span>
<span class="line">kube-system   aws-node-s7p5b            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          62m</span>
<span class="line">kube-system   coredns-dc4979556-knkkh   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          68m</span>
<span class="line">kube-system   coredns-dc4979556-m789b   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          68m</span>
<span class="line">kube-system   kube-proxy-lkp8f          <span class="token number">1</span>/1     Running   <span class="token number">0</span>          62m</span>
<span class="line">kube-system   kube-proxy-z6hbk          <span class="token number">1</span>/1     Running   <span class="token number">0</span>          62m</span>
<span class="line"></span></code></pre></div><blockquote>
<p>ì°¸ê³  : <code>eksctl</code> ëª…ë ¹ ì˜ˆì œ</p>
</blockquote>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># eksctl help</span></span>
<span class="line">eksctl</span>
<span class="line">eksctl create</span>
<span class="line">eksctl create cluster <span class="token parameter variable">--help</span></span>
<span class="line">eksctl create nodegroup <span class="token parameter variable">--help</span></span>
<span class="line"></span></code></pre></div><h2>ì‹¤ìŠµí™˜ê²½ ë³€ê²½</h2>
<p>ì•ì„  ê³¼ì •ì„ í†µí•´ ì‹¤ìŠµì„ ìœ„í•œ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì´ ì™„ì„±ë˜ì—ˆë‹¤. í•„ìëŠ” í–¥í›„ ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ Vault, Consul ë“±ì„ ë°°í¬í•  ì˜ˆì •ì´ë‹¤. ë•Œë¬¸ì—, ìµœì†Œ 3ëŒ€ ì´ìƒì˜ ë…¸ë“œê°€ í•„ìš”í•˜ì—¬ ê¸°ë³¸ ì‹¤ìŠµ ë…¸ë“œë¥¼ 3ëŒ€ë¡œ êµ¬ì„±í•œë‹¤.</p>
<p>EKSëŠ” <code>nodegraup</code> ê°œìˆ˜ì˜ ìµœì†Œ/ìµœëŒ€ ê°œìˆ˜ë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. ë‹¤ìŒì€ ë…¸ë“œ ê°œìˆ˜ë¥¼ ë³€ê²½/í™•ì¸ í•˜ëŠ” ë°©ë²•ì´ë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># eks ë…¸ë“œ ê·¸ë£¹ ì •ë³´ í™•ì¸</span></span>
<span class="line">eksctl get nodegroup <span class="token parameter variable">--cluster</span> <span class="token variable">$CLUSTER_NAME</span> <span class="token parameter variable">--name</span> <span class="token variable">$CLUSTER_NAME</span>-nodegroup</span>
<span class="line">CLUSTER	NODEGROUP	STATUS		CREATED			MIN SIZE	MAX SIZE	DESIRED CAPACITY	<span class="token environment constant">INSTANCE</span> TYPE	IMAGE ID	ASG NAME							TYPE</span>
<span class="line">myeks	myeks-nodegroup	UPDATING	<span class="token number">2023</span>-04-23T12:07:57Z	<span class="token number">2</span>		<span class="token number">2</span>		<span class="token number">2</span>			t3.medium	AL2_x86_64	eks-myeks-nodegroup-fcc3d701-b90a-9c83-7907-fca8459770b9	managed</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë…¸ë“œ 2ê°œ â†’ 3ê°œ ì¦ê°€</span></span>
<span class="line">eksctl scale nodegroup <span class="token parameter variable">--cluster</span> <span class="token variable">$CLUSTER_NAME</span> <span class="token parameter variable">--name</span> <span class="token variable">$CLUSTER_NAME</span>-nodegroup <span class="token parameter variable">--nodes</span> <span class="token number">3</span> --nodes-min <span class="token number">3</span> --nodes-max <span class="token number">6</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë…¸ë“œ ê·¸ë£¹ ë³€ê²½ í™•ì¸</span></span>
<span class="line">eksctl get nodegroup <span class="token parameter variable">--cluster</span> myeks <span class="token parameter variable">--region</span> ap-northeast-2 <span class="token parameter variable">--name</span> myeks-nodegroup</span>
<span class="line">CLUSTER	NODEGROUP	STATUS		CREATED			MIN SIZE	MAX SIZE	DESIRED CAPACITY	<span class="token environment constant">INSTANCE</span> TYPE	IMAGE ID	ASG NAME							TYPE</span>
<span class="line">myeks	myeks-nodegroup	UPDATING	<span class="token number">2023</span>-04-23T12:07:57Z	<span class="token number">3</span>		<span class="token number">6</span>		<span class="token number">3</span>			t3.medium	AL2_x86_64	eks-myeks-nodegroup-fcc3d701-b90a-9c83-7907-fca8459770b9	managed</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ë…¸ë“œ í™•ì¸</span></span>
<span class="line">kubectl get nodes <span class="token parameter variable">-o</span> wide</span>
<span class="line"></span>
<span class="line">NAME                                               STATUS   ROLES    AGE    VERSION                INTERNAL-IP     EXTERNAL-IP      OS-IMAGE         KERNEL-VERSION                  CONTAINER-RUNTIME</span>
<span class="line">ip-192-168-1-139.ap-northeast-2.compute.internal   Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>   150m   v1.24.11-eks-a59e1f0   <span class="token number">192.168</span>.1.139   <span class="token number">43.201</span>.51.34     Amazon Linux <span class="token number">2</span>   <span class="token number">5.10</span>.176-157.645.amzn2.x86_64   containerd://1.6.19</span>
<span class="line">ip-192-168-1-76.ap-northeast-2.compute.internal    Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>   53s    v1.24.11-eks-a59e1f0   <span class="token number">192.168</span>.1.76    <span class="token number">13.124</span>.158.208   Amazon Linux <span class="token number">2</span>   <span class="token number">5.10</span>.176-157.645.amzn2.x86_64   containerd://1.6.19</span>
<span class="line">ip-192-168-2-225.ap-northeast-2.compute.internal   Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>   150m   v1.24.11-eks-a59e1f0   <span class="token number">192.168</span>.2.225   <span class="token number">52.79</span>.236.227    Amazon Linux <span class="token number">2</span>   <span class="token number">5.10</span>.176-157.645.amzn2.x86_64   containerd://1.6.19</span>
<span class="line"></span>
<span class="line">kubectl get nodes <span class="token parameter variable">-l</span> eks.amazonaws.com/nodegroup<span class="token operator">=</span><span class="token variable">$CLUSTER_NAME</span>-nodegroup</span>
<span class="line">NAME                                               STATUS   ROLES    AGE    VERSION</span>
<span class="line">ip-192-168-1-139.ap-northeast-2.compute.internal   Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>   150m   v1.24.11-eks-a59e1f0</span>
<span class="line">ip-192-168-1-76.ap-northeast-2.compute.internal    Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>   74s    v1.24.11-eks-a59e1f0</span>
<span class="line">ip-192-168-2-225.ap-northeast-2.compute.internal   Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>   150m   v1.24.11-eks-a59e1f0</span>
<span class="line"></span></code></pre></div><h2>ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬</h2>
<p>í•„ìëŠ” ë³¸ ê¸€ì„ ì‘ì„±í•˜ë˜ ì‹œê¸°ì— ê³ ê°ì‚¬ í™˜ê²½ì— ArgoCD + Helmì„ ê¸°ë°˜ìœ¼ë¡œ Consul Cluster êµ¬ì„± í…ŒìŠ¤íŠ¸ ìš”ì²­ì´ ìˆì–´ í•´ë‹¹ í´ëŸ¬ìŠ¤í„°ë¥¼ í™œìš©í•´ ë³´ì•˜ë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/helm_argo.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h3>ArgoCD ë°°í¬</h3>
<blockquote>
<p>ì°¸ê³  : PKOS 2ê¸°ì— ì‚¬ìš©í•œ ArgoCD ë°°í¬ ê°€ì´ë“œë¥¼ ì°¸ê³ í•˜ì—¬ ë°°í¬í•œë‹¤.</p>
</blockquote>
<ul>
<li>argocd-application-controller : ì‹¤í–‰ ì¤‘ì¸ k8s ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¤ì •ê³¼ ê¹ƒ ì €ì¥ì†Œì˜ ì†ŒìŠ¤ íŒŒì¼ì— ì„ ì–¸ëœ ìƒíƒœë¥¼ ì„œë¡œ ë¹„êµí•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬. ìƒíƒœì™€ ë‹¤ë¥´ë©´ <code>OutOfSync</code> ì—ëŸ¬ë¥¼ ì¶œë ¥.</li>
<li>argocd-dex-server : ì™¸ë¶€ ì‚¬ìš©ìì˜ LDAP ì¸ì¦ì— Dex ì„œë²„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ</li>
<li>argocd-repo-server : ì›ê²© ê¹ƒ ì €ì¥ì†Œì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì•„ë¥´ê³ ì‹œë”” ë‚´ë¶€ ìºì‹œ ì„œë²„ì— ì €ì¥í•©ë‹ˆë‹¤. ë””ë ‰í† ë¦¬ ê²½ë¡œ, ì†ŒìŠ¤, í—¬ë¦„ ì°¨íŠ¸ ë“±ì´ ì €ì¥.</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±</span></span>
<span class="line">kubectl create ns argocd</span>
<span class="line"></span>
<span class="line"><span class="token comment"># argocd-helm ì„¤ì¹˜</span></span>
<span class="line"><span class="token builtin class-name">cd</span></span>
<span class="line">helm repo <span class="token function">add</span> argo https://argoproj.github.io/argo-helm</span>
<span class="line">helm repo update</span>
<span class="line">helm <span class="token function">install</span> argocd argo/argo-cd <span class="token parameter variable">--set</span> <span class="token assign-left variable">server.service.type</span><span class="token operator">=</span>LoadBalancer <span class="token parameter variable">--namespace</span> argocd <span class="token parameter variable">--version</span> <span class="token number">5.19</span>.14</span>
<span class="line"></span>
<span class="line"><span class="token comment"># í™•ì¸</span></span>
<span class="line">helm list <span class="token parameter variable">-n</span> argocd</span>
<span class="line">kubectl get pod,pvc,svc,deploy,sts <span class="token parameter variable">-n</span> argocd</span>
<span class="line">kubectl get-all <span class="token parameter variable">-n</span> argocd</span>
<span class="line"></span>
<span class="line">kubectl get crd <span class="token operator">|</span> <span class="token function">grep</span> argoproj</span>
<span class="line">applications.argoproj.io              <span class="token number">2023</span>-03-19T11:39:26Z</span>
<span class="line">applicationsets.argoproj.io           <span class="token number">2023</span>-03-19T11:39:26Z</span>
<span class="line">appprojects.argoproj.io               <span class="token number">2023</span>-03-19T11:39:26Z</span>
<span class="line"></span>
<span class="line"><span class="token comment"># admin ê³„ì •ì˜ ì•”í˜¸ í™•ì¸</span></span>
<span class="line"><span class="token assign-left variable">ARGOPW</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl <span class="token parameter variable">-n</span> argocd get secret argocd-initial-admin-secret <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">"{.data.password}"</span> <span class="token operator">|</span> base64 <span class="token parameter variable">-d</span><span class="token variable">)</span></span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token variable">$ARGOPW</span></span>
<span class="line">mf8bOtNEq7iHMqq1</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ì›¹ ì ‘ì† ë¡œê·¸ì¸ (admin) CLBì˜ hostnameìœ¼ë¡œ ì ‘ì†</span></span>
<span class="line">k get svc <span class="token parameter variable">-n</span> argocd argocd-server <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.status.loadBalancer.ingress[].hostname}'</span></span>
<span class="line"></span></code></pre></div><ul>
<li>ArgoCD Web UI í™”ë©´</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/T5kZFT.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h3>GitHub ì €ì¥ì†Œ ì¤€ë¹„</h3>
<blockquote>
<p>í•„ìëŠ” ê°œì¸ GitHubì— <a href="https://github.com/chosam2/gitops" target="_blank" rel="noopener noreferrer">ê°œì¸ í¼ë¸”ë¦­ ì €ì¥ì†Œ</a>ë¥¼ ë§Œë“¤ì–´ì„œ ì‹¤ìŠµì„ ì§„í–‰í•˜ì˜€ë‹¤.</p>
</blockquote>
<p>ì‚¬ì „ì— ë¡œì»¬ì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì€ Consul Helm Chart íŒŒì¼ì— ìƒˆë¡œ ì¬ì •ì˜ í•  values íŒŒì¼ì„ GitHub ì €ì¥ì†Œì— ì—…ë¡œë“œ í•œë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/aY0au9.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<ul>
<li>override-values.yaml</li>
</ul>
<blockquote>
<p>ì°¸ê³  : ë‹¤ìŒì€ ì‹¤ì œ ì‘ì„±ëœ Values íŒŒì¼ì´ë‹¤. ê° í•­ëª©ì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì€ í–¥í›„ <strong>Consul Deploy on K8s</strong> ê°€ì´ë“œë¥¼ ì‘ì„±í•´ì„œ ì—…ë¡œë“œ ì˜ˆì •ì´ë‹¤.</p>
</blockquote>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">client</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">grpc</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"><span class="token key atrule">connectInject</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">consulNamespaces</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">mirroringK8S</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"><span class="token key atrule">controller</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"><span class="token key atrule">global</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">acls</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">manageSystemACLs</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">enableConsulNamespaces</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">enterpriseLicense</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">secretKey</span><span class="token punctuation">:</span> key</span>
<span class="line">    <span class="token key atrule">secretName</span><span class="token punctuation">:</span> license</span>
<span class="line">  <span class="token key atrule">gossipEncryption</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">autoGenerate</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> hashicorp/consul<span class="token punctuation">-</span>enterprise<span class="token punctuation">:</span>1.13.7<span class="token punctuation">-</span>ent</span>
<span class="line">  <span class="token key atrule">imageEnvoy</span><span class="token punctuation">:</span> envoyproxy/envoy<span class="token punctuation">:</span>v1.22.5</span>
<span class="line">  <span class="token key atrule">imageK8S</span><span class="token punctuation">:</span> hashicorp/consul<span class="token punctuation">-</span>k8s<span class="token punctuation">-</span>control<span class="token punctuation">-</span>plane<span class="token punctuation">:</span>0.49.5</span>
<span class="line">  <span class="token key atrule">metrics</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">tls</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enableAutoEncrypt</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">httpsOnly</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">    <span class="token key atrule">verify</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line"><span class="token key atrule">ingressGateways</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">defaults</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
<span class="line">    <span class="token key atrule">service</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer</span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">gateways</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>gateway</span>
<span class="line"><span class="token key atrule">meshGateway</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
<span class="line">  <span class="token key atrule">service</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">32000</span></span>
<span class="line">    <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort</span>
<span class="line"><span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span></span>
<span class="line"><span class="token key atrule">terminatingGateways</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">defaults</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line"><span class="token key atrule">ui</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">service</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">port</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">http</span><span class="token punctuation">:</span> <span class="token number">80</span></span>
<span class="line">      <span class="token key atrule">https</span><span class="token punctuation">:</span> <span class="token number">443</span></span>
<span class="line">    <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalance</span>
<span class="line"></span></code></pre></div><h3>ArgoCD + GitHub ì—°ë™</h3>
<p>ArgoCD CLIë¥¼ í†µí•´ í•„ìì˜ GitHubì„ ì—°ë™í•œë‹¤</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">argocd login <span class="token operator">&lt;</span>argocd ì£¼ì†Œ<span class="token operator">&gt;</span> <span class="token parameter variable">--username</span> admin <span class="token parameter variable">--password</span> <span class="token variable">$ARGOPW</span></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"><span class="token string">'admin:login'</span> logged <span class="token keyword">in</span> successfully</span>
<span class="line"></span>
<span class="line">argocd repo <span class="token function">add</span> https://github.com/<span class="token operator">&lt;</span>ê¹ƒí—™ ê³„ì •ëª…<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>ë ˆíŒŒì§€í† ë¦¬ëª…<span class="token operator">&gt;</span> <span class="token parameter variable">--username</span> <span class="token operator">&lt;</span>ê¹ƒí—™ ê³„ì •ëª…<span class="token operator">&gt;</span> <span class="token parameter variable">--password</span> <span class="token operator">&lt;</span>ê¹ƒí—™ ê³„ì • ì•”í˜¸<span class="token operator">&gt;</span></span>
<span class="line"> </span>
<span class="line">argocd repo list</span>
<span class="line">TYPE  NAME  REPO                                   INSECURE  OCI    LFS    CREDS  STATUS      MESSAGE  PROJECT</span>
<span class="line"><span class="token function">git</span>         https://github.com/chosam2/gitops.git  <span class="token boolean">false</span>     <span class="token boolean">false</span>  <span class="token boolean">false</span>  <span class="token boolean">true</span>   Successful</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë¥´ê³ ì‹œë””ê°€ ì„¤ì¹˜ëœ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ëŠ” íƒ€ê¹ƒ í´ëŸ¬ìŠ¤í„°ë¡œ ë“±ë¡ë¨</span></span>
<span class="line">argocd cluster list</span>
<span class="line">SERVER                          NAME        VERSION  STATUS      MESSAGE  PROJECT</span>
<span class="line">https://kubernetes.default.svc  in-cluster  <span class="token number">1.24</span>+    Successful</span>
<span class="line"></span></code></pre></div><h3>ArgoCD Application ìƒì„± ë° ë°°í¬</h3>
<p>ì•ì„œ ìƒì„±í•œ GitHub ì €ì¥ì†Œì— ì—…ë¡œë“œí•œ consul helm values íŒŒì¼ì„ í†µí•´ ë°°í¬í•˜ê¸° ìœ„í•´ <code>Application</code> CRDë¥¼ ìƒì„± ë° ë°°í¬í•œë‹¤.</p>
<ul>
<li><code>consul-helm-argo-application.yaml</code></li>
</ul>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> argoproj.io/v1alpha1</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Application</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> consul<span class="token punctuation">-</span>helm</span>
<span class="line">  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> argocd</span>
<span class="line">  <span class="token key atrule">finalizers</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> resources<span class="token punctuation">-</span>finalizer.argocd.argoproj.io</span>
<span class="line"><span class="token key atrule">spec</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">destination</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> consul</span>
<span class="line">    <span class="token key atrule">server</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//kubernetes.default.svc</span>
<span class="line">  <span class="token key atrule">project</span><span class="token punctuation">:</span> default</span>
<span class="line">  <span class="token key atrule">source</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">repoURL</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/chosam2/gitops.git</span>
<span class="line">    <span class="token key atrule">path</span><span class="token punctuation">:</span> argocd</span>
<span class="line">    <span class="token key atrule">targetRevision</span><span class="token punctuation">:</span> main</span>
<span class="line">    <span class="token key atrule">helm</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">valueFiles</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> override<span class="token punctuation">-</span>values.yaml</span>
<span class="line">  <span class="token key atrule">syncPolicy</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">syncOptions</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> CreateNamespace=true</span>
<span class="line"></span></code></pre></div><ul>
<li>Application CRD ë°°í¬</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">k apply <span class="token parameter variable">-f</span> consul-helm-argo-application.yaml</span>
<span class="line">application.argoproj.io/consul-helm created</span>
<span class="line"></span></code></pre></div><p>ìµœì´ˆ ë°°í¬ ì‹œ <code>OutOfSync</code> ìƒíƒœë¡œ ë°°í¬ë˜ì—ˆì§€ë§Œ, ë™ê¸°í™” ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ê°•ì œë¡œ ë™ê¸°í™”í•´ì¤€ ë’¤ ì •ìƒì ìœ¼ë¡œ ë°°í¬ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br>
ë‹¤ë§Œ, ìµœì´ˆ <code>OutOfSync</code> ìƒíƒœë¡œ ë°°í¬ë˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” Application YAML ì‘ì„± ì‹œ ì˜µì…˜ì„ í†µí•´ í•´ê²°ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ì‹¤ì œ ìš´ì˜ì‹œ ì˜í–¥ë„ ì²´í¬ê°€ í•„ìš”í•´ ë³´ì¸ë‹¤. ì´ ë¶€ë¶„ì€ ë‹¤ìŒ ë¸”ë¡œê¹…ì‹œì— ì¡°ê¸ˆ ë” í…ŒìŠ¤íŠ¸ ë° í™•ì¸í•´ë³¼ ì˜ˆì •ì´ë‹¤.</p>
<ul>
<li>ìµœì´ˆ êµ¬ì„± í›„ OutOfSync ìƒíƒœ</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/argo_á„€á…®á„Œá…©.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<ul>
<li>ê°•ì œ ë™ê¸°í™” ì´í›„ Sync ëœ í™”ë©´</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/argo_á„€á…®á„Œá…©2.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<ul>
<li>ì‹¤ì œ ë°°í¬ëœ Consul UI í™”ë©´</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/ejor4D.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2>ë§ˆë¬´ë¦¬</h2>
<p>1ì£¼ì°¨ ìŠ¤í„°ë””ëŠ” EKSì— ëŒ€í•œ ì „ë°˜ì ì¸ ì»¨ì…‰ê³¼ ê¸°ë³¸ì ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ê³  Consul Clusterë¥¼ ê°„ë‹¨í•˜ê²Œ ë°°í¬í•´ë³´ì•˜ë‹¤. ë‹¤ìŒì£¼ì—ëŠ” ë„¤íŠ¸ì›Œí‚¹ì„ ì£¼ì œë¡œ ì°¾ì•„ì˜¬ ì˜ˆì •ì´ë‹¤.</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/751VTo.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>2023ë…„ 5ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-05.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-05.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 5ì›”</source>
      <description>2023ë…„ 5ì›” Update</description>
      <pubDate>Wed, 26 Apr 2023 06:03:54 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>Vault Secrets Operator: A new method for Kubernetes integration</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/vault-secrets-operator-a-new-method-for-kubernetes-integration" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>K8S Cluster ì˜ Secret ì„ CRD (custom resource definitions) ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Vault ì™€ ì—°ë™í•¨ìœ¼ë¡œì¨ K8S ë¥¼ ì´ìš©í•˜ëŠ” ê°œë°œì ë° ë‹¤ì–‘í•œ ì‚¬ìš©ìë“¤ì€ ìƒˆë¡œìš´ Tool ì„ ë°°ìš¸ í•„ìš” ì—†ì´ ê¸°ì¡´ì˜ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ K8S Secret ì„ ìƒëª…ì£¼ê¸°ê°€ ë”í•´ì§„ ë™ì ì¸ ë°ì´í„°ë¡œì¨ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤ .</li>
<li>ê¸°ì¡´ì— ì œê³µë˜ê³  ìˆë˜ Sidecar Injector ë° CSI Provider ë°©ì‹ê³¼ì˜ ë¹„êµ ë¶„ì„ì€ <a href="https://www.hashicorp.com/blog/kubernetes-vault-integration-via-sidecar-agent-injector-vs-csi-provider" target="_blank" rel="noopener noreferrer">Hashicorp Blog: Kubernetes Vault Integration via Sidecar Agent Injector vs. Vault Secrets Operator vs. CSI Provider</a> ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.</li>
<li><a href="https://developer.hashicorp.com/vault/tutorials/kubernetes/vault-secrets-operator" target="_blank" rel="noopener noreferrer">Hashicorp Officlal Tutorial</a> ì„ ì°¸ê³ í•˜ì—¬ í…ŒìŠ¤íŠ¸ í•´ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>
<p>CLI</p>
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.4.5" target="_blank" rel="noopener noreferrer">1.4.5 Release</a>
<ul>
<li>terraform destroy ì‹œ <code>create_before_destroy</code> ì°¸ì¡° ì˜¤ë¥˜ ë“± ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a></p>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202304-1" target="_blank" rel="noopener noreferrer">4ì›” Release</a> ì¶œì‹œ (<code>v202304-1 (692)</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2)</li>
<li>Project List API ì‚¬ìš© ì‹œ Project ì´ë¦„ ê¸°ë°˜ í•„í„° ì²˜ë¦¬ ì§€ì›</li>
<li>ì‹ ê·œ ìƒì„±ëœ User, Team, Org ì •ë³´ì— ëŒ€í•œ ê°•ì¡° í‘œì‹œ ë“± UI ê°œì„ </li>
<li>Sentinel 0.21 Upgrade</li>
</ul>
</li>
<li>
<p>Provider</p>
<ul>
<li>
<p><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v4.64.0" target="_blank" rel="noopener noreferrer">AWS v4.64.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a></p>
<ul>
<li>ì‹ ê·œ Resource
<ul>
<li>data/aws_route53_resolver_query_log_config</li>
<li>data/aws_redshiftserverless_workgroup</li>
<li>resource/aws_cloudwatch_event_endpoint</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>data/aws_eks_node_group ì— ëŒ€í•´ <code>launch_template</code> ì„¤ì • ì¶”ê°€</li>
<li>aws_iam_role ì— ëŒ€í•´ <code>role_last_used</code> ì„¤ì • ì¶”ê°€</li>
<li>aws_lambda_* ì— ëŒ€í•´ <code>compatible_runtimes = python 3.10</code> ì„¤ì • ì¶”ê°€</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>aws_default_vpc ì— ëŒ€í•´ ipv6 vpc ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_ecs_service ì— ëŒ€í•´ IAM Role ê¸°ë°˜ service import ìˆ˜í–‰ ì‹œ ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_lakeformation_permissions ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.53.0" target="_blank" rel="noopener noreferrer">Azure v3.53.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a></p>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>azurerm_storage_mover_*</li>
<li>azurerm_cost_management_scheduled_action</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>azurerm_windows_* ì— ëŒ€í•´ <code>hosting_environment_id</code> ì„¤ì • ì¶”ê°€</li>
<li>azurerm_linux_* ì— ëŒ€í•´ <code>hosting_environment_id</code> ì„¤ì • ì¶”ê°€</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>azurerm_cdn_endpoint ì‚¬ìš© ì‹œ <code>query_string</code> ê¸¸ì´ ì œì•½ ì œê±°</li>
<li>azurerm_monitor_metric_alert ì‚¬ìš© ì‹œ <code>dynamic_criteria.0.ignore_data_before</code> ë¯¸ì„¤ì •ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_postgresql_flexible_server ì‚¬ìš© ì‹œ <code>point_in_time_restore_time_in_utc</code> ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.63.0" target="_blank" rel="noopener noreferrer">GCP v4.63.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a></p>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€
<ul>
<li>google_compute_region_commitment</li>
<li>google_compute_public_advertised_prefix</li>
<li>google_network_service_http_route</li>
</ul>
</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>google_alloydb_cluster ë° google_alloydb_backup ì‚¬ìš© ì‹œ <code>location</code> ì„¤ì • required ë¡œ ë³€ê²½ (ê¸°ì¡´: optional)\</li>
<li>google_data_loss_prevention_job_trigger ì‚¬ìš© ì‹œ <code>inspect_job.actions.job_notification_emails</code>, <code>inspect_job.actions.deidentify</code>, <code>triggers.manual</code> ê·¸ë¦¬ê³  <code>inspect_job.storage_config.hybrid_options</code> ì„¤ì • ì¶”ê°€</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>google_alloydb_cluster ì— ëŒ€í•´  <code>weekly_schedule</code> ì„¤ì • optional ë¡œ ë³€ê²½</li>
<li>google_compute_backend_bucket ì— ëŒ€í•´ <code>USE_ORIGIN_HEADERS</code> ì‚¬ìš©ì‹œ ë°œìƒí•˜ëŠ” TTL ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.13.1
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.13.1" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Github Auth Method ì— ëŒ€í•´ í™˜ê²½ë³€ìˆ˜ <code>VAULT_AUTH_CONFIG_GITHUB_TOKEN</code> ì„¤ì • ì§€ì›</li>
<li>DB Secrets Engine (Elasticsearch) ì— ëŒ€í•´ API ì˜¤ë¥˜ ì‹œ ì•Œë¦¼ ë©”ì„¸ì§€ ê°•í™”</li>
<li><code>CKR_FUNCTION_FAILED</code> ì˜¤ë¥˜ ë°œìƒ ì‹œ PKCS#11 HSM ì— ëŒ€í•œ ì¬ì—°ê²° ì‹œë„ ê°œì„ </li>
<li>UI ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.15.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.15.2" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>connect proxy ì„¤ì • ê¸°ë°˜ service mesh ê´€ë ¨ telemetry ë¥¼ HCP metrics collection service ë¡œ ì „ë‹¬í•˜ëŠ” ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Vault CA Provider ì™€ ì—°ë™ ì‹œ ë°œìƒí•˜ëŠ” Service Mesh TLS ì„¤ì • ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>Gateway ì— ëŒ€í•´ Namespace ë° Partition ê´€ë ¨ <code>unmarshal</code> ë˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>Default Namespace ë˜ëŠ” Partition ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì„œë¹„ìŠ¤ì— ëŒ€í•œ Resolver, Router, Splitter ì‚¬ìš© ì‹œ Peering ì´ ì˜¬ë°”ë¥´ê²Œ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>Audit Log ì´ìš© ì‹œ <code>Streaming not supported</code> ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.5.3
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.5.3" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>ì¸ì¦ë˜ì§€ ì•Šì€ HTTP API í˜¸ì¶œì´ ACL ê²€ì‚¬ë¥¼ ìš°íšŒ í†µê³¼í•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Kubernetes Vault í†µí•©ë°©ì•ˆ 3ê°€ì§€ ë¹„êµ</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/vault-k8s-integration-three-methods.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/vault-k8s-integration-three-methods.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Kubernetes Vault í†µí•©ë°©ì•ˆ 3ê°€ì§€ ë¹„êµ</source>
      <description>Kubernetes Vault í†µí•©ë°©ì•ˆ 3ê°€ì§€ ë¹„êµ Sidecar Agent Injector CSI provider Vault Secrets Operator ê°œìš” ë³¸ ê¸€ì—ì„œëŠ” HashiCorp Vault ë° Kubernetes í†µí•©ì„ ìœ„í•´ HashiCorpê°€ ì§€ì›í•˜ëŠ” ì„¸ ê°€ì§€ ë°©ë²•ì„ ìì„¸íˆ ë¹„êµí•œë‹¤: ë³¼íŠ¸ ì‚¬ì´ë“œì¹´ ...</description>
      <pubDate>Sun, 23 Apr 2023 13:46:44 GMT</pubDate>
      <content:encoded><![CDATA[
<ul>
<li>Sidecar Agent Injector</li>
<li>CSI provider</li>
<li>Vault Secrets Operator</li>
</ul>
<div class="hint-container info">
<p class="hint-container-title">ê°œìš”</p>
<p>ë³¸ ê¸€ì—ì„œëŠ” HashiCorp Vault ë° Kubernetes í†µí•©ì„ ìœ„í•´ HashiCorpê°€ ì§€ì›í•˜ëŠ” ì„¸ ê°€ì§€ ë°©ë²•ì„ ìì„¸íˆ ë¹„êµí•œë‹¤:</p>
<ol>
<li>ë³¼íŠ¸ ì‚¬ì´ë“œì¹´ ì—ì´ì „íŠ¸ ì¸ì í„°(Sidecar Agent Injector)</li>
<li>ë³¼íŠ¸ ì»¨í…Œì´ë„ˆ ìŠ¤í† ë¦¬ì§€ ì¸í„°í˜ì´ìŠ¤ ê³µê¸‰ì(Container Storage Interface (CSI) provider)</li>
<li>ë³¼íŠ¸ ì‹œí¬ë¦¿ ì˜¤í¼ë ˆì´í„°(Secrets Operator)</li>
</ol>
<p>ê° ë°©ë²•ì— ëŒ€í•œ ì‹¤ìš©ì ì¸ ì§€ì¹¨(guidance)ì„ ì œê³µí•˜ì—¬ ì‚¬ìš© ì‚¬ë¡€ì— ê°€ì¥ ì í•©í•œ ë°©ë²•ì„ ì´í•´í•˜ê³  ì„ íƒí•  ìˆ˜ ìˆë„ë¡ ì•ˆë‚´í•œë‹¤.</p>
</div>
<div class="hint-container warning">
<p class="hint-container-title">ì°¸ê³ </p>
<p>ë³¸ í¬ìŠ¤íŠ¸ëŠ” ì œí’ˆ ì„¤ëª…ì„œë‚˜ ë‹¨ê³„ë³„(step-by-step) êµ¬í˜„ ê°€ì´ë“œê°€ ì•„ë‹ˆë©°, HashiCorp Vault ë° Kubernetesì— ìµìˆ™í•˜ê³  ì‹œí¬ë¦¿ ê´€ë¦¬ ê°œë…ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì´í•´ê°€ ìˆëŠ” ë°ë¸Œì˜µìŠ¤ ì‹¤ë¬´ìë¥¼ ìœ„í•œ ë¬¸ì„œì´ë‹¤.</p>
</div>
<h2>1. Vault Sidecar Agent Injector</h2>
<p>Vault ì‚¬ì´ë“œì¹´ ì—ì´ì „íŠ¸ ì¸ì í„°(<a href="https://www.vaultproject.io/docs/platform/k8s/injector?_gl=1*67yi4g*_ga*MjA5MTM1MTczLjE2ODA2MDU3MjM.*_ga_P7S46ZYEKW*MTY4MTM5Nzc3NC45LjEuMTY4MTM5ODY2NC4wLjAuMA.." target="_blank" rel="noopener noreferrer">Vault Sidecar Agent Injector</a>)ëŠ” ì‚¬ì´ë“œì¹´ íŒ¨í„´(<a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/sidecar" target="_blank" rel="noopener noreferrer">sidecar pattern</a>)ì„ í™œìš©í•˜ì—¬ ê³µìœ  ë©”ëª¨ë¦¬ ë³¼ë¥¨ì— ë³¼íŠ¸ ì‹œí¬ë¦¿ì„ ë Œë”ë§í•˜ëŠ” Vault ì—ì´ì „íŠ¸ ì»¨í…Œì´ë„ˆë¥¼ í¬í•¨í•˜ë„ë¡ íŒŒë“œ ì‚¬ì–‘(spec)ì„ ë³€ê²½í•œë‹¤. ê³µìœ  ë³¼ë¥¨ì— ì‹œí¬ë¦¿ì„ ë Œë”ë§í•¨ìœ¼ë¡œì¨, íŒŒë“œ ë‚´ì˜ ì»¨í…Œì´ë„ˆëŠ” Vaultë¥¼ ì¸ì‹(Vault-aware)í•˜ì§€ ì•Šê³ ë„ Vault ì‹œí¬ë¦¿ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br>
ì¸ì í„°ëŠ” Kubernetes Mutating Webhook Controllerì´ë‹¤. ControllerëŠ” íŒŒë“œ ì´ë²¤íŠ¸ë¥¼ ê°€ë¡œì±„ê³ (intercepts) ìš”ì²­ ë‚´ì— ì–´ë…¸í…Œì´ì…˜ì´ ìˆëŠ” ê²½ìš° íŒŒë“œì— ë³€í˜•(mutations)ì„ ì ìš©í•œë‹¤. ì´ ê¸°ëŠ¥ì€ <a href="https://github.com/hashicorp/vault-k8s" target="_blank" rel="noopener noreferrer">vault-k8s</a> í”„ë¡œì íŠ¸ì— ì˜í•´ ì œê³µë˜ë©°, Vault Helm ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ ì„¤ì¹˜ ë° êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.</p>
<figure><img src="https://www.hashicorp.com/_next/image?url=https%3A%2F%2Fwww.datocms-assets.com%2F2885%2F1643214443-sidecar-workflow-v1.png&amp;w=3840&amp;q=75" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2>2. Vault CSI provider</h2>
<p>íŒŒë“œê°€ ì„ì‹œ(ephemeral) <a href="https://github.com/kubernetes-sigs/secrets-store-csi-driver" target="_blank" rel="noopener noreferrer">CSI Secrets Store</a> ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ì—¬ ë³¼íŠ¸ ì‹œí¬ë¦¿ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ <a href="https://www.vaultproject.io/docs/platform/k8s/csi?_gl=1*8ev72c*_ga*MjA5MTM1MTczLjE2ODA2MDU3MjM.*_ga_P7S46ZYEKW*MTY4MTM5Nzc3NC45LjEuMTY4MTM5ODc3NC4wLjAuMA.." target="_blank" rel="noopener noreferrer">Vault CSI provider</a>ì´ë‹¤.<br>
ë†’ì€ ìˆ˜ì¤€(high level)ì—ì„œ, CSI Secretes Store ë“œë¼ì´ë²„ëŠ” ì‚¬ìš©ìê°€ <code>SecretProviderClass</code> ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ì´ ì˜¤ë¸Œì íŠ¸ëŠ” ì‚¬ìš©í•  ì‹œí¬ë¦¿ í”„ë¡œë°”ì´ë”ì™€ ê²€ìƒ‰í•  ì‹œí¬ë¦¿ì„ ì •ì˜í•œë‹¤. CSI ë³¼ë¥¨ì„ ìš”ì²­í•˜ëŠ” íŒŒë“œê°€ ìƒì„±ë˜ë©´, CSI Secretes Store ë“œë¼ì´ë²„ëŠ” í”„ë¡œë°”ì´ë”ê°€ <code>vault</code>ì¸ ê²½ìš° ìš”ì²­ì„ Vault CSI Providerì—ê²Œ ë³´ë‚¸ë‹¤. ê·¸ëŸ¬ë©´ Vault CSI ProviderëŠ” ì§€ì •ëœ <code>SecretProviderClass</code>ì™€ íŒŒë“œì˜ ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸(SA)ì„ ì‚¬ìš©í•˜ì—¬ ë³¼íŠ¸ì—ì„œ ì‹œí¬ë¦¿ì„ ê²€ìƒ‰í•˜ê³  íŒŒë“œì˜ CSI ë³¼ë¥¨ì— ë§ˆìš´íŠ¸í•œë‹¤. ì‹œí¬ë¦¿ì€ Vaultì—ì„œ ê²€ìƒ‰ë˜ì–´ <code>ContainerCreation</code> ë‹¨ê³„ì—ì„œ CSI ì‹œí¬ë¦¿ ìŠ¤í† ì–´ ë³¼ë¥¨ì— ì±„ì›Œì§„ë‹¤. ì¦‰, Vaultì—ì„œ ì‹œí¬ë¦¿ì„ ì½ê³  ë³¼ë¥¨ì— ì“°ê¸° ì „ê¹Œì§€ëŠ” íŒŒë“œê°€ ì‹œì‘ë˜ì§€ ì•Šë„ë¡ ì°¨ë‹¨ëœë‹¤.</p>
<figure><img src="https://www.hashicorp.com/_next/image?url=https%3A%2F%2Fwww.datocms-assets.com%2F2885%2F1643214470-csi-workflow-v1.png&amp;w=3840&amp;q=75" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2>3. Vault Secrets Operator</h2>
<p><a href="https://github.com/hashicorp/vault-secrets-operator/" target="_blank" rel="noopener noreferrer">Vault Secrets Operator</a>ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Vault secretsì„ Kubernetes Secretsì— ë™ê¸°í™”í•  ì±…ì„ì´ ìˆëŠ”(responsible) CRD ì§‘í•©ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œí¬ë¦¿ ì˜¤í¼ë ˆì´í„°(Kubernetes Secrets Operator)ë¥¼ êµ¬í˜„í•˜ëŠ” ìƒˆë¡œìš´ í†µí•© ë°©ë²•ì´ë‹¤.</p>
<figure><figcaption></figcaption></figure>
<p>ì˜¤í¼ë ˆì´í„°ëŠ” í•˜ë‚˜ ì´ìƒì˜ ë³¼íŠ¸ ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì •ì (static), ë™ì (dynamic) ë° PKI ê¸°ë°˜(PKI-based) ì‹œí¬ë¦¿ì„ í¬í•¨í•œ ì‹œí¬ë¦¿ ê´€ë¦¬ì˜ ì „ì²´ ë¼ì´í”„ì‚¬ì´í´ ë™ê¸°í™”ë¥¼ ì§€ì›í•œë‹¤. ë˜í•œ ì˜¤í¼ë ˆì´í„°ëŠ” ì‹œí¬ë¦¿ ë¡œí…Œì´ì…˜(secret rotation)ì„ ê´€ë¦¬í•˜ê³  <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" target="_blank" rel="noopener noreferrer">Deployment</a>ì˜ <a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#rollout" target="_blank" rel="noopener noreferrer">rolling update</a>ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì§ì ‘ ì•Œë¦¬ê±°ë‚˜(notifying) ë¡¤ë§ ì—…ë°ì´íŠ¸ë¥¼ íŠ¸ë¦¬ê±°(triggering)í•˜ëŠ” ë“± ë¡œí…Œì´ì…˜ í›„ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.</p>
<blockquote>
<p>ì°¸ê³  :</p>
<ul>
<li>
<p><a href="https://kubernetes.io/ko/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank" rel="noopener noreferrer">ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤(Custom Resource) ë€?</a></p>
</li>
<li>
<p><a href="https://kubernetes.io/ko/docs/concepts/extend-kubernetes/operator/" target="_blank" rel="noopener noreferrer">ì˜¤í¼ë ˆì´í„°(operator) íŒ¨í„´ì´ë€?</a></p>
</li>
</ul>
</blockquote>
<h2>4. ì„¤ê³„ ê³ ë ¤ì‚¬í•­</h2>
<p>ë‘ ì†”ë£¨ì…˜ ê°„ì—ëŠ” ëª‡ ê°€ì§€ ìœ ì‚¬ì ê³¼ ì°¨ì´ì ì´ ìˆìœ¼ë©°, Kubernetes í™˜ê²½ì—ì„œ ì‹œí¬ë¦¿ ê´€ë¦¬ ì „ëµì„ ì„¤ê³„í•˜ê³  êµ¬í˜„í•  ë•Œ ê³ ë ¤í•´ì•¼ í•  ì‚¬í•­ì´ë‹¤.</p>
<p>| ê³ ë ¤ì‚¬í•­                     | ì„¤ëª…                                                         |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://www.hashicorp.com/_next/image?url=https%3A%2F%2Fwww.datocms-assets.com%2F2885%2F1643214443-sidecar-workflow-v1.png&amp;w=3840&amp;q=75" type="image/"/>
    </item>
    <item>
      <title>Vaultë¡œ Spring Boot êµ¬ì„±ê´€ë¦¬</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/spring-boot.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/spring-boot.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vaultë¡œ Spring Boot êµ¬ì„±ê´€ë¦¬</source>
      <description>Vaultë¡œ Spring Boot êµ¬ì„±ê´€ë¦¬ Example Source : https://github.com/Great-Stone/vault_springboot_example ë³¼íŠ¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜(ì•±)ì˜ êµ¬ì„±ê´€ë¦¬, íŠ¹íˆ ì‚¬ìš©ì ID, íŒ¨ìŠ¤ì›Œë“œ, Token, ì¸ì¦ì„œ, ì—”ë“œí¬ì¸íŠ¸, AWS ìê²©ì¦ëª… ë“±ê³¼ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ...</description>
      <pubDate>Sun, 09 Apr 2023 23:54:58 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Example Source : <a href="https://github.com/Great-Stone/vault_springboot_example" target="_blank" rel="noopener noreferrer">https://github.com/Great-Stone/vault_springboot_example</a></p>
</blockquote>
<p>ë³¼íŠ¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜(ì•±)ì˜ êµ¬ì„±ê´€ë¦¬, íŠ¹íˆ ì‚¬ìš©ì ID, íŒ¨ìŠ¤ì›Œë“œ, Token, ì¸ì¦ì„œ, ì—”ë“œí¬ì¸íŠ¸, AWS ìê²©ì¦ëª… ë“±ê³¼ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ëŠ” ì¤‘ì•™ ì§‘ì¤‘ì‹ ì¸í”„ë¼ë¥¼ ì œê³µí•œë‹¤. ì„œë¹„ìŠ¤ì˜ ì„±ì¥ê³¼ ë”ë¶ˆì–´, ì´ë¥¼ êµ¬ì„±í•˜ëŠ” ì•±ì€ í™•ì¥ê³¼ ë¶„ë¦¬ ìš”êµ¬ ì‚¬í•­ì´ ë°œìƒí•˜ë©´ êµ¬ì„± ê´€ë¦¬ê°€ ì–´ë ¤ì›Œ ì§„ë‹¤. íŠ¹íˆ, ì‹œí¬ë¦¿ ì •ë³´ê°€ í¬í•¨ë˜ëŠ” êµ¬ì„± ê´€ë¦¬ëŠ” ìˆ˜ë™ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²½ìš° ë¡œì»¬ í™˜ê²½ì„ í¬í•¨í•œ ì—¬ëŸ¬ ì‹œìŠ¤í…œì— ë…¸ì¶œë˜ëŠ” ìœ„í—˜ì„±ì„ ê°–ê³ , í™˜ê²½ë§ˆë‹¤ ë‹¤ë¥¸ ì‹œí¬ë¦¿ì„ ê´€ë¦¬í•˜ê¸°ìœ„í•œ ìœ ì§€ ê´€ë¦¬ì˜ ë…¸ë ¥ê³¼ ë¹„ìš©ì´ ì¦ê°€í•œë‹¤. ë³¼íŠ¸ì—ì„œ ì´ì•¼ê¸°í•˜ëŠ” ì•±ê³¼ ê´€ë ¨í•œ "ì‹œí¬ë¦¿ ìŠ¤í”„ë¡¤(í¼ì§)" í˜„ìƒì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li>ì‹œíŠ¸ë¦¿ì˜ ìœ„ì¹˜ê°€ íŒŒì¼ ì„œë²„, Git ì €ì¥ì†Œ, ë¡œì»¬ í™˜ê²½, ì•± ì‹¤í–‰ í™˜ê²½ë“± ë‹¤ì–‘í•œ ê³³ì— ì¡´ì¬í•˜ê³  ì¶”ì ì´ ì–´ë ¤ì›€</li>
<li>ë¶„ì‚° ì„œë¹„ìŠ¤ ë° Scale out/in ë˜ëŠ” ì•± í™˜ê²½ì— êµ¬ì„± ì„¤ì •ì˜ ë³€ê²½ ì‹œ ê°œë³„ì  ê´€ë¦¬ í•„ìš”</li>
<li>ìŠ¤í¬ë¦¿ ì‚¬ìš©ì˜ ìœ„ë°˜ ì¶”ì ì´ ì–´ë µê³  ê±°ë²„ë„ŒìŠ¤ì™€ ê·œì œ ìš”êµ¬ì‚¬í•­ì— ëŒ€í•œ í†µì œ</li>
</ul>
<p>ë³¸ì§ˆì ìœ¼ë¡œ ì‹œí¬ë¦¿ ìŠ¤í”„ë¡¤ì€ ê°€ì‹œì„±ê³¼ í†µì œë ¥ì˜ ì €í•˜ë¥¼ ì•¼ê¸°í•œë‹¤.</p>
<h2>êµ¬ì„±ê´€ë¦¬ ê°œë…</h2>
<p>ì•±ê³¼ êµ¬ì„± ê´€ê³„ì—ì„œ êµ¬ì„±ê´€ë¦¬ì˜ ì›ì¹™ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li>êµ¬ì„±ì€ ì•±ê³¼ ë¶„ë¦¬ë˜ì–´ì•¼ í•œë‹¤.</li>
<li>ì•±ì€ í•œë²ˆ ë¹Œë“œë˜ë©´ ë¡œì§ì˜ ë³€í™”ê°€ ì—†ëŠ” ê²½ìš° ê·¸ëŒ€ë¡œ ë°°í¬ë˜ì–´ì•¼ í•œë‹¤.</li>
<li>êµ¬ì„±ì˜ ë³€ê²½ ì‚¬í•­ì€ ì•±ì˜ ëŸ°íƒ€ì„ì‹œ ì£¼ì…ë˜ì–´ì•¼ í•œë‹¤.</li>
<li>êµ¬ì„±ì€ ì¤‘ì•™ì§‘ì¤‘í™” ë˜ì–´ ê°•ë ¥í•œ ê°ì‚¬ì™€ ì ‘ê·¼ì œì–´ê°€ ë™ë°˜ë˜ì–´ì•¼ í•œë‹¤.</li>
<li>ë¯¼ê°í•œ êµ¬ì„±ì€ ì•”í˜¸í™” ë˜ì–´ì•¼ í•œë‹¤.</li>
<li>12 factor ì•± ëª¨ë²” ì‚¬ë¡€ì— ë”°ë¼, ì¤‘ì•™ ì €ì¥ì†Œì˜ êµ¬ì„± ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡(ë¶€íŠ¸ìŠ¤íŠ¸ë˜í•‘) ì•±ì„ ì„¤ê³„í•´ì•¼ í•œë‹¤.</li>
</ul>
<h2>ë³¼íŠ¸ì˜ êµ¬ì„±ê´€ë¦¬ ì €ì¥ì†Œ ë° ê´€ë¦¬</h2>
<p>ë³¼íŠ¸ëŠ” êµ¬ì„± ìš”ì†Œì— ëŒ€í•´ ì¤‘ì•™ ì €ì¥ì†Œë¥¼ ì œê³µí•˜ë©° ë‹¤ìŒê³¼ ê°™ì€ ì£¼ìš” ì´ì ì´ ìˆë‹¤.</p>
<ul>
<li>ì¤‘ì•™ ì§‘ì¤‘ì‹ êµ¬ì„± ì €ì¥ì†Œ</li>
<li>ì €ì¥ë˜ëŠ” ë°ì´í„°ì˜ ì•”í˜¸í™” ì €ì¥</li>
<li>KV í˜•íƒœì˜ êµ¬ì„± ì €ì¥ ë° ë²„ì „ ê´€ë¦¬</li>
<li>ì •ì±… ê¸°ë°˜ ì ‘ê·¼ê´€ë¦¬</li>
<li>ê°ì‚¬ ê¸°ëŠ¥</li>
<li>ì €ì¥ ë° ì¸ì¦ì„ ìœ„í•œ í”ŒëŸ¬ê·¸ì¸ ê¸°ë°˜</li>
<li>ë™ì  ì‹œí¬ë¦¿ ë°œê¸‰ ë° ìˆ˜ëª…ì£¼ê¸° ê´€ë¦¬</li>
<li>ê³ ê°€ìš©ì„±(HA) ì•„í‚¤í…ì²˜ ì œê³µ</li>
<li>ì •ì  êµ¬ì„± ìš”ì†Œ ê´€ë¦¬ë¥¼ ìœ„í•œ í…œí”Œë¦¿íŒ… ì§€ì› (xml, json ë“±)</li>
<li>ë‹¤ì¤‘ í´ëŸ¬ìŠ¤í„° ê°„ ë³µì œ</li>
</ul>
<h3>[Example 1. Spring Boot Application]</h3>
<p>ì•±ì„ ìœ„í•œ ë³¼íŠ¸ êµ¬ì„±ì„ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ë³¼íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault server <span class="token parameter variable">-dev</span> -dev-root-token-id<span class="token operator">=</span>root -log-level<span class="token operator">=</span>trace</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line">You may need to <span class="token builtin class-name">set</span> the following environment variables:</span>
<span class="line"></span>
<span class="line">    $ <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_ADDR</span><span class="token operator">=</span><span class="token string">'http://127.0.0.1:8200'</span></span>
<span class="line"></span>
<span class="line">The unseal key and root token are displayed below <span class="token keyword">in</span> <span class="token keyword">case</span> you want to</span>
<span class="line">seal/unseal the Vault or re-authenticate.</span>
<span class="line"></span>
<span class="line">Unseal Key: UTZ7HoZCu8dtWa/eSMKcwq1klhC/qFoDxHXmhRn4qnE<span class="token operator">=</span></span>
<span class="line">Root Token: root</span>
<span class="line"></span></code></pre></div><p><code>root</code> í† í°ì€ êµ¬ì„±ê´€ë¦¬ ê´€ë¦¬ìì˜ ê¶Œí•œìœ¼ë¡œ ê°€ì •í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_ADDR</span><span class="token operator">=</span><span class="token string">'http://127.0.0.1:8200'</span></span>
<span class="line">$ vault login</span>
<span class="line">Token <span class="token punctuation">(</span>will be hidden<span class="token punctuation">)</span>: root</span>
<span class="line"></span>
<span class="line">Success<span class="token operator">!</span> You are now authenticated. The token information displayed below</span>
<span class="line">is already stored <span class="token keyword">in</span> the token helper. You <span class="token keyword">do</span> NOT need to run <span class="token string">"vault login"</span></span>
<span class="line">again. Future Vault requests will automatically use this token.</span>
<span class="line"></span>
<span class="line">Key                  Value</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/image-20230406150032627.png" type="image/png"/>
    </item>
    <item>
      <title>2023ë…„ 4ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-04.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-04.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 4ì›”</source>
      <description>2023ë…„ 4ì›” Update</description>
      <pubDate>Thu, 06 Apr 2023 07:39:35 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>Dynamic provider credentials now generally available for Terraform Cloud</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/dynamic-provider-credentials-now-ga-for-terraform-cloud" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>AWS, MS Azure, GCP ë“± Cloud í™˜ê²½ì„ Terraform ê³¼ ì—°ë™ ë° ì¸ì¦í•˜ê¸° ìœ„í•´ Workspace Variable ë˜ëŠ” Variable Set ì„ í™œìš©í•˜ì—¬ Credential ì •ë³´ë¥¼ ì„¤ì •í•´ì„œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. í•´ë‹¹ Credential ì •ë³´ëŠ” ì¥ê¸°ê°„ì˜ TTL ì„ ì„¤ì •í•˜ì—¬ ì‚¬ìš©í•˜ê±°ë‚˜ í˜¹ì€ ë³´ì•ˆì·¨ì•½ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ê´€ë¦¬ìê°€ ìˆ˜ë™ìœ¼ë¡œ ê°±ì‹  ë° ì„¤ì •í•˜ëŠ” ë“±ì˜ ë²ˆê±°ë¡œì›€ì„ ë™ë°˜í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. Dynamic Provider Credential ì€ ê° Cloud Service ì˜ OIDC Provider ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Terraform ì— ëŒ€í•œ TLS ì¸ì¦ í™•ì¸ì„ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨ ë§¤ Apply ë§ˆë‹¤  Terraform ì— ëŒ€í•œ ì¸ì¦ ì²˜ë¦¬ í›„ Resource Provisioning ë“±ì„ ìˆ˜í–‰í•˜ëŠ” <code>ë™ì ì¸ì¦ì²˜ë¦¬</code> ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</li>
<li><a href="https://developer.hashicorp.com/terraform/tutorials/cloud/dynamic-credentials?product_intent=terraform" target="_blank" rel="noopener noreferrer">Hashicorp Officlal Tutorial</a> ì„ ì°¸ê³ í•˜ì—¬ í…ŒìŠ¤íŠ¸ í•´ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.4.2" target="_blank" rel="noopener noreferrer">1.4.2 Release</a>
<ul>
<li>ì¼ë¶€ Provider ì—ì„œ ë°œìƒí•˜ëŠ” <code>invalid plan</code> ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202303-1" target="_blank" rel="noopener noreferrer">3ì›” Release</a> ì¶œì‹œ (<code>v202303-1 (688)</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2)</li>
<li>OPA Support: OPA (Open Policy Agent) ê¸°ë°˜ ì •ì±… ì„¤ì • ì§€ì›</li>
<li>Dynamic Provider Credential: Terraform ê³¼ Provider ê°„ ë™ì  ì¸ì¦ì²˜ë¦¬ ì§€ì› (ì§€ì›ëŒ€ìƒ Provider: AWS, AzureRM, AzureAD, GCP, Vault)</li>
<li>Drift Detection: State íŒŒì¼ ë‚´ ìƒíƒœì •ë³´ì™€ ì‹¤ì œ ëŒ€ìƒí™˜ê²½ ê°„ ìƒì´í•œ ë¶€ë¶„ ì²´í¬ ë° ì•Œë¦¼ ì„¤ì •, Workspace ë˜ëŠ” Organization ë‹¨ìœ„ë¡œ í™œì„±í™”</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v4.60.0" target="_blank" rel="noopener noreferrer">AWS v4.60.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ Resource: data/appmesh_route, data/appmesh_virtual_gateway, resource/aws_cognito_managed_user_pool_client ë“±</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>data/aws_ecs_cluster: <code>tags</code> ì„¤ì • ì§€ì›</li>
<li>resource/aws_rds_cluster: <code>snapshot_identifier</code> ì™€ <code>global_cluster_identifier</code> ì„¤ì •ì— ì˜í•œ ì˜ëª»ëœ ë³µì› ìˆ˜í–‰ ê°œì„ </li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>aws_appmesh ê´€ë ¨ mesh owner ì„¤ì •ì— ëŒ€í•œ ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_medialive_channel ê´€ë ¨ type casting ì„¤ì •ì— ëŒ€í•œ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.49.0" target="_blank" rel="noopener noreferrer">Azure v3.49.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€: azurerm_databricks_virtual_network_peering, azurerm_sentinel_threat_intelligence_indicator, azurerm_voice_services_communications_gateway</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>azurerm_mysql_flexible_server ì— ëŒ€í•´  <code>geo_backup_key_vault_key_id</code> ì™€ <code>geo_backup_user_assigned_identity_id</code> ì„¤ì • ì§€ì›</li>
<li>azurerm_virtual_network_peering ì— ëŒ€í•´ <code>allow_forwarded_traffic</code>, <code>allow_gateway_transit</code>, <code>use_remote_gateways</code> ì— ëŒ€í•œ ê¸°ë³¸ê°’ ì„¤ì •</li>
<li>azurerm_virtual_hub ì— ëŒ€í•´ <code>hub_routing_preference</code> ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>azurerm_linux_function_app ì— ëŒ€í•´ <code>auth_v2</code>, <code>token_store_enabled</code>, <code>ip_restriction</code>, <code>scp_ip_restriction</code> ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_linux_wep_app ì— ëŒ€í•´  <code>auth_v2</code>, <code>token_store_enabled</code>, <code>ip_restriction</code>, <code>scp_ip_restriction</code> ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_windows_function_app ì— ëŒ€í•´  <code>auth_v2</code>, <code>token_store_enabled</code>, <code>ip_restriction</code>, <code>scp_ip_restriction</code> ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_windows_web_app ì— ëŒ€í•´  <code>auth_v2</code>, <code>token_store_enabled</code>, <code>ip_restriction</code>, <code>scp_ip_restriction</code> ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.59.0" target="_blank" rel="noopener noreferrer">GCP v4.59.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€: google_dataplex, google_network_services_gateway</li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>oauth2 ê¸°ë°˜ mTLS ì§€ì›</li>
<li>bigquery ì— ëŒ€í•´ <code>is_case_insensitive</code> ì™€ <code>default_collation</code> ì„¤ì • ì§€ì›</li>
<li>compute ì— ëŒ€í•´ <code>scratch_disk.size</code>ì™€ <code>local_nvme_ssd_block</code> ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>certificatemanager ì— ëŒ€í•´ import ê³¼ì • ì¤‘ <code>managed.dns_authorizations</code> ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>compute ì— ëŒ€í•´ <code>enforce_on_key_name</code> ê´€ë ¨ ì„¤ì • ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.13.1
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.13.1" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Github Auth Method ì— ëŒ€í•´ í™˜ê²½ë³€ìˆ˜ <code>VAULT_AUTH_CONFIG_GITHUB_TOKEN</code> ì„¤ì • ì§€ì›</li>
<li>DB Secrets Engine (Elasticsearch) ì— ëŒ€í•´ API ì˜¤ë¥˜ ì‹œ ì•Œë¦¼ ë©”ì„¸ì§€ ê°•í™”</li>
<li><code>CKR_FUNCTION_FAILED</code> ì˜¤ë¥˜ ë°œìƒ ì‹œ PKCS#11 HSM ì— ëŒ€í•œ ì¬ì—°ê²° ì‹œë„ ê°œì„ </li>
<li>UI ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.15.1
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.15.1" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li><code>consul token update</code> ëª…ë ¹ì–´ ìˆ˜í–‰ ì‹œ <code>-append-policy-id</code>, <code>-append-policy-name</code>, <code>-append-role-id</code>, <code>-append-service-identity</code>, <code>-append-node-identity</code> ë§¤ê°œë³€ìˆ˜ ì„¤ì • ì§€ì›</li>
<li>í˜¸í™˜ Envoy Version: 1.22.5 ~ 1.22.7, 1.23.2 ~ 1.23.4, 1.24.0 ~ 1.24.2 ì§€ì› (1.21.5 ì œì™¸)</li>
<li>Service Mesh ì— ì‚¬ìš©ë˜ëŠ” Gateway ì—ì„œ ë°œìƒí•˜ëŠ” <code>HTTPRoute</code> ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ACL ì •ì±… í˜¸ì¶œ ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.5.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.5.2" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li><code>namespace status</code>, <code>quota status</code>, <code>server members</code> ëª…ë ¹ì–´ì— ëŒ€í•´ <code>-json</code>ê³¼ <code>-t</code> ë§¤ê°œë³€ìˆ˜ ì„¤ì • ì§€ì›</li>
<li>ë“±ë¡ëœ ì„œë¹„ìŠ¤ ì œê±° ì‹œ ë‘ë²ˆ ì œê±° ë˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>Consul Discovery ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ì— ëŒ€í•´ ë°œìƒí•˜ëŠ” Cluster Join ê¶Œí•œ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Vault PKI - mTLS demo</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/mtls.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/mtls.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault PKI - mTLS demo</source>
      <description>Vault PKI - mTLS demo Demo App Github : https://github.com/Great-Stone/vault-mtls-demo 1. mTLS ì„¤ëª… 1.1 SSLê³¼ TLS SSL(Secure Sokets Layer, ë³´ì•ˆ ì†Œìº£ ê³„ì¸µ)ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ì‚¬ì´ì— ì „ì†¡ëœ ë°ì´í„°ë¥¼ ì•”í˜¸í™” í•˜ê³  ...</description>
      <pubDate>Sun, 19 Mar 2023 08:21:15 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Demo App Github : <a href="https://github.com/Great-Stone/vault-mtls-demo" target="_blank" rel="noopener noreferrer">https://github.com/Great-Stone/vault-mtls-demo</a></p>
</blockquote>
<h2>1. mTLS ì„¤ëª…</h2>
<h3>1.1 SSLê³¼ TLS</h3>
<p>SSL(Secure Sokets Layer, ë³´ì•ˆ ì†Œìº£ ê³„ì¸µ)ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ì‚¬ì´ì— ì „ì†¡ëœ ë°ì´í„°ë¥¼ ì•”í˜¸í™” í•˜ê³  ì¸í„°ë„· ì—°ê²°ì— ë³´ì•ˆì„ ìœ ì§€í•˜ëŠ” í‘œì¤€ ê¸°ìˆ ì´ë‹¤. ì•…ì˜ì  ì™¸ë¶€ì¸ì´ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ì‚¬ì´ì— ì „ì†¡ë˜ëŠ” ì •ë³´ë¥¼ í™•ì¸ ë° íƒˆì·¨í•˜ëŠ” ê²ƒì„ ë°©ì§€í•œë‹¤.</p>
<p>TLS(Transport Layer Security, ì „ì†¡ ê³„ì¸µ ë³´ì•ˆ)ëŠ” í˜„ì¬ ë”ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” SSLì„ ê³„ìŠ¹í•˜ëŠ” ë³´ë‹¤ ì§„ë³´ëœ ë³´ì•ˆ ê¸°ìˆ ì´ë‹¤. SSL 3.0ì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œì§€ë§Œ í˜¸í™˜ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ìµœì‹  ë²„ì „ì€ TLS 1.3ì´ë‹¤.</p>
<ul>
<li>TLS 1.2ì˜ ê²½ìš° ì•”í˜¸í™” ë°©ì‹ê³¼ í‚¤ êµí™˜ í†µì‹ ì´ handshake ê³¼ì •ì— í¬í•œë˜ì–´ìˆì–´ 2íšŒ ì •ë„ì˜ ì¶”ê°€ ìš”ì²­ì´ ìˆì—ˆë‹¤.</li>
<li>TLS 1.3ì—ì„œëŠ” handshakeê³¼ì •ì„ ìµœì†Œí™”í•´ ì•”í˜¸í™” í†µì‹ í•˜ëŠ” ë°©ì•ˆì´ ì¶”ê°€ë˜ì–´ HTTPS í†µì‹ ì— ì†ë„ì™€ ë³´ì•ˆì´ ê°œì„ ë˜ì—ˆë‹¤.
<ul>
<li>handshakeì— 0-RTT ëª¨ë“œ ì¶”ê°€</li>
<li>ì •ì ì¸ RSAì™€ Diffie-Hellman Cipher Suite ì œê±°</li>
<li>handshake ìµœëŒ€í•œ ì•”í˜¸í™”</li>
<li>í‚¤ êµí™˜ê³¼ ì•”í˜¸í™” ë°©ì‹ì„ Cipher Suiteë¥¼ í†µí•´ ë¬¶ì–´ì„œ ì •í•˜ì§€ ì•Šê³  ê°œë³„ì  ì§€ì •</li>
</ul>
</li>
</ul>
<p>SSL ê¸°ìˆ ì´ TLSë¡œ ëŒ€ì²´ë˜ì—ˆë‹¤ê³  í•˜ì§€ë§Œ ì—¬ì „íˆ ë¸Œë¼ìš°ì € ì¸ì¦ì„œëŠ” SSL ì¸ì¦ì„œë¼ê³  ë¶ˆë¦°ë‹¤.</p>
<h3>1.2 TLS Handshake</h3>
<p>TLSì—ì„œëŠ” ì„œë²„ì—ë§Œ TLS ì¸ì¦ì„œ ë° ê³µê°œ/ê°œì¸ í‚¤ ìŒì´ ìˆê³  í´ë¼ì´ì–¸íŠ¸ì—ëŠ” ì—†ë‹¤. TLS í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/image-20230320091036089.png" alt="image-20230320091036089" tabindex="0" loading="lazy"><figcaption>image-20230320091036089</figcaption></figure>
<h3>1.3 mutualTLS(mTLS)</h3>
<p>mTLSì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ëª¨ë‘ì— ì¸ì¦ì„œê°€ ìˆê³  ì–‘ìª½ì—ì„œ ê³µê°œ/ê°œì¸ í‚¤ ìŒì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦í•œë‹¤. TLS ëŒ€ë¹„ mTLSëŠ” ì–‘ìª½ì„ í™•ì¸í•˜ê¸° ìœ„í•œ ì¶”ê°€ ë‹¨ê³„ê°€ ìˆë‹¤.</p>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/image-20230320091236622.png" alt="image-20230320091236622" tabindex="0" loading="lazy"><figcaption>image-20230320091236622</figcaption></figure>
<h3>1.4 mTLS ì˜ ì¥ë‹¨ì </h3>
<p>ë¨¼ì € mTLSì˜ ì¥ì ì„ ì‚´í´ë³´ë©´,</p>
<ul>
<li>ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì˜ ìƒí˜¸ ì¸ì¦ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë¯€ë¡œ, ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ëª¨ë‘ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ëŒ€ìƒì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ ì¤‘ê°„ì ê³µê²© ë° ìœ„ì¡°ëœ ì¸ì¦ì„œì™€ ê°™ì€ ë³´ì•ˆ ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.</li>
<li>mTLSëŠ” ì•”í˜¸í™”ëœ ì—°ê²°ì„ í†µí•´ ì „ì†¡ë˜ëŠ” ë°ì´í„°ì˜ ì•ˆì „ì„±ì„ ë³´ì¥í•œë‹¤. TLS í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ë¯€ë¡œ, ë°ì´í„°ëŠ” ì•”í˜¸í™”ë˜ì–´ ì „ì†¡ë˜ë©°, ì¤‘ê°„ì ê³µê²© ë° ë„ì²­ê³¼ ê°™ì€ ê³µê²©ìœ¼ë¡œë¶€í„° ì•ˆì „í•˜ê²Œ ë³´í˜¸ëœë‹¤.</li>
</ul>
<p>mTLSì˜ ë‹¨ì ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li>ì—°ê²°ì„ ì„¤ì •í•˜ëŠ” ê³¼ì •ì—ì„œ ì¶”ê°€ì ì¸ CPU ë¦¬ì†ŒìŠ¤ì™€ ëŒ€ì—­í­ì´ í•„ìš”í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” íŠ¹íˆ ê³ ì‚¬ì–‘ì˜ ì„œë²„ì—ì„œ í° ë¶€ë‹´ì´ ë  ìˆ˜ ìˆë‹¤.</li>
<li>ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ëª¨ë‘ê°€ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ê³  ê´€ë¦¬í•´ì•¼ í•œë‹¤ëŠ” ì ì´ ìˆë‹¤. ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ëŠ” ê³¼ì •ì€ ë³µì¡í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒë„ ì¼ì •í•œ ë…¸ë ¥ê³¼ ë¹„ìš©ì´ í•„ìš”í•©ë‹ˆë‹¤.</li>
<li>mTLSë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì„œë²„ ëª¨ë‘ì—ê²Œ ì¶”ê°€ì ì¸ ë³µì¡ì„±ì„ ìš”êµ¬í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ ìœ„í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì„œë²„ ëª¨ë‘ì— ëŒ€í•œ ì¶”ê°€ì ì¸ ì„¤ì • ë° ê´€ë¦¬ê°€ í•„ìš”í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<h3>1.5 êµ¬ì„±ì˜ ì˜ˆ</h3>
<h4>Python - Flask</h4>
<div class="language-python" data-highlighter="prismjs" data-ext="py" data-title="py"><pre class="language-python"><code><span class="line"><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> render_template<span class="token punctuation">,</span> request<span class="token punctuation">,</span> make_response</span>
<span class="line"><span class="token keyword">import</span> ssl</span>
<span class="line"></span>
<span class="line">app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">### APIs ###</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span></span>
<span class="line">    app<span class="token punctuation">.</span>debug <span class="token operator">=</span> <span class="token boolean">True</span></span>
<span class="line highlighted">    ssl_context <span class="token operator">=</span> ssl<span class="token punctuation">.</span>create_default_context<span class="token punctuation">(</span>purpose<span class="token operator">=</span>ssl<span class="token punctuation">.</span>Purpose<span class="token punctuation">.</span>CLIENT_AUTH<span class="token punctuation">,</span> cafile<span class="token operator">=</span><span class="token string">'ca.crt'</span><span class="token punctuation">)</span></span>
<span class="line highlighted">    ssl_context<span class="token punctuation">.</span>load_cert_chain<span class="token punctuation">(</span>certfile<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f'site.crt'</span></span><span class="token punctuation">,</span> keyfile<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f'site.key'</span></span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span></span>
<span class="line highlighted">    ssl_context<span class="token punctuation">.</span>verify_mode <span class="token operator">=</span> ssl<span class="token punctuation">.</span>CERT_REQUIRED</span>
<span class="line">    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">"0.0.0.0"</span><span class="token punctuation">,</span> port<span class="token operator">=</span>src_port<span class="token punctuation">,</span> ssl_context<span class="token operator">=</span>ssl_context<span class="token punctuation">,</span> use_reloader<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><h4>nginx</h4>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token comment"># default.conf</span></span>
<span class="line"><span class="token keyword">server</span> <span class="token punctuation">{</span></span>
<span class="line">    listen                  <span class="token number">443</span> ssl;</span>
<span class="line"></span>
<span class="line">    access_log /var/log/nginx/access.log;</span>
<span class="line">    error_log /var/log/nginx/error.log;</span>
<span class="line"></span>
<span class="line highlighted">    ssl_certificate         /etc/ssl/server.crt;</span>
<span class="line highlighted">    ssl_certificate_key     /etc/ssl/server.key;</span>
<span class="line highlighted">    ssl_protocols           TLSv1.<span class="token number">2</span> TLSv1.<span class="token number">3</span>;</span>
<span class="line highlighted">    ssl_client_certificate  /etc/nginx/client_certs/ca.crt;</span>
<span class="line highlighted">    ssl_verify_client       on;</span>
<span class="line highlighted">    ssl_verify_depth        <span class="token number">2</span>;</span>
<span class="line"></span>
<span class="line">    location / <span class="token punctuation">{</span></span>
<span class="line">        if ($ssl_client_verify !<span class="token punctuation">=</span> SUCCESS) <span class="token punctuation">{</span> return <span class="token number">403</span>; <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">### êµ¬ì„± ###</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h4>Apache HTTPD 2.4</h4>
<div class="language-xml" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name"><span class="token namespace">*:</span>80</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    ServerName {DOMAIN}</span>
<span class="line">    Redirect permanent / https://{DOMAIN}</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IfModule</span> <span class="token attr-name">mod_ssl.c</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name"><span class="token namespace">*:</span>443</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        ServerAdmin info@{DOMAIN}</span>
<span class="line">        ServerName {DOMAIN}</span>
<span class="line"></span>
<span class="line">        Header always set Strict-Transport-Security "max-age=63072000; includeSubdomains;"</span>
<span class="line"></span>
<span class="line">        SSLEngine       on</span>
<span class="line">        SSLCompression      Off</span>
<span class="line">        SSLProtocol         ALL -SSLv2 -SSLv3</span>
<span class="line">        SSLHonorCipherOrder     On</span>
<span class="line">        SSLCipherSuite      EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH</span>
<span class="line highlighted">        SSLCertificateFile  {SSL}/fullchain.pem</span>
<span class="line highlighted">        SSLCertificateKeyFile   {SSL}/privkey.pem</span>
<span class="line highlighted">        SSLCACertificateFile    {PATH}/ca.crt</span>
<span class="line">        SSLStrictSNIVHostCheck  on</span>
<span class="line"></span>
<span class="line">        &lt;Location / &gt;</span>
<span class="line highlighted">            SSLVerifyClient     require </span>
<span class="line">            SSLVerifyDepth      1</span>
<span class="line"></span>
<span class="line">            Options FollowSymLinks</span>
<span class="line">            AllowOverride None</span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Location</span><span class="token punctuation">&gt;</span></span>     </span>
<span class="line"></span>
<span class="line">        &lt;Location /health&gt;</span>
<span class="line">            SSLVerifyClient none</span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Location</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">        ProxyPreserveHost On</span>
<span class="line">        ProxyRequests off</span>
<span class="line">        ProxyPass / http://localhost/</span>
<span class="line">        ProxyPassReverse / http://localhost/</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/image-20230320091036089.png" type="image/png"/>
    </item>
    <item>
      <title>[PKOS] 2í¸ - ë„¤íŠ¸ì›Œí¬ &amp; ìŠ¤í† ë¦¬ì§€</title>
      <link>https://docmoa.github.io/07-Kubernetes/05-Kops/02-kops-network-storage.html</link>
      <guid>https://docmoa.github.io/07-Kubernetes/05-Kops/02-kops-network-storage.html</guid>
      <source url="https://docmoa.github.io/rss.xml">[PKOS] 2í¸ - ë„¤íŠ¸ì›Œí¬ &amp; ìŠ¤í† ë¦¬ì§€</source>
      <description>AWS Kops ì„¤ì¹˜ ë° ê¸°ë³¸ ì‚¬ìš©</description>
      <pubDate>Sat, 18 Mar 2023 15:08:30 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ì§€ë‚œ 1ì£¼ì°¨ ìŠ¤í„°ë””ì—ì´ì–´ 2ì£¼ì°¨ ìŠ¤í„°ë””ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë²ˆ ìŠ¤í„°ë””ì—ì„œëŠ” "ì¿ ë²„ë„¤í‹°ìŠ¤ ë„¤íŠ¸ì›Œí¬" ë° "ì¿ ë²„ë„¤í‹°ìŠ¤ ìŠ¤í† ë¦¬ì§€"ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•™ìŠµí•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ì°¸ê³  :<br>
ì›í™œí•œ ì‹¤ìŠµì„ ìœ„í•´ ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì„ ë³€ê²½í•œ í›„ ì§„í–‰í•©ë‹ˆë‹¤.</p>
</blockquote>
<h2>0. ì‚¬ì „ì¤€ë¹„</h2>
<h3>1) Kops í´ëŸ¬ìŠ¤í„°ì˜ ì¸ìŠ¤í„´ ê·¸ë£¹ ë³€ê²½</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kops get ig</span>
<span class="line">NAME			ROLE	MACHINETYPE	MIN	MAX	ZONES</span>
<span class="line">master-ap-northeast-2a	Master	t3.medium	<span class="token number">1</span>	<span class="token number">1</span>	ap-northeast-2a</span>
<span class="line">nodes-ap-northeast-2a	Node	t3.medium	<span class="token number">1</span>	<span class="token number">1</span>	ap-northeast-2a</span>
<span class="line">nodes-ap-northeast-2c	Node	t3.medium	<span class="token number">1</span>	<span class="token number">1</span>	ap-northeast-2c</span>
<span class="line"></span></code></pre></div><div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line">kops edit ig master<span class="token punctuation">-</span>ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2a</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ì˜ˆì œí™”ë©´</span></span>
<span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> kops.k8s.io/v1alpha2</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> InstanceGroup</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">creationTimestamp</span><span class="token punctuation">:</span> <span class="token string">"2023-03-05T13:37:26Z"</span></span>
<span class="line">  <span class="token key atrule">labels</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">kops.k8s.io/cluster</span><span class="token punctuation">:</span> pkos.hyungwook.link</span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> master<span class="token punctuation">-</span>ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2a</span>
<span class="line"><span class="token key atrule">spec</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> 099720109477/ubuntu/images/hvm<span class="token punctuation">-</span>ssd/ubuntu<span class="token punctuation">-</span>focal<span class="token punctuation">-</span>20.04<span class="token punctuation">-</span>amd64<span class="token punctuation">-</span>server<span class="token punctuation">-</span><span class="token number">20230112</span></span>
<span class="line">  <span class="token key atrule">instanceMetadata</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">httpPutResponseHopLimit</span><span class="token punctuation">:</span> <span class="token number">3</span></span>
<span class="line">    <span class="token key atrule">httpTokens</span><span class="token punctuation">:</span> required</span>
<span class="line">  <span class="token key atrule">machineType</span><span class="token punctuation">:</span> t3.medium <span class="token comment">#ê¸°ì¡´ t3.mediumì—ì„œ c5d.largeë¡œ ë³€ê²½</span></span>
<span class="line">  <span class="token key atrule">maxSize</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
<span class="line">  <span class="token key atrule">minSize</span><span class="token punctuation">:</span> <span class="token number">1</span></span>
<span class="line">  <span class="token key atrule">role</span><span class="token punctuation">:</span> Master</span>
<span class="line">  <span class="token key atrule">subnets</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2a</span>
<span class="line"></span></code></pre></div><ul>
<li>í™•ì¸</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kops get ig</span>
<span class="line">NAME			ROLE	MACHINETYPE	MIN	MAX	ZONES</span>
<span class="line">master-ap-northeast-2a	Master	c5d.large	<span class="token number">1</span>	<span class="token number">1</span>	ap-northeast-2a</span>
<span class="line">nodes-ap-northeast-2a	Node	c5d.large	<span class="token number">1</span>	<span class="token number">1</span>	ap-northeast-2a</span>
<span class="line">nodes-ap-northeast-2c	Node	c5d.large	<span class="token number">1</span>	<span class="token number">1</span>	ap-northeast-2c</span>
<span class="line"></span></code></pre></div><ul>
<li>Cluster Update ìˆ˜í–‰</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kops update cluster <span class="token parameter variable">--name</span> pkos.hyungwook.link <span class="token parameter variable">--yes</span></span>
<span class="line"></span>
<span class="line">kops rolling-update cluster <span class="token parameter variable">--yes</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/IMeYr3.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>[PKOS]  1í¸ - AWS Kops ì„¤ì¹˜ ë° ê¸°ë³¸ ì‚¬ìš©</title>
      <link>https://docmoa.github.io/07-Kubernetes/05-Kops/01-kops-on-aws.html</link>
      <guid>https://docmoa.github.io/07-Kubernetes/05-Kops/01-kops-on-aws.html</guid>
      <source url="https://docmoa.github.io/rss.xml">[PKOS]  1í¸ - AWS Kops ì„¤ì¹˜ ë° ê¸°ë³¸ ì‚¬ìš©</source>
      <description>AWS Kops ì„¤ì¹˜ ë° ê¸°ë³¸ ì‚¬ìš©</description>
      <pubDate>Sat, 11 Mar 2023 15:35:17 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ğŸ’¡ ë³¸ ê¸€ì€ PKOS(Production Kubernetes Online Study) 2ê¸° ìŠ¤í„°ë””ì˜ ì¼ë¶€ë¡œ ì‘ì„±ëœ ë‚´ìš©ì…ë‹ˆë‹¤.<br>
ì‹¤ì œ Production Kubernetes í™˜ê²½ì—ì„œ í™œìš© ê°€ëŠ¥í•œ ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•œ ì‹œë¦¬ì¦ˆë¡œ ì‘ì„± ì˜ˆì •ì…ë‹ˆë‹¤.</p>
</blockquote>
<h2>1. ì‹¤ìŠµí™˜ê²½ ì‚¬ì „ì¤€ë¹„</h2>
<p>ë³¸ ìŠ¤í„°ë””ëŠ” AWS í™˜ê²½ì—ì„œ Kops(Kubernetes Operations)ë¥¼ í™œìš©í•œ ì‹¤ìŠµìœ¼ë¡œ ì§„í–‰í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>ğŸ“Œ ì°¸ê³  : í•„ìëŠ” ê°œì¸ì ì¸ ì´ìœ ë¡œ Route 53 ê³„ì •ê³¼, kOps í´ëŸ¬ìŠ¤í„° ìš´ì˜ ê³„ì •ì„ ë‚˜ëˆ ì„œ ì§„í–‰í•©ë‹ˆë‹¤.<br>
í•˜ë‚˜ì˜ ê³„ì •ì—ì„œ ì‹¤ìŠµì„ ì§„í–‰í•  ê²½ìš°ì—ëŠ” ì‚¬ì „ í™˜ê²½êµ¬ì„±ì´ ë‹¤ë¥¼ ìˆ˜ ìˆëŠ” ì  ì°¸ê³  ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>
</blockquote>
<h3>1) Route 53 ë„ë©”ì¸ êµ¬ë§¤</h3>
<p>AWSì˜ DNS ì›¹ ì„œë¹„ìŠ¤ì¸ <a href="https://docs.aws.amazon.com/ko_kr/Route53/latest/DeveloperGuide/Welcome.html" target="_blank" rel="noopener noreferrer">Route 53</a>ì„ í†µí•´ ë„ë©”ì¸ì„ êµ¬ì…í•©ë‹ˆë‹¤.<br>
í•„ìëŠ”  <code>hyungwook.link</code> ë„ë©”ì¸ì„ êµ¬ì…í•˜ì˜€ìœ¼ë©°, ì´ˆê¸° êµ¬ì… í›„  <code>ìƒíƒœ: ë„ë©”ì¸ ë“±ë¡ ì§„í–‰ ì¤‘</code> ì¸ í™”ë©´ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤,</p>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/1_route53.png" alt="image-20230305211458121" tabindex="0" loading="lazy"><figcaption>image-20230305211458121</figcaption></figure>
<p>êµ¬ì… ì‹œ ë“±ë¡í–ˆë˜ ì´ë©”ì¼ ê³„ì •ìœ¼ë¡œ ë°œì†¡ëœ verify ë©”ì¼ ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ í™œì„±í™” í•©ë‹ˆë‹¤.</p>
<h4>(1) Route53 Verify mail</h4>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/2_route53.png" alt="image-20230305211833451" tabindex="0" loading="lazy"><figcaption>image-20230305211833451</figcaption></figure>
<p>ì¼ì •ì‹œê°„ì´ ì§€ë‚˜ë©´ ì •ìƒì ìœ¼ë¡œ ë„ë©”ì¸ì´ í™œì„±í™” ë˜ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h4>(2) ë„ë©”ì¸ ë“±ë¡ì™„ë£Œ í™”ë©´</h4>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/3_route53.png" alt="image-20230305212617366" tabindex="0" loading="lazy"><figcaption>image-20230305212617366</figcaption></figure>
<ul>
<li>ë“±ë¡ëœ ë„ë©”ì¸ í™•ì¸</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ìì‹ ì˜ ë„ë©”ì¸ì— NS íƒ€ì… ì¡°íšŒ</span></span>
<span class="line"><span class="token comment"># dig ns &lt;êµ¬ì…í•œ ìì‹ ì˜ ë„ë©”ì¸&gt; +short</span></span>
<span class="line"><span class="token function">dig</span> ns hyungwook.link +short</span>
<span class="line">ns-939.awsdns-53.net.</span>
<span class="line">ns-1575.awsdns-04.co.uk.</span>
<span class="line">ns-233.awsdns-29.com.</span>
<span class="line">ns-1466.awsdns-55.org.</span>
<span class="line"></span></code></pre></div><h3>2) Route 53 ë“±ë¡</h3>
<p>í•„ìëŠ” ì„œë‘ì—ì„œ ì–¸ê¸‰í•œ ê²ƒ ì²˜ëŸ¼ <strong>Route 53 êµ¬ë§¤í•œ ê³„ì •</strong>ê³¼, <strong>kOps í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ê³„ì •</strong>ì´ ë‹¤ë¥´ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ì¶”ê°€ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<h4>(1) Kops í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ê³„ì • : <code>pkos.hyungwook.link</code> ë ˆì½”ë“œë¥¼ ìƒì„±</h4>
<h4>(2) Route 53ì„ êµ¬ë§¤í•œ AWS ê³„ì • : NS ë ˆì½”ë“œ ë“±ë¡</h4>
<ul>
<li>Kops í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ê³„ì •ì—ì„œ ë“±ë¡í•œ ë ˆì½”ë“œë¥¼ ì •ë³´ë¥¼ Route 53 êµ¬ë§¤ ê³„ì •ì˜ NS ë ˆì½”ë“œì— ë“±ë¡í•©ë‹ˆë‹¤.</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/4_route53_á„‰á…¥á„‡á…³á„ƒá…©á„†á…¦á„‹á…µá†«á„ƒá…³á†¼á„…á…©á†¨.png" alt="image-20230305223503518" tabindex="0" loading="lazy"><figcaption>image-20230305223503518</figcaption></figure>
<blockquote>
<p>ğŸ“Œ ì°¸ê³  : <a href="https://theburningmonk.com/2021/05/how-to-manage-route53-hosted-zones-in-a-multi-account-environment/" target="_blank" rel="noopener noreferrer">How to manage Route53 hosted zones in a multi-account environment</a></p>
</blockquote>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/hyungwook0221/img/main/uPic/1_route53.png" type="image/png"/>
    </item>
    <item>
      <title>How to integrate Vault with K8s (CSI &amp; Injection &amp; VSO)</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/vault-k8s-usecase-csi-injection.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/vault-k8s-usecase-csi-injection.html</guid>
      <source url="https://docmoa.github.io/rss.xml">How to integrate Vault with K8s (CSI &amp; Injection &amp; VSO)</source>
      <description>Kubernetesì—ì„œ Vaultì˜ ì‹œí¬ë¦¿ì„ ì‚¬ìš©í•˜ëŠ” CSIë°©ì‹ê³¼ Injectionë°©ì‹ì— ëŒ€í•œ ì„¤ëª…</description>
      <pubDate>Thu, 09 Mar 2023 05:08:03 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Vaultì— ì €ì¥ëœ ì‹œí¬ë¦¿ ë˜ëŠ” ë°œí–‰ë˜ëŠ”(Dynamic) ì‹œí¬ë¦¿ì„ íšë“í•˜ê¸° ìœ„í•´ì„œëŠ”, ì‹œí¬ë¦¿ì„ ìš”ì²­í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸(ì‚¬ëŒ/ì•±/ì¥ë¹„)ê°€ ë‹¤ìŒì˜ ê³¼ì •ì„ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<ol>
<li>í´ë¼ì´ì–¸íŠ¸ê°€ Vault í† í°ì„ íšë“í•˜ê¸° ìœ„í•œ ì¸ì¦ ì ˆì°¨</li>
<li>íšë“í•œ Vault í† í°ì˜ ìˆ˜ëª…ì£¼ê¸° ê´€ë¦¬ (ê°±ì‹ ê³¼ ì¬ìš”ì²­)</li>
<li>Vaultì˜ íŠ¹ì • ì‹œí¬ë¦¿ ê²½ë¡œë¥¼ ì €ì¥í•˜ê³  í•´ë‹¹ ì‹œí¬ë¦¿ ìš”ì²­</li>
<li>ë™ì (Dynamic) ì‹œí¬ë¦¿ì¸ ê²½ìš° í•´ë‹¹ ì„ëŒ€(Lease)ì •ë³´ í™•ì¸ ë° ê°±ì‹ ê³¼ ì¬ìš”ì²­</li>
</ol>
<p>VaultëŠ” ìœ„ì˜ ê³¼ì •ì„ í´ë¼ì´ì–¸íŠ¸ ëŒ€ì‹  í”Œë«í¼ ìˆ˜ì¤€ì—ì„œ ëŒ€í–‰í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” Kubernetes ìƒì—ì„œì˜ Vaultì™€ì˜ í†µí•© êµ¬ì„±ì„ í™œìš©í•˜ì—¬ ìœ„ ê³¼ì •ì„ ëŒ€ì²´í•˜ê³  Kubernetes í”Œë«í¼ ìì²´(Kuberetes Native)ì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë“¯ Vaultì˜ ì‹œí¬ë¦¿ì„ ì‚¬ìš©í•˜ê²Œ ë§Œë“œëŠ” ë°©ì‹ì— ëŒ€í•´ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
<p>Kubernetesì— ë°°í¬ë˜ëŠ” ì»¨í…Œì´ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ Vaultì˜ ì‹œí¬ë¦¿ ë°ì´í„°ë¥¼ ì–»ê¸°ìœ„í•´ ì‚¬ìš©ë˜ëŠ” í”Œë«í¼ ìˆ˜ì¤€(Kubernetes)ì—ì„œì˜ í†µí•©ì„ ì„¤ëª…í•©ë‹ˆë‹¤. CSI, Sidecar Injection, Vault Secret Operator <sup>VSO</sup>ì— ëŒ€í•œ ì„¤ëª…ì€ ë‹¤ìŒ ê¸€ì„ í™•ì¸í•´ ë³´ì„¸ìš”.</p>
<ul>
<li><a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/vault-k8s-integration-three-methods.html" target="_blank" rel="noopener noreferrer">Kubernetes Vault í†µí•©ë°©ì•ˆ 3ê°€ì§€ ë¹„êµ</a></li>
<li><a href="https://github.com/Great-Stone/vault-for-k8s" target="_blank" rel="noopener noreferrer">Minikube ê¸°ë°˜ ë°ëª¨ í™˜ê²½</a></li>
</ul>
<div class="hint-container info">
<p class="hint-container-title">ì •ë³´</p>
<p>ì•„ë˜ ë§í¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë˜ëŠ” CICD ìˆ˜ì¤€ì—ì„œì˜ í†µí•© ì˜ˆì‹œ ëª©ë¡ ì…ë‹ˆë‹¤.</p>
<ul>
<li><a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/spring-boot.html" target="_blank" rel="noopener noreferrer">ì• í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜ì¤€ì˜ í†µí•© ì˜ˆì‹œ(Spring boot)</a></li>
<li><a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/jenkins-with-vault.html" target="_blank" rel="noopener noreferrer">CICD ìˆ˜ì¤€ì˜ í†µí•© ì˜ˆì‹œ(Jenkins)</a></li>
<li><a href="https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/argocd-vault-plugin.html" target="_blank" rel="noopener noreferrer">CICD ìˆ˜ì¤€ì˜ í†µí•© ì˜ˆì‹œ(ArgoCD)</a></li>
</ul>
</div>
<div class="hint-container tip">
<p class="hint-container-title">íŒ</p>
<p>Vaultì™€ Kuberentesê°„ì˜ í†µí•©ì˜ ì„¸ê°€ì§€ ë°©ì‹ì€ ì¤‘ë³µìœ¼ë¡œ ì ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
</div>
<div class="hint-container warning">
<p class="hint-container-title">ì¤€ë¹„ì‚¬í•­</p>
<p>êµ¬ì„±ì„ ìœ„í•œ ì‚¬ì „ í•„ìš” ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
<li>Vault CLIë¥¼ ìœ„í•œ ë°”ì´ë„ˆë¦¬</li>
<li>Kubectl CLI ë„êµ¬ ë° ëŒ€ìƒ Kubernetesì— ëŒ€í•œ êµ¬ì„± ì™„ë£Œ</li>
<li>Helm CLI ë„êµ¬</li>
</ul>
</div>
<h2>1. CSI</h2>
<blockquote>
<p>ì°¸ê³  : <a href="https://developer.hashicorp.com/vault/tutorials/kubernetes/kubernetes-secret-store-driver" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/tutorials/kubernetes/kubernetes-secret-store-driver</a></p>
</blockquote>
<p>CSI ë°©ì‹ì—ì„œëŠ” <code>SecretProviderClass</code> ê°€ Vaultì˜ ì •ë³´ë¥¼ êµ¬ì„±í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•˜ê³ , ì´í›„ <code>deployment</code>ì—ì„œ ë³¼ë¥¨ í˜•íƒœë¡œ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.</p>
<figure><figcaption></figcaption></figure>
<h3>1.1 Kubernetesì— CSI ë“œë¼ì´ë²„ ì„¤ì¹˜</h3>
<p>Container Storage Interface(CSI) ë“œë¼ì´ë²„ë¥¼ ì„¤ì¹˜í•˜ë©´ <code>SecretProviderClass</code> CRD êµ¬ì„±ì„ ì‚¬ìš©í•˜ì—¬ Kubernetsì— ì™¸ë¶€ ì‹œí¬ë¦¿ ì €ì¥ì†Œì˜ ê°’ì„ Podì— ë§ˆìš´íŠ¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë¨¼ì € CSI ë“œë¼ì´ë²„ Helm ì°¨íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">helm repo <span class="token function">add</span> secrets-store-csi-driver <span class="token punctuation">\</span></span>
<span class="line">    https://kubernetes-sigs.github.io/secrets-store-csi-driver/charts</span>
<span class="line"></span></code></pre></div><p>ë‹¤ìŒìœ¼ë¡œ CSI ë“œë¼ì´ë²„ë¥¼ ì„¤ì¹˜ í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">helm <span class="token function">install</span> csi secrets-store-csi-driver/secrets-store-csi-driver <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--set</span> <span class="token assign-left variable">syncSecret.enabled</span><span class="token operator">=</span>true</span>
<span class="line"></span></code></pre></div><p>ì„¤ì¹˜ê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ ë‹¤ìŒì˜ Podë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ kubectl get pods</span>
<span class="line"></span>
<span class="line">NAME                                 READY   STATUS    RESTARTS   AGE</span>
<span class="line">csi-secrets-store-csi-driver-vkppq   <span class="token number">3</span>/3     Running   <span class="token number">0</span>          20s</span>
<span class="line"></span></code></pre></div><h3>1.2 CSIë¥¼ ìœ„í•œ Vault êµ¬ì„± (Helm)</h3>
<p>CSI ë“œë¼ì´ë²„ì—ì„œ <code>vault</code> í”„ë¡œë°”ì´ë”ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ êµ¬ì„±ì„ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ì´ êµ¬ì„±ì´ ì„¤ì¹˜ë˜ë©´ <code>SecretProviderClass</code> ì •ì˜ ì‹œ í”„ë¡œë°”ì´ë” ëŒ€ìƒìœ¼ë¡œ <code>vault</code>ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë¨¼ì € Vault Helm ì°¨íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">helm repo <span class="token function">add</span> hashicorp https://helm.releases.hashicorp.com</span>
<span class="line"></span></code></pre></div><p>Vault Helm ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ 1) Kubernetesì— Vaultë¥¼ ì„¤ì¹˜í•˜ëŠ” êµ¬ì„± ë˜ëŠ” 2) ì™¸ë¶€ Vaultì™€ ì—°ê³„í•˜ëŠ” êµ¬ì„±ìœ¼ë¡œ ì„¤ì¹˜ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì„¤ì¹˜ê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ ë‹¤ìŒì˜ Podë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (<code>vault-0</code>ëŠ” Vault ì„œë²„ë¥¼ ì„¤ì¹˜í•œ ê²½ìš° í™•ì¸ë˜ê³ , ì™¸ë¶€ Vault ì„œë²„ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” í™•ì¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ kubectl get pods</span>
<span class="line"></span>
<span class="line">NAME                                 READY   STATUS    RESTARTS   AGE</span>
<span class="line">vault-0                    <span class="token number">1</span>/1     Running   <span class="token number">0</span>          58s</span>
<span class="line">vault-csi-provider-t874l   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          58s</span>
<span class="line"></span></code></pre></div><h3>1.3 CSIì—ì„œ ì‚¬ìš©í•  Vault ì‹œí¬ë¦¿ ì •ì˜</h3>
<p>ê°„ë‹¨í•œ ì˜ˆë¡œ Vault KV ì‹œí¬ë¦¿ ì—”ì§„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="hint-container warning">
<p class="hint-container-title">Kubernetesë‚´ì˜ Vaultì—ì„œ CLI ì‚¬ìš©</p>
<p>Kubernetesë‚´ì— ë°°í¬ëœ Vaultì¸ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ ì‰˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ Podì— ì ‘ê·¼í•©ë‹ˆë‹¤. (Optional)</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> vault-0 -- /bin/sh</span>
<span class="line"></span></code></pre></div></div>
<details class="hint-container details"><summary>/secret ê²½ë¡œì— KV ì‹œí¬ë¦¿ ì—”ì§„ í™œì„±í™” (Optional)</summary>
<p>Vaultê°€ ê°œë°œ ëª¨ë“œë¡œ ì‹¤í–‰ëœ ê²½ìš° ê¸°ë³¸ì ìœ¼ë¡œ <code>Secret</code>ì´ë¼ëŠ” ê²½ë¡œì— KV version2 ì‹œí¬ë¦¿ ì—”ì§„ì´ í™œì„±í™”ë˜ì–´ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ê°œë°œ ëª¨ë“œê°€ ì•„ë‹Œê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ í™œì„±í™” í•©ë‹ˆë‹¤. (Optional)</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault secrets <span class="token builtin class-name">enable</span> <span class="token parameter variable">-path</span> secret <span class="token parameter variable">-version</span><span class="token operator">=</span><span class="token number">2</span> kv</span>
<span class="line"></span></code></pre></div></details>
<p><code>secret/db-pass</code> ê²½ë¡œì— <code>password</code> ê°’ì„ ì €ì¥ í•©ë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault kv put secret/db-pass <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">"db-secret-password-v1"</span></span>
<span class="line"></span></code></pre></div><p>ë‹¤ìŒê³¼ ê°™ì´ ì €ì¥ëœ ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault kv get secret/db-pass</span>
<span class="line"></span>
<span class="line"><span class="token operator">==</span><span class="token operator">=</span> Secret Path <span class="token operator">==</span><span class="token operator">=</span></span>
<span class="line">secret/data/db-pass</span>
<span class="line"></span>
<span class="line"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> Metadata <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span></span>
<span class="line">Key                Value</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>2023ë…„ 3ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-03.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-03.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 3ì›”</source>
      <description>2023ë…„ 3ì›” Update</description>
      <pubDate>Tue, 07 Mar 2023 14:14:10 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>Writing Terraform for unsupported resources</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/writing-terraform-for-unsupported-resources" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>Terraform ê³¼ ëŒ€ìƒ í™˜ê²½ ê°„ ì—°ë™ì„ ìœ„í•´ Provider ë¥¼ í™œìš©í•  ë•Œ ëŒ€ìƒ í™˜ê²½ì´ API ì„ í†µí•´ì„œëŠ” ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì´ì§€ë§Œ Provider ì—ëŠ” êµ¬í˜„ë˜ì–´ ìˆì§€ ì•Šì•„ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê¸°ëŠ¥ì´ ì¢…ì¢… ìˆìŠµë‹ˆë‹¤ (ì˜ˆ: Vault Provider ê¸°ë°˜ Vault ìš´ì˜ ì‹œ Unseal ê¸°ëŠ¥ ì‚¬ìš© ë¶ˆê°€). Terracurl ì„ í†µí•´ API ì„ í†µí•´ì„œë§Œ ì§€ì›ë˜ëŠ” ê¸°ëŠ¥ë“¤ì„ Terraform Code ë¡œ êµ¬ì„±í•˜ì—¬ í•˜ë‚˜ì˜ Resource ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.3.9" target="_blank" rel="noopener noreferrer">1.3.9 Release</a>
<ul>
<li>ì´ë¯¸ íê¸°ëœ Resource ì— ëŒ€í•´ ì œê±° ë° plan í•  ë•Œ ë°œìƒí•˜ëŠ” ì´ìŠˆ í•´ê²°</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202302-1" target="_blank" rel="noopener noreferrer">2ì›” Release</a> ì¶œì‹œ (<code>v202302-1 (681)</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2)</li>
<li>êµ¬ë²„ì „ OS ë° Postrgres DB ì— ëŒ€í•œ ì§€ì› ì¢…ë£Œ
<ul>
<li>ëŒ€ìƒ OS
<ul>
<li>Debian 8, 9 / Ubuntu 14.04, 16.04 / Amazon Linux 2014.03, 2014.09, 2015.03, 2015.09, 2016.03, 2016.09, 2017.03, 2017.09, 2018.03</li>
</ul>
</li>
<li>ëŒ€ìƒ Postgres
<ul>
<li>Postgres 11</li>
<li>TFE ì— ëŒ€í•´ External PostgresSQL ì‚¬ìš© ì‹œ ìµœì†Œ ë²„ì „ 12 ì´ìƒ í•„ìš” (Release 659 ë¶€í„° ì ìš©)</li>
</ul>
</li>
</ul>
</li>
<li>Known Issue 1: ê´€ë¦¬ì ì„¤ì •ì—ì„œ TFC Agent ì— ëŒ€í•´ ì‚¬ìš© ì—¬ë¶€ë¥¼ ì„ íƒí•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ <code>agent run pipeline mode</code> ì‚¬ìš© ì‹œ ì‹¤í–‰ ê³„íšì´ ë¬´ê¸°í•œ Queue ì— ëŒ€ê¸°í•˜ëŠ” ë¬¸ì œ ë°œìƒ. ê´€ë ¨í•˜ì—¬ <code>tfe-task-worker</code> ë¥¼ í†µí•´  <code>[ERROR] core: Unexpected HTTP response code: method=POST url=https://terraform.example.com/api/agent/register status=404</code> ë¼ëŠ” Error Log ì¶œë ¥ë˜ë©° 2023ë…„ 3ì›” Release (<code>v202303-1</code>) ì—ì„œ í•´ê²° ì˜ˆì •</li>
<li>Known Issue 2: API ë¥¼ í†µí•´ team ì—ê²Œ <code>manage-workspaces</code> ê¶Œí•œ ë¶€ì—¬ ì‹œ, <code>read-workspaces</code> ë„ ë¶€ì—¬ë˜ëŠ” ë¬¸ì œ ë°œìƒ. ë”ë¶ˆì–´ <code>manage-workspaces</code> ì— ëŒ€í•œ ê¶Œí•œ ì œê±° ì‹œ <code>read-workspaces</code> ê¶Œí•œì€ ì œê±° ë˜ì§€ ì•Šê³  ë¶€ì—¬ëœ ì±„ë¡œ ìœ ì§€ ë˜ëŠ” ë¬¸ì œ ë°œìƒ. ì´í›„ ì¶œì‹œ ì˜ˆì •ì¸ Release ì—ì„œ í•´ê²° ì˜ˆì •</li>
<li>Breaking Changes: ì—¬ëŸ¬ Workspace ë¥¼ ê·¸ë£¹ìœ¼ë¡œ ì—®ëŠ” Project ê¸°ëŠ¥ì´ ì¶”ê°€ë¨ì— ë”°ë¼</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v4.57.1" target="_blank" rel="noopener noreferrer">AWS v4.57.1 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>Bug Fix
<ul>
<li>resource/aws_lambda_function ì— ëŒ€í•´ <code>skip_destroy</code> ë¥¼ Null ê°’ ì²˜ë¦¬ ì‹œ ë°œìƒí•˜ëŠ” <code>Provider produced inconsitent final plan</code> ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.46.0" target="_blank" rel="noopener noreferrer">Azure v3.46.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€: <code>azurerm_mobile_network</code> ë° <code>azurerm_sentinel_alert_rule</code></li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>resource ì— ëŒ€í•´ AuthV2(EasyAuthV2) ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>azurerm_storage_object_replication ì— ëŒ€í•´ cross tenant replication ì´ ë¹„í™œì„±í™” ë˜ì–´ ìˆëŠ” ê²½ìš° ë™ì‘í•˜ì§€ ì•ŠëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.56.0" target="_blank" rel="noopener noreferrer">GCP v4.56.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€: <code>google_data_catalog</code>, <code>google_scc_mute_config</code>, <code>google_workstations_workstation_config</code></li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>compute ì— ëŒ€í•´ resource-policy ê´€ë ¨ max_distance ì„¤ì • ì¶”ê°€</li>
<li>compute ì— ëŒ€í•´ google_compute_shared_vpc_service_project ê´€ë ¨ deletion_policy ì„¤ì • ì¶”ê°€</li>
<li>networkservices ì— ëŒ€í•´ allow_origins ì— ëŒ€í•œ ìµœëŒ€ ì„¤ì •ì¹˜ë¥¼ ê¸°ì¡´ 5 ì—ì„œ 25 ë¡œ ë³€ê²½</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>spanner ì— ëŒ€í•´  google_spanner_database ê´€ë ¨ deletion_protection ìˆ˜ì • ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
<li>spanner ì— ëŒ€í•´ google_spanner_instance ì— ëŒ€í•´ force_destory ìˆ˜ì • ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.13.0
<ul>
<li><a href="https://www.hashicorp.com/blog/vault-1-13-adds-kubernetes-operator-mfa-improvements-and-more" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/releases/tag/v1.13.0" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Multi-namespace access: namespace ê°„ ê¶Œí•œ ë¶€ì—¬ë¥¼ í†µí•œ secret ê³µìœ  ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Multi Vault Agent: ì—¬ëŸ¬ config íŒŒì¼ ì—°ë™í•˜ì—¬ ë‹¤ì–‘í•œ namespace ë° path ì— agent ì ‘ê·¼ ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Certificate revocation for cross-cluster management: PR êµ¬ì„±ê³¼ ê°™ì€ Multi Cluster êµ¬ì¡°ì—ì„œ Cluster ê°„ PKI ì¸ì¦ì„œ ë§Œë£Œ ì²˜ë¦¬ì— ëŒ€í•œ ë™ê¸°í™” ì§€ì›</li>
<li>Managed transit keys: Transit ì•”í˜¸í™” ì²˜ë¦¬ ì‹œ ì‚¬ìš©ì key ì‚¬ìš© ì§€ì›</li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.15.0
<ul>
<li><a href="https://www.hashicorp.com/blog/consul-1-15-adds-envoy-extensions-and-enhances-access-logging" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/consul/releases/tag/v1.15.0" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Envoy access logging: service mesh êµ¬ì„± ì‹œ config entries ì™€ CRD ë¥¼ ê¸°ë°˜í•œ ì†ì‰¬ìš´ envoy log í™œì„±í™” ì§€ì›</li>
<li>Consul Envoy extensions: <code>EnvoyExtensions</code> ì„¤ì •ì„ í†µí•´ lua ë° lambda ë“±ì— ëŒ€í•œ service mesh ì—°ë™ ì§€ì›</li>
<li>Service-to-service troubleshooting: <code>consul troubleshoot</code> ëª…ë ¹ì–´ ì§€ì›ì„ í†µí•´ ì„œë¹„ìŠ¤ ê°„ í†µì‹  ì˜¤ë¥˜ì— ëŒ€í•œ ì§„ë‹¨ ì§€ì›</li>
<li>Linux VM runtime support in Consul-native API Gateway (beta): Linux VM í™˜ê²½ ê¸°ë°˜ Application ì˜ service mesh êµ¬ì„±ì— í•„ìš”í•œ API Gateway ì§€ì›</li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.5.0
<ul>
<li><a href="https://www.hashicorp.com/blog/nomad-1-5-adds-single-sign-on-and-dynamic-node-metadata" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/releases/tag/v1.5.0" target="_blank" rel="noopener noreferrer">Release Note</a></li>
<li>Single sign-on and OIDC support: OIDC ê¸°ë°˜ SSO ì§€ì› ë° Login ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Dynamic node metadata: client node ì— ëŒ€í•´ constraints, affinity, spread ë“± job scheduling ê²°ì •ì— ì˜í–¥ì„ ì£¼ëŠ” meta ì •ë³´ ë™ì  ì„¤ì • ì§€ì›</li>
<li>Job Templates:  Job ëª…ì„¸ ì‘ì„± ì§€ì›ì„ ìœ„í•œ Template ê¸°ëŠ¥ ì§€ì›</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Tokenì˜ ì´í•´</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-token.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-token.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Tokenì˜ ì´í•´</source>
      <description>Vault Tokenì˜ êµ¬ì„±ê³¼ ì¢…ë¥˜ ì„¤ëª…</description>
      <pubDate>Sat, 04 Mar 2023 08:04:42 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><a href="https://developer.hashicorp.com/vault/docs/concepts/tokens" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/vault/docs/concepts/tokens</a></p>
</blockquote>
<figure><img src="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/image-20230304125220402.png" alt="image-20230304125220402" tabindex="0" loading="lazy"><figcaption>image-20230304125220402</figcaption></figure>
<h2>1. Tokenì˜ êµ¬ì„±ê³¼ ë‚´ìš©</h2>
<p>ë‹¤ìŒì€ ìˆ˜ë™ìœ¼ë¡œ Tokenì„ ìƒì„±í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ Tokenì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì˜ ì‚¬ìš©ìê°€ CLIë¥¼ ì‚¬ìš©í•˜ì—¬ <code>default</code> Policyë¥¼ ê°–ëŠ” Tokenì„ ìƒì„±í•˜ëŠ” ê²½ìš°ì˜ ì˜ˆì´ë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault token create <span class="token parameter variable">-policy</span><span class="token operator">=</span>default</span>
<span class="line"></span>
<span class="line">Key                  Value</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/image-20230304125220402.png" type="image/png"/>
    </item>
    <item>
      <title>Pass HCL to API</title>
      <link>https://docmoa.github.io/04-HashiCorp/07-Nomad/04-UseCase/job-start-from-hcl.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/07-Nomad/04-UseCase/job-start-from-hcl.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Pass HCL to API</source>
      <description>Passing Jobs defined in HCL to API (Execute Job written in HCL in Nomad Job Run API)</description>
      <pubDate>Fri, 24 Feb 2023 06:24:30 GMT</pubDate>
      <content:encoded><![CDATA[
<p>HCLë¡œ ì‘ì„±ëœ Jobì˜ ê²½ìš° Nomad CLI ë˜ëŠ” UI ì ‘ì†ì´ ê°€ëŠ¥í•˜ë‹¤ë©´ ë°”ë¡œ ì ìš© ê°€ëŠ¥í•˜ë‹¤.</p>
<details class="hint-container details"><summary>HCL Job Sample (2048.hcl)</summary>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line">job <span class="token string">"2048-game"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">datacenters</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"dc1"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">type</span>        <span class="token punctuation">=</span> <span class="token string">"service"</span></span>
<span class="line">  group <span class="token string">"game"</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">count</span> <span class="token punctuation">=</span> <span class="token number">1</span> <span class="token comment"># number of instances</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">network</span> <span class="token punctuation">{</span></span>
<span class="line">      port <span class="token string">"http"</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">static</span> <span class="token punctuation">=</span> <span class="token number">80</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    task <span class="token string">"2048"</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">driver</span> <span class="token punctuation">=</span> <span class="token string">"docker"</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">config</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">image</span> <span class="token punctuation">=</span> <span class="token string">"alexwhen/docker-2048"</span></span>
<span class="line"></span>
<span class="line">        <span class="token property">ports</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span></span>
<span class="line">          <span class="token string">"http"</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">resources</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">cpu</span>    <span class="token punctuation">=</span> <span class="token number">500</span> <span class="token comment"># 500 MHz</span></span>
<span class="line">        <span class="token property">memory</span> <span class="token punctuation">=</span> <span class="token number">256</span> <span class="token comment"># 256MB</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">nomad job run <span class="token number">2048</span>.hcl</span>
<span class="line"></span></code></pre></div><figure><figcaption></figcaption></figure>
<p>í•˜ì§€ë§Œ CLI/UIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” í™˜ê²½ì—ì„œ APIë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì‹¤í–‰í•´ì•¼í•˜ëŠ” ê²½ìš°, íŠ¹íˆ CICD Pipelineêµ¬ì„±ì—ì„œ APIë¥¼ ì‚¬ìš©í•˜ì—¬ Jobì„ ì‹¤í–‰í•´ì•¼í•˜ëŠ” ê²½ìš° HCLì„ Json í˜•ì‹ìœ¼ë¡œ ë³€ê²½í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤.</p>
<h2>HCL parse to Json</h2>
<p>HCLì„ Jsonìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ë°©ì‹ì˜ ì²«ë²ˆì§¸ëŠ” CLIë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">nomad job run <span class="token parameter variable">-output</span> <span class="token number">2048</span>.hcl <span class="token operator">&gt;</span> payload.json</span>
<span class="line"></span></code></pre></div><p>í•˜ì§€ë§Œ ì´ ê²½ìš° <code>-output</code>ì„ ì…ë ¥í•˜ì§€ ì•ŠëŠ” ê²½ìš° Jobì´ ì‹¤í–‰ë˜ëŠ” ì‹¤ìˆ˜ì˜ ì—¬ì§€ê°€ ìˆê³ , CLIê°€ ì—†ë‹¤ë©´ ì‚¬ìš© ë¶ˆê°€í•˜ë‹¤.</p>
<p>ë‹¤ìŒì€ APIë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.</p>
<blockquote>
<p>Parsh Job : <a href="https://developer.hashicorp.com/nomad/api-docs/jobs#parse-job" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/nomad/api-docs/jobs#parse-job</a></p>
</blockquote>
<p>ë¬¸ì„œì˜ ë‚´ìš©ì²˜ëŸ¼ HCLì„ í•œì¤„ë¡œ ë³€ê²½í•˜ì—¬ APIë¡œ ìš”ì²­í•˜ë©´ Jsonìœ¼ë¡œ í˜•íƒœë¥¼ ì¶œë ¥í•´ì¤€ë‹¤.</p>
<h3>Sample Payload</h3>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"JobHCL"</span><span class="token operator">:</span> <span class="token string">"job \"example\" {\n  type = \"service\"\n  group \"cache\" {}\n}"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Canonicalize"</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>HCLì„ í•œì¤„ë¡œ ë³€ê²½í•˜ê¸° ê¹Œë‹¤ë¡­ê±°ë‚˜ ë³„ë„ì˜ ë„êµ¬ê°€ ì—†ë‹¤ë©´ <code>jq</code>ë¥¼ í™œìš©í•œ ë°©ì‹ë„ ê°€ì´ë“œí•˜ê³  ìˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">jq <span class="token parameter variable">-Rsc</span> <span class="token string">'{ JobHCL: ., Canonicalize: true }'</span> example.nomad.hcl <span class="token operator">&gt;</span> payload.json</span>
<span class="line"></span></code></pre></div><h3>Sample Request</h3>
<p><code>/v1/jobs/parse</code> ì—”ë“œí¬ì¸íŠ¸ë¡œ <code>payload.json</code> ë°ì´í„°ë¥¼ ë‹´ì•„ ìš”ì²­í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">curl</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--request</span> POST <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--data</span> @payload.json <span class="token punctuation">\</span></span>
<span class="line">    https://localhost:4646/v1/jobs/parse</span>
<span class="line"></span></code></pre></div><h3>Sample Response</h3>
<p>Jsonìœ¼ë¡œ ë³€ê²½ëœ ê°’ì„ ë°˜í™˜í•œë‹¤.</p>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"AllAtOnce"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Constraints"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Affinities"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"CreateIndex"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Datacenters"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"ID"</span><span class="token operator">:</span> <span class="token string">"my-job"</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre></div><h2>HCLë¡œ ì‘ì„±ëœ Jobì„ APIë¡œ ì‹¤í–‰í•˜ê¸°</h2>
<p>APIê°€ ì œê³µí•˜ëŠ” Json Parseë¥¼ ì‚¬ìš©, ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ Jobì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</p>
<h3>1. Jsonìœ¼ë¡œ ìƒì„±í•  HCLì„ <code>hcl.json</code>ìœ¼ë¡œ ìƒì„±</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">jq <span class="token parameter variable">-Rsc</span> <span class="token string">'{ JobHCL: ., Canonicalize: true }'</span> <span class="token number">2048</span>.hcl <span class="token operator">&gt;</span> hcl.json</span>
<span class="line"></span></code></pre></div><h3>2. <code>/v1/jobs/parse</code> ì—”ë“œí¬ì¸íŠ¸ë¡œ ìš”ì²­í•˜ì—¬ Jsoní˜•íƒœë¡œ íŒŒì‹±</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">--request</span> POST <span class="token parameter variable">--data</span> @hcl.json http://127.0.0.1:4646/v1/jobs/parse</span>
<span class="line"></span></code></pre></div><p>í•œê°€ì§€ ë¬¸ì œëŠ”, Jobì˜ Json ì •ì˜ì—ëŠ” <code>Job</code> ì´ë¼ëŠ” í‚¤ê°’ì´ ìµœìƒìœ„ì— ì¡´ì¬í•´ì•¼í•˜ëŠ”ë°, ë°˜í™˜ë˜ëŠ” ê²°ê³¼ì—ëŠ” <code>Job</code> í•˜ìœ„ë¶€í„° ì¶œë ¥ëœë‹¤. ë”°ë¼ì„œ <code>jq</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì¶œë ¥ì„ ìˆ˜ì •í•˜ì—¬ ì €ì¥í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">--request</span> POST <span class="token parameter variable">--data</span> @hcl.json http://127.0.0.1:4646/v1/jobs/parse <span class="token operator">|</span> jq <span class="token parameter variable">-s</span> <span class="token string">'{ Job: .[] }'</span> <span class="token operator">&gt;</span> <span class="token number">2048</span>.json</span>
<span class="line"></span></code></pre></div><h3>3. ìƒì„±ëœ jsonìœ¼ë¡œ Job ì‹¤í–‰</h3>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">--request</span> POST <span class="token parameter variable">--data</span> @2048.json http://127.0.0.1:4646/v1/jobs</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Vault Development Mode Options</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-dev-mode-option.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-dev-mode-option.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault Development Mode Options</source>
      <description>Vault ê°œë°œ ëª¨ë“œ ì‹¤í–‰ì‹œ ì˜µì…˜ ê°’ ì„¤ëª…</description>
      <pubDate>Sun, 12 Feb 2023 08:01:51 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ë³¼íŠ¸ ê°œë°œ ëª¨ë“œ ì„œë²„ë¥¼ ì‹œì‘í•˜ëŠ” ê¸°ì´ˆì ì¸ ì»¤ë§¨ë“œì™€ ì‹¤í–‰ í›„ ì•ˆë‚´ ë©”ì‹œì§€ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault server <span class="token parameter variable">-dev</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Vault server configuration:</span>
<span class="line"></span>
<span class="line">             Api Address: http://127.0.0.1:8200</span>
<span class="line">                     Cgo: disabled</span>
<span class="line">         Cluster Address: https://127.0.0.1:8201</span>
<span class="line">   Environment Variables: <span class="token environment constant">HOME</span>, ITERM_PROFILE, <span class="token punctuation">..</span>.</span>
<span class="line">              Go Version: go1.19.4</span>
<span class="line">              Listener <span class="token number">1</span>: tcp <span class="token punctuation">(</span>addr: <span class="token string">"127.0.0.1:8200"</span>, cluster address: <span class="token string">"127.0.0.1:8201"</span>, max_request_duration: <span class="token string">"1m30s"</span>, max_request_size: <span class="token string">"33554432"</span>, tls: <span class="token string">"disabled"</span><span class="token punctuation">)</span></span>
<span class="line">               Log Level: info</span>
<span class="line">                   Mlock: supported: false, enabled: <span class="token boolean">false</span></span>
<span class="line">           Recovery Mode: <span class="token boolean">false</span></span>
<span class="line">                 Storage: inmem</span>
<span class="line">                 Version: Vault v1.12.3, built <span class="token number">2023</span>-02-02T09:07:27Z</span>
<span class="line">             Version Sha: 209b3dd99fe8ca320340d08c70cff5f620261f9b</span>
<span class="line"></span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Vault server started<span class="token operator">!</span> Log data will stream <span class="token keyword">in</span> below:</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre></div><p>ê°œë°œ ëª¨ë“œì—ì„œ ì œê³µí•˜ëŠ” ì˜µì…˜ì„ í™•ì¸í•˜ê¸° ìœ„í•´ <code>vault server -h</code> ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ë©´ í•˜ë‹¨ì—ì„œ <code>Dev Opstions</code>ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault server <span class="token parameter variable">-h</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line">Dev Options:</span>
<span class="line"></span>
<span class="line">  <span class="token parameter variable">-dev</span></span>
<span class="line">      Enable development mode. In this mode, Vault runs in-memory and starts</span>
<span class="line">      unsealed. As the name implies, <span class="token keyword">do</span> not run <span class="token string">"dev"</span> mode <span class="token keyword">in</span> production. The</span>
<span class="line">      default is false.</span>
<span class="line"></span>
<span class="line">  -dev-listen-address<span class="token operator">=</span><span class="token operator">&lt;</span>string<span class="token operator">&gt;</span></span>
<span class="line">      Address to <span class="token builtin class-name">bind</span> to <span class="token keyword">in</span> <span class="token string">"dev"</span> mode. The default is <span class="token number">127.0</span>.0.1:8200. This</span>
<span class="line">      can also be specified via the VAULT_DEV_LISTEN_ADDRESS environment</span>
<span class="line">      variable.</span>
<span class="line"></span>
<span class="line">  -dev-no-store-token</span>
<span class="line">      Do not persist the dev root token to the token helper <span class="token punctuation">(</span>usually the <span class="token builtin class-name">local</span></span>
<span class="line">      filesystem<span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token for-or-select variable">use</span> <span class="token keyword">in</span> future requests. The token will only be displayed</span>
<span class="line">      <span class="token keyword">in</span> the <span class="token builtin class-name">command</span> output. The default is false.</span>
<span class="line"></span>
<span class="line">  -dev-root-token-id<span class="token operator">=</span><span class="token operator">&lt;</span>string<span class="token operator">&gt;</span></span>
<span class="line">      Initial root token. This only applies when running <span class="token keyword">in</span> <span class="token string">"dev"</span> mode.</span>
<span class="line">      This can also be specified via the VAULT_DEV_ROOT_TOKEN_ID environment</span>
<span class="line">      variable.</span>
<span class="line"></span>
<span class="line">  -dev-tls</span>
<span class="line">      Enable TLS development mode. In this mode, Vault runs in-memory and</span>
<span class="line">      starts unsealed, with a generated TLS CA, certificate and key. As the</span>
<span class="line">      name implies, <span class="token keyword">do</span> not run <span class="token string">"dev-tls"</span> mode <span class="token keyword">in</span> production. The default is</span>
<span class="line">      false.</span>
<span class="line"></span>
<span class="line">  -dev-tls-cert-dir<span class="token operator">=</span><span class="token operator">&lt;</span>string<span class="token operator">&gt;</span></span>
<span class="line">      Directory where generated TLS files are created <span class="token keyword">if</span> <span class="token variable"><span class="token variable">`</span>-dev-tls<span class="token variable">`</span></span> is</span>
<span class="line">      specified. If left unset, files are generated <span class="token keyword">in</span> a temporary directory.</span>
<span class="line"></span></code></pre></div><p>ê°œë°œ ëª¨ë“œë¡œ ì‹¤í–‰í•˜ëŠ” <code>-dev </code>  ì˜µì…˜ ì™¸ ë‹¤ë¥¸ ì˜µì…˜ì— ëŒ€í•œ ì„¤ëª…ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li><code>-dev-listen-address</code> : ê¸°ë³¸ì€ <code>127.0.0.1:8200</code>ì´ë©°, ë³€ê²½ì„ ì›í•˜ëŠ” ê²½ìš° ì—¬ê¸° ì…ë ¥í•œë‹¤. <code>VAULT_DEV_LISTEN_ADDRESS</code> í™˜ê²½ë³€ìˆ˜ë¡œë„ ëŒ€ì²´ ê°€ëŠ¥í•˜ë‹¤.</li>
<li><code>-dev-no-store-token</code> : ê°œë°œ ëª¨ë“œì‹œ ì‚¬ìš©ì ë””ë ‰í† ë¦¬ì— ì €ì¥ë˜ëŠ” <code>.vault-token</code>ì„ ìƒì„±í•˜ì§€ ì•ŠëŠ” ê²½ìš° <code>true</code>ë¡œ ì„¤ì •í•œë‹¤.</li>
<li><code>-dev-root-token-id</code>: <code>Root Token</code>ì€ ì„ì˜ì˜ ê°’ìœ¼ë¡œ ìƒì„±ë˜ëŠ”ë°, ê°œë°œ ëª¨ë“œ í•œì •ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì§€ì •í•œ ë¬¸ìì—´ë¡œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.</li>
<li><code>-dev-tls</code> : ê°œë°œ ëª¨ë“œë¥¼ ìœ„í•œ ì„ì‹œ TLS ì¸ì¦ì„œë¥¼ ì ìš©í•˜ê³  <code>Api Address</code>ë¥¼ <code>HTTPS</code>ë¡œ ì„¤ì •í•œë‹¤. ì‹¤í–‰ í›„ ì¶œë ¥ì— <code>VAULT_CACERT</code> ë¡œ ì„ì˜ ìƒì„±ëœ ì¸ì¦ì„œ ìœ„ì¹˜ì™€ ì„¤ì •ì„ ì¶œë ¥í•œë‹¤.</li>
<li><code>-dev-tls-cert-dir</code>: <code>-dev-tls</code>ê°€ ì ìš©ëœ ê²½ìš° ì‚¬ìš©ìê°€ ë³´ìœ í•œ ì¸ì¦ì„œë¥¼ ì ìš©í•˜ë ¤ëŠ” ê²½ìš° ëŒ€ìƒ ë””ë ‰í† ë¦¬ë¥¼ ì§€ì •í•œë‹¤.</li>
</ul>
<p>ë‹¤ìŒê³¼ ê°™ì´ ì˜µì…˜ì„ ì ìš©í•œ ê°œë°œ ëª¨ë“œ ë³¼íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´, <code>Api Address</code>ê°€ ì§€ì •ëœ ì£¼ì†Œë¡œ ì„¤ì •ë˜ê³ , <code>.vault-token</code>ì€ ìƒì„±ë˜ì§€ ì•Šê³ , <code>Root Token</code>ì´ <code>root</code>ë¡œ ì„¤ì •ë˜ê³ , ìƒì„±ëœ ì¸ì¦ì„œ ìœ„ì¹˜ì™€ ì»¤ë§¨ë“œ ì‹¤í–‰ì— í•„ìš”í•œ  <code>VAULT_CACERT</code>ê°€ ì¶œë ¥ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault server <span class="token parameter variable">-dev</span> -dev-listen-address<span class="token operator">=</span><span class="token number">0.0</span>.0.0:8200 -dev-no-store-token<span class="token operator">=</span>true -dev-root-token-id<span class="token operator">=</span>root -dev-tls</span>
<span class="line"></span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Vault server configuration:</span>
<span class="line"></span>
<span class="line">             Api Address: https://0.0.0.0:8200</span>
<span class="line">                       <span class="token punctuation">..</span>.</span>
<span class="line">              Listener <span class="token number">1</span>: tcp <span class="token punctuation">(</span>addr: <span class="token string">"0.0.0.0:8200"</span>, cluster address: <span class="token string">"0.0.0.0:8201"</span>, max_request_duration: <span class="token string">"1m30s"</span>, max_request_size: <span class="token string">"33554432"</span>, tls: <span class="token string">"enabled"</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Vault server started<span class="token operator">!</span> Log data will stream <span class="token keyword">in</span> below:</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span>
<span class="line">You may need to <span class="token builtin class-name">set</span> the following environment variables:</span>
<span class="line"></span>
<span class="line">    $ <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_ADDR</span><span class="token operator">=</span><span class="token string">'https://0.0.0.0:8200'</span></span>
<span class="line">    $ <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_CACERT</span><span class="token operator">=</span><span class="token string">'/var/folders/5r/8y6t82xd1h183tq1l_whv8yw0000gn/T/vault-tls3194599057/vault-ca.pem'</span></span>
<span class="line"></span>
<span class="line">The unseal key and root token are displayed below <span class="token keyword">in</span> <span class="token keyword">case</span> you want to</span>
<span class="line">seal/unseal the Vault or re-authenticate.</span>
<span class="line"></span>
<span class="line">Unseal Key: <span class="token assign-left variable">DfFexcExFfbN3jRu7cRuAvMeLMpP9J9yNTgzvvcO8Gw</span><span class="token operator">=</span></span>
<span class="line">Root Token: root</span>
<span class="line"></span>
<span class="line">Development mode should NOT be used <span class="token keyword">in</span> production installations<span class="token operator">!</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Vault Server Configuration - Info</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-server-configuration-info.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/01-Information/vault-server-configuration-info.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Vault Server Configuration - Info</source>
      <description>Vault ì„œë²„ ì‹¤í–‰ì‹œ êµ¬ì„± ì •ë³´ ë‚´ìš© ì„¤ëª…</description>
      <pubDate>Sun, 12 Feb 2023 07:21:43 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ë³¼íŠ¸ ì„œë²„ë¥¼ ì‹œì‘í•˜ëŠ” ê¸°ì´ˆì ì¸ ì»¤ë§¨ë“œì™€ ì‹¤í–‰ í›„ ì•ˆë‚´ ë©”ì‹œì§€ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ vault server <span class="token parameter variable">-dev</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Vault server configuration:</span>
<span class="line"></span>
<span class="line">             Api Address: http://127.0.0.1:8200</span>
<span class="line">                     Cgo: disabled</span>
<span class="line">         Cluster Address: https://127.0.0.1:8201</span>
<span class="line">   Environment Variables: <span class="token environment constant">HOME</span>, ITERM_PROFILE, <span class="token punctuation">..</span>.</span>
<span class="line">              Go Version: go1.19.4</span>
<span class="line">              Listener <span class="token number">1</span>: tcp <span class="token punctuation">(</span>addr: <span class="token string">"127.0.0.1:8200"</span>, cluster address: <span class="token string">"127.0.0.1:8201"</span>, max_request_duration: <span class="token string">"1m30s"</span>, max_request_size: <span class="token string">"33554432"</span>, tls: <span class="token string">"disabled"</span><span class="token punctuation">)</span></span>
<span class="line">               Log Level: info</span>
<span class="line">                   Mlock: supported: false, enabled: <span class="token boolean">false</span></span>
<span class="line">           Recovery Mode: <span class="token boolean">false</span></span>
<span class="line">                 Storage: inmem</span>
<span class="line">                 Version: Vault v1.12.3, built <span class="token number">2023</span>-02-02T09:07:27Z</span>
<span class="line">             Version Sha: 209b3dd99fe8ca320340d08c70cff5f620261f9b</span>
<span class="line"></span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Vault server started<span class="token operator">!</span> Log data will stream <span class="token keyword">in</span> below:</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre></div><p>ê¸°ë™ í›„ ì„œë²„ê°€ ì‹¤í–‰ëœ ì£¼ìš” ì„¤ì • ì •ë³´ì˜ ì„¤ëª…ì¸ <code>Vault server configuration</code>ì˜ ë‚´ìš©ì˜ ì„¤ëª…ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li>
<p><code>Api Address: http://127.0.0.1:8200</code><br>
: ë³¼íŠ¸ì™€ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìœ„í•œ API ì£¼ì†Œë¡œ, RestAPI, CLI, UI ëª¨ë‘ í•´ë‹¹ ì£¼ì†Œì™€ í†µì‹ í•œë‹¤.</p>
</li>
<li>
<p><code>Cgo: disabled</code><br>
: ë³¼íŠ¸ëŠ” golangìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆëŠ”ë°, go ì»´íŒŒì¼ ì‹œ <code>CGO_ENABLED</code>ê°€ í™œì„±í™”ë˜ì–´ìˆë‹¤ë©´ dynamic libraryë¡œ ë¹Œë“œëœë‹¤. ì´ ê²½ìš° ì‹¤í–‰ í™˜ê²½ì— ì»´íŒŒì¼ ì‹œ ì‚¬ìš©ë˜ëŠ” ë§í¬ ëª¨ë“ˆì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ë¯€ë¡œ, ì‹¤í–‰ëœ ë³¼íŠ¸ ë°”ì´ë„ˆë¦¬ëŠ” ë¹Œë“œì‹œ static libraryë¡œ ë¹Œë“œë˜ì—ˆë‹¤ëŠ” ì˜ë¯¸ë‹¤.</p>
</li>
<li>
<p><code>Cluster Address: https://127.0.0.1:8201</code><br>
: ë³¼íŠ¸ ì„œë²„ë¥¼ ê³ ê°€ìš©ì„±(HA)ì„ ìœ„í•´ ë‹¤ìˆ˜ì˜ ì„œë²„ë¡œ êµ¬ì„±í•œ ê²½ìš° ì„œë²„ ê°„ì— í†µì‹ í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ì£¼ì†Œë¡œ, TLS1.2ë¡œ ìƒí˜¸ê°„ ì¸ì¦í•œë‹¤.</p>
</li>
<li>
<p><code>Environment Variables: HOME, ITERM_PROFILE, ...</code><br>
: ë³¼íŠ¸ ì„œë²„ê°€ ì‹¤í–‰ëœ í™˜ê²½ì˜ í™˜ê²½ë³€ìˆ˜ ê°’ì˜ ë‚˜ì—´ë¡œ, ë³¼íŠ¸ ì‹¤í–‰ì— ì˜í–¥ì„ ì£¼ëŠ” í™˜ê²½ë³€ìˆ˜ê°€ ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
</li>
<li>
<p><code>Go Version: go1.19.4</code><br>
: ë³¼íŠ¸ ì„œë²„ê°€ ë¹Œë“œ ëœ golang ë²„ì „ì´ë‹¤.</p>
</li>
<li>
<p><code>Listener 1: tcp (addr: "127.0.0.1:8200", cluster address: "127.0.0.1:8201", max_request_duration: "1m30s", max_request_size: "33554432", tls: "disabled")</code><br>
: ë³¼íŠ¸ì˜ ë¦¬ìŠ¤ë„ˆ ì •ë³´ë¡œ, ì´ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ <code>Api Address</code>, <code>Cluster Address</code> ê°€ ì„¤ì • ëœë‹¤. ìˆ«ìê°€ ë¶™ì–´ìˆë‹¤ëŠ” ì˜ë¯¸ëŠ” ë¦¬ìŠ¤í„°ë¥¼ ì—¬ëŸ¬ê°œ ì„¤ì • í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ë‹¤.</p>
</li>
<li>
<p><code>Log Level: info</code><br>
: ë³¼íŠ¸ì—ì„œ ê¸°ë¡í•˜ëŠ” ë¡œê·¸ ìˆ˜ì¤€ì´ë‹¤.</p>
</li>
<li>
<p><code>Mlock: supported: false, enabled: false</code><br>
: ë³¼íŠ¸ì˜ ê¸°ë³¸ê°’ì€ ë””ìŠ¤í¬ë¡œì˜ ìŠ¤ì™€í•‘ì„ ë¹„í™œì„±í™”í•˜ê¸° ìœ„í•´ ë©”ëª¨ë¦¬ìƒì˜ ê°€ìƒ ì£¼ì†Œ ê³µê°„ì„ RAMì—ì„œ ì ê·¼ë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” <code>mlock()</code>ì„ ì§€ì›í•˜ëŠ” ì‹œìŠ¤í…œ, ë£¨íŠ¸ ê¶Œí•œ, ì„¤ì •ì˜ í™œì„±í™”ê°€ í•„ìš”í•˜ë‹¤.</p>
</li>
<li>
<p><code>Recovery Mode: false</code><br>
: ë³¼íŠ¸ ì‹œì‘ì‹œ ë³µêµ¬ëª¨ë“œë¡œ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ì˜ ì—¬ë¶€ì´ë‹¤.</p>
</li>
<li>
<p><code>Storage: inmem</code><br>
: ë³¼íŠ¸ ì €ì¥ì†Œ íƒ€ì…ì´ë‹¤.</p>
</li>
<li>
<p><code>Version: Vault v1.12.3, built 2023-02-02T09:07:27Z</code><br>
: ë³¼íŠ¸ ë°”ì´ë„ˆë¦¬ ë²„ì • ì •ë³´ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.</p>
</li>
<li>
<p><code>Version Sha: 209b3dd99fe8ca320340d08c70cff5f620261f9b</code><br>
: ê° ë³¼íŠ¸ ë²„ì „ê³¼ ê´€ë ¨ëœ ê³ ìœ  ì‹ë³„ìì…ë‹ˆë‹¤. ì‹¤í–‰ ì¤‘ì¸ ì½”ë“œì˜ ë²„ì „ì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, ë³¼íŠ¸ ì˜¤í”ˆì†ŒìŠ¤ì˜ GitHub Repositoryì˜ commit idì™€ ê°™ë‹¤.</p>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>2023ë…„ 2ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-02.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-02.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 2ì›”</source>
      <description>2023ë…„ 2ì›” Update</description>
      <pubDate>Fri, 03 Feb 2023 11:21:37 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>Terraform Cloud Adds â€˜Projectsâ€™ to Organize Workspaces at Scale</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/terraform-cloud-adds-projects-to-organize-workspaces-at-scale" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>ê¸°ì¡´ì˜ Terraform Cloud ì—ì„œëŠ” ì—°ê´€ë˜ëŠ” Workspace ê°„ ê·¸ë£¹í™”ê°€ ë¶ˆê°€ëŠ¥í•˜ê³  Organization ë° Workspace ë‹¨ìœ„ë¡œë§Œ ê¶Œí•œ í• ë‹¹ì´ ê°€ëŠ¥í•¨ìœ¼ë¡œ ì¸í•´ ì‚¬ìš©ìë“¤ì€ ìì› í™œìš©ì— ëŒ€í•œ ì œì•½ì‚¬í•­ì„ ê³ ë ¤í•˜ì—¬ Organization ë° Workspace ë¥¼ ë¶„í• í•˜ëŠ” ë¶ˆí¸í•¨ì„ ê°ìˆ˜í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. 'Projects' ëŠ” Workspace ë¥¼ ê·¸ë£¹í™”í•˜ê³  Project ë‹¨ìœ„ë¡œ ê¶Œí•œ ì„¤ì •ì„ ì§€ì›í•¨ìœ¼ë¡œì¨ ì•ì„œ ì†Œê°œí•œ ì œì•½ì‚¬í•­ì„ í•´ì†Œí•˜ë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.3.7" target="_blank" rel="noopener noreferrer">1.3.7 Release</a>
<ul>
<li>Module ì‚¬ìš© ì‹œ Version Constraint ì— ëŒ€í•œ Parsing ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>ignore_changes ì„¤ì •ëœ resource ê°€ ìˆì„ ê²½ìš°  panic ì´ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2023/v202301-2" target="_blank" rel="noopener noreferrer">1ì›” Release</a> ì¶œì‹œ (<code>v202301-2</code>)</li>
<li>í•„ìˆ˜ Upgrade Versison: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2, v202204-2)</li>
<li>2023ë…„ 2ì›” Release (<code>v202302-1</code>) ì„ ê¸°ì ìœ¼ë¡œ êµ¬ë²„ì „ OS ë° Postrgres DB ì— ëŒ€í•œ ì§€ì› ì¢…ë£Œ
<ul>
<li>
<p>ëŒ€ìƒ OS</p>
<ul>
<li>
<p>Debian 8, 9</p>
</li>
<li>
<p>Ubuntu 14.04, 16.04</p>
</li>
<li>
<p>Amazon Linux 2014.03, 2014.09, 2015.03, 2015.09, 2016.03, 2016.09, 2017.03, 2017.09, 2018.03</p>
</li>
</ul>
</li>
<li>
<p>ëŒ€ìƒ Postgres</p>
<ul>
<li>Postgres 11</li>
<li>TFE ì— ëŒ€í•´ External PostgresSQL ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìµœì†Œ ë²„ì „ 12 ì´ìƒìœ¼ë¡œ Upgrade í•„ìš” (Release 659 ë¶€í„° ì ìš©)</li>
</ul>
</li>
</ul>
</li>
<li>Log Level (debug) ë¡œ ì„¤ì • ì‹œ tfe-atlas, tfe-atlas-ui, tfe-sidekiq ë“± ì¼ë¶€ êµ¬ì„±ìš”ì†Œë¡œ ì¸í•œ ëŒ€ëŸ‰ log ìˆ˜ì§‘ë˜ëŠ” ì´ìŠˆ í•´ê²°</li>
<li>Policy Manager ì— ëŒ€í•œ Resource ì ‘ê·¼ ê¶Œí•œ ì œí•œ, í•„ìš” ì‹œ í•„ìš”í•œ ë§Œí¼ì˜ ì¶”ê°€ ê¶Œí•œ í•„ìš”</li>
<li>Private Module ì²˜ëŸ¼ Organization ê°„ Provider ê³µìœ  ê°€ëŠ¥</li>
<li>State Rollback ê¸°ëŠ¥ ì§€ì›</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v4.52.0" target="_blank" rel="noopener noreferrer">AWS v4.52.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€: <code>aws_auditmanager resource</code> ì¶”ê°€</li>
<li>Bug Fix
<ul>
<li>aws_dynamodb_table ì— ëŒ€í•´ <code>kms_key_arn</code> ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_api_gateway_integration ì— ëŒ€í•´ <code>connection type</code> ì´ ë³€ê²½ë˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.41.0" target="_blank" rel="noopener noreferrer">Azure v3.41.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€: <code>azure_site_recovery_replication_recovery_plan</code></li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>azurerm_databricks_workspace ì— ëŒ€í•´ <code>customer managed key</code> ë° <code>public_network_access_enabled</code> ì„¤ì • ì§€ì›</li>
<li>azurerm_kubernetes_cluster ì— ëŒ€í•´ <code>node_public_ip_tags</code> ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>azurerm_stream_analytics_output_servicebus ì— ëŒ€í•´ MSI Authentication ì„¤ì • ê´€ë ¨ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.51.0" target="_blank" rel="noopener noreferrer">GCP v4.51.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€: <code>google_iam_access_boundary_policy</code>, <code>google_tags_location_tag_bindings</code></li>
<li>ê¸°ëŠ¥ ê°œì„ 
<ul>
<li>compute ì— ëŒ€í•´ google_compute_node_group ì˜ share_settings ì„¤ì • ì§€ì›</li>
<li>spanner ì— ëŒ€í•´ <code>google_spanner_database_iam_member</code> ë° <code>google_spanner_instance_iam_member</code> ì„¤ì • ì§€ì›</li>
</ul>
</li>
<li>Bug Fix
<ul>
<li>bigquery ì— ëŒ€í•´ IAM ì„¤ì • ë° External Data Config ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.12.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/blob/main/CHANGELOG.md#1122" target="_blank" rel="noopener noreferrer">CHANGELOG</a></li>
<li>PKI Secret Engine: ê¸°ë³¸ issuer ì— ëŒ€í•œ ë³€ê²½ì„ ìœ„í•´ <code>default_follows_latest_issuer</code> ì„¤ì • ì¶”ê°€</li>
<li>Raft Storage: <code>retry_join_as_non_voter</code>ì„¤ì • ì¶”ê°€</li>
<li>Okta Auth Method ê´€ë ¨ AuthRenew ë¡œ ì¸í•œ Panic ì˜¤ë¥˜ ìˆ˜ì •</li>
<li>ciphertext ê°€ 4 byte ì´í•˜ì¸ ê²½ìš° ë°œìƒ ê°€ëŠ¥í•œ deadlock ì˜¤ë¥˜ ìˆ˜ì •</li>
<li>Performance Standby Node ì— ëŒ€í•œ start up race condition ìˆ˜ì •</li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.14.4
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/consul/blob/main/CHANGELOG.md#1144-january-26-2023" target="_blank" rel="noopener noreferrer">CHANGELOG</a></li>
<li>connect ê´€ë ¨ transparent proxy upstreams ì— í•„ìš”í•œ ì„¸ë¶€ êµ¬ì„± (<code>proxy-defaults</code>, <code>service-default</code>) ìˆ˜ì •</li>
<li>peering êµ¬ì„± ì‹œ ì´ë¦„ì€ ë°˜ë“œì‹œ ì†Œë¬¸ìë¡œ êµ¬ì„± í•„ìš”. í–¥í›„ í˜¸í™˜ì„± ë“±ì„ ê³ ë ¤í•˜ì—¬ ê¸°ì¡´ êµ¬ì„±ëœ peering ì— ëŒ€í•´ì„œ ì´ë¦„ì— ëŒ€ë¬¸ì ì‚¬ìš©í•œ ê²½ìš°ì— ëŒ€í•´ ì†Œë¬¸ìë¡œ ì¬êµ¬ì„± ê¶Œê³ </li>
<li>consul connect envoy ëª…ë ¹ì–´ ì‚¬ìš© ì‹œ <code>envoy-ready-bind-port</code> ë° <code>envoy-ready-bind-address</code> ì„¤ì • ì§€ì›</li>
<li>connect ê´€ë ¨ filter expression ì´ ì²˜ë¦¬ ë˜ë„ë¡ ConsulResolver ì§€ì›</li>
<li>ì¸ì¦ì„œ auto-reloading ì— ëŒ€í•œ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.4.3
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/blob/main/CHANGELOG.md#143-november-21-2022" target="_blank" rel="noopener noreferrer">CHANGELOG</a></li>
<li>ë™ì¼ Job ì— ëŒ€í•´ ì—¬ëŸ¬ evaluation ì´ pending ë˜ì–´ ìˆëŠ” ê²½ìš°, ê°€ì¥ ìµœê·¼ ì„±ê³µí•œ evaluation ì— ëŒ€í•´ì„œë§Œ ë°˜ì˜</li>
<li>File Upload, Consul Upstream ì„¤ì • ë“± UI ê°œì„ </li>
<li>Consul ì—°ë™ ì‹œ gRPC fingerprint ê´€ë ¨ ë°œìƒ ì˜¤ë¥˜ ê°œì„  (Consul 1.14 ì—°ë™ë¶€í„° ì ìš©)</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Library not loaded: libunistring.2.dylib</title>
      <link>https://docmoa.github.io/06-etc/mac/libunistring-issue.html</link>
      <guid>https://docmoa.github.io/06-etc/mac/libunistring-issue.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Library not loaded: libunistring.2.dylib</source>
      <description>libunistring.2.dylib not loaded</description>
      <pubDate>Tue, 31 Jan 2023 22:56:32 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>í˜„ìƒ</h2>
<p>macOS Ventura ì—…ê·¸ë ˆì´ë“œ í›„ wget ì‹¤í–‰ì‹œ ì˜¤ë¥˜ ë°œìƒ</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">wget</span></span>
<span class="line">dyld<span class="token punctuation">[</span><span class="token number">4414</span><span class="token punctuation">]</span>: Library not loaded: /usr/local/opt/libunistring/lib/libunistring.2.dylib</span>
<span class="line">  Referenced from: <span class="token operator">&lt;</span>1ECBA17E-A426-310D-9902-EFF0D9E1053<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> /usr/local/Cellar/wget/1.21.3/bin/wget</span>
<span class="line">  Reason: tried: <span class="token string">'/usr/local/opt/libunistring/lib/libunistring.2.dylib'</span> <span class="token punctuation">(</span>no such <span class="token function">file</span><span class="token punctuation">)</span>, <span class="token string">'/System/Volumes/Preboot/Cryptexes/OS/usr/local/opt/libunistring/lib/libunistring.2.dylib'</span> <span class="token punctuation">(</span>no such <span class="token function">file</span><span class="token punctuation">)</span>, <span class="token string">'/usr/local/opt/libunistring/lib/libunistring.2.dylib'</span> <span class="token punctuation">(</span>no such <span class="token function">file</span><span class="token punctuation">)</span>, <span class="token string">'/usr/local/lib/libunistring.2.dylib'</span> <span class="token punctuation">(</span>no such <span class="token function">file</span><span class="token punctuation">)</span>, <span class="token string">'/usr/lib/libunistring.2.dylib'</span> <span class="token punctuation">(</span>no such file, not <span class="token keyword">in</span> dyld cache<span class="token punctuation">)</span>, <span class="token string">'/usr/local/Cellar/libunistring/1.1/lib/libunistring.2.dylib'</span> <span class="token punctuation">(</span>no such <span class="token function">file</span><span class="token punctuation">)</span>, <span class="token string">'/System/Volumes/Preboot/Cryptexes/OS/usr/local/Cellar/libunistring/1.1/lib/libunistring.2.dylib'</span> <span class="token punctuation">(</span>no such <span class="token function">file</span><span class="token punctuation">)</span>, <span class="token string">'/usr/local/Cellar/libunistring/1.1/lib/libunistring.2.dylib'</span> <span class="token punctuation">(</span>no such <span class="token function">file</span><span class="token punctuation">)</span>, <span class="token string">'/usr/local/lib/libunistring.2.dylib'</span> <span class="token punctuation">(</span>no such <span class="token function">file</span><span class="token punctuation">)</span>, <span class="token string">'/usr/lib/libunistring.2.dylib'</span> <span class="token punctuation">(</span>no such file, not <span class="token keyword">in</span> dyld cache<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token number">4414</span> abort      <span class="token function">wget</span></span>
<span class="line"></span></code></pre></div><h2>í•´ê²°ë°©ì•ˆ ì°¾ê¸° ê³¼ì •</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/50631185/homebrew-will-not-run-wget-command-library-not-loaded" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/50631185/homebrew-will-not-run-wget-command-library-not-loaded</a>ë¥¼ ì°¸ê³ í•˜ì—¬ <code>brew uninstall --force gettext</code> ì‹¤í–‰í–ˆìœ¼ë‚˜ ì˜¤ë¥˜</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ brew uninstall <span class="token parameter variable">--force</span> gettext</span>
<span class="line">xcrun: error: invalid active developer path <span class="token punctuation">(</span>/Library/Developer/CommandLineTools<span class="token punctuation">)</span>, missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun</span>
<span class="line">Error: Refusing to uninstall /usr/local/Cellar/gettext/0.21.1</span>
<span class="line">because it is required by cairo, gdk-pixbuf, git, glib, gnupg, gnutls, gobject-introspection, graphviz, gts, harfbuzz, libidn2, librsvg, libslirp, pango, podman, qemu and wget, <span class="token function">which</span> are currently installed.</span>
<span class="line">You can override this and force removal with:</span>
<span class="line">brew uninstall --ignore-dependencies gettext</span>
<span class="line"></span></code></pre></div><ul>
<li>ì˜¤ë¥˜ ë©”ì‹œì§€ì—ì„œì˜ ì•ˆë‚´ëŒ€ë¡œ <code>--ignore-dependencies</code> ì¶”ê°€í•˜ì—¬ ì‹¤í–‰</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ brew uninstall --ignore-dependencies gettext</span>
<span class="line">Uninstalling /usr/local/Cellar/gettext/0.21.1<span class="token punctuation">..</span>. <span class="token punctuation">(</span><span class="token number">1,983</span> files, <span class="token number">20</span>.6MB<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><ul>
<li><code>gettext</code> ì¬ì„¤ì¹˜í•˜ë©´ ë„ì¤‘ì— ì‹¤í–‰ì´ ì•ˆëë˜ <code>wget</code>ë„ ì¬ì„¤ì¹˜</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ brew <span class="token function">install</span> gettext</span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Upgrading <span class="token function">wget</span></span>
<span class="line"><span class="token number">1.21</span>.3 -<span class="token operator">&gt;</span> <span class="token number">1.21</span>.3_1</span>
<span class="line"></span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Installing dependencies <span class="token keyword">for</span> wget: openssl@3</span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Installing <span class="token function">wget</span> dependency: openssl@3</span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Pouring openssl@3--3.0.7.ventura.bottle.tar.gz</span>
<span class="line">ğŸº  /usr/local/Cellar/openssl@3/3.0.7: <span class="token number">6,454</span> files, <span class="token number">28</span>.2MB</span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Installing <span class="token function">wget</span></span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Pouring wget--1.21.3_1.ventura.bottle.1.tar.gz</span>
<span class="line">ğŸº  /usr/local/Cellar/wget/1.21.3_1: <span class="token number">89</span> files, <span class="token number">4</span>.2MB</span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Running <span class="token variable"><span class="token variable">`</span>brew cleanup <span class="token function">wget</span><span class="token variable">`</span></span><span class="token punctuation">..</span>.</span>
<span class="line">Removing: /usr/local/Cellar/wget/1.21.3<span class="token punctuation">..</span>. <span class="token punctuation">(</span><span class="token number">89</span> files, <span class="token number">4</span>.2MB<span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Checking <span class="token keyword">for</span> dependents of upgraded formulae<span class="token punctuation">..</span>.</span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre></div><ul>
<li><code>git</code>ë„ ì—…ê·¸ë ˆì´ë“œ í›„ ì˜í–¥ì„ ë°›ì•˜ëŠ”ì§€ ì¬ì„¤ì¹˜ í•„ìš”</li>
</ul>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line"><span class="token property">Error:</span> <span class="token string">'git'</span> must be installed and in your PATH<span class="token operator">!</span></span>
<span class="line"><span class="token property">Warning:</span> gettext <span class="token number">0.21.1</span> is already installed and up<span class="token operator">-</span>to<span class="token operator">-</span>date<span class="token punctuation">.</span></span>
<span class="line">To reinstall <span class="token number">0.21.1</span><span class="token punctuation">,</span> run<span class="token operator">:</span></span>
<span class="line">    brew reinstall gettext</span>
<span class="line"></span></code></pre></div><ul>
<li>
<p><code>brew install git</code>ìœ¼ë¡œ ë‹¤ì‹œ <code>git</code>ì„¤ì¹˜</p>
</li>
<li>
<p>ë§ˆì§€ë§‰ ì¬ì„¤ì¹˜ ìš”êµ¬ì— ë”°ë¼ <code>gettext</code> ì¬ì„¤ì¹˜</p>
</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ brew reinstall gettext</span>
<span class="line"></span></code></pre></div><ul>
<li><code>wget</code> ì¬ì‹¤í–‰ ì‹œ ì •ìƒ ë™ì‘ í™•ì¸</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">wget</span></span>
<span class="line">wget: URL ë¹ ì§</span>
<span class="line">ì‚¬ìš©ë²•: <span class="token function">wget</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>ì˜µì…˜<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token punctuation">[</span>URL<span class="token punctuation">]</span><span class="token punctuation">..</span>.</span>
<span class="line"></span>
<span class="line">ìì„¸í•œ ì˜µì…˜ì€ `wget --help'ë¥¼ ì…ë ¥í•˜ì‹­ì‹œì˜¤.</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Graceful Shutdown ì ìš© (kill_signal)</title>
      <link>https://docmoa.github.io/04-HashiCorp/07-Nomad/04-UseCase/springboot-graceful-shutdown.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/07-Nomad/04-UseCase/springboot-graceful-shutdown.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Graceful Shutdown ì ìš© (kill_signal)</source>
      <description>Graceful Shutdown of Spring Boot Application in HashiCorp Nomad</description>
      <pubDate>Thu, 12 Jan 2023 05:48:04 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>GitHub ë¦¬ì†ŒìŠ¤ : <a href="https://github.com/Great-Stone/nomad-springboot-graceful-shutdown" target="_blank" rel="noopener noreferrer">https://github.com/Great-Stone/nomad-springboot-graceful-shutdown</a></p>
</blockquote>
<h2>í…ŒìŠ¤íŠ¸ í™˜ê²½</h2>
<ul>
<li>Gradle 7.4.2</li>
<li>Java 11</li>
<li>Spring Boot 2.7.7</li>
<li>Nomad 1.4.3</li>
</ul>
<h2>Spring Boot ë¦¬ë·°</h2>
<h3><code>application.yml</code> êµ¬ì„±</h3>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span></span>
<span class="line">  <span class="token key atrule">shutdown</span><span class="token punctuation">:</span> graceful </span>
<span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">lifecycle</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">timeout-per-shutdown-phase</span><span class="token punctuation">:</span> 35s <span class="token comment"># Default 30s</span></span>
<span class="line"></span></code></pre></div><ul>
<li><code>server.shutdown</code>ì— <code>graceful</code> ì •ì˜ í•„ìš”</li>
<li><code>spring.lifecycle.timeout-per-shutdown-phase</code>ì— Graceful Shutdown ìš”ì²­ì‹œ ì§€ì—° ì‹œê°„ ì„¤ì •</li>
</ul>
<h3>Graceful Shutdown í…ŒìŠ¤íŠ¸</h3>
<ul>
<li>
<p>í…ŒìŠ¤íŠ¸ëŠ” ë¹Œë“œ(<code>gradle build</code>) í›„ í•´ë‹¹ jaríŒŒì¼ì— ëŒ€í•´ ì‹¤í–‰</p>
</li>
<li>
<p>ì‹¤í–‰ ì»¤ë§¨ë“œ ì˜ˆì‹œ : <code>java -jar ./build/libs/demo-0.0.1-SNAPSHOT.jar</code></p>
</li>
<li>
<p>í…ŒìŠ¤íŠ¸ API : <code>http://localhost:8080/test/1</code></p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">curl</span> http://localhost:8080/test/1</span>
<span class="line"><span class="token punctuation">(</span>ì½”ë“œì—ì„œ ì§€ì •í•œ 20000ms ì§€ì—°<span class="token punctuation">)</span></span>
<span class="line">Process Success <span class="token operator">!</span><span class="token operator">!</span></span>
<span class="line"></span></code></pre></div></li>
<li>
<p>Graceful Shutdown ì¢…ë£Œë¥¼ ìœ„í•´ <code>kill -15 &lt;PID&gt;</code> í˜•íƒœì˜ ì‹œê·¸ë„ ì „ë‹¬ í•„ìš”</p>
<ul>
<li>KILL(<code>-9</code>)ëŒ€ì‹  TERM(<code>-15</code>)ë¥¼ ì‚¬ìš©</li>
<li>KILL(SIGKILL) : ë¬´ì¡°ê±´ì ì¸ ì¦‰ê°ì  ì¢…ë£Œ</li>
<li>TERM(SIGTERM) : ìì—°ìŠ¤ëŸ¬ìš´ ì‹¤í–‰ ì¢…ë£Œ, ì •ìƒ ì¢…ë£Œ ì‘ì—… ì²˜ë¦¬ í›„ ëëƒ„</li>
</ul>
</li>
<li>
<p>SIGTERM ì‚¬ìš©ì‹œ ì¢…ë£Œ ë©”ì‹œì§€ í™•ì¸ ë° ì •ìƒ ì‘ë‹µ í™•ì¸</p>
<div class="language-log" data-highlighter="prismjs" data-ext="log" data-title="log"><pre class="language-log"><code><span class="line">  <span class="token punctuation">.</span>   ____          _            __ _ _</span>
<span class="line"><span class="token operator">/</span>\\ <span class="token operator">/</span> ___'_ __ _ _<span class="token operator">(</span>_<span class="token operator">)</span>_ __  __ _ \ \ \ \</span>
<span class="line"><span class="token operator">(</span> <span class="token operator">(</span> <span class="token operator">)</span>\___ <span class="token operator">|</span> <span class="token string">'_ | '</span>_<span class="token operator">|</span> <span class="token operator">|</span> '_ \<span class="token operator">/</span> _` <span class="token operator">|</span> \ \ \ \</span>
<span class="line">\\<span class="token operator">/</span>  ___<span class="token operator">)</span><span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">)</span><span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token operator">(</span>_<span class="token operator">|</span> <span class="token operator">|</span>  <span class="token operator">)</span> <span class="token operator">)</span> <span class="token operator">)</span> <span class="token operator">)</span></span>
<span class="line">  '  <span class="token operator">|</span>____<span class="token operator">|</span> <span class="token punctuation">.</span>__<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_\__<span class="token punctuation">,</span> <span class="token operator">|</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span></span>
<span class="line"><span class="token separator comment">=========</span><span class="token operator">|</span>_<span class="token operator">|</span><span class="token separator comment">==============</span><span class="token operator">|</span>___<span class="token operator">/</span><span class="token operator">=</span><span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span></span>
<span class="line"><span class="token operator">:</span><span class="token operator">:</span> Spring Boot <span class="token operator">:</span><span class="token operator">:</span>                <span class="token operator">(</span><span class="token number">v2.7.7</span><span class="token operator">)</span></span>
<span class="line"></span>
<span class="line"><span class="token date number">2023-01-12</span> <span class="token time number">14:10:14.572</span>  <span class="token level info keyword">INFO</span> <span class="token number">45334</span> </span></code></pre></div></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>2023ë…„ 1ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-01.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/98-2023/2023-01.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2023ë…„ 1ì›”</source>
      <description>2023ë…„ 1ì›” Update</description>
      <pubDate>Tue, 03 Jan 2023 13:07:11 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>Dynamic Secrets for Waypoint with Vault</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/dynamic-secrets-for-waypoint-with-vault" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>Application ì— ëŒ€í•œ Build, Deployment ë° Monitoring ì„ ê°„ì†Œí™”í•˜ê³  ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ê°œë°œìë¥¼ ì§€ì›í•˜ëŠ” Waypoint ì—ì„œë„ ì´ì œ Vault ì™€ ì—°ë™í•˜ì—¬ Hashicorp Vault config sourcer plugin ì„ í†µí•´ Application Config ì— í¬í•¨ë˜ëŠ” ë³´ì•ˆ ì •ë³´ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.3." target="_blank" rel="noopener noreferrer">1.3.6 Release</a>
<ul>
<li>Module Output ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2022/v202212-2" target="_blank" rel="noopener noreferrer">12ì›” Release</a> ì¶œì‹œ (v202212-2)</li>
<li>í•„ìˆ˜ Upgrade Version: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2, v202204-2)</li>
<li>2023ë…„ 2ì›” Release (v202302-1) ì„ ê¸°ì ìœ¼ë¡œ êµ¬ë²„ì „ OS ë° Postrgres DB ì— ëŒ€í•œ ì§€ì› ì¢…ë£Œ
<ul>
<li>
<p>ëŒ€ìƒ OS</p>
<ul>
<li>
<p>Debian 8, 9</p>
</li>
<li>
<p>Ubuntu 14.04, 16.04</p>
</li>
<li>
<p>Amazon Linux 2014.03, 2014.09, 2015.03, 2015.09, 2016.03, 2016.09, 2017.03, 2017.09, 2018.03</p>
</li>
</ul>
</li>
<li>
<p>ëŒ€ìƒ Postgres</p>
<ul>
<li>Postgres 11</li>
<li>TFE ì— ëŒ€í•´ External PostgresSQL ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìµœì†Œ ë²„ì „ 12 ì´ìƒìœ¼ë¡œ Upgrade í•„ìš” (Release 659 ë¶€í„° ì ìš©)</li>
</ul>
</li>
</ul>
</li>
<li>CA Bundle ê´€ë ¨ ì´ìŠˆë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” HTTPS endpoint ì ‘ì† ê´€ë ¨ Sentinel ì •ì±… ì˜¤ë¥˜ ìˆ˜ì •</li>
<li>sentinel, cost-estimation, plan-exporter ë“±ì„ ì²˜ë¦¬í•˜ëŠ” tfe-nomad container ì— ëŒ€í•´ ì„±ëŠ¥ ë° ì•ˆì •ì„± ì œê³ ë¥¼ ìœ„í•´ tfe-task-worker ë¡œ ëŒ€ì²´.</li>
<li><a href="https://developer.hashicorp.com/terraform/cloud-docs/workspaces/settings/run-tasks#associating-run-tasks-with-a-workspace" target="_blank" rel="noopener noreferrer">Pre-plan ë° Pre-Apply ë¥¼ ìœ„í•œ Run Task</a> ì§€ì›</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/api-docs/workspaces#list-workspaces" target="_blank" rel="noopener noreferrer">List Workspaces API endpoint</a> ì‚¬ìš© ì‹œ wildcard ë§¤ì¹­ ì§€ì›</li>
<li>terraform apply ì§„í–‰ ë„ì¤‘ ì·¨ì†Œ ì‹œ í•´ë‹¹ resource ì˜ ìƒíƒœ ì •ë³´ì— ëŒ€í•´ 'unknown' ìœ¼ë¡œ ì¶œë ¥í•˜ë„ë¡ ê°œì„ </li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v4.48.0" target="_blank" rel="noopener noreferrer">AWS v4.48.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>aws_eks_node_group ì— ëŒ€í•´ WINDOWS_CORE_2019_x86_64, WINDOWS_CORE_2022_x86_64 ë“± Windows OS ê¸°ë°˜ Node ì‚¬ìš© ì§€ì›</li>
<li>aws_networkfirewall_rule_group ì— ëŒ€í•´ reference_sets ì§€ì›</li>
<li>aws_networkmanager_vpc_attachment ì— ëŒ€í•´ options.appliance_mode_support ì§€ì›</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.37.0" target="_blank" rel="noopener noreferrer">Azure v3.37.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource ì¶”ê°€: azurerm_coginitive_deployment, azurerm_billing_account_cost_management_export, azurerm_key_vault_certificate_contacts, azurerm_lab_service_plan, azurerm_resource_deployment_script, azurerm_spring_cloud_customized_accelerator ë“±</li>
<li>azurerm_netapp_volume ì— ëŒ€í•´ zone ì„¤ì • ì¶”ê°€</li>
<li>azurerm_virtual_network_gateway_connection ì— ëŒ€í•´ ë‹¤ë¥¸ resource group ì—ì„œ ìƒì„± ì•ˆë˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.47.0" target="_blank" rel="noopener noreferrer">GCP v4.47.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ resource: google_alloydb_backup, google_filestore_backup</li>
<li>compute ì— ëŒ€í•´ ipv6_access_type ì„¤ì • ì§€ì›</li>
<li>container ì— ëŒ€í•´ autoscaling ì— ëŒ€í•œ default ì„¤ì • ì§€ì› ì¶”ê°€</li>
<li>container ì— ëŒ€í•´ gke gateway api controller ì§€ì›ì„ ìœ„í•œ gateway_api_config ì„¤ì • ì¶”ê°€</li>
<li>google_sql_database ì— ëŒ€í•´ ì‚­ì œ ì •ì±…ì´ ê¸°ë³¸ "abandon" ì²˜ë¦¬ ë˜ì–´ ìˆìŒìœ¼ë¡œ ì¸í•´ ë°œìƒ ê°€ëŠ¥í•œ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li>1.12.2
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/vault/blob/main/CHANGELOG.md#1122" target="_blank" rel="noopener noreferrer">CHANGELOG</a></li>
<li>PKI Secret Engine: ê¸°ë³¸ issuer ì— ëŒ€í•œ ë³€ê²½ì„ ìœ„í•´ default_follows_latest_issuer ì„¤ì • ì¶”ê°€</li>
<li>Raft Storage: retry_join_as_non_voter ì„¤ì • ì¶”ê°€</li>
<li>Okta Auth Method ê´€ë ¨ AuthRenew ë¡œ ì¸í•œ Panic ì˜¤ë¥˜ ìˆ˜ì •</li>
<li>ciphertext ê°€ 4 byte ì´í•˜ì¸ ê²½ìš° ë°œìƒ ê°€ëŠ¥í•œ deadlock ì˜¤ë¥˜ ìˆ˜ì •</li>
<li>Performance Standby Node ì— ëŒ€í•œ start up race condition ìˆ˜ì •</li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li>1.14.3
<ul>
<li>
<p>ìƒì„¸ <a href="https://github.com/hashicorp/consul/blob/main/CHANGELOG.md#1143-december-13-2022" target="_blank" rel="noopener noreferrer">CHANGELOG</a></p>
</li>
<li>
<p>consul connect: vault connect CA test ì— ëŒ€í•´ ì œí•œëœ ê¶Œí•œì˜ token ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •</p>
</li>
<li>
<p>consul connect ê´€ë ¨ Mesh Gateway ì˜ Failover peering ì— ëŒ€í•œ ì˜¤ë¥˜ ê°œì„ </p>
</li>
<li>
<p>consul connect ê´€ë ¨ Vault 1.11+ ë¥¼ CA Provider ë¡œ ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” Intermediate CA ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </p>
</li>
<li>
<p>Cluster Peering ê¸°ë°˜ Service Failover í¬í•¨ Mesh Traffic Management ê¸°ëŠ¥ ê°œì„ </p>
</li>
<li>
<p>Windows ì— ëŒ€í•œ Service Mesh ì§€ì›</p>
</li>
<li>
<p>AWS Lambda ì— ëŒ€í•œ Service Mesh ì§€ì›</p>
</li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li>1.4.3
<ul>
<li>ìƒì„¸ <a href="https://github.com/hashicorp/nomad/blob/main/CHANGELOG.md#143-november-21-2022" target="_blank" rel="noopener noreferrer">CHANGELOG</a></li>
<li>ë™ì¼ Job ì— ëŒ€í•´ ì—¬ëŸ¬ evaluation ì´ pending ë˜ì–´ ìˆëŠ” ê²½ìš°, ê°€ì¥ ìµœê·¼ ì„±ê³µí•œ evaluation ì— ëŒ€í•´ì„œë§Œ ë°˜ì˜</li>
<li>File Upload, Consul Upstream ì„¤ì • ë“± UI ê°œì„ </li>
<li>Consul ì—°ë™ ì‹œ gRPC fingerprint ê´€ë ¨ ë°œìƒ ì˜¤ë¥˜ ê°œì„  (Consul 1.14 ì—°ë™ë¶€í„° ì ìš©)</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>2022ë…„ 12ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/99-2022/2022-12.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/99-2022/2022-12.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2022ë…„ 12ì›”</source>
      <description>2022ë…„ 12ì›” Update</description>
      <pubDate>Wed, 07 Dec 2022 02:56:03 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>Terraform Run Tasks in Public Registry</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/run-tasks-are-now-available-in-the-terraform-registry" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>í™œë°œí•˜ê²Œ í™œìš©ë˜ê³  ìˆëŠ” Terraform Run Tasks (3rd party ì—°ë™ ë° í†µí•©) ê¸°ëŠ¥ì´ ê°•í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ <a href="https://registry.terraform.io/" target="_blank" rel="noopener noreferrer">Terraform Public Registry</a> ì—ì„œ Run Tasks ë¥¼ ê²€ìƒ‰í•˜ì—¬ í•„ìš”í•œ 3rd party service ì™€ ì—°ë™í•˜ì—¬ ìì› ê´€ë¦¬ì— í•„ìš”í•œ Cost Management, Policy Compliance ì™€ ê°™ì€ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ì ìš©í•˜ì—¬ ë³´ë‹¤ íš¨ìœ¨ì ì¸ ìì› ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>
<p>Terraform</p>
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.3.5" target="_blank" rel="noopener noreferrer">1.35 Release</a>
<ul>
<li>Size í™•ì¸ ë¶ˆê°€í•œ Temp File ì— ëŒ€í•œ ì²˜ë¦¬ ì˜¤ë¥˜ ê°œì„ </li>
<li>Empty ë° Null Collection ì— ëŒ€í•œ ì²˜ë¦¬ ì˜¤ë¥˜ ê°œì„ </li>
<li>Optional object ì— ëŒ€í•¸ ì²˜ë¦¬ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases/2022/v202211-1" target="_blank" rel="noopener noreferrer">11ì›” Release</a> ì¶œì‹œ (v202211-1)</li>
<li>í•„ìˆ˜ Upgrade Version: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2, v202204-2)</li>
<li>2023ë…„ 2ì›” Release (v202302-1) ì„ ê¸°ì ìœ¼ë¡œ êµ¬ë²„ì „ OS ë° Postrgres DB ì— ëŒ€í•œ ì§€ì› ì¢…ë£Œ
<ul>
<li>
<p>ëŒ€ìƒ OS</p>
<ul>
<li>
<p>Debian 8, 9</p>
</li>
<li>
<p>Ubuntu 14.04, 16.04</p>
</li>
<li>
<p>Amazon Linux 2014.03, 2014.09, 2015.03, 2015.09, 2016.03, 2016.09, 2017.03, 2017.09, 2018.03</p>
</li>
</ul>
</li>
<li>
<p>ëŒ€ìƒ Postgres</p>
<ul>
<li>Postgres 11</li>
<li>TFE ì— ëŒ€í•´ External PostgresSQL ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìµœì†Œ ë²„ì „ 12 ì´ìƒìœ¼ë¡œ Upgrade í•„ìš” (Release 659 ë¶€í„° ì ìš©)</li>
</ul>
</li>
</ul>
</li>
<li>Workspaces API ê´€ë ¨ workspace ì‚­ì œ ê¸°ëŠ¥ì„ safe / force ë¡œ ì„¸ë¶„í™”</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v4.41.0" target="_blank" rel="noopener noreferrer">AWS v4.41.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>aws_rds_clusters resource ì¶”ê°€</li>
<li>aws_nat_gateway ì— ëŒ€í•´ private_ip ì„¤ì • ì§€ì›</li>
<li>aws_resourcegroups_group ì— ëŒ€í•´ configuration.parameters ì„¤ì •ì„ optional ë¡œ ë³€ê²½</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.33.0" target="_blank" rel="noopener noreferrer">Azure v3.33.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>azurerm_mssql_managed_instance_transparent_data_encryption resource ì¶”ê°€</li>
<li>azurerm_mssql_managed_instance ì— ëŒ€í•´ customer_managed_key_id ì™€ user-assigned identity ì„¤ì • ì§€ì›</li>
<li>azurerm_mysql_flexible_server ì— ëŒ€í•´ iops ì„¤ì • ì˜¤ë¥˜ ê°œì„ </li>
<li>azurerm_storage_account ì— ëŒ€í•´ multichannel checking ê³¼ì • ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.44.1" target="_blank" rel="noopener noreferrer">GCP v4.41.1 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>google_compute_instance_template ì— ëŒ€í•´ advanced_machine_features ì„¤ì •ìœ¼ë¡œ ì¸í•œ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Vault</p>
<ul>
<li><a href="https://github.com/hashicorp/vault/releases/tag/v1.12.1" target="_blank" rel="noopener noreferrer">1.12.1 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>DB Secret Enging - Snowflake ì— ëŒ€í•´ ë³‘ë ¬ ìš”ì²­ í—ˆìš©</li>
<li>SDK/LDAP ì— ëŒ€í•´ group filter ì‚¬ìš© ì‹œ paging ì§€ì›</li>
<li>MFA (Multi Factor Authentication) ìˆ˜í–‰ ì‹œ ë°œìƒ ê°€ëŠ¥í•œ namespace ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>Vault Agent ê°€ Certificate Template ë Œë”ë§ í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒ ê°€ëŠ¥í•œ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>
<p>Consul</p>
<ul>
<li>
<p><a href="https://www.hashicorp.com/blog/consul-1-14-ga-announcing-simplified-service-mesh-deployments" target="_blank" rel="noopener noreferrer">1.14</a></p>
<ul>
<li>
<p>ìƒì„¸ <a href="https://github.com/hashicorp/consul/blob/main/CHANGELOG.md#1140-november-15-2022" target="_blank" rel="noopener noreferrer">CHANGELOG</a></p>
</li>
<li>
<p>Consul Client on K8S ì— ëŒ€í•œ êµ¬ì¡°ë³€í™”: Daemonset ì—ì„œ Sidecar ë°©ì‹ìœ¼ë¡œ ë³€ê²½</p>
</li>
<li>
<p>Cluster Peering ê¸°ë°˜ Service Failover í¬í•¨ Mesh Traffic Management ê¸°ëŠ¥ ê°œì„ </p>
</li>
<li>
<p>Windows ì— ëŒ€í•œ Service Mesh ì§€ì›</p>
</li>
<li>
<p>AWS Lambda ì— ëŒ€í•œ Service Mesh ì§€ì›</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Nomad</p>
<ul>
<li><a href="https://github.com/hashicorp/nomad/releases/tag/v1.4.3" target="_blank" rel="noopener noreferrer">1.4.3 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ë™ì¼ Job ì— ëŒ€í•´ ì—¬ëŸ¬ evaluation ì´ pending ë˜ì–´ ìˆëŠ” ê²½ìš°, ê°€ì¥ ìµœê·¼ ì„±ê³µí•œ evaluation ì— ëŒ€í•´ì„œë§Œ ë°˜ì˜</li>
<li>File Upload, Consul Upstream ì„¤ì • ë“± UI ê°œì„ </li>
<li>Consul ì—°ë™ ì‹œ gRPC fingerprint ê´€ë ¨ ë°œìƒ ì˜¤ë¥˜ ê°œì„  (Consul 1.14 ì—°ë™ë¶€í„° ì ìš©)</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>code-server</title>
      <link>https://docmoa.github.io/04-HashiCorp/07-Nomad/05-SampleJob/code-server.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/07-Nomad/05-SampleJob/code-server.html</guid>
      <source url="https://docmoa.github.io/rss.xml">code-server</source>
      <description>Nomad Sample</description>
      <pubDate>Wed, 23 Nov 2022 05:36:04 GMT</pubDate>
      <content:encoded><![CDATA[
<ul>
<li>vs-codeë¥¼ localì´ ì•„ë‹Œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” code-serverì˜ ì˜ˆì‹œì…ë‹ˆë‹¤.</li>
<li>ì´ codeì˜ ë³€ìˆ˜ëŠ” nomad variableë¥¼ í™œìš©í•´ì„œ ë°°í¬í•©ë‹ˆë‹¤.</li>
</ul>
<h2>ë³€ìˆ˜ ì„ ì–¸</h2>
<ul>
<li>web ui ì ‘ê·¼ passwordì™€ code-server terminalì—ì„œ ì‚¬ìš© í•  sudoì˜ password ë¥¼ ë³€ìˆ˜ë¡œ ì„ ì–¸í–ˆìŠµë‹ˆë‹¤.</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># nomad var put {pathê¸°ë°˜ì˜ varialbes} key=vaule</span></span>
<span class="line">$ nomad var put code/config <span class="token assign-left variable">password</span><span class="token operator">=</span>password</span>
<span class="line"></span></code></pre></div><h2>job sample</h2>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line">job <span class="token string">"010-code-server"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">datacenters</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"dc1"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">type</span>        <span class="token punctuation">=</span> <span class="token string">"service"</span></span>
<span class="line"></span>
<span class="line">  group <span class="token string">"code-server"</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">count</span> <span class="token punctuation">=</span> <span class="token number">1</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">network</span> <span class="token punctuation">{</span></span>
<span class="line">      port <span class="token string">"http"</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">to</span> <span class="token punctuation">=</span> <span class="token number">8443</span></span>
<span class="line">        <span class="token property">static</span> <span class="token punctuation">=</span> <span class="token number">8443</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">service</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"code-server"</span></span>
<span class="line">      <span class="token property">port</span> <span class="token punctuation">=</span> <span class="token string">"http"</span></span>
<span class="line">      <span class="token property">provider</span> <span class="token punctuation">=</span> <span class="token string">"nomad"</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">check</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">type</span>     <span class="token punctuation">=</span> <span class="token string">"http"</span></span>
<span class="line">        <span class="token property">path</span>     <span class="token punctuation">=</span> <span class="token string">"/"</span></span>
<span class="line">        <span class="token property">interval</span> <span class="token punctuation">=</span> <span class="token string">"2s"</span></span>
<span class="line">        <span class="token property">timeout</span>  <span class="token punctuation">=</span> <span class="token string">"30s"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    task <span class="token string">"code-server-runner"</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">driver</span> <span class="token punctuation">=</span> <span class="token string">"docker"</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">template</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;EOH</span>
<span class="line">{{ with nomadVar "code/config" }}</span>
<span class="line">PASSWORD={{ .password }}</span>
<span class="line">SUDO_PASSWORD={{ .password }}</span>
<span class="line">{{ end }}</span>
<span class="line">EOH</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">destination</span> <span class="token punctuation">=</span> <span class="token string">"secrets/file.env"</span></span>
<span class="line">  <span class="token property">env</span>         <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">config</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">image</span> <span class="token punctuation">=</span> <span class="token string">"linuxserver/code-server"</span></span>
<span class="line">        <span class="token property">ports</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"http"</span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">env</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">PGID</span><span class="token punctuation">=</span><span class="token number">1000</span></span>
<span class="line">        <span class="token property">PUID</span><span class="token punctuation">=</span><span class="token number">1000</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">resources</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">cpu</span>    <span class="token punctuation">=</span> <span class="token number">1000</span></span>
<span class="line">        <span class="token property">memory</span> <span class="token punctuation">=</span> <span class="token number">900</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Sentinel - (Identity &amp; CIDR)</title>
      <link>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/sentinel-check-identity-cidr.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/06-Vault/04-UseCase/sentinel-check-identity-cidr.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Sentinel - (Identity &amp; CIDR)</source>
      <description>Sentinelì„ ì‚¬ìš©í•˜ì—¬ identity ì¡°ê±´ì— cidr ê²€ì‚¬</description>
      <pubDate>Wed, 16 Nov 2022 02:54:07 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Enterprise ê¸°ëŠ¥</p>
</blockquote>
<p>Token Roleì— <code>bound_cidr</code>ì„ ì ìš©í•˜ê±°ë‚˜ ì—¬íƒ€ ì¸ì¦(AppRole, Userpass ë“±)ì— í—ˆìš©í•˜ëŠ” cidrì„ ì ìš©í•˜ëŠ” ê²½ìš° ë‹¤ì‹œ Tokenì„ ë°œê¸‰í•˜ê±°ë‚˜ ì¸ì¦ë°›ì§€ ì•ŠëŠ”í•œì€ cidrì„ ê¸°ë°˜ìœ¼ë¡œí•œ ì°¨ë‹¨ì„ ë™ì ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ì—†ë‹¤.</p>
<p>ì´ê²½ìš° Sentinelì„ ì‚¬ìš©í•˜ì—¬ ë™ì ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤. Sentinelì€ ACLë°©ì‹ì˜ ê¸°ì¡´ <code>Policy</code>ì™€ëŠ” ë‹¬ë¦¬ Pathê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê²€ì¦ ì¡°ê±´ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li>
<p>ì˜ˆì œ (GitHub) : <a href="https://github.com/hashicorp/vault-guides/blob/master/governance/sentinel/README.md" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/vault-guides/blob/master/governance/sentinel/README.md</a></p>
</li>
<li>
<p>ì—”í„°í”„ë¼ì´ì¦ˆ Trial ì‹ ì²­ (30ì¼) : <a href="https://www.hashicorp.com/products/vault/trial" target="_blank" rel="noopener noreferrer">https://www.hashicorp.com/products/vault/trial</a></p>
</li>
</ul>
<h2>í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ìƒì„±</h2>
<p>Sentinel ì ìš©ì„ í™•ì¸í•˜ê¸° ìœ„í•´ ëª¨ë“  ê¶Œí•œì´ ìˆëŠ” ê¸°ì¡´ <code>Policy</code> ë°©ì‹ì˜ ì •ì±…ì„ ìƒì„±í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault policy <span class="token function">write</span> super-user - <span class="token operator">&lt;&lt;</span> <span class="token string">EOF</span>
<span class="line">path "*" {</span>
<span class="line">capabilities = ["create", "read", "update", "delete", "list", "sudo"]</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre></div><p>ìƒì„±í•œ ì •ì±…ê³  ì•ìœ¼ë¡œ ìƒì„±í•  Sentinel ì •ì±…ì´ í¬í•¨ëœ ì‚¬ìš©ìë¥¼ ìƒì„±í•œë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">vault <span class="token function">write</span> auth/userpass/users/admin <span class="token assign-left variable">password</span><span class="token operator">=</span>password <span class="token assign-left variable">policies</span><span class="token operator">=</span><span class="token string">"super-user, test-rgp"</span></span>
<span class="line">vault <span class="token function">write</span> auth/userpass/users/rgp <span class="token assign-left variable">password</span><span class="token operator">=</span>password <span class="token assign-left variable">policies</span><span class="token operator">=</span><span class="token string">"super-user, test-rgp"</span></span>
<span class="line"></span></code></pre></div><p><code>admin</code>ê³¼ <code>rgp</code> ì‚¬ìš©ì ëª¨ë‘ ë™ì¼í•œ ì •ì±…ì„ ë¶€ì—¬ ë°›ì•˜ë‹¤. Sentinelì—ì„œëŠ” <code>identity</code> ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¡°ê±´ì„ ë¶€ì—¬í•  ìˆ˜ ìˆìœ¼ë©°, ë™ì¼í•œ ì •ì±…ì´ ë¶€ì—¬ë˜ì—ˆë”ë¼ë„ ì–´ë–¤ <code>identity</code> ì¸ê°€ì— ë”°ë¼ ì ìš© ì—¬ë¶€ë¥¼ ì„ íƒì ìœ¼ë¡œ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.</p>
<p>ê° ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸í•˜ì—¬ Token ì •ë³´ë¥¼ í™•ì¸í•˜ë©´ <code>entity_id</code> ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token assign-left variable">TOKEN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>vault login <span class="token parameter variable">-field</span><span class="token operator">=</span>token <span class="token parameter variable">-method</span> userpass <span class="token assign-left variable">username</span><span class="token operator">=</span>admin <span class="token assign-left variable">password</span><span class="token operator">=</span>password<span class="token variable">)</span></span></span>
<span class="line"></span>
<span class="line">$ vault token lookup <span class="token variable">$TOKEN</span></span>
<span class="line"></span>
<span class="line">Key                 Value</span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Jaegerë¥¼ í™œìš©í•œ Consul Service Mesh Tracing</title>
      <link>https://docmoa.github.io/04-HashiCorp/04-Consul/06-on_Kubernetes/tracing/jaeger_tracing.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/04-Consul/06-on_Kubernetes/tracing/jaeger_tracing.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Jaegerë¥¼ í™œìš©í•œ Consul Service Mesh Tracing</source>
      <description>K8S í™˜ê²½ì—ì„œ Jaegerë¥¼ í†µí•œ Consul Service Mesh Tracing</description>
      <pubDate>Sat, 12 Nov 2022 09:25:49 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>0. ì‚¬ì „ ìš”êµ¬ì‚¬í•­</h2>
<h3>1) Consul Install</h3>
<p>Jaeger ì—°ë™ì„ ìœ„í•´ Consul on K8s í™˜ê²½ì„ êµ¬ì„±í•©ë‹ˆë‹¤. í•´ë‹¹ ê°€ì´ë“œì˜ ê²½ìš°ì—ëŠ” <a href="">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.</p>
<h4>(1) ì‹œí¬ë¦¿ ìƒì„± - ë¼ì´ì„¼ìŠ¤</h4>
<ul>
<li>ë¼ì´ì„¼ìŠ¤ íŒŒì¼ ìƒì„± ë° ì‹œí¬ë¦¿ ìƒì„±</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># licenseíŒŒì¼ ìƒì„±</span></span>
<span class="line"><span class="token function">vi</span> consul.lic</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ìƒì„±í•œ licenseíŒŒì¼ë¡œ secret ìƒì„±</span></span>
<span class="line">kubectl create secret generic license --from-file<span class="token operator">=</span><span class="token string">'key=./consul.lic'</span></span>
<span class="line"></span></code></pre></div><h4>(2)  ì‹œí¬ë¦¿ ìƒì„± - Gossip Key</h4>
<ul>
<li>consul-gossip-encryption-key ì‹œí¬ë¦¿ ìƒì„±</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token assign-left variable">GOSSIP_KEY</span><span class="token operator">=</span><span class="token string">"VeQ8CHV3sDY/bHCseXC7PGXNTSXtWWvOzQKAaFFo9oE="</span></span>
<span class="line">kubectl patch secret consul-gossip-encryption-key <span class="token parameter variable">-n</span> consul <span class="token parameter variable">--patch</span><span class="token operator">=</span><span class="token string">'{"stringData":{"key": "$GOSSIP_KEY"}}'</span></span>
<span class="line"></span></code></pre></div><h4>(3) Consul Helm ë°°í¬</h4>
<p><code>values.yaml</code> íŒŒì¼ ìˆ˜ì • ë° ë°°í¬í•©ë‹ˆë‹¤.</p>
<ul>
<li><code>values.yaml</code> íŒŒì¼ ì˜ˆì‹œ</li>
</ul>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">global</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> consul</span>
<span class="line">  <span class="token key atrule">datacenter</span><span class="token punctuation">:</span> dc1</span>
<span class="line">  <span class="token key atrule">logLevel</span><span class="token punctuation">:</span> <span class="token string">"debug"</span></span>
<span class="line">  <span class="token key atrule">logJSON</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> hashicorp/consul<span class="token punctuation">-</span>enterprise<span class="token punctuation">:</span>1.12.3<span class="token punctuation">-</span>ent</span>
<span class="line">  <span class="token key atrule">gossipEncryption</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">autoGenerate</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">tls</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">    <span class="token key atrule">enableAutoEncrypt</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">    <span class="token key atrule">verify</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">    <span class="token key atrule">httpsOnly</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  <span class="token key atrule">imageEnvoy</span><span class="token punctuation">:</span> envoyproxy/envoy<span class="token punctuation">:</span>v1.22<span class="token punctuation">-</span>latest</span>
<span class="line">  <span class="token key atrule">enterpriseLicense</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">secretName</span><span class="token punctuation">:</span> license</span>
<span class="line">    <span class="token key atrule">secretKey</span><span class="token punctuation">:</span> key</span>
<span class="line"><span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span></span>
<span class="line"><span class="token key atrule">client</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">exposeGossipPorts</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">extraConfig</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span>
<span class="line">    {</span>
<span class="line">      "log_level": "debug"</span>
<span class="line">    }</span></span>
<span class="line">  <span class="token key atrule">grpc</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"><span class="token key atrule">ui</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">service</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer</span>
<span class="line"><span class="token key atrule">connectInject</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"><span class="token key atrule">controller</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token comment">#terminatingGateways:</span></span>
<span class="line">  <span class="token comment">#enabled: true</span></span>
<span class="line">  <span class="token comment">#apiGateway:</span></span>
<span class="line">  <span class="token comment">#enabled: true</span></span>
<span class="line">  <span class="token comment">#image: "hashicorp/consul-api-gateway:latest"</span></span>
<span class="line"><span class="token key atrule">ingressGateways</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">gateways</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>gateway</span>
<span class="line">    <span class="token key atrule">service</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer</span>
<span class="line">      <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5000</span></span>
<span class="line"></span></code></pre></div><h2><a class="header-anchor" href="#_1-cert-manager-á„‰á…¥á†¯á„á…µ"><span></span></a><a href="https://cert-manager.io/docs/installation/" target="_blank" rel="noopener noreferrer">1. Cert-Manager ì„¤ì¹˜</a></h2>
<p>Jaegerë¥¼ ì„¤ì¹˜í•  ë•Œ cert-manager ì„¤ì¹˜ê°€ í•„ìˆ˜ì ìœ¼ë¡œ ìš”êµ¬ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Since version 1.31 the Jaeger Operator uses webhooks to validate Jaeger custom resources (CRs). This requires an installed version of the cert-manager.</p>
</blockquote>
<ul>
<li><a href="https://cert-manager.io/docs/installation/#default-static-install" target="_blank" rel="noopener noreferrer">Yaml ë°°í¬</a></li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl apply <span class="token parameter variable">-f</span> https://github.com/cert-manager/cert-manager/releases/download/v1.9.1/cert-manager.yaml</span>
<span class="line"></span></code></pre></div><ul>
<li>cert-manager íŒŒë“œ ë°°í¬í™•ì¸</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl get pods <span class="token parameter variable">-n</span> cert-manager</span>
<span class="line">NAME                                       READY   STATUS    RESTARTS   AGE</span>
<span class="line">cert-manager-6544c44c6b-z76nd              <span class="token number">1</span>/1     Running   <span class="token number">0</span>          25s</span>
<span class="line">cert-manager-cainjector-5687864d5f-pdzbn   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          25s</span>
<span class="line">cert-manager-webhook-785bb86798-v6phx      <span class="token number">1</span>/1     Running   <span class="token number">0</span>          25s</span>
<span class="line"></span></code></pre></div><h2><a class="header-anchor" href="#_2-jaeger-á„‰á…¥á†¯á„á…µ"><span></span></a><a href="https://www.jaegertracing.io/docs/1.37/operator/" target="_blank" rel="noopener noreferrer">2. Jaeger ì„¤ì¹˜</a></h2>
<p>Tracingì„ ìœ„í•´ Jaeger ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ K8s í™˜ê²½ì— Jaeger Operatorë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>
<h3>(1) Role Binding ë°°í¬(ì„ íƒ)</h3>
<blockquote>
<p>ğŸ’¡ì°¸ê³  : ë™ì¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë°°í¬í•  ê²½ìš° í•´ë‹¹ ê³¼ì •ì€ ìƒëµ!</p>
</blockquote>
<ul>
<li>YAML ìƒì„± : <code>consul-jaeger</code> RoleBinding ìƒì„±</li>
</ul>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token comment"># role-binding.yaml</span></span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> RoleBinding</span>
<span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> jaeger<span class="token punctuation">-</span>operator<span class="token punctuation">-</span>in<span class="token punctuation">-</span>myproject</span>
<span class="line">  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> consul<span class="token punctuation">-</span>jaeger</span>
<span class="line"><span class="token key atrule">subjects</span><span class="token punctuation">:</span></span>
<span class="line"><span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount</span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> jaeger<span class="token punctuation">-</span>operator</span>
<span class="line">  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> observability</span>
<span class="line"><span class="token key atrule">roleRef</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Role</span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> jaeger<span class="token punctuation">-</span>operator</span>
<span class="line">  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io</span>
<span class="line"></span></code></pre></div><ul>
<li>YAML ë°°í¬</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl apply <span class="token parameter variable">-f</span> role-binding.yaml</span>
<span class="line"></span></code></pre></div><h3>(2) Jaeger Operator ë°°í¬(CRD ì„¤ì¹˜)</h3>
<p>Jaeger Operatorë¥¼ ë°°í¬í•˜ê¸° ìœ„í•œ <code>observbility</code> ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ë•Œ, ë³„ë„ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë°°í¬í•  ê²½ìš°ì—ëŠ” ë‹¤ìš´ë°›ì€ <code>.yaml</code>ì— ì„¤ì €ëœ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëª…ì„ ë³€ê²½í•˜ì…”ì•¼ í•©ë‹ˆë‹¤. <a href="https://www.jaegertracing.io/docs/1.39/operator/#installing-the-operator-on-kubernetes" target="_blank" rel="noopener noreferrer">ì°¸ê³ </a></p>
<ul>
<li>ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„± ë° ê°ì¢… ë¦¬ì†ŒìŠ¤ ë°°í¬</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl create namespace observability</span>
<span class="line">kubectl create <span class="token parameter variable">-f</span> https://github.com/jaegertracing/jaeger-operator/releases/download/v1.37.0/jaeger-operator.yaml <span class="token parameter variable">-n</span> observability</span>
<span class="line"></span></code></pre></div><ul>
<li>ë°°í¬ëœ <code>jaeger-operator</code> í™•ì¸</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl get deployment jaeger-operator <span class="token parameter variable">-n</span> observability </span>
<span class="line">NAME              READY   UP-TO-DATE   AVAILABLE   AGE</span>
<span class="line">jaeger-operator   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           2m30s</span>
<span class="line"></span></code></pre></div><h3>(3) Jaeger CR ë°°í¬ - AllInOne</h3>
<p>ì‹¤ì œ K8s í™˜ê²½ì—ì„œ <code>Jaeger</code>ë¦¬ì†ŒìŠ¤ ìƒì„±ì„ ìœ„í•´ ë‹¤ìŒ <code>.yaml</code> íŒŒì¼ì„ ë°°í¬í•©ë‹ˆë‹¤. ë³¸ ë¬¸ì„œì—ì„œëŠ” í¸ì˜ìƒ <code>AllInOne</code> ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°í¬í•©ë‹ˆë‹¤.</p>
<p><code>AllInOne</code> ì´ë¯¸ì§€ëŠ” í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ì í•©í•˜ì§€ ì•Šìœ¼ë©°, Dev ë˜ëŠ” Test ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. <a href="https://www.jaegertracing.io/docs/1.37/operator/#allinone-default-strategy" target="_blank" rel="noopener noreferrer">(ë°°í¬ì „ëµ ì°¸ê³ )</a></p>
<blockquote>
<p>The simplest possible way to create a Jaeger instance is by creating a YAML file like the following example. This will install the default AllInOne strategy, which deploys the â€œall-in-oneâ€ image (agent, collector, query, ingester, Jaeger UI) in a single pod, using in-memory storage by default.</p>
</blockquote>
<ul>
<li>YAML ìƒì„±</li>
</ul>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token comment"># simplest.yaml</span></span>
<span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> jaegertracing.io/v1</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Jaeger</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> simplest</span>
<span class="line">  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> observability</span>
<span class="line"></span></code></pre></div><ul>
<li>(ì°¸ê³ ) <a href="https://www.jaegertracing.io/docs/1.39/operator/#examples" target="_blank" rel="noopener noreferrer">Log Level ì¡°ì •</a></li>
</ul>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token comment"># simplest-debug.yaml</span></span>
<span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> jaegertracing.io/v1</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Jaeger</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> simplest</span>
<span class="line">  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> observability</span>
<span class="line"><span class="token key atrule">spec</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">strategy</span><span class="token punctuation">:</span> allInOne</span>
<span class="line">  <span class="token key atrule">allInOne</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> jaegertracing/all<span class="token punctuation">-</span>in<span class="token punctuation">-</span>one<span class="token punctuation">:</span>latest</span>
<span class="line">    <span class="token key atrule">options</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">log-level</span><span class="token punctuation">:</span> debug</span>
<span class="line"></span></code></pre></div><ul>
<li>YAML ë°°í¬</li>
</ul>
<div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">kubectl apply -f simplest.yaml</span>
<span class="line"></span></code></pre></div><ul>
<li>ë°°í¬ ë¡œê·¸ í™•ì¸
<ul>
<li><code>{"level":"info","ts":1661997111.1498919,"caller":"healthcheck/handler.go:129","msg":"Health Check state change","status":"ready"}</code> ë¡œê·¸ë¥¼ í†µí•´ì„œ ì •ìƒì ì¸ ìƒíƒœ í™•ì¸ë¨</li>
</ul>
</li>
</ul>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">kubectl logs <span class="token parameter variable">-l</span> app.kubernetes.io/instance<span class="token operator">=</span>simplest <span class="token parameter variable">-n</span> consul-jaeger</span>
<span class="line"><span class="token punctuation">{</span><span class="token string">"level"</span><span class="token builtin class-name">:</span><span class="token string">"info"</span>,<span class="token string">"ts"</span>:1661997111.149404,<span class="token string">"caller"</span><span class="token builtin class-name">:</span><span class="token string">"channelz/funcs.go:340"</span>,<span class="token string">"msg"</span><span class="token builtin class-name">:</span><span class="token string">"[core][Channel #10] Channel Connectivity change to TRANSIENT_FAILURE"</span>,<span class="token string">"system"</span><span class="token builtin class-name">:</span><span class="token string">"grpc"</span>,<span class="token string">"grpc_log"</span>:true<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string">"level"</span><span class="token builtin class-name">:</span><span class="token string">"info"</span>,<span class="token string">"ts"</span>:1661997111.1495373,<span class="token string">"caller"</span><span class="token builtin class-name">:</span><span class="token string">"app/static_handler.go:181"</span>,<span class="token string">"msg"</span><span class="token builtin class-name">:</span><span class="token string">"UI config path not provided, config file will not be watched"</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string">"level"</span><span class="token builtin class-name">:</span><span class="token string">"info"</span>,<span class="token string">"ts"</span>:1661997111.149864,<span class="token string">"caller"</span><span class="token builtin class-name">:</span><span class="token string">"app/server.go:217"</span>,<span class="token string">"msg"</span><span class="token builtin class-name">:</span><span class="token string">"Query server started"</span>,<span class="token string">"http_addr"</span><span class="token builtin class-name">:</span><span class="token string">"[::]:16686"</span>,<span class="token string">"grpc_addr"</span><span class="token builtin class-name">:</span><span class="token string">"[::]:16685"</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string">"level"</span><span class="token builtin class-name">:</span><span class="token string">"info"</span>,<span class="token string">"ts"</span>:1661997111.1498919,<span class="token string">"caller"</span><span class="token builtin class-name">:</span><span class="token string">"healthcheck/handler.go:129"</span>,<span class="token string">"msg"</span><span class="token builtin class-name">:</span><span class="token string">"Health Check state change"</span>,<span class="token string">"status"</span><span class="token builtin class-name">:</span><span class="token string">"ready"</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string">"level"</span><span class="token builtin class-name">:</span><span class="token string">"info"</span>,<span class="token string">"ts"</span>:1661997111.149912,<span class="token string">"caller"</span><span class="token builtin class-name">:</span><span class="token string">"app/server.go:300"</span>,<span class="token string">"msg"</span><span class="token builtin class-name">:</span><span class="token string">"Starting GRPC server"</span>,<span class="token string">"port"</span>:16685,<span class="token string">"addr"</span><span class="token builtin class-name">:</span><span class="token string">":16685"</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string">"level"</span><span class="token builtin class-name">:</span><span class="token string">"info"</span>,<span class="token string">"ts"</span>:1661997111.1499252,<span class="token string">"caller"</span><span class="token builtin class-name">:</span><span class="token string">"channelz/funcs.go:340"</span>,<span class="token string">"msg"</span><span class="token builtin class-name">:</span><span class="token string">"[core][Server #9 ListenSocket #12] ListenSocket created"</span>,<span class="token string">"system"</span><span class="token builtin class-name">:</span><span class="token string">"grpc"</span>,<span class="token string">"grpc_log"</span>:true<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string">"level"</span><span class="token builtin class-name">:</span><span class="token string">"info"</span>,<span class="token string">"ts"</span>:1661997111.1499453,<span class="token string">"caller"</span><span class="token builtin class-name">:</span><span class="token string">"app/server.go:281"</span>,<span class="token string">"msg"</span><span class="token builtin class-name">:</span><span class="token string">"Starting HTTP server"</span>,<span class="token string">"port"</span>:16686,<span class="token string">"addr"</span><span class="token builtin class-name">:</span><span class="token string">":16686"</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string">"level"</span><span class="token builtin class-name">:</span><span class="token string">"info"</span>,<span class="token string">"ts"</span>:1661997112.150468,<span class="token string">"caller"</span><span class="token builtin class-name">:</span><span class="token string">"channelz/funcs.go:340"</span>,<span class="token string">"msg"</span><span class="token builtin class-name">:</span><span class="token string">"[core][Channel #10 SubChannel #11] Subchannel Connectivity change to IDLE"</span>,<span class="token string">"system"</span><span class="token builtin class-name">:</span><span class="token string">"grpc"</span>,<span class="token string">"grpc_log"</span>:true<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string">"level"</span><span class="token builtin class-name">:</span><span class="token string">"info"</span>,<span class="token string">"ts"</span>:1661997112.1505697,<span class="token string">"caller"</span><span class="token builtin class-name">:</span><span class="token string">"grpclog/component.go:71"</span>,<span class="token string">"msg"</span><span class="token builtin class-name">:</span><span class="token string">"[core]pickfirstBalancer: UpdateSubConnState: 0xc00082a700, {IDLE connection error: desc = <span class="token entity" title="\&quot;">\"</span>transport: Error while dialing dial tcp :16685: connect: connection refused<span class="token entity" title="\&quot;">\"</span>}"</span>,<span class="token string">"system"</span><span class="token builtin class-name">:</span><span class="token string">"grpc"</span>,<span class="token string">"grpc_log"</span>:true<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string">"level"</span><span class="token builtin class-name">:</span><span class="token string">"info"</span>,<span class="token string">"ts"</span>:1661997112.1505857,<span class="token string">"caller"</span><span class="token builtin class-name">:</span><span class="token string">"channelz/funcs.go:340"</span>,<span class="token string">"msg"</span><span class="token builtin class-name">:</span><span class="token string">"[core][Channel #10] Channel Connectivity change to IDLE"</span>,<span class="token string">"system"</span><span class="token builtin class-name">:</span><span class="token string">"grpc"</span>,<span class="token string">"grpc_log"</span>:true<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>(4) (ì„ íƒ) Jaeger Sidecar ë°°í¬ ë°©ì‹</h3>
<p>Jaeger Auto Injection ë° Manaul Injection í™œìš©ë°©ì•ˆì„ ê°€ì´ë“œí•©ë‹ˆë‹¤. (3)ì—ì„œ <code>Jaeger</code>ë¦¬ì†ŒìŠ¤ë¥¼ ì§ì ‘ ë°°í¬í–ˆë‹¤ë©´ ìƒëµí•˜ì…”ë„ ë©ë‹ˆë‹¤.</p>
<h4>ë°©ì•ˆ1. CRD ë°°í¬</h4>
<p>í•´ë‹¹ ë°©ì•ˆì€ 3)-(3)ì—ì„œ  ì‘ì„±í•œ ë°©ì‹ìœ¼ë¡œ, ê´€ë¦¬ë˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ tracingì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
<h4>ë°©ì•ˆ2. Auto Injection - annotation í™œìš©</h4>
<p>í•´ë‹¹ ë°©ì•ˆì€ annotation ì ˆì—   <code>"sidecar.jaegertracing.io/inject": "true"</code> ë¥¼ ê¸°ì…í•˜ì—¬ tracing í•˜ê³ ì í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— sidecar auto-injectionì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
<ul>
<li>tracing í•  ì• í”Œë¦¬ì¼€ì´ì…˜ deployment yamlì˜ annotation ìœ„ì¹˜</li>
</ul>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> web<span class="token punctuation">-</span>deployment</span>
<span class="line">  <span class="token key atrule">labels</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">app</span><span class="token punctuation">:</span> web</span>
<span class="line">  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> observability</span>
<span class="line">  <span class="token key atrule">annotations</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">"sidecar.jaegertracing.io/inject"</span><span class="token punctuation">:</span> <span class="token string">'true'</span></span>
<span class="line"></span></code></pre></div><h4>ë°©ì•ˆ3. Manual Injectio</h4>
<p>tracing í•˜ê³ ì í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì§ì ‘ sidecarë¥¼ ë¶™í˜€ tracing í•©ë‹ˆë‹¤.</p>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> jaeger<span class="token punctuation">-</span>agent</span>
<span class="line">        <span class="token key atrule">image</span><span class="token punctuation">:</span> jaegertracing/jaeger<span class="token punctuation">-</span>agent<span class="token punctuation">:</span>latest</span>
<span class="line">        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent</span>
<span class="line">        <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">5775</span></span>
<span class="line">            <span class="token key atrule">name</span><span class="token punctuation">:</span> zk<span class="token punctuation">-</span>compact<span class="token punctuation">-</span>trft</span>
<span class="line">            <span class="token key atrule">protocol</span><span class="token punctuation">:</span> UDP</span>
<span class="line">          <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">5778</span></span>
<span class="line">            <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>rest</span>
<span class="line">            <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP</span>
<span class="line">          <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">6831</span></span>
<span class="line">            <span class="token key atrule">name</span><span class="token punctuation">:</span> jg<span class="token punctuation">-</span>compact<span class="token punctuation">-</span>trft</span>
<span class="line">            <span class="token key atrule">protocol</span><span class="token punctuation">:</span> UDP</span>
<span class="line">          <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">6832</span></span>
<span class="line">            <span class="token key atrule">name</span><span class="token punctuation">:</span> jg<span class="token punctuation">-</span>binary<span class="token punctuation">-</span>trft</span>
<span class="line">            <span class="token key atrule">protocol</span><span class="token punctuation">:</span> UDP</span>
<span class="line">          <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">14271</span></span>
<span class="line">            <span class="token key atrule">name</span><span class="token punctuation">:</span> admin<span class="token punctuation">-</span>http</span>
<span class="line">            <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP</span>
<span class="line">        <span class="token key atrule">args</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>reporter.grpc.host<span class="token punctuation">-</span>port=dns<span class="token punctuation">:</span>///simplest<span class="token punctuation">-</span>collector<span class="token punctuation">-</span>headless.observability<span class="token punctuation">:</span><span class="token number">14250</span></span>
<span class="line">          <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>reporter.type=grpc</span>
<span class="line"></span></code></pre></div><h3>(5) Jaeger UI ì ‘ì†</h3>
<p>ê¸°ë³¸ì ì„ Jaeger UIëŠ” <code>ClusterIP</code>ë¡œ ë°°í¬ë©ë‹ˆë‹¤. ì™¸ë¶€ì—ì„œ ì ‘ì†í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª‡ ê°€ì§€ ë°©ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤.</p>
<blockquote>
<p>ì°¸ê³  : ë³¸ ë¬¸ì„œì—ì„œëŠ” í¸ì˜ìƒ LoadBalancer íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ìƒ˜í”Œì„ ì œê³µí•©ë‹ˆë‹¤.</p>
</blockquote>
<ul>
<li>Ingress</li>
<li><strong>LoadBalancer</strong></li>
<li>Port-Forwarding</li>
</ul>
<p>ê¸°ë³¸ì ìœ¼ë¡œ Jaeager UIëŠ” 16686 Portë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í•„ìëŠ” í¸ìœìƒ <code>simplest-query</code> ì„œë¹„ìŠ¤ë¥¼ <code>LoadBalancer</code>íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ì¡°íšŒí•©ë‹ˆë‹¤.</p>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">spec</span><span class="token punctuation">:</span></span>
<span class="line">(ì¤‘ëµ)</span>
<span class="line">  <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> http<span class="token punctuation">-</span>query</span>
<span class="line">    <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">32731</span></span>
<span class="line">    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">16686</span></span>
<span class="line">    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP</span>
<span class="line">    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">16686</span></span>
<span class="line">  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> grpc<span class="token punctuation">-</span>query</span>
<span class="line">    <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">31322</span></span>
<span class="line">    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">16685</span></span>
<span class="line">    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP</span>
<span class="line">    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">16685</span></span>
<span class="line">  <span class="token key atrule">selector</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">app</span><span class="token punctuation">:</span> jaeger</span>
<span class="line">    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> all<span class="token punctuation">-</span>in<span class="token punctuation">-</span>one</span>
<span class="line">    <span class="token key atrule">app.kubernetes.io/instance</span><span class="token punctuation">:</span> simplest</span>
<span class="line">    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> jaeger<span class="token punctuation">-</span>operator</span>
<span class="line">    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> simplest</span>
<span class="line">    <span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation">:</span> jaeger</span>
<span class="line">  <span class="token key atrule">sessionAffinity</span><span class="token punctuation">:</span> None</span>
<span class="line">  <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer</span>
<span class="line"></span></code></pre></div><ul>
<li>Jaeger UI ì˜ˆì œ</li>
</ul>
<figure><figcaption>image-20221110190509279</figcaption></figure>
<h3>(ì°¸ê³ ) Jaegerì™€ ë‹¤ë¥¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì‚¬ìš©í•  ê²½ìš°</h3>
<h2><a class="header-anchor" href="#_3-consul-config-á„‰á…¥á†¯á„Œá…¥á†¼"><span></span></a><a href="https://developer.hashicorp.com/consul/docs/connect/distributed-tracing" target="_blank" rel="noopener noreferrer">3. Consul Config ì„¤ì •</a></h2>
<h3>(1)  Ingress Gateway</h3>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> consul.hashicorp.com/v1alpha1</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> IngressGateway</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>gateway</span>
<span class="line">  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> consul</span>
<span class="line"><span class="token key atrule">spec</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">listeners</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5000</span></span>
<span class="line">      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> http</span>
<span class="line">      <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> web</span>
<span class="line">          <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre></div><h3>(2) Service Defaults</h3>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> consul.hashicorp.com/v1alpha1</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceDefaults</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> web</span>
<span class="line"><span class="token key atrule">spec</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">protocol</span><span class="token punctuation">:</span> <span class="token string">"http"</span></span>
<span class="line"></span></code></pre></div><h3>(3) Proxy Defaults</h3>
<p><code>ProxyDefaults</code> ì„¤ì •ì„ í†µí•´ Collector ì„œë²„ì— ëŒ€í•œ ì£¼ì†Œ ë° Clustesr Nameì— ëŒ€í•´ ì„ ì–¸í•©ë‹ˆë‹¤.</p>
<div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> consul.hashicorp.com/v1alpha1</span>
<span class="line"><span class="token key atrule">kind</span><span class="token punctuation">:</span> ProxyDefaults</span>
<span class="line"><span class="token key atrule">metadata</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> global</span>
<span class="line">  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> consul</span>
<span class="line"><span class="token key atrule">spec</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> http</span>
<span class="line">    <span class="token key atrule">envoy_tracing_json</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span>
<span class="line">      {</span>
<span class="line">        "http":{</span>
<span class="line">          "name":"envoy.tracers.zipkin",</span>
<span class="line">          "typedConfig":{</span>
<span class="line">            "@type":"type.googleapis.com/envoy.config.trace.v3.ZipkinConfig",</span>
<span class="line">            "collector_cluster":"simplest-collector",</span>
<span class="line">            "collector_endpoint_version":"HTTP_JSON",</span>
<span class="line">            "collector_endpoint":"/api/v2/spans",</span>
<span class="line">            "shared_span_context":false</span>
<span class="line">          }</span>
<span class="line">        }</span>
<span class="line">      }</span></span>
<span class="line">    <span class="token key atrule">envoy_extra_static_clusters_json</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span>
<span class="line">      {</span>
<span class="line">        "connect_timeout":"3.000s",</span>
<span class="line">        "dns_lookup_family":"V4_ONLY",</span>
<span class="line">        "lb_policy":"ROUND_ROBIN",</span>
<span class="line">        "load_assignment":{</span>
<span class="line">          "cluster_name":"simplest-collector",</span>
<span class="line">          "endpoints":[</span>
<span class="line">            {</span>
<span class="line">              "lb_endpoints":[</span>
<span class="line">                {</span>
<span class="line">                  "endpoint":{</span>
<span class="line">                    "address":{</span>
<span class="line">                      "socket_address":{</span>
<span class="line">                        "address":"simplest-collector",</span>
<span class="line">                        "port_value":9411,</span>
<span class="line">                        "protocol":"TCP"</span>
<span class="line">                      }</span>
<span class="line">                    }</span>
<span class="line">                  }</span>
<span class="line">                }</span>
<span class="line">              ]</span>
<span class="line">            }</span>
<span class="line">          ]</span>
<span class="line">        },</span>
<span class="line">        "name":"simplest-collector",</span>
<span class="line">        "type":"STRICT_DNS"</span>
<span class="line">      }</span></span>
<span class="line"></span></code></pre></div><h3>99) ì°¸ê³ ë¬¸ì„œ</h3>
<ul>
<li>
<p>ingress gateway + tracing ê³ ë ¤ì‚¬í•­ : <a href="https://developer.hashicorp.com/consul/docs/connect/distributed-tracing#considerations" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/consul/docs/connect/distributed-tracing#considerations</a></p>
</li>
<li>
<p><a href="https://github.com/jaegertracing/jaeger-operator.git" target="_blank" rel="noopener noreferrer">https://github.com/jaegertracing/jaeger-operator.git</a></p>
</li>
<li>
<p>jaeger ë°°í¬ helm chart : <a href="https://git.app.uib.no/caleno/helm-charts/-/tree/597accc8e61dfb3a78f2e4f1b9622c8d3f32b4f2/stable/jaeger-operator/templates" target="_blank" rel="noopener noreferrer">https://git.app.uib.no/caleno/helm-charts/-/tree/597accc8e61dfb3a78f2e4f1b9622c8d3f32b4f2/stable/jaeger-operator/templates</a></p>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Jenkins(Java Driver) on Nomad</title>
      <link>https://docmoa.github.io/04-HashiCorp/07-Nomad/05-SampleJob/jenkins_java_driver.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/07-Nomad/05-SampleJob/jenkins_java_driver.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Jenkins(Java Driver) on Nomad</source>
      <description>Jenkins WAR íŒŒì¼ë¡œ ì‹¤í–‰í•˜ê¸°</description>
      <pubDate>Sun, 06 Nov 2022 11:50:40 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>Nomad</p>
<ul>
<li>Java Driver : <a href="https://developer.hashicorp.com/nomad/docs/drivers/java" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/nomad/docs/drivers/java</a></li>
<li>Schecuduler Config : <a href="https://developer.hashicorp.com/nomad/api-docs/operator/scheduler" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/nomad/api-docs/operator/scheduler</a></li>
</ul>
</blockquote>
<h2>1. Jenkinsì˜ ê¸°ë³¸ ì‹¤í–‰ ë°©ì‹</h2>
<p>Jenkinsì˜ ê³µì‹ ì„¤ì¹˜ ì•ˆë‚´ì—ì„œ ì²˜ëŸ¼ Javaë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” í™˜ê²½ì—ì„œ <code>war</code> í˜•íƒœì˜ ìë°” ì›¹ì–´í”Œë¦¬ì¼€ì´ì…˜ ì••ì¶• íŒŒì¼ì„ ì‹¤í–‰í•˜ëŠ” í˜•íƒœ, ì»¨í…Œì´ë„ˆ, OSë³„ ì§€ì›ë˜ëŠ” íŒ¨í‚¤ì§€ í˜•íƒœë¡œ ì‹¤í–‰ëœë‹¤.</p>
<ul>
<li>ê³µì‹ ì„¤ì¹˜ ì•ˆë‚´ : <a href="https://www.jenkins.io/doc/book/installing/" target="_blank" rel="noopener noreferrer">https://www.jenkins.io/doc/book/installing/</a></li>
</ul>
<p>ê° ì„¤ì¹˜ í˜•íƒœì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<table>
<thead>
<tr>
<th>í˜•íƒœ</th>
<th>ì„¤ëª…</th>
<th>íŠ¹ì§•</th>
</tr>
</thead>
<tbody>
<tr>
<td>war</td>
<td>JRE ë˜ëŠ” JDKê°€ ì„¤ì¹˜ë˜ì–´ìˆëŠ” í™˜ê²½ì—ì„œ ì‹¤í–‰ê°€ëŠ¥</td>
<td>ì„œë²„ ì¬ë¶€íŒ…, ì¥ì•  ì‹œ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰ í•„ìš”</td>
</tr>
<tr>
<td>Container</td>
<td>ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„(e.g. docker, containerd ... )ì—ì„œ ì‹¤í–‰</td>
<td>ì»¨í…Œì´ë„ˆ ê´€ë¦¬ ë° ì˜êµ¬ì €ì¥ì†Œ ê´€ë¦¬ í•„ìš”</td>
</tr>
<tr>
<td>Package</td>
<td>ê° OS ë§ˆë‹¤ ì œê³µë˜ëŠ” íŒ¨í‚¤ì§€ ê´€ë¦¬ìì—ì„œ ê´€ë¦¬</td>
<td>í•„ìš”í•œ íŒ¨í‚¤ì§€ ìë™ì„¤ì¹˜ ë° ì¬ë¶€íŒ…ì‹œ ì¬ì‹œì‘ ê°€ëŠ¥í•˜ë‚˜ ì¥ì• ì‹œ ìˆ˜ë™ ì‹¤í–‰ í•„ìš”</td>
</tr>
</tbody>
</table>
<h2>2. Nomadì—ì„œì˜ Java ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì˜ ì˜ë¯¸</h2>
<p>NomadëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í•´ì£¼ëŠ” ì—­í• ë¡œ, Java ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì—¬ëŸ¬ ì‹¤í–‰ í˜•íƒœì— ì¥ì ë§Œì„ ì·¨í•©í•˜ì—¬ ì‹¤í–‰ í™˜ê²½ì„ ì œê³µí•  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li>ìš´ì˜ì— ìµìˆ™í•œ Host OSì—ì„œ ì‹¤í–‰</li>
<li>chroot, cgroups ë“±ì˜ ì»¨í…Œì´ë„ˆ íŠ¹ì§•ìœ¼ë¡œ ê²©ë¦¬ ê¸°ëŠ¥ ì œê³µ</li>
<li>í”„ë¡œì„¸ìŠ¤ ì¥ì•  ì‹œ ì¬ì‹œì‘</li>
<li>ì˜êµ¬ì €ì¥ì†Œ ë§ˆìš´íŠ¸ (Host ë””ë ‰í† ë¦¬ì™€ CSI ë‘˜ ëª¨ë‘ ì§€ì›)</li>
<li>Java ì‹¤í–‰ì„ ì„ ì–¸ì ìœ¼ë¡œ êµ¬ì„±</li>
<li>Javaì˜ ë²”ìœ„ì •ì˜ë˜ëŠ” Memory(Xms, Xmx)ì— ë§ì¶° ë¦¬ì†ŒìŠ¤ ê²©ë¦¬</li>
</ul>
<h2>3. Nomad êµ¬ì„± ìš”êµ¬ì‚¬í•­</h2>
<p>Nomoad ì—ì„œëŠ” Jenkins ì‹¤í–‰ì„ ìœ„í•´ ë‹¤ìŒ ì¡°ê±´ì´ í•„ìš”í•˜ë‹¤.</p>
<h3>3.1 Nomad Client</h3>
<ul>
<li>Host Volumeì„ ìœ„í•œ ë””ë ‰í† ë¦¬ ìƒì„±<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ì˜ˆì‹œ</span></span>
<span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /opt/nomad/volume/jenkins</span>
<span class="line"></span></code></pre></div></li>
<li>Linux/macOSì˜ ê²½ìš° Java Driver ì‹¤í–‰ì‹œ ê³„ì •ì„ <code>nobody</code>ë¡œ ë¶€ì—¬í•˜ë¯€ë¡œ <code>nobody</code>ê³„ì •ì— ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰ í•„ìš”<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># ì˜ˆì‹œ</span></span>
<span class="line"><span class="token comment"># macOSì¸ ê²½ìš°</span></span>
<span class="line"><span class="token function">chown</span> <span class="token parameter variable">-R</span> nobody:nobody /opt/nomad/volume/jenkins</span>
<span class="line"><span class="token comment"># ubuntuì¸ ê²½ìš°</span></span>
<span class="line"><span class="token function">chown</span> <span class="token parameter variable">-R</span> nobody:nogroup /opt/nomad/volume/jenkins</span>
<span class="line"></span></code></pre></div></li>
<li>Client êµ¬ì„± í”¼ì•Œì˜ <code>client</code> ë¸”ë¡ì— Host Volumeì„ ì§€ì •<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token keyword">client</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">enabled</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token comment"># ìƒëµ</span></span>
<span class="line">  host_volume <span class="token string">"jenkins"</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">path</span>      <span class="token punctuation">=</span> <span class="token string">"/opt/nomad/volume/jenkins"</span></span>
<span class="line">    <span class="token property">read_only</span> <span class="token punctuation">=</span> <span class="token boolean">false</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></li>
</ul>
<h3>3.2 Nomad Scheduler</h3>
<p><a href="https://www.hashicorp.com/blog/announcing-general-availability-of-hashicorp-nomad-1-1" target="_blank" rel="noopener noreferrer">Nomad 1.1</a>ë¶€í„° ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ìœ ì—°í•œ ì„¤ì • ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆë‹¤. ê·¸ ì¤‘ ë©”ëª¨ë¦¬ í• ë‹¹ ì¶”ê°€ ê¸°ëŠ¥ì¸ <a href="https://www.hashicorp.com/blog/managing-resources-for-workloads-with-nomad-1-1" target="_blank" rel="noopener noreferrer">Memory Oversubscription</a>ì´ ì¶”ê°€ë˜ì—ˆê³ , Java ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê°–ëŠ” íŠ¹ì§•ì¸ JVM ë©”ëª¨ë¦¬ì˜ ë²”ìœ„ í• ë‹¹ê³¼ë„ ì—°ê³„ë˜ëŠ” ì„¤ì • ë°©ì‹ì´ë‹¤. JVM 64bit ë¶€í„°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì†Œëª¨í•˜ëŠ” ë©”ëª¨ë¦¬ê°€ í¬ê³ , í•œë²ˆ ì¦ê°€í•œ ë©”ëª¨ë¦¬ëŠ” ì¥ê¸°ê°„ ìœ ì§€ë˜ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ì— ëŒ€í•œ ìœ ì—°í•œ ì„¤ì •ì€ ì¤‘ìš”í•˜ë‹¤.<br>
<img src="https://www.datocms-assets.com/2885/1620146573-oversubscription.png?fit=max&amp;fm=webp&amp;q=80&amp;w=2500" alt="" loading="lazy"></p>
<p>íŠ¹íˆ, Nomadì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ê²©ë¦¬í•˜ì—¬ Java ë“œë¼ì´ë²„ì— ì œê³µë˜ë¯€ë¡œ ì§€ì •ëœ ë©”ëª¨ë¦¬ë³´ë‹¤ ì´ˆê³¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê²©ë¦¬ëœ ë¦¬ì†ŒìŠ¤ë¡œ ì¸í•´ <code>Error code 143 Signal 9</code> (Out Of Memory ë¡œ ì¸í•œ í”„ë¡œì„¸ìŠ¤ ê°•ì œì¢…ë£Œ)í˜•ìƒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>
<p><code>Oversubscription</code> ê¸°ëŠ¥ì€ ê³ ê¸‰ ê¸°ëŠ¥ìœ¼ë¡œ êµ¬ì„±ì„¤ì •ì—ì„œ ì§€ì •í•  ìˆ˜ëŠ” ì—†ê³  CLI/API/Terraformì„ ì‚¬ìš©í•˜ì—¬ ì„¤ì •ì„ ë³€ê²½í•´ì•¼ í•œë‹¤. (<a href="https://developer.hashicorp.com/nomad/tutorials/advanced-scheduling/memory-oversubscription?in=nomad%2Fadvanced-scheduling" target="_blank" rel="noopener noreferrer">ì„¤ëª… ë§í¬</a>)</p>

<h2>4. Job Sample</h2>
<ul>
<li>resources
<ul>
<li>memory_max : ìœ ë™ì  ë©”ëª¨ë¦¬ í• ë‹¹</li>
<li>network : Jenkinsì—ì„œ ì‚¬ìš©í•  í¬íŠ¸ ì§€ì •</li>
</ul>
</li>
<li>env : Jenkins Home ë””ë ‰í† ë¦¬ ìœ„í•œ í™˜ê²½ ë³€ìˆ˜ <code>JENKINS_HOME</code> ì„ ì–¸</li>
<li>config
<ul>
<li>jar_path : <code>artifact</code>ë¡œ ë°›ì€ waríŒŒì¼ ê²½ë¡œ</li>
<li>jvm_options : jvm ì‹¤í–‰ ì˜µì…˜</li>
<li>args : war ì‹¤í–‰ ë¬¸ì„œì—ì„œ ì§€ì •í•˜ëŠ” <code>--httpPort</code>ëŠ” args í•­ëª©ì´ê³  jvm ì˜µì…˜ì´ ì•„ë‹˜ì— ì£¼ì˜</li>
</ul>
</li>
<li>volume_mount : Jenkins Home ë””ë ‰í† ë¦¬ë¡œ Host Volumeìœ¼ë¡œ ì§€ì •í•œ ì˜êµ¬ì  ë³¼ë¥¨ í• ë‹¹</li>
<li>artifact : war íŒŒì¼ ë‹¤ìš´ë¡œë“œ ê²½ë¡œ</li>
</ul>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token keyword">variable<span class="token type variable"> "namespace" </span></span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">default</span> <span class="token punctuation">=</span> <span class="token string">"default"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">variable<span class="token type variable"> "jenkins_version" </span></span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">default</span> <span class="token punctuation">=</span> <span class="token string">"2.361.3"</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">job <span class="token string">"jenkins"</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">datacenters</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"home"</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token property">namespace</span> <span class="token punctuation">=</span> var.namespace</span>
<span class="line"></span>
<span class="line">  <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">"service"</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">constraint</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">attribute</span> <span class="token punctuation">=</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>meta<span class="token punctuation">.</span>type<span class="token punctuation">}</span></span>"</span></span>
<span class="line">    <span class="token property">value</span>     <span class="token punctuation">=</span> <span class="token string">"vraptor"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">update</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">healthy_deadline</span> <span class="token punctuation">=</span> <span class="token string">"10m"</span></span>
<span class="line">    <span class="token property">progress_deadline</span> <span class="token punctuation">=</span> <span class="token string">"20m"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  group <span class="token string">"jenkins"</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">count</span> <span class="token punctuation">=</span> <span class="token number">1</span></span>
<span class="line">    volume <span class="token string">"jenkins"</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">type</span>      <span class="token punctuation">=</span> <span class="token string">"host"</span></span>
<span class="line">      <span class="token property">source</span>    <span class="token punctuation">=</span> <span class="token string">"jenkins"</span></span>
<span class="line">      <span class="token property">read_only</span> <span class="token punctuation">=</span> <span class="token boolean">false</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">network</span> <span class="token punctuation">{</span></span>
<span class="line">      port <span class="token string">"jenkins_http"</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// to = 8080</span></span>
<span class="line">        <span class="token property">static</span> <span class="token punctuation">=</span> <span class="token number">8888</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    task <span class="token string">"war"</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">driver</span> <span class="token punctuation">=</span> <span class="token string">"java"</span></span>
<span class="line">      <span class="token keyword">resources</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">cpu</span>    <span class="token punctuation">=</span> <span class="token number">1000</span></span>
<span class="line">        <span class="token property">memory</span> <span class="token punctuation">=</span> <span class="token number">1024</span></span>
<span class="line">        <span class="token property">memory_max</span> <span class="token punctuation">=</span> <span class="token number">2048</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">env</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">JENKINS_HOME</span> <span class="token punctuation">=</span> <span class="token string">"/jenkins_home"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">config</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">jar_path</span>    <span class="token punctuation">=</span> <span class="token string">"local/jenkins.war"</span></span>
<span class="line">        <span class="token property">jvm_options</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"-Xms1024m"</span>, <span class="token string">"-Xmx2048m"</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token property">args</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"--httpPort=<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>NOMAD_PORT_jenkins_http<span class="token punctuation">}</span></span>"</span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">volume_mount</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">volume</span>      <span class="token punctuation">=</span> <span class="token string">"jenkins"</span></span>
<span class="line">        <span class="token property">destination</span> <span class="token punctuation">=</span> <span class="token string">"/jenkins_home"</span></span>
<span class="line">        <span class="token property">read_only</span> <span class="token punctuation">=</span> <span class="token boolean">false</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">service</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"jenkins"</span></span>
<span class="line">        <span class="token property">tags</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"java"</span>, <span class="token string">"cicd"</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token property">provider</span> <span class="token punctuation">=</span> <span class="token string">"nomad"</span></span>
<span class="line"></span>
<span class="line">        <span class="token property">port</span> <span class="token punctuation">=</span> <span class="token string">"jenkins_http"</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">check</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"jenkins port"</span></span>
<span class="line">          <span class="token property">type</span>  <span class="token punctuation">=</span> <span class="token string">"tcp"</span></span>
<span class="line">          <span class="token property">interval</span> <span class="token punctuation">=</span> <span class="token string">"10s"</span></span>
<span class="line">          <span class="token property">timeout</span>  <span class="token punctuation">=</span> <span class="token string">"2s"</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">logs</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">max_files</span>     <span class="token punctuation">=</span> <span class="token number">10</span></span>
<span class="line">        <span class="token property">max_file_size</span> <span class="token punctuation">=</span> <span class="token number">10</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">artifact</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">source</span> <span class="token punctuation">=</span> <span class="token string">"https://get.jenkins.io/war-stable/<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">jenkins_version</span><span class="token punctuation">}</span></span>/jenkins.war"</span></span>
<span class="line">        <span class="token keyword">options</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">checksum</span> <span class="token punctuation">=</span> <span class="token string">"sha256:f39cb8d09fd17c72dc096511ce50f245fc3004d1022aaaf60421a536f740c9b9"</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// destination = "local"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><figure><figcaption></figcaption></figure>
<div class="hint-container tip">
<p class="hint-container-title">ì‹¤í–‰ í›„ Admin Token</p>
<p>Jenkins Home ë””ë ‰í† ë¦¬ë¡œ ì§€ì •í•œ ë””ë ‰í† ë¦¬ì— ê´€ë ¨ íŒŒì¼ì´ ìƒì„±ë˜ë©°, ì‹¤ì œ í˜¸ìŠ¤íŠ¸ì˜ ë””ë ‰í† ë¦¬ì—ì„œ ì ‘ê·¼í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‚˜ Nomadì˜ <code>Exec</code>ì—ì„œ ì ‘ê·¼í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤<br>
</p>
</div>
]]></content:encoded>
      <enclosure url="https://www.datocms-assets.com/2885/1620146573-oversubscription.png?fit=max&amp;fm=webp&amp;q=80&amp;w=2500" type="image/"/>
    </item>
    <item>
      <title>node-sassì™€ sassë¡œì˜ ì „í™˜</title>
      <link>https://docmoa.github.io/06-etc/nodejs/node-sass.html</link>
      <guid>https://docmoa.github.io/06-etc/nodejs/node-sass.html</guid>
      <source url="https://docmoa.github.io/rss.xml">node-sassì™€ sassë¡œì˜ ì „í™˜</source>
      <description>node-sass ì˜¤ë¥˜ì™€ sassë¡œì˜ ì „í™˜</description>
      <pubDate>Sat, 05 Nov 2022 03:14:01 GMT</pubDate>
      <content:encoded><![CDATA[
<p>aarch64ì—ì„œ vuepress ì‹¤í–‰ì„ ìœ„í•´ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë˜ ë„ì¤‘ node-gypì™€ node-sassì— ëŒ€í•œ ì˜¤ë¥˜ë¥¼ ë§ì´í•˜ê²Œ ë˜ì—ˆë‹¤.</p>
<p>node-sassì˜ ê²½ìš° armí™˜ê²½ì— ëŒ€í•œ ë¹Œë“œ ë¦´ë¦¬ì¦ˆê°€ ì—†ëŠ” ê´€ê³„ë¡œ <code>npm install</code>ì„ ì‹¤í–‰í•˜ë©´ ë‹¤ì‹œ ë¹Œë“œë¥¼ í•˜ê²Œë˜ëŠ”ë°, ì´ë•Œ node-sassë¥¼ ë¹Œë“œí•˜ëŠ” ê³¼ì •ì—ì„œ ë¹Œë“œ ì‹¤íŒ¨ê°€ ë°œìƒí•¨</p>
<h2>node-sassë€?</h2>
<p>nodeí™˜ê²½ì—ì„œ sassëŠ” css ì½”ë“œë¡œ ë³€í™˜í•´ì£¼ëŠ” ìŠ¤íƒ€ì¼ ì „ì²˜ë¦¬ì–¸ì–´ì´ë‹¤. c/c++ë¡œ ë˜ì–´ìˆëŠ” êµ¬ì„±ìš”ì†Œë¡œ ì¸í•´ ë¹ ë¥¸ ë¹Œë“œ ì†ë„ë¥¼ ì œê³µí•œë‹¤.</p>
<h2>node-sassì™€ Nodejs ë²„ì „ë³„ í˜¸í™˜ì„±</h2>
<p>ê´€ë ¨ ë‚´ìš©ì„ ì°¾ë‹¤ë³´ë©´ Node ë²„ì „ì— ë§ëŠ” node-sassë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤ê³  ë‚˜ì˜¤ëŠ”ë° ê·¸ ì´ìœ ëŠ” <code>libsass</code> ë•Œë¬¸ì´ê³  c/c++ë¡œ ë˜ì–´ìˆëŠ” í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ íŠ¹ì„±ìƒ Node ë²„ì „ê³¼ ì‹¤í–‰ í™˜ê²½ì— ì¢…ì†ì ì´ë‹¤.</p>
<blockquote>
<p>node-sass ì§€ì› í™˜ê²½ (<a href="https://github.com/sass/node-sass/releases" target="_blank" rel="noopener noreferrer">https://github.com/sass/node-sass/releases</a>)</p>
<table>
<thead>
<tr>
<th>OS</th>
<th>Architecture</th>
<th>Node</th>
</tr>
</thead>
<tbody>
<tr>
<td>Windows</td>
<td>x86 &amp; x64</td>
<td>12, 14, 16, 17</td>
</tr>
<tr>
<td>OSX</td>
<td>x64</td>
<td>12, 14, 16, 17</td>
</tr>
<tr>
<td>Linux</td>
<td>64</td>
<td>12, 14, 16, 17</td>
</tr>
<tr>
<td>Alpine Linux</td>
<td>x64</td>
<td>12, 14, 16, 17</td>
</tr>
<tr>
<td>FreeBSD</td>
<td>i386 &amp; x64</td>
<td>12, 14</td>
</tr>
</tbody>
</table>
</blockquote>
<p>ì¶”ê°€ë¡œ node-sassëŠ” í•­í›„ Dart Sassë¡œ ì˜®ê²¨ì§„ë‹¤ë¡œ ì•ˆë‚´ë˜ì–´ìˆìŒ</p>
<p><a href="https://github.com/sass/node-sass" target="_blank" rel="noopener noreferrer">https://github.com/sass/node-sass</a></p>
<h2>Dart Sass ë¡œì˜ ì „í™˜</h2>
<p>stackoverflowì—ì„œ ê¸°ì¡´ node-sassë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²½ìš° í•´ë‹¹ í”„ë¡œì íŠ¸ë¥¼ Dart Sassë¡œ ì „í™˜í•˜ëŠ” ì„ ì–¸ ë°©ì‹ì„ ì•Œë ¤ì¤¬ë‹¤.</p>
<p><a href="https://stackoverflow.com/a/70171361" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/a/70171361</a></p>
<div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">npm</span> remove node-sass</span>
<span class="line"><span class="token function">npm</span> i node-sass@npm:sass <span class="token parameter variable">-D</span></span>
<span class="line"></span></code></pre></div><p><code>package.json</code>ì— ë‹¤ìŒê³¼ ê°™ì´ ì¶”ê°€ëœë‹¤.</p>
<div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line">  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"node-sass"</span><span class="token operator">:</span> <span class="token string">"npm:sass@^1.55.0"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>2022ë…„ 11ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/99-2022/2022-11.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/99-2022/2022-11.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2022ë…„ 11ì›”</source>
      <description>2022ë…„ 11ì›” Update</description>
      <pubDate>Tue, 01 Nov 2022 09:01:50 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>Hashiconf Global</p>
<ul>
<li>
<p><a href="https://www.hashicorp.com/blog/hashiconf-global-2022-from-zero-trust-to-no-code" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></p>
</li>
<li>
<p>Day 1: ZTS (Zero Trust Security) ì™€ Cloud Service Networking ì„ ë©”ì¸ ì£¼ì œë¡œ ìƒˆë¡œìš´ ê¸°ëŠ¥ê³¼ HCP ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì†Œê°œ</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/hcp-boundary-now-ga-bolsters-hashicorp-s-zero-trust-security-solution" target="_blank" rel="noopener noreferrer">HCP Boundary GA</a>: Opensource ë²„ì „ë§Œ ì§€ì›í•˜ë˜ Boundary ì— ëŒ€í•´ HCP Version ê³µì‹ ì¶œì‹œ</li>
<li><a href="https://www.hashicorp.com/blog/hcp-vault-on-microsoft-azure-now-in-public-beta" target="_blank" rel="noopener noreferrer">HCP Vault on Microsoft Azure Public Beta</a>: AWS ë¿ë§Œ ì•„ë‹ˆë¼ Azure ì‚¬ìš©ìë“¤ë„ HCP Vault ì‚¬ìš© ê°€ëŠ¥</li>
<li><a href="https://www.hashicorp.com/blog/consul-1-14-beta-announcing-simplified-service-mesh-deployments" target="_blank" rel="noopener noreferrer">Consul Breaking Changes</a>: K8S ì—ì„œì˜ Component ê°„ì†Œí™” ë° ê¸°ëŠ¥ê°•í™”, Windows ì— ëŒ€í•œ Service Mesh ì§€ì›</li>
<li><a href="https://www.hashicorp.com/blog/hashicorp-developer-your-new-experience-for-docs-and-tutorials" target="_blank" rel="noopener noreferrer">Hashicorp Developer Portal</a> ê°œí¸: 8ê°€ì§€ ì „ ì œí’ˆêµ°ì— ëŒ€í•œ ê³µì‹ ë¬¸ì„œ ë° Tutorial ì´ë§ë¼</li>
</ul>
</li>
<li>
<p>Day 2: Infrastructure ë° Application ìë™í™” ê´€ë ¨ ì œí’ˆêµ°ì„ ë©”ì¸ ì£¼ì œë¡œ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì†Œê°œ</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/terraform-gains-visibility-self-service-and-compliance-upgrades" target="_blank" rel="noopener noreferrer">Terraform Cloud</a>: Self Service ë° Compliance ê´€ë ¨ ê¸°ëŠ¥ ê°•í™”</li>
<li><a href="https://www.hashicorp.com/blog/nomad-1-4-adds-nomad-variables-and-updates-service-discovery" target="_blank" rel="noopener noreferrer">Nomad 1.4 GA</a>: ë‹¨ë… ì œí’ˆìœ¼ë¡œì„œì˜ Service Discovery, Variable ë“± ê¸°ëŠ¥ ê°•í™”</li>
<li><a href="https://www.hashicorp.com/blog/announcing-hcp-waypoint-public-beta" target="_blank" rel="noopener noreferrer">HCP Waypoint Public Beta</a> ì¶œì‹œ: Opensource ë²„ì „ë§Œ ì§€ì›í•˜ë˜ Waypoint ì˜ HCP Version Public Beta ì¶œì‹œ</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>
<p>Terraform Cloud ì‹ ê·œ ê¸°ëŠ¥ (í˜„ì¬ ëª¨ë‘ Beta, <a href="https://www.hashicorp.com/blog/terraform-gains-visibility-self-service-and-compliance-upgrades" target="_blank" rel="noopener noreferrer">Hashiconf Global ë°œí‘œ</a> ì°¸ê³ )</p>
<ul>
<li>
<p><a href="https://developer.hashicorp.com/terraform/cloud-docs/workspaces/health?_gl=1*cm2dqn*_ga*MjA4NTc1MTMyNy4xNjM4OTUwNzQ3*_ga_P7S46ZYEKW*MTY2NjYxMjg0NS4yMTkuMS4xNjY2NjEzMjM1LjAuMC4w#continuous-validation" target="_blank" rel="noopener noreferrer">Continous Validation</a>: Terraform ìœ¼ë¡œ Provisioning í•œ (Day 0) Resource ì— ëŒ€í•œ ìˆ˜ë™ ë³€í™”ë¥¼ ê°ì§€í•˜ëŠ” <a href="https://www.hashicorp.com/blog/drift-detection-for-terraform-cloud-is-now-generally-available" target="_blank" rel="noopener noreferrer">Drift Detection</a> ì™€ ë”ë¶ˆì–´ ì¥ê¸°ì  ê´€ë¦¬ ë° ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ í•„ìš”í•œ ì‚¬ì „ (Precondition) ë° ì‚¬í›„ (Postcondition) ì¡°ê±´ì„ ê¸°ë°˜ìœ¼ë¡œ Resource ì˜ ìƒíƒœë¥¼ ì ê²€í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥</p>
</li>
<li>
<p><a href="https://developer.hashicorp.com/terraform/cloud-docs/no-code-provisioning/module-design?_gl=1*ilib11*_ga*MjA4NTc1MTMyNy4xNjM4OTUwNzQ3*_ga_P7S46ZYEKW*MTY2NjYxMjg0NS4yMTkuMS4xNjY2NjEzNDQwLjAuMC4w" target="_blank" rel="noopener noreferrer">No-Code Provisioning</a>: Terraform ì— ëŒ€í•´ Code ì‘ì„±ê³¼ ê°™ì€ ê¸°ë³¸ ì§€ì‹ ë˜ëŠ” Module ê³¼ ê°™ì€ ê³ ê¸‰ ì§€ì‹ì— ëŒ€í•œ ì´í•´ ì—†ì´ ìµœì†Œí•œì˜ ë³€ìˆ˜ ì •ë³´ ì…ë ¥ë§Œìœ¼ë¡œ Terraform ê¸°ë°˜ì˜ Workspace ìƒì„± ë¶€í„° Resource Provisioning ê¹Œì§€ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì§€ì›í•˜ëŠ” Self-Service íŠ¹í™” ê¸°ëŠ¥</p>
</li>
<li>
<p><a href="https://developer.hashicorp.com/terraform/cloud-docs/policy-enforcement/opa" target="_blank" rel="noopener noreferrer">OPA (Open Policy Agent)</a> ê¸°ë°˜ ì •ì±… ê´€ë¦¬: Rego ì •ì±… ì–¸ì–´ ê¸°ë°˜ OPA ë¦´ ì§€ì›í•˜ì—¬ ê¸°ì¡´ì— OPA ê¸°ë°˜ í‘œì¤€ ì •ì±… ìˆ˜ë¦½í•œ ì‚¬ìš©ìë„ ì†ì‰½ê²Œ Terraform Cloud ì— Import í•˜ì—¬ ì •ì±… ê¸°ë°˜ Resource Provisioning ì„ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥</p>
</li>
</ul>
</li>
<li>
<p>CLI</p>
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.3.3" target="_blank" rel="noopener noreferrer">1.33 Release</a>
<ul>
<li>ì´ë¯¸ ì‚­ì œëìœ¼ë‚˜, Code ìƒì— ì¡´ì¬í•˜ëŠ” Resource ì‚­ì œ ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
<li><a href="https://developer.hashicorp.com/terraform/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li>
<p><a href="https://www.terraform.io/enterprise/releases/2022/v202208-3" target="_blank" rel="noopener noreferrer">10ì›” Release</a> ì¶œì‹œ (v202210-1)</p>
</li>
<li>
<p>í•„ìˆ˜ Upgrade Version: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2, v202204-2)</p>
</li>
<li>
<p>PostgresSQL ë²„ì „ 10 ì§€ì›ì¢…ë£Œ: TFE ì— ëŒ€í•´ External PostgresSQL ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìµœì†Œ ë²„ì „ 12 ì´ìƒìœ¼ë¡œ Upgrade í•„ìš”</p>
<ul>
<li>2023ë…„ 2ì›” release (v202302-1) ì„ ê¸°ì ìœ¼ë¡œ PostgresSQL ë²„ì „ 11 ì§€ì› ì¢…ë£Œ ì˜ˆì •</li>
</ul>
</li>
<li>
<p>êµ¬ë²„ì „ OS ì§€ì›ì¢…ë£Œ: 2023ë…„ 2ì›” release (v202302-1) ì„ ê¸°ì ìœ¼ë¡œ ì•„ë˜ OS ëª©ë¡ì— ëŒ€í•´ ì§€ì› ì¢…ë£Œ</p>
<ul>
<li>
<p>Debian 8, 9</p>
</li>
<li>
<p>Ubuntu 14.04, 16.04</p>
</li>
<li>
<p>Amazon Linux 2014.03, 2014.09, 2015.03, 2015.09, 2016.03, 2016.09, 2017.03, 2017.09, 2018.03</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Provider</p>
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v4.36.0" target="_blank" rel="noopener noreferrer">AWS v4.36.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>aws_lightsail ê´€ë ¨ resource ì¶”ê°€</li>
<li>aws_route53_zone ì— ëŒ€í•´ primary_name_server ì„¤ì • ì¶”ê°€</li>
<li>aws_resourcegroups_group ì— ëŒ€í•´ configuration ì„¤ì • ì¶”ê°€</li>
<li>aws_sqs_queue ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.28.0" target="_blank" rel="noopener noreferrer">Azure v3.28.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>azurerm_sentinel_data_connector ê´€ë ¨ resource ì¶”ê°€</li>
<li>azurerm_linux(windows)_web_app, azurerm_linux(windows)function_app ì— ëŒ€í•´ certificate ê´€ë ¨ ì„¤ì • ì¶”ê°€</li>
<li>azurerm_storage_account ê´€ë ¨ account_tier ì„¤ì • ì¶”ê°€</li>
<li>azurerm_linux(windows)_web_app, azurerm_linux(windows)function_app ì— ëŒ€í•´ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.41.0" target="_blank" rel="noopener noreferrer">GCP v4.41.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>google_sql_user.sql_server_user_details ì— ëŒ€í•´ read-only ë§Œ ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •</li>
<li>google_bigquery_table ì— ëŒ€í•´ avro_options ì„¤ì • ì¶”ê°€</li>
<li>google_container_node_pool ì— ëŒ€í•´ node_config.0.guest_accelerator.0.gpu_sharing_config ì„¤ì • ì¶”ê°€</li>
<li>google_filestore_instance ì´ ì—¬ëŸ¬ê°œ ì—°ì† ìƒì„± ë˜ë„ë¡ ê°•ì œí•˜ëŠ” ì¡°ê±´ ì‚­ì œ</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li><a href="https://www.hashicorp.com/blog/vault-1-12" target="_blank" rel="noopener noreferrer">1.12 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ìƒì„¸ ë‚´ìš©: <a href="https://github.com/hashicorp/vault/releases/tag/v1.12.0" target="_blank" rel="noopener noreferrer">CHANGELOG</a> ì°¸ê³ </li>
<li>PKI Secret Engine ê´€ë ¨ ê°œì„ : RSA-PSS signature, telemetry, Google Cloud Key Manager ì§€ì› ë“±</li>
<li>PKCS #11 Provider ì§€ì›: HSM ì—°ë™ ê´€ë ¨ ê¸°ëŠ¥ ë° Oracle TDE ì§€ì›</li>
<li>Transform ê´€ë ¨ ê°œì„ : BYOK, MSSQL ì§€ì›, Key ìë™ Rotation ë“±</li>
</ul>
</li>
<li><a href="https://www.hashicorp.com/blog/hcp-vault-on-microsoft-azure-now-in-public-beta" target="_blank" rel="noopener noreferrer">HCP Vault on Azure (Public Beta)</a>: Azure ìœ ëŸ½ Region ì—ì„œ ì‚¬ìš© ê°€ëŠ¥</li>
</ul>
</li>
<li>Consul
<ul>
<li><a href="https://github.com/hashicorp/consul/releases/tag/v1.13.3" target="_blank" rel="noopener noreferrer">1.13.3 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>Ingress Gateway (Service Mesh) ì— ëŒ€í•œ Upstream Max Connection ì„¤ì • ê°œì„ </li>
<li>Terminating Gateway ë° Mesh Gateway (Service Mesh) ì— ëŒ€í•œ TCP Keepalives ì„¤ì • ì¶”ê°€</li>
<li>Agent Cache ê´€ë ¨ goroutine leak ë°œìƒ bug ìˆ˜ì •</li>
<li>Snapshot Agent ê´€ë ¨ Session ì¡°íšŒ ë¶ˆê°€ë¡œ ì¸í•œ Panic ë°œìƒ bug ìˆ˜ì •</li>
</ul>
</li>
<li><a href="https://www.hashicorp.com/blog/consul-1-14-beta-announcing-simplified-service-mesh-deployments" target="_blank" rel="noopener noreferrer">1.14 Beta</a> (Hashiconf Global Announcement)
<ul>
<li>Consul Client on K8S ì— ëŒ€í•œ êµ¬ì¡°ë³€í™”: Daemonset ì—ì„œ Sidecar ë°©ì‹ìœ¼ë¡œ ë³€ê²½</li>
<li>Cluster Peering ê¸°ë°˜ Service Failover í¬í•¨ Mesh Traffic Management ê¸°ëŠ¥ ê°œì„ </li>
<li>Windows ì— ëŒ€í•œ Service Mesh ì§€ì›</li>
<li>AWS Lambda ì— ëŒ€í•œ Service Mesh ì§€ì›</li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li><a href="https://www.hashicorp.com/blog/nomad-1-4-adds-nomad-variables-and-updates-service-discovery" target="_blank" rel="noopener noreferrer">1.4 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ìƒì„¸ ë‚´ìš©: <a href="https://github.com/hashicorp/nomad/releases/tag/v1.4.0" target="_blank" rel="noopener noreferrer">CHANGELOG</a> ì°¸ê³ </li>
<li>ê¸°ë°€ ì •ë³´ í™œìš© ìœ„í•œ ìì²´ KV, Variable ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Service Discovery ê¸°ëŠ¥ ì¶”ê°€</li>
<li>ACL Token ê¸°ë°˜ Policy ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Web UI ì—ì„œ Task ë‹¨ìœ„ ì •ë³´ ì¶œë ¥ ê°œì„ </li>
<li>Raft Version 2 ì§€ì› ì¢…ë£Œ (Upgrade ì‹œ ì°¸ê³ )</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>2022ë…„ 10ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/99-2022/2022-10.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/99-2022/2022-10.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2022ë…„ 10ì›”</source>
      <description>2022ë…„ 10ì›” Update</description>
      <pubDate>Tue, 04 Oct 2022 06:27:14 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>Nomad: Nomad Variables and Service Discovery</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/nomad-1-4-adds-nomad-variables-and-updates-service-discovery" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>Hashicorp NomadëŠ” Container ë¿ë§Œ ì•„ë‹ˆë¼ Container í™” í•˜ê¸° ì–´ë ¤ìš´ Legacy Application ì— ëŒ€í•´ ë°°í¬í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ê°„ë‹¨í•˜ê³  ìœ ì—°í•œ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ì…ë‹ˆë‹¤. NomadëŠ” On-prem ë° Cloud í™˜ê²½ì„ ê°€ë¦¬ì§€ ì•Šê³  ì‘ë™í•©ë‹ˆë‹¤. Cloudflare, Roblox, Q2 ë° Pandoraì™€ ê°™ì€ ì¡°ì§ì˜ í”„ë¡œë•ì…˜ì—ì„œ ë„ë¦¬ ì±„íƒë˜ê³  ì‚¬ìš©ë©ë‹ˆë‹¤. ìƒˆë¡­ê²Œ ì¶œì‹œëœ HashiCorp Nomad 1.4 Beta Release ì—ì„œëŠ” ìƒíƒœ í™•ì¸ì„ í†µí•´ Service Discovery ì§€ì›ì„ ê°•í™”í•˜ê³  ì‚¬ìš©ìê°€ êµ¬ì„± ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” Nomad Variable ê¸°ëŠ¥ì´ ë„ì… ë˜ì—ˆìŠµë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.3.0" target="_blank" rel="noopener noreferrer">1.30 Release</a>
<ul>
<li>Optional attributes for object type constraints: ë³€ìˆ˜ ì‚¬ìš© ì‹œ Type ì§€ì •ì— ëŒ€í•œ 'Optional' ì§€ì›</li>
<li>'moved' block ê¸°ëŠ¥ê°œì„ : resource ì— ëŒ€í•œ refactor ê¸°ëŠ¥ ê°œì„  (ì˜ˆ: aws_instance ë¥¼ instance module ë¡œ refactoring)</li>
</ul>
</li>
<li><a href="https://www.terraform.io/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li>
<p><a href="https://www.terraform.io/enterprise/releases/2022/v202209-2" target="_blank" rel="noopener noreferrer">9ì›” Release</a> ì¶œì‹œ (v202209-2)</p>
</li>
<li>
<p>í•„ìˆ˜ Upgrade Version: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2, v202204-2)</p>
</li>
<li>
<p>TFE ì—”ì§„ ë‚´ Vault ì— ëŒ€í•œ ì •ì±… ìˆ˜ì •í•˜ì—¬ ê°„í—ì ìœ¼ë¡œ TFE êµ¬ë™ ì‹œ ë°œìƒí•˜ëŠ” 403 ì˜¤ë¥˜ í•´ê²°</p>
</li>
<li>
<p>TFE ì—”ì§„ ë‚´ Data Migration Logic ì— ëŒ€í•´ Postgres 11 ì´ìƒì—ì„œë§Œ ì§€ì›</p>
</li>
<li>
<p>TF Code ë³€ê²½ì— ëŒ€í•œ Test ë“±ì„ ì§€ì›í•˜ëŠ” <a href="https://www.terraform.io/enterprise/run/remote-operations#speculative-plans" target="_blank" rel="noopener noreferrer">ì˜ˆì¸¡ ê³„íš (Speculative Plans)</a> ê¸°ëŠ¥ ì§€ì›</p>
</li>
</ul>
</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v4.32.0" target="_blank" rel="noopener noreferrer">AWS v4.32.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>resource/aws_eks_cluster ì— ëŒ€í•œ outpost_config ì„¤ì • ì¶”ê°€ (Outpost ì—ì„œ EKS ì‚¬ìš© ì§€ì›)</li>
<li>resource/aws_ec2_managed_prefix_list ì— ëŒ€í•´ MaxEntries and Entry ë°˜ì˜ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.24.0" target="_blank" rel="noopener noreferrer">Azure v3.24.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>azurerm_linux(windows)_virtual_machine ì— ëŒ€í•œ patch_assessment_mode ì„¤ì • ì¶”ê°€</li>
<li>azurerm_managed_disk ì— ëŒ€í•œ PremiumV2_LRS type ì§€ì›</li>
<li>azurerm_private_endpoint ì— ëŒ€í•œ custom_network_interface_name ì„¤ì • ì¶”ê°€</li>
<li>azurerm_storage_account ì— ëŒ€í•œ azure_files_identity_based_auth ì •ë³´ export ì§€ì›</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.38.0" target="_blank" rel="noopener noreferrer">GCP v4.38.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>appengine ì— ëŒ€í•œ egress_setting ì„¤ì • ì¶”ê°€</li>
<li>bigquery ì— ëŒ€í•œ json_extension ì„¤ì • ì¶”ê°€</li>
<li>compute ì— ëŒ€í•œ json_custom_config ì„¤ì • ì¶”ê°€</li>
<li>compute ì— ëŒ€í•œ most_disruptive_allowed_action update ë¶ˆê°€ ì˜¤ë¥˜ ê°œì„ </li>
<li>storage ì— ëŒ€í•œ lifecycle_rule.condition.age ì„¤ì • ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li><a href="https://github.com/hashicorp/vault/blob/main/CHANGELOG.md#1113" target="_blank" rel="noopener noreferrer">1.11.3 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>identity/oidc ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>integrated storage (raft) ë°©ì‹ ì‚¬ìš© ì‹œ retry join ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li><a href="https://github.com/hashicorp/consul/releases/tag/v1.13.2" target="_blank" rel="noopener noreferrer">1.13.2 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ consul cli command: <a href="https://www.consul.io/commands/peering" target="_blank" rel="noopener noreferrer">peering</a></li>
<li>Metric ê´€ë ¨ Label ê¸°ëŠ¥ ì¶”ê°€</li>
<li>Envoy ê´€ë ¨ Outlier (ì´ìƒê°ì§€) ì— ëŒ€í•œ ì¶”ê°€ Parameter ì§€ì›</li>
<li>Consul Connect ì— ëŒ€í•´ ConnectCA CSR requests ì˜ URI Length Check ê°œì„ </li>
<li>auto-config JWT authorization ì— ëŒ€í•œ input ê°’ ê²€ì¦ ê°œì„ </li>
<li>Consul Connect (Service Mesh) ì˜ TLS ì¸ì¦ì„œ ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li><a href="https://github.com/hashicorp/nomad/releases/tag/v1.3.5" target="_blank" rel="noopener noreferrer">1.3.5 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>Consul ì—°ë™ ì‹œ Namespace ì •ë³´ ì¡°íšŒ ê´€ë ¨ ê°œì„ </li>
<li>template ì‚¬ìš©ì‹œ change_mode = "script" ëª…ì‹œë¡œ ì¸í•œ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Dynamic application sizing</title>
      <link>https://docmoa.github.io/04-HashiCorp/07-Nomad/05-SampleJob/DAS.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/07-Nomad/05-SampleJob/DAS.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Dynamic application sizing</source>
      <description>Nomad Dynamic application sizing</description>
      <pubDate>Mon, 03 Oct 2022 02:12:59 GMT</pubDate>
      <content:encoded><![CDATA[
<ul>
<li>Nomad autoscaler ë°°í¬ í›„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ ì¤‘ì— í•˜ë‚˜</li>
<li>Dynamic application sizing(DAS)ì˜ ê¸°ëŠ¥ì´ ì„¤ì •ë˜ì–´ ìˆëŠ” jobì„ ë°°í¬ í•œ ì´í›„ autoscaler jobì—ì„œ resourceì˜ ê¶Œê³ ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŒ</li>
<li>ê¶Œê³  ë°›ì€ ê°’ì„ ì‚¬ìš©ìê°€ í™•ì¸ í›„ í—ˆìš©í•  ê²½ìš° jobì˜ resourceì˜ ë³€í™”ê°€ ì •ìƒì ìœ¼ë¡œ ì ìš©ë¨</li>
</ul>
<h2>autoscaler jobì€ ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ jobì„ ì‚¬ìš©</h2>
<ul>
<li><a href="/04-HashiCorp/07-Nomad/05-SampleJob/DAS.html" target="_blank">AutoScaler job</a></li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">íŒ</p>
<p>í…ŒìŠ¤íŠ¸ ë° ì‚¬ìš©ì „ í™•ì¸í•´ì•¼ í•  ì‚¬í•­ì€ Nomadì˜ enterprise, ì¦‰ ë¼ì´ì„ ìŠ¤ê°€ í•„ìš”í•˜ë©°, nomad-autosclaerì˜ ê²½ìš°ì—ë„ enterpriseì—¬ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>
</div>
<h3>Demo jobì˜ ë°°í¬</h3>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">job <span class="token string-literal"><span class="token string">"example"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  datacenters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"dc1"</span></span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  group <span class="token string-literal"><span class="token string">"cache-lb"</span></span> <span class="token punctuation">{</span></span>
<span class="line">    count <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"></span>
<span class="line">    network <span class="token punctuation">{</span></span>
<span class="line">      port <span class="token string-literal"><span class="token string">"lb"</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    task <span class="token string-literal"><span class="token string">"nginx"</span></span> <span class="token punctuation">{</span></span>
<span class="line">      driver <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"docker"</span></span></span>
<span class="line"></span>
<span class="line">      config <span class="token punctuation">{</span></span>
<span class="line">        image <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"nginx"</span></span></span>
<span class="line">        ports <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"lb"</span></span><span class="token punctuation">]</span></span>
<span class="line">        volumes <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">          <span class="token comment"># It's safe to mount this path as a file because it won't re-render.</span></span>
<span class="line">          <span class="token string-literal"><span class="token string">"local/nginx.conf:/etc/nginx/nginx.conf"</span></span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token comment"># This path hosts files that will re-render with Consul Template.</span></span>
<span class="line">          <span class="token string-literal"><span class="token string">"local/nginx:/etc/nginx/conf.d"</span></span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment"># This template overwrites the embedded nginx.conf file so it loads</span></span>
<span class="line">      <span class="token comment"># conf.d/*.conf files outside of the `http` block.</span></span>
<span class="line">      template <span class="token punctuation">{</span></span>
<span class="line">        data        <span class="token operator">=</span> <span class="token string-literal heredoc-string"><span class="token delimiter"><span class="token punctuation">&lt;&lt;</span><span class="token symbol">EOF</span></span><span class="token string"></span>
<span class="line">user  nginx;</span>
<span class="line">worker_processes  1;</span>
<span class="line">error_log  /var/log/nginx/error.log warn;</span>
<span class="line">pid        /var/run/nginx.pid;</span>
<span class="line">events {</span>
<span class="line">    worker_connections  1024;</span>
<span class="line">}</span>
<span class="line">include /etc/nginx/conf.d/*.conf;</span>
<span class="line"></span><span class="token delimiter"><span class="token symbol">EOF</span></span></span></span>
<span class="line">        destination <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"local/nginx.conf"</span></span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment"># This template creates a TCP proxy to Redis.</span></span>
<span class="line">      template <span class="token punctuation">{</span></span>
<span class="line">        data          <span class="token operator">=</span> <span class="token string-literal heredoc-string"><span class="token delimiter"><span class="token punctuation">&lt;&lt;</span><span class="token symbol">EOF</span></span><span class="token string"></span>
<span class="line">stream {</span>
<span class="line">  server {</span>
<span class="line">    listen {{ env "NOMAD_PORT_lb" }};</span>
<span class="line">    proxy_pass backend;</span>
<span class="line">  }</span>
<span class="line">  upstream backend {</span>
<span class="line">  {{ range nomadService "redis" }}</span>
<span class="line">    server {{ .Address }}:{{ .Port }};</span>
<span class="line">  {{ else }}server 127.0.0.1:65535; # force a 502</span>
<span class="line">  {{ end }}</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span><span class="token delimiter"><span class="token symbol">EOF</span></span></span></span>
<span class="line">        destination   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"local/nginx/nginx.conf"</span></span></span>
<span class="line">        change_mode   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"signal"</span></span></span>
<span class="line">        change_signal <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"SIGHUP"</span></span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      resources <span class="token punctuation">{</span></span>
<span class="line">        cpu    <span class="token operator">=</span> <span class="token number">50</span></span>
<span class="line">        memory <span class="token operator">=</span> <span class="token number">10</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      scaling <span class="token string-literal"><span class="token string">"cpu"</span></span> <span class="token punctuation">{</span></span>
<span class="line">        policy <span class="token punctuation">{</span></span>
<span class="line">          cooldown            <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"1m"</span></span></span>
<span class="line">          evaluation_interval <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"10s"</span></span></span>
<span class="line"></span>
<span class="line">          check <span class="token string-literal"><span class="token string">"95pct"</span></span> <span class="token punctuation">{</span></span>
<span class="line">            strategy <span class="token string-literal"><span class="token string">"app-sizing-percentile"</span></span> <span class="token punctuation">{</span></span>
<span class="line">              percentile <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"95"</span></span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      scaling <span class="token string-literal"><span class="token string">"mem"</span></span> <span class="token punctuation">{</span></span>
<span class="line">        policy <span class="token punctuation">{</span></span>
<span class="line">          cooldown            <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"1m"</span></span></span>
<span class="line">          evaluation_interval <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"10s"</span></span></span>
<span class="line"></span>
<span class="line">          check <span class="token string-literal"><span class="token string">"max"</span></span> <span class="token punctuation">{</span></span>
<span class="line">            strategy <span class="token string-literal"><span class="token string">"app-sizing-max"</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    service <span class="token punctuation">{</span></span>
<span class="line">      name         <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"redis-lb"</span></span></span>
<span class="line">      port         <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"lb"</span></span></span>
<span class="line">      address_mode <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"host"</span></span></span>
<span class="line">      provider     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"nomad"</span></span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  group <span class="token string-literal"><span class="token string">"cache"</span></span> <span class="token punctuation">{</span></span>
<span class="line">    count <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="line"></span>
<span class="line">    network <span class="token punctuation">{</span></span>
<span class="line">      port <span class="token string-literal"><span class="token string">"db"</span></span> <span class="token punctuation">{</span></span>
<span class="line">        to <span class="token operator">=</span> <span class="token number">6379</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    task <span class="token string-literal"><span class="token string">"redis"</span></span> <span class="token punctuation">{</span></span>
<span class="line">      driver <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"docker"</span></span></span>
<span class="line"></span>
<span class="line">      config <span class="token punctuation">{</span></span>
<span class="line">        image <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"redis:6.0"</span></span></span>
<span class="line">        ports <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"db"</span></span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      resources <span class="token punctuation">{</span></span>
<span class="line">        cpu    <span class="token operator">=</span> <span class="token number">500</span></span>
<span class="line">        memory <span class="token operator">=</span> <span class="token number">256</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      scaling <span class="token string-literal"><span class="token string">"cpu"</span></span> <span class="token punctuation">{</span></span>
<span class="line">        policy <span class="token punctuation">{</span></span>
<span class="line">          cooldown            <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"1m"</span></span></span>
<span class="line">          evaluation_interval <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"10s"</span></span></span>
<span class="line"></span>
<span class="line">          check <span class="token string-literal"><span class="token string">"95pct"</span></span> <span class="token punctuation">{</span></span>
<span class="line">            strategy <span class="token string-literal"><span class="token string">"app-sizing-percentile"</span></span> <span class="token punctuation">{</span></span>
<span class="line">              percentile <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"95"</span></span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      scaling <span class="token string-literal"><span class="token string">"mem"</span></span> <span class="token punctuation">{</span></span>
<span class="line">        policy <span class="token punctuation">{</span></span>
<span class="line">          cooldown            <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"1m"</span></span></span>
<span class="line">          evaluation_interval <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"10s"</span></span></span>
<span class="line"></span>
<span class="line">          check <span class="token string-literal"><span class="token string">"max"</span></span> <span class="token punctuation">{</span></span>
<span class="line">            strategy <span class="token string-literal"><span class="token string">"app-sizing-max"</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      service <span class="token punctuation">{</span></span>
<span class="line">        name         <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"redis"</span></span></span>
<span class="line">        port         <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"db"</span></span></span>
<span class="line">        address_mode <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"host"</span></span></span>
<span class="line">        provider     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"nomad"</span></span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>ë¶€í•˜ í…ŒìŠ¤íŠ¸ìš© job ë°°í¬</h3>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">job <span class="token string-literal"><span class="token string">"das-load-test"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  datacenters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"dc1"</span></span><span class="token punctuation">]</span></span>
<span class="line">  type        <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"batch"</span></span></span>
<span class="line"></span>
<span class="line">  parameterized <span class="token punctuation">{</span></span>
<span class="line">    payload       <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"optional"</span></span></span>
<span class="line">    meta_optional <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"requests"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"clients"</span></span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  group <span class="token string-literal"><span class="token string">"redis-benchmark"</span></span> <span class="token punctuation">{</span></span>
<span class="line">    task <span class="token string-literal"><span class="token string">"redis-benchmark"</span></span> <span class="token punctuation">{</span></span>
<span class="line">      driver <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"docker"</span></span></span>
<span class="line"></span>
<span class="line">      config <span class="token punctuation">{</span></span>
<span class="line">        image   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"redis:6.0"</span></span></span>
<span class="line">        command <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"redis-benchmark"</span></span></span>
<span class="line"></span>
<span class="line">        args <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">          <span class="token string-literal"><span class="token string">"-h"</span></span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token string-literal"><span class="token string">"${HOST}"</span></span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token string-literal"><span class="token string">"-p"</span></span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token string-literal"><span class="token string">"${PORT}"</span></span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token string-literal"><span class="token string">"-n"</span></span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token string-literal"><span class="token string">"${REQUESTS}"</span></span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token string-literal"><span class="token string">"-c"</span></span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token string-literal"><span class="token string">"${CLIENTS}"</span></span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      template <span class="token punctuation">{</span></span>
<span class="line">        destination <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"secrets/env.txt"</span></span></span>
<span class="line">        env         <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">        data <span class="token operator">=</span> <span class="token string-literal heredoc-string"><span class="token delimiter"><span class="token punctuation">&lt;&lt;</span><span class="token symbol">EOF</span></span><span class="token string"></span>
<span class="line">{{ with nomadService "redis-lb" }}{{ with index . 0 -}}</span>
<span class="line">HOST={{.Address}}</span>
<span class="line">PORT={{.Port}}</span>
<span class="line">{{- end }}{{ end }}</span>
<span class="line">REQUESTS={{ or (env "NOMAD_META_requests") "100000" }}</span>
<span class="line">CLIENTS={{  or (env "NOMAD_META_clients") "50" }}</span>
<span class="line"></span><span class="token delimiter"><span class="token symbol">EOF</span></span></span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      resources <span class="token punctuation">{</span></span>
<span class="line">        cpu    <span class="token operator">=</span> <span class="token number">100</span></span>
<span class="line">        memory <span class="token operator">=</span> <span class="token number">128</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h3>ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê³  nomad uiì—ì„œ Optimizeì˜ Recommendedì˜ ê°’ì´ ë³€í™”í•˜ì˜€ê³ , Acceptë¥¼ ëˆŒëŸ¬ ì¤„ ê²½ìš° target jobì˜ ìŠ¤í™ì´ ë³€í™”í•©ë‹ˆë‹¤.</h3>
<figure><figcaption>nomad Optimize</figcaption></figure>
]]></content:encoded>
    </item>
    <item>
      <title>Nomad CSI Sample</title>
      <link>https://docmoa.github.io/04-HashiCorp/03-Terraform/03-Sample/nomad-csi-sample.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/03-Terraform/03-Sample/nomad-csi-sample.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Nomad CSI Sample</source>
      <description>Nomad CSI Sample</description>
      <pubDate>Fri, 30 Sep 2022 14:39:30 GMT</pubDate>
      <content:encoded><![CDATA[
<ul>
<li>AWSì— EFSë¥¼ Nomad CSIë¡œ í™œìš©</li>
<li>full codeëŠ” ì•„ë˜ githubë¥¼ ì°¸ê³ 
<ul>
<li>ì°¸ê³  github: <a href="https://github.com/Great-Stone/nomad-demo-with-ecs" target="_blank" rel="noopener noreferrer">https://github.com/Great-Stone/nomad-demo-with-ecs</a>
<ul>
<li>branches: ung</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure><figcaption>nomad Architecture with CSI</figcaption></figure>
<h2>ec2(nomad client node)ì— efsì˜ volumeê´€ë ¨ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.</h2>
<ul>
<li>ec2ì™€ efsëŠ” ê°™ì€ subnetì´ì—¬ì•¼ í•©ë‹ˆë‹¤.</li>
<li>vpcì—ëŠ” dnsê´€ë ¨ ê¶Œí•œì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.</li>
</ul>
<details>
<summary>ec2 iam policy</summary>
<div markdown="1">
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"aws_vpc"</span></span> <span class="token string-literal"><span class="token string">"nomad_demo"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  cidr_block <span class="token operator">=</span> var<span class="token punctuation">.</span>vpc_cidr_block</span>
<span class="line">  <span class="token comment">#dns ê¶Œí•œì„¤ì •ì´ í•„ìš”í•¨</span></span>
<span class="line">  enable_dns_support   <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  enable_dns_hostnames <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  tags <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    env <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"nomad"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"aws_subnet"</span></span> <span class="token string-literal"><span class="token string">"nomad_demo"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  cidr_block <span class="token operator">=</span> var<span class="token punctuation">.</span>vpc_cidr_block</span>
<span class="line">  vpc_id     <span class="token operator">=</span> aws_vpc<span class="token punctuation">.</span>nomad_demo<span class="token punctuation">.</span>id</span>
<span class="line">  <span class="token comment">#efsì™€ azê°€ ê°™ì•„ì•¼í•¨</span></span>
<span class="line">  availability_zone <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"ap-northeast-2a"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">############</span></span>
<span class="line"><span class="token comment"># Policy</span></span>
<span class="line"></span>
<span class="line">data <span class="token string-literal"><span class="token string">"aws_iam_policy_document"</span></span> <span class="token string-literal"><span class="token string">"instance_role"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  statement <span class="token punctuation">{</span></span>
<span class="line">    effect <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Allow"</span></span></span>
<span class="line">    actions <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"sts:AssumeRole"</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    principals <span class="token punctuation">{</span></span>
<span class="line">      type        <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Service"</span></span></span>
<span class="line">      identifiers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"ec2.amazonaws.com"</span></span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"aws_iam_role"</span></span> <span class="token string-literal"><span class="token string">"instance_role"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name_prefix        <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-nomad"</span></span></span>
<span class="line">  assume_role_policy <span class="token operator">=</span> data<span class="token punctuation">.</span>aws_iam_policy_document<span class="token punctuation">.</span>instance_role<span class="token punctuation">.</span>json</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"aws_iam_role"</span></span> <span class="token string-literal"><span class="token string">"instance_role"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name_prefix        <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-nomad"</span></span></span>
<span class="line">  assume_role_policy <span class="token operator">=</span> data<span class="token punctuation">.</span>aws_iam_policy_document<span class="token punctuation">.</span>instance_role<span class="token punctuation">.</span>json</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"aws_iam_instance_profile"</span></span> <span class="token string-literal"><span class="token string">"test_profile"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"test_profile"</span></span></span>
<span class="line">  role <span class="token operator">=</span> aws_iam_role<span class="token punctuation">.</span>instance_role<span class="token punctuation">.</span>name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"aws_iam_role_policy"</span></span> <span class="token string-literal"><span class="token string">"cluster_discovery"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"${var.prefix}-nomad-cluster_discovery"</span></span></span>
<span class="line">  role   <span class="token operator">=</span> aws_iam_role<span class="token punctuation">.</span>instance_role<span class="token punctuation">.</span>id</span>
<span class="line">  policy <span class="token operator">=</span> data<span class="token punctuation">.</span>aws_iam_policy_document<span class="token punctuation">.</span>cluster_discovery<span class="token punctuation">.</span>json</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">data <span class="token string-literal"><span class="token string">"aws_iam_policy_document"</span></span> <span class="token string-literal"><span class="token string">"cluster_discovery"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment"># allow role with this policy to do the following: list instances, list tags, autoscale</span></span>
<span class="line">  statement <span class="token punctuation">{</span></span>
<span class="line">    effect <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Allow"</span></span></span>
<span class="line">    actions <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ec2:DescribeInstances"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"autoscaling:CompleteLifecycleAction"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ec2:DescribeTags"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:ListClusters"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:DescribeClusters"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:DeregisterContainerInstance"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:ListContainerInstances"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:RegisterContainerInstance"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:SubmitContainerStateChange"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:SubmitTaskStateChange"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:DescribeContainerInstances"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:DescribeTasks"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:ListTasks"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:UpdateContainerAgent"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:StartTask"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:StopTask"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ecs:RunTask"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"elasticfilesystem:ClientMount"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"elasticfilesystem:ClientWrite"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"elasticfilesystem:ClientRootAccess"</span></span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    resources <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"*"</span></span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></div>
</details>
<details>
<summary>efs volume and iam policy</summary>
<div markdown="1">
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line"></span>
<span class="line"><span class="token comment">############</span></span>
<span class="line"><span class="token comment">#EFS</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"aws_iam_role_policy"</span></span> <span class="token string-literal"><span class="token string">"mount_efs_volumes"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"mount-efs-volumes"</span></span></span>
<span class="line">  role   <span class="token operator">=</span> aws_iam_role<span class="token punctuation">.</span>instance_role<span class="token punctuation">.</span>id</span>
<span class="line">  policy <span class="token operator">=</span> data<span class="token punctuation">.</span>aws_iam_policy_document<span class="token punctuation">.</span>mount_efs_volumes<span class="token punctuation">.</span>json</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">data <span class="token string-literal"><span class="token string">"aws_iam_policy_document"</span></span> <span class="token string-literal"><span class="token string">"mount_efs_volumes"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  statement <span class="token punctuation">{</span></span>
<span class="line">    effect <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Allow"</span></span></span>
<span class="line"></span>
<span class="line">    actions <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ec2:DescribeInstances"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ec2:DescribeTags"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ec2:DescribeVolumes"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ec2:AttachVolume"</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string-literal"><span class="token string">"ec2:DetachVolume"</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    resources <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"*"</span></span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># csi efs volume</span></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"aws_efs_file_system"</span></span> <span class="token string-literal"><span class="token string">"nomad_csi"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  creation_token <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"nomad-csi"</span></span></span>
<span class="line">  performance_mode <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"generalPurpose"</span></span></span>
<span class="line">  throughput_mode  <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"bursting"</span></span></span>
<span class="line"></span>
<span class="line">  tags <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    Name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"nomad-csi"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">#azê°€ ec2ì™€ ë™ì¼í•´ì•¼í•¨</span></span>
<span class="line">  availability_zone_name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"ap-northeast-2a"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#ec2ì™€ subnetì´ ê°™ì•„ì•¼í•¨</span></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"aws_efs_mount_target"</span></span> <span class="token string-literal"><span class="token string">"nomad_efs"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  file_system_id <span class="token operator">=</span> aws_efs_file_system<span class="token punctuation">.</span>nomad_csi<span class="token punctuation">.</span>id</span>
<span class="line">  subnet_id      <span class="token operator">=</span> aws_subnet<span class="token punctuation">.</span>nomad_demo<span class="token punctuation">.</span>id</span>
<span class="line">  security_groups <span class="token operator">=</span> <span class="token punctuation">[</span> aws_security_group<span class="token punctuation">.</span>efs<span class="token punctuation">.</span>id <span class="token punctuation">]</span> </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"aws_security_group"</span></span> <span class="token string-literal"><span class="token string">"efs"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  name        <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"allow_efs"</span></span></span>
<span class="line">  description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Allow EFS inbound traffic"</span></span></span>
<span class="line">  vpc_id      <span class="token operator">=</span> aws_vpc<span class="token punctuation">.</span>nomad_demo<span class="token punctuation">.</span>id</span>
<span class="line"></span>
<span class="line">  ingress <span class="token punctuation">{</span></span>
<span class="line">    description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"TLS from VPC"</span></span></span>
<span class="line">    from_port   <span class="token operator">=</span> <span class="token number">443</span></span>
<span class="line">    to_port     <span class="token operator">=</span> <span class="token number">443</span></span>
<span class="line">    protocol    <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"tcp"</span></span></span>
<span class="line">    cidr_blocks <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string-literal"><span class="token string">"0.0.0.0/0"</span></span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  egress <span class="token punctuation">{</span></span>
<span class="line">    from_port   <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    to_port     <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    protocol    <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"-1"</span></span></span>
<span class="line">    cidr_blocks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"0.0.0.0/0"</span></span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  tags <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    Name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"allow_tls"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></div>
</details>
<h2>nomad csi create</h2>
<ul>
<li>nomad csi jobì„ ë°°í¬í•©ë‹ˆë‹¤.</li>
<li>pluginsì„ ìƒì„±í•©ë‹ˆë‹¤.</li>
</ul>
<details>
<summary>nomad csi create</summary>
<div markdown="1">
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line"><span class="token comment">#efs csi jobì„ ìƒì„±</span></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"nomad_job"</span></span> <span class="token string-literal"><span class="token string">"nomad_csi_node_job"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  jobspec <span class="token operator">=</span> file<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"./job_file/csi-node.tpl"</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"time_sleep"</span></span> <span class="token string-literal"><span class="token string">"wait_30_seconds"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  depends_on <span class="token operator">=</span> <span class="token punctuation">[</span>nomad_job<span class="token punctuation">.</span>nomad_csi_node_job<span class="token punctuation">]</span></span>
<span class="line">  create_duration <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"30s"</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#ìƒì„±ëœ pluginì„ ê¸°ë‹¤ë¦¼</span></span>
<span class="line">data <span class="token string-literal"><span class="token string">"nomad_plugin"</span></span> <span class="token string-literal"><span class="token string">"efs"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  depends_on <span class="token operator">=</span> <span class="token punctuation">[</span>time_sleep<span class="token punctuation">.</span>wait_30_seconds<span class="token punctuation">]</span></span>
<span class="line">  plugin_id        <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"aws-efs0"</span></span></span>
<span class="line">  wait_for_registration <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#efs volumeì„ nomadì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ pluginsì„ ìƒì„±</span></span>
<span class="line">resource <span class="token string-literal"><span class="token string">"nomad_volume"</span></span> <span class="token string-literal"><span class="token string">"efs_csi_volume"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  depends_on  <span class="token operator">=</span> <span class="token punctuation">[</span>data<span class="token punctuation">.</span>nomad_plugin<span class="token punctuation">.</span>efs<span class="token punctuation">]</span></span>
<span class="line">  type        <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"csi"</span></span></span>
<span class="line">  plugin_id   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"aws-efs0"</span></span></span>
<span class="line">  volume_id   <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"efs_csi_volume"</span></span></span>
<span class="line">  name        <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"efs_csi_volume"</span></span></span>
<span class="line">  external_id <span class="token operator">=</span> data<span class="token punctuation">.</span>terraform_remote_state<span class="token punctuation">.</span>net<span class="token punctuation">.</span>outputs<span class="token punctuation">.</span>nomad_efs_name<span class="token punctuation">.</span>id</span>
<span class="line"></span>
<span class="line">  capability <span class="token punctuation">{</span></span>
<span class="line">    access_mode     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"single-node-writer"</span></span></span>
<span class="line">    attachment_mode <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"file-system"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  mount_options <span class="token punctuation">{</span></span>
<span class="line">    fs_type <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"ext4"</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></div>
</details>
<h2>efs test job ë°°í¬</h2>
<div class="language-ruby" data-highlighter="prismjs" data-ext="rb" data-title="rb"><pre class="language-ruby"><code><span class="line">job <span class="token string-literal"><span class="token string">"efs_csi_job"</span></span> <span class="token punctuation">{</span></span>
<span class="line">  datacenters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"dc1"</span></span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  type        <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"system"</span></span></span>
<span class="line"></span>
<span class="line">  group <span class="token string-literal"><span class="token string">"cache"</span></span> <span class="token punctuation">{</span></span>
<span class="line">    count <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"></span>
<span class="line">    network <span class="token punctuation">{</span></span>
<span class="line">      port <span class="token string-literal"><span class="token string">"db"</span></span> <span class="token punctuation">{</span></span>
<span class="line">        to <span class="token operator">=</span> <span class="token number">6379</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment"># ìƒì„±í•œ volume id ê°’ì„ ëª…ì‹œí•œ volumeì„ ì„ ì–¸</span></span>
<span class="line">    volume <span class="token string-literal"><span class="token string">"cache"</span></span> <span class="token punctuation">{</span></span>
<span class="line">      type            <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"csi"</span></span></span>
<span class="line">      source          <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"efs_csi_volume"</span></span></span>
<span class="line">      attachment_mode <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"file-system"</span></span></span>
<span class="line">      access_mode     <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"single-node-writer"</span></span></span>
<span class="line">      read_only    <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    task <span class="token string-literal"><span class="token string">"redis"</span></span> <span class="token punctuation">{</span></span>
<span class="line">      driver <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"docker"</span></span></span>
<span class="line"></span>
<span class="line">      config <span class="token punctuation">{</span></span>
<span class="line">        image <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"redis:6.2.6-alpine3.15"</span></span></span>
<span class="line">        ports <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"db"</span></span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      resources <span class="token punctuation">{</span></span>
<span class="line">        cpu    <span class="token operator">=</span> <span class="token number">500</span></span>
<span class="line">        memory <span class="token operator">=</span> <span class="token number">511</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token comment">#ì„ ì–¸í•œ volumeì„ ì‚¬ìš©í•  ìœ„ì¹˜ì— mount</span></span>
<span class="line">      volume_mount <span class="token punctuation">{</span></span>
<span class="line">        volume      <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"cache"</span></span></span>
<span class="line">        destination <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"/data"</span></span></span>
<span class="line">        read_only    <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Chart</title>
      <link>https://docmoa.github.io/00-Howto/03-Tips/Chart.html</link>
      <guid>https://docmoa.github.io/00-Howto/03-Tips/Chart.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Chart</source>
      <description>Chart ë¬¸ì„œ ì‘ì„±ì‹œ ì°¨íŠ¸ë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œ ì°¨íŠ¸ êµ¬ì„± ë°©ì‹ì€ ChartJSë¥¼ ë”°ë¦…ë‹ˆë‹¤. ::: chart ì™€ :::ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ê¸°ë³¸ ì‚¬ìš©ë²• - Bar CODE ê¸°ë³¸ ì‚¬ìš©ë²• - Bubble CODE</description>
      <pubDate>Sat, 24 Sep 2022 02:39:44 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ë¬¸ì„œ ì‘ì„±ì‹œ ì°¨íŠ¸ë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.</p>
<ul>
<li><a href="https://theme-hope.vuejs.press/guide/markdown/chart.html" target="_blank" rel="noopener noreferrer">ê³µì‹ ë¬¸ì„œ</a></li>
</ul>
<p>ì°¨íŠ¸ êµ¬ì„± ë°©ì‹ì€ <a href="https://www.chartjs.org/docs/latest/" target="_blank" rel="noopener noreferrer">ChartJS</a>ë¥¼ ë”°ë¦…ë‹ˆë‹¤.</p>
<p><code>::: chart</code> ì™€ <code>:::</code>ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
<h2>ê¸°ë³¸ ì‚¬ìš©ë²• - Bar</h2>
<details class="hint-container details"><summary>CODE</summary>
<div class="language-markdown" data-highlighter="prismjs" data-ext="md" data-title="md"><pre class="language-markdown"><code><span class="line">::: chart A bar chart</span>
<span class="line"></span>
<span class="line"><span class="token code"><span class="token punctuation">```</span><span class="token code-language">json</span></span>
<span class="line"><span class="token code-block language-json"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"bar"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"labels"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Red"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Yellow"</span><span class="token punctuation">,</span> <span class="token string">"Green"</span><span class="token punctuation">,</span> <span class="token string">"Blue"</span><span class="token punctuation">,</span> <span class="token string">"Purple"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"datasets"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"label"</span><span class="token operator">:</span> <span class="token string">"My First Dataset"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"rgba(255, 99, 132, 0.2)"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"rgba(255, 159, 64, 0.2)"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"rgba(255, 205, 86, 0.2)"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"rgba(75, 192, 192, 0.2)"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"rgba(54, 162, 235, 0.2)"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"rgba(153, 102, 255, 0.2)"</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"borderColor"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"rgb(255, 99, 132)"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"rgb(255, 159, 64)"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"rgb(255, 205, 86)"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"rgb(75, 192, 192)"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"rgb(54, 162, 235)"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"rgb(153, 102, 255)"</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"borderWidth"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"scales"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"y"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">"ticks"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">"beginAtZero"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">"callback"</span><span class="token operator">:</span> <span class="token string">"function(value){ return '$' + value + 'k'; }"</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">"beginAtZero"</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span></span>
<span class="line"><span class="token punctuation">```</span></span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre></div></details>
<h2>ê¸°ë³¸ ì‚¬ìš©ë²• - Bubble</h2>
<details class="hint-container details"><summary>CODE</summary>
<div class="language-markdown" data-highlighter="prismjs" data-ext="md" data-title="md"><pre class="language-markdown"><code><span class="line">::: chart A Bubble Chart</span>
<span class="line"></span>
<span class="line"><span class="token code"><span class="token punctuation">```</span><span class="token code-language">json</span></span>
<span class="line"><span class="token code-block language-json"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"bubble"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"datasets"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">"label"</span><span class="token operator">:</span> <span class="token string">"First Dataset"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">          <span class="token punctuation">{</span> <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token number">15</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token punctuation">{</span> <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"rgb(255, 99, 132)"</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span></span>
<span class="line"><span class="token punctuation">```</span></span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div></details>
]]></content:encoded>
    </item>
    <item>
      <title>Consul vs Istio - Performance Test</title>
      <link>https://docmoa.github.io/04-HashiCorp/04-Consul/06-on_Kubernetes/performance/consul-istio.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/04-Consul/06-on_Kubernetes/performance/consul-istio.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Consul vs Istio - Performance Test</source>
      <description>K8S í™˜ê²½ì—ì„œ Consul / Istio Performance ë¹„êµ</description>
      <pubDate>Thu, 22 Sep 2022 12:33:40 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>1. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰ ê²°ê³¼ ìš”ì•½</h2>
<h3>Case 2-1</h3>
<ul>
<li>Consul Ingress Gatewayì˜ resources.limits ì™€ resources.requests ì˜ cpu, memory ë¥¼ ê°ê° 250m / 500Mi ë¡œ ìˆ˜ì •</li>
<li>Istio Default 1527 Requests/sec ëŒ€ë¹„ 1860 Requests/sec ë¡œ ì•½ 22% ë¹ ë¦„ (Case 2-1)</li>
</ul>
<h3>Case 2-2</h3>
<ul>
<li>Consul Ingress Gateway resource allocationì„ Istioì™€ ë™ë¥  êµ¬ì„± ì‹œ,</li>
<li>Istio Default 1527 Requests/sec ëŒ€ë¹„ 3002 Requests/secë¡œ ì•½ 196% ë¹ ë¦„ (Case 2-2)</li>
</ul>
<h3>Response Time Chart</h3>
<ul>
<li>concurrent user: 100</li>
<li>total request: 15000</li>
</ul>
<ul>
<li>ìƒì„¸ ë‚´ìš© í™•ì¸ - "4.ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰"</li>
</ul>
<p>| Case                 | Resources: CPU | Resources: Memory | Limits: CPU | Limits: Memory | Performance     |<br>
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>2022ë…„ 9ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/99-2022/2022-09.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/99-2022/2022-09.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2022ë…„ 9ì›”</source>
      <description>2022ë…„ 9ì›” Update</description>
      <pubDate>Sat, 03 Sep 2022 11:06:04 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>CDKTF (Cloud Development Kit for Terraform) General Available</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/cdk-for-terraform-now-generally-available" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>Python, Go ë“± í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ê¸°ë°˜ìœ¼ë¡œ Terraform ì„ í™œìš©í•˜ì‹¤ ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” CDKTF ê°€ ì •ì‹ ì¶œì‹œ ë˜ì—ˆìŠµë‹ˆë‹¤. CDKTFë¥¼ ì‚¬ìš©í•˜ë©´ ê°œë°œìëŠ” ìµìˆ™í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì»¨í…ìŠ¤íŠ¸ ì „í™˜ ì—†ì´ ì½”ë“œë¡œ ì¸í”„ë¼ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ì¸í”„ë¼ ë¦¬ì†ŒìŠ¤ë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ê¸° ìœ„í•´ ë™ì¼í•œ ë„êµ¬ì™€ êµ¬ë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒ€ì€ ìµìˆ™í•œ êµ¬ë¬¸ìœ¼ë¡œ í˜‘ì—…í•˜ë©´ì„œ Terraform ì—ì½”ì‹œìŠ¤í…œì˜ ê¸°ëŠ¥ì„ ê³„ì† í™œìš©í•˜ê³  í™•ë¦½ëœ Terraform ë°°í¬ íŒŒì´í”„ë¼ì¸ì„ í†µí•´ ì¸í”„ë¼ êµ¬ì„±ì„ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>ì°¸ê³ ë¬¸ì„œ 1: <a href="https://github.com/hashicorp/terraform-cdk/blob/main/CHANGELOG.md#0120" target="_blank" rel="noopener noreferrer">CDK for Terraform v0.12: CHANGELOG</a></li>
<li>ì°¸ê³ ë¬¸ì„œ 2: <a href="https://www.terraform.io/cdktf?_gl=1*1sc3uq2*_ga*MjA4NTc1MTMyNy4xNjM4OTUwNzQ3*_ga_P7S46ZYEKW*MTY2MTMxOTcxNS4xMzQuMS4xNjYxMzIxMjUxLjAuMC4w" target="_blank" rel="noopener noreferrer">CDKTF Overview</a></li>
<li>ì°¸ê³ ë¬¸ì„œ 3: <a href="https://learn.hashicorp.com/collections/terraform/cdktf?_gl=1*1wv13qn*_ga*MjA4NTc1MTMyNy4xNjM4OTUwNzQ3*_ga_P7S46ZYEKW*MTY2MTMxOTcxNS4xMzQuMS4xNjYxMzIxMTcxLjAuMC4w" target="_blank" rel="noopener noreferrer">CDKTF Tutorials</a></li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>
<p>Terraform</p>
<ul>
<li>
<p>CLI</p>
<ul>
<li>
<p><a href="https://github.com/hashicorp/terraform/releases/tag/v1.2.8" target="_blank" rel="noopener noreferrer">1.28 Release</a></p>
<ul>
<li>tolist, tomap, toset ë“± type ë³€í™˜ ì‘ì—… ì‹œ ë³€í™˜ ëŒ€ìƒ type ìœ ì¶”ë¡œ ì¸í•œ panic ì´ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
<li>
<p><a href="https://www.terraform.io/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a></p>
<ul>
<li>
<p><a href="https://www.terraform.io/enterprise/releases/2022/v202208-3" target="_blank" rel="noopener noreferrer">8ì›” Release</a> ì¶œì‹œ (v202208-3)</p>
</li>
<li>
<p>í•„ìˆ˜ Upgrade Version: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202207-2, v202204-2)</p>
</li>
<li>
<p>VCS ê¸°ë°˜ Workspace ìƒì„± ì‹œ ì •ì˜ëœ variable ì— ëŒ€í•œ type ê²€ì¦ ë° ì˜¤ë¥˜ ì•ˆë‚´ ê¸°ëŠ¥ ì¶”ê°€</p>
</li>
<li>
<p>Known Issue: TFE ë‚´ë¶€ ëª¨ë“ˆ ì¤‘ í•˜ë‚˜ì¸ Postgres - ver 10 ë˜ëŠ” 11 ì— ëŒ€í•œ Migration ì‹¤íŒ¨ ì˜¤ë¥˜ ê°œì„  (v202208-2)</p>
</li>
<li>
<p>Run Pipeline ì— ëŒ€í•œ Metric ì •ë³´ê°€ Prometheus ì— í‘œì‹œ ë˜ì§€ ì•ŠëŠ” ì´ìŠˆ ê°œì„ </p>
</li>
<li>
<p>Module Registry Protocol endpoint ì¸ '/v1/modules/{namespace}/{name}/{provider}/versions' ì—ì„œ version ê°¯ìˆ˜ê°€ ë§ì€ Module ì²˜ë¦¬ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Provider</p>
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v4.27.0" target="_blank" rel="noopener noreferrer">AWS v4.27.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>networkmanager ê´€ë ¨ resource ì¶”ê°€</li>
<li>firewall data sourceì— ëŒ€í•œ capacity_usage_summary, firewall_status ë“± argument ì¶”ê°€</li>
<li>lb_target_group resource ì— ëŒ€í•œ ip_address_type argument ì¶”ê°€</li>
<li>aws_db_instance resource ì— ëŒ€í•œ íŠ¹ì • argument ìˆ˜ì • ì‹œ ë°œìƒí•˜ëŠ” 'InvalidParameterCombination: No modifications were requested' ì˜¤ë¥˜ ê°œì„ </li>
<li>aws_opsworks resource ì— ëŒ€í•œ region ì •ë³´ ë° tag ì ìš© ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.19.1" target="_blank" rel="noopener noreferrer">Azure v3.19.1 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>azurerm_dns resource ì— ëŒ€í•´ resource ID parsing ì‹œ ë°œìƒí•˜ëŠ” ëŒ€ì†Œë¬¸ì ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.33.0" target="_blank" rel="noopener noreferrer">GCP v4.33.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>google_cloudfunctions2_function resource ì¶”ê°€</li>
<li>google_container_cluster ì— ëŒ€í•´ authenticator_groups_config ì§€ì›</li>
<li>google_cloud_sql resource ì— ëŒ€í•´ password_validation_policy argument ì¶”ê°€</li>
<li>google_dns_managed_zone data source ì— ëŒ€í•´ managed_zone_id argument ì¶”ê°€</li>
<li>google_bigquery_data_transfer_config ì— ëŒ€í•´ display_name ê°•ì œ ë³€ê²½ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Vault</p>
<ul>
<li><a href="https://github.com/hashicorp/vault/blob/main/CHANGELOG.md#1112" target="_blank" rel="noopener noreferrer">1.11.2 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>Vaunt Agent ì‚¬ìš© ì‹œ keep_alives ë¹„í™œì„±í™” ì„¤ì • ì§€ì›</li>
<li>ì˜ëª»ëœ Server Side Consistent Token ì— ëŒ€í•´ 500 ì´ ì•„ë‹Œ 403 ì—ëŸ¬ ì¶œë ¥</li>
<li>UI ì—ì„œ ì œê³µ ë˜ëŠ” JWT auth method ê´€ë ¨ log ì •ë³´ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>
<p>Consul</p>
<ul>
<li><a href="https://github.com/hashicorp/consul/releases/tag/v1.13.1" target="_blank" rel="noopener noreferrer">1.13.1 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>snapshot ê´€ë ¨ í˜¸í™˜ì„± ì´ìŠˆ ê°œì„ </li>
<li>grpc peering ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>
<p>Nomad</p>
<ul>
<li><a href="https://github.com/hashicorp/nomad/releases/tag/v1.3.3" target="_blank" rel="noopener noreferrer">1.3.3 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>CSI Plugin ì— ëŒ€í•œ stage_publish_base_dir í†µí•´ íŠ¹ì • stage / publishing directory mount ì§€ì›</li>
<li>qemu ì— ëŒ€í•œ socket file ëª… ì¶•ì•½ ê¸°ëŠ¥ ì§€ì›</li>
<li>ë§Œë£Œëœ ì¼íšŒì„± token ì˜ timestamp ê´€ë ¨ ì˜¤ë¥˜ ê°œì„ </li>
<li>UI ì˜ Evaluation tab ì—ì„œ ì¼ë¶€ ëˆ„ë½ëœ ì •ë³´ ì¶œë ¥ ê°œì„ </li>
<li>task ê°€ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ê°€ 0 ìœ¼ë¡œ ì¶œë ¥ë˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Nomad UIì— Consulê³¼ Vault ë§í¬ ì¶”ê°€</title>
      <link>https://docmoa.github.io/04-HashiCorp/07-Nomad/02-Config/custom-ui-link.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/07-Nomad/02-Config/custom-ui-link.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Nomad UIì— Consulê³¼ Vault ë§í¬ ì¶”ê°€</source>
      <description>Consul and Vault link add to Nomad UI</description>
      <pubDate>Wed, 31 Aug 2022 11:44:01 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><a href="https://www.nomadproject.io/docs/configuration/ui" target="_blank" rel="noopener noreferrer">https://www.nomadproject.io/docs/configuration/ui</a></p>
</blockquote>
<p>Nomad ui ì„¤ì •ì— ë‹¤ìŒê³¼ ê°™ì´ Consulê³¼ Vaultì˜ ë§í¬ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-hcl" data-highlighter="prismjs" data-ext="hcl" data-title="hcl"><pre class="language-hcl"><code><span class="line"><span class="token keyword">ui</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">enabled</span> <span class="token punctuation">=</span>  <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">consul</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">ui_url</span> <span class="token punctuation">=</span> <span class="token string">"https://consul.example.com:8500/ui"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">vault</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">ui_url</span> <span class="token punctuation">=</span> <span class="token string">"https://vault.example.com:8200/ui"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><figure><figcaption></figcaption></figure>
]]></content:encoded>
    </item>
    <item>
      <title>2022ë…„ 8ì›”</title>
      <link>https://docmoa.github.io/04-HashiCorp/08-Updates/99-2022/2022-08.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/08-Updates/99-2022/2022-08.html</guid>
      <source url="https://docmoa.github.io/rss.xml">2022ë…„ 8ì›”</source>
      <description>2022ë…„ 8ì›” Update</description>
      <pubDate>Wed, 03 Aug 2022 07:06:15 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Product ì†Œê°œ</h2>
<ul>
<li>
<p>Consul Service Mesh ì— ëŒ€í•œ AWS Lambda ì§€ì› (Public Beta)</p>
<ul>
<li><a href="https://www.hashicorp.com/blog/consul-service-mesh-support-for-aws-lambda-now-in-public-beta" target="_blank" rel="noopener noreferrer">Hashicorp Blog</a></li>
<li>Service Mesh ë‚´ êµ¬ì„±ëœ Service ê°€ AWS Lambda ë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•¨ìœ¼ë¡œì¨, ê¸°ì¡´ì˜ K8S, VM, Nomad í˜¹ì€ Amazon ECS ë“±ì˜ ë‹¤ì–‘í•œ í™˜ê²½ê³¼ ë”ë¶ˆì–´ Serverless í™˜ê²½ê¹Œì§€ í†µí•© ì§€ì›í•˜ì—¬ Service Mesh êµ¬ì„±ì˜ ë²”ìœ„ë¥¼ í™•ì¥í•˜ê³  Workflow ì¼ì›í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
<li>ì°¸ê³ ë¬¸ì„œ 1: <a href="https://www.consul.io/docs/lambda/registration" target="_blank" rel="noopener noreferrer">Register Lambda Functions</a></li>
<li>ì°¸ê³ ë¬¸ì„œ 2: <a href="https://www.consul.io/docs/lambda/invocation" target="_blank" rel="noopener noreferrer">Invoke Lambda Fuctions</a></li>
<li>ì°¸ê³ ë¬¸ì„œ 3: <a href="https://registry.terraform.io/modules/hashicorp/consul-lambda-registrator/aws/0.1.0-alpha2" target="_blank" rel="noopener noreferrer">Terraform Registry: consul-lambda-registrator</a></li>
</ul>
</li>
</ul>
<h2>Product Update</h2>
<ul>
<li>Terraform
<ul>
<li>CLI
<ul>
<li><a href="https://github.com/hashicorp/terraform/releases/tag/v1.2.5" target="_blank" rel="noopener noreferrer">1.25 Release</a>
<ul>
<li>Minor Bug Fix</li>
</ul>
</li>
<li><a href="https://www.terraform.io/enterprise/releases" target="_blank" rel="noopener noreferrer">Enterprise Release</a>
<ul>
<li><a href="https://www.terraform.io/enterprise/releases/2022/v202207-2" target="_blank" rel="noopener noreferrer">7ì›” Release</a> ì¶œì‹œ (v202206-1)</li>
<li>í•„ìˆ˜ Upgrade Version: Release Note ì—ì„œ * í‘œê¸°ëœ Version ì€ í•„ìˆ˜ë¡œ ê±°ì³ì•¼ í•˜ëŠ” Version (ì˜ˆ: v202204-2)</li>
<li>Default ê°’ ì—†ëŠ” ë³€ìˆ˜ í‘œì‹œ: VCS ì—°ë™ ì‹œ Default ê°’ ì—†ëŠ” ë³€ìˆ˜ í‘œì‹œ ë° Default ê°’ ì„¤ì • ì§€</li>
<li>Workspace ìµœëŒ€ê°œìˆ˜ ì œí•œ: ORG ë‹¹ ìƒì„± ê°€ëŠ¥í•œ ìµœëŒ€ Workspace ìˆ˜ ì„¤ì •</li>
<li>exclude-tags ì¶”ê°€: Workspace ì¡°íšŒ ì‹œ íŠ¹ì • tag ê°€ ë¶™ì€ Workspace ì œì™¸</li>
<li>API Rate Limit Logic ë³€ê²½: ê¸°ì¡´ IP ì£¼ì†Œ ê¸°ë°˜ -&gt; Token ìœ í˜• ê¸°ë°˜</li>
</ul>
</li>
</ul>
</li>
<li>Provider
<ul>
<li><a href="https://github.com/hashicorp/terraform-provider-aws/releases/tag/v4.23.0" target="_blank" rel="noopener noreferrer">AWS v4.23.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>ì‹ ê·œ Datasource ì¶”ê°€: Firewall, S3 Public Access</li>
<li>aws_connect_ ê´€ë ¨ ì˜¤ë¥˜ ìˆ˜ì •</li>
<li>aws_iam_role ê´€ë ¨ ì˜¤ë¥˜ ìˆ˜ì •</li>
<li>aws_rds_cluster ê´€ë ¨ ì˜¤ë¥˜ ìˆ˜ì •</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-azurerm/releases/tag/v3.15.0" target="_blank" rel="noopener noreferrer">Azure v3.15.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>azure_cdn resource ë° datasource ì¶”ê°€</li>
<li>azure_route_server ë° bgp_connection resource ì¶”ê°€</li>
</ul>
</li>
<li><a href="https://github.com/hashicorp/terraform-provider-google/releases/tag/v4.29.0" target="_blank" rel="noopener noreferrer">GCP v4.29.0 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>google_compute_snapshot ì— ëŒ€í•œ iam ê¶Œí•œ ì„¤ì • resource ì¶”ê°€</li>
<li>google_artifact_registry_repository ê´€ë ¨ resource ì¶”ê°€</li>
<li>google_sql_database_instance ì— ëŒ€í•œ encryption_key_name ì„¤ì • ì¶”ê°€</li>
<li>BigQuery ì— ëŒ€í•œ user_by_email ë° group_by_email ì— ëŒ€í•œ ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì˜¤ë¥˜ ìˆ˜ì •</li>
<li>Compute ì— ëŒ€í•œ ipv6 output ìƒì„± ì˜¤ë¥˜ ìˆ˜ì •</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vault
<ul>
<li><a href="https://github.com/hashicorp/vault/blob/main/CHANGELOG.md#1111" target="_blank" rel="noopener noreferrer">1.11.1 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>Log Verbosity API ì¶”ê°€: Log ì¶œë ¥ level ë³€ê²½ ì§€ì›í•˜ëŠ” API</li>
</ul>
</li>
</ul>
</li>
<li>Consul
<ul>
<li><a href="https://github.com/hashicorp/consul/releases/tag/v1.12.3" target="_blank" rel="noopener noreferrer">1.12.3 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>Envoy Proxy ì˜ ìµœì‹  ë³´ì•ˆ Patch ì— ëŒ€í•œ ì§€ì›</li>
<li>HTTP Handlerì˜ URL Decoding ì˜¤ë¥˜ ê°œì„ </li>
<li>GRPC í†µì‹  ê´€ë ¨ Memory Leak ì˜¤ë¥˜ ê°œì„ </li>
<li>GRPC í˜¹ì€ HTTP2 ì— ëŒ€í•œ Ingress Gateway êµ¬ì„± ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ê°œì„ </li>
</ul>
</li>
</ul>
</li>
<li>Nomad
<ul>
<li><a href="https://github.com/hashicorp/nomad/releases/tag/v1.3.2" target="_blank" rel="noopener noreferrer">1.3.2 ì£¼ìš” ìˆ˜ì •ì‚¬í•­</a>
<ul>
<li>API í˜¸ì¶œ ì‹œ Authorization Bearer Header ì§€ì›</li>
<li>Template Configuration ì— ëŒ€í•œ Fault Tolerance ê°•í™”</li>
<li>ì˜ˆê¸°ì¹˜ ëª»í•œ ACL Permission ê±°ë¶€ ì˜¤ë¥˜ì— ëŒ€í•œ ìˆ˜ì •</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Nomad on Windows</title>
      <link>https://docmoa.github.io/04-HashiCorp/07-Nomad/02-Config/nomad-on-windows.html</link>
      <guid>https://docmoa.github.io/04-HashiCorp/07-Nomad/02-Config/nomad-on-windows.html</guid>
      <source url="https://docmoa.github.io/rss.xml">Nomad on Windows</source>
      <description>Windowsì—ì„œì˜ Nomad êµ¬ì„± ì˜ˆì œ</description>
      <pubDate>Wed, 27 Jul 2022 14:38:38 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Nomadë¥¼ Windowsí™˜ê²½ì— êµ¬ì„±í•˜ê³  ì‹¤í–‰ì„ìœ„í•´ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ë‹ˆë‹¤. ì†”ë£¨ì…˜ ì‹¤í–‰ í™˜ê²½ ë˜ëŠ” ìš´ì˜/ê°œë°œìì˜ ìµìˆ™í•¨ ì •ë„ì— ë”°ë¼ ë‹¤ì–‘í•œ OSë¥¼ ì„ íƒí•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê²Œ ë©ë‹ˆë‹¤. Nomadë¥¼ í†µí•´ ë°°í¬ë¥¼ ìœ„í•œ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ë¥¼ Windows í™˜ê²½ì— ì ìš©í•˜ê³  ì„œë¹„ìŠ¤ì— ë“±ë¡í•˜ì—¬ ìƒì‹œì ìœ¼ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡í•˜ëŠ” êµ¬ì„±ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.</p>
<h2>Port êµ¬ì„±</h2>
<blockquote>
<p>ì°¸ê³  url : <a href="https://www.nomadproject.io/docs/install/production/requirements#ports-used" target="_blank" rel="noopener noreferrer">Port used</a></p>
</blockquote>
<p>NomadëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ëª¨ë“œë¡œ ë‚˜ë‰©ë‹ˆë‹¤. ì„œë²„ë¥¼ ìœ„í•´ì„œëŠ” 3 ê°œì˜ í¬íŠ¸ê°€ í•„ìš”í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” 2 ê°œì˜ í¬íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ì— ë°°í¬ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” í¬íŠ¸ë¥¼ ë™ì ìœ¼ë¡œ í• ë‹¹í•˜ëŠ” ì˜ì—­ì„ êµ¬ì„±í•©ë‹ˆë‹¤.</p>
<p>| ì¢…ë¥˜     | ê¸°ë³¸ê°’     | í”„ë¡œí† ì½œ | ì„¤ëª…                                                         |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://raw.githubusercontent.com/Great-Stone/images/master/uPic/image-20210418110743732.png" type="image/png"/>
    </item>
  </channel>
</rss>